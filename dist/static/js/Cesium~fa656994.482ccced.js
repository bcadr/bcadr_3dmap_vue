(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Cesium~fa656994"],{"3ba2":function(t,e,i){"use strict";var n=i("bd8d"),o=i("535a"),r=i("2f63"),a=i("7d62"),s=i("4f04"),l=i("aee6"),c=i("21d7"),h=i("452d"),d=i("b639"),u=i("5a6c"),_=i("c86b"),p=i("b83c"),f=i("984f"),b=i("509b"),y=i("ea07"),v=new p["a"](n["a"].WHITE),g=new f["a"](!0),O=new f["a"](!0),m=new f["a"](!1),C=new f["a"](n["a"].BLACK),j=new f["a"](_["a"].DISABLED),w=new f["a"](new l["a"]),E=new f["a"](u["a"].BOTH);function P(t){var e=t.entity,i=t.geometryPropertyName;this._entity=e,this._scene=t.scene,this._fillEnabled=!1,this._isClosed=!1,this._onTerrain=!1,this._dynamic=!1,this._outlineEnabled=!1,this._geometryChanged=new c["a"],this._showProperty=void 0,this._materialProperty=void 0,this._showOutlineProperty=void 0,this._outlineColorProperty=void 0,this._outlineWidth=1,this._shadowsProperty=void 0,this._distanceDisplayConditionProperty=void 0,this._classificationTypeProperty=void 0,this._options=t.geometryOptions,this._geometryPropertyName=i,this._id=i+"-"+e.id,this._observedPropertyNames=t.observedPropertyNames,this._supportsMaterialsforEntitiesOnTerrain=b["a"].supportsMaterialsforEntitiesOnTerrain(t.scene)}Object.defineProperties(P.prototype,{id:{get:function(){return this._id}},entity:{get:function(){return this._entity}},fillEnabled:{get:function(){return this._fillEnabled}},hasConstantFill:{get:function(){return!this._fillEnabled||!Object(r["a"])(this._entity.availability)&&y["a"].isConstant(this._showProperty)&&y["a"].isConstant(this._fillProperty)}},fillMaterialProperty:{get:function(){return this._materialProperty}},outlineEnabled:{get:function(){return this._outlineEnabled}},hasConstantOutline:{get:function(){return!this._outlineEnabled||!Object(r["a"])(this._entity.availability)&&y["a"].isConstant(this._showProperty)&&y["a"].isConstant(this._showOutlineProperty)}},outlineColorProperty:{get:function(){return this._outlineColorProperty}},outlineWidth:{get:function(){return this._outlineWidth}},shadowsProperty:{get:function(){return this._shadowsProperty}},distanceDisplayConditionProperty:{get:function(){return this._distanceDisplayConditionProperty}},classificationTypeProperty:{get:function(){return this._classificationTypeProperty}},isDynamic:{get:function(){return this._dynamic}},isClosed:{get:function(){return this._isClosed}},onTerrain:{get:function(){return this._onTerrain}},geometryChanged:{get:function(){return this._geometryChanged}}}),P.prototype.isOutlineVisible=function(t){var e=this._entity,i=this._outlineEnabled&&e.isAvailable(t)&&this._showProperty.getValue(t)&&this._showOutlineProperty.getValue(t);return Object(o["a"])(i,!1)},P.prototype.isFilled=function(t){var e=this._entity,i=this._fillEnabled&&e.isAvailable(t)&&this._showProperty.getValue(t)&&this._fillProperty.getValue(t);return Object(o["a"])(i,!1)},P.prototype.createFillGeometryInstance=s["a"].throwInstantiationError,P.prototype.createOutlineGeometryInstance=s["a"].throwInstantiationError,P.prototype.isDestroyed=function(){return!1},P.prototype.destroy=function(){Object(a["a"])(this)},P.prototype._isHidden=function(t,e){var i=e.show;return Object(r["a"])(i)&&i.isConstant&&!i.getValue(h["a"].MINIMUM_VALUE)},P.prototype._isOnTerrain=function(t,e){return!1},P.prototype._getIsClosed=function(t){return!0},P.prototype._isDynamic=s["a"].throwInstantiationError,P.prototype._setStaticOptions=s["a"].throwInstantiationError,P.prototype._onEntityPropertyChanged=function(t,e,i,n){if(-1!==this._observedPropertyNames.indexOf(e)){var a=this._entity[this._geometryPropertyName];if(Object(r["a"])(a)){var s=a.fill,l=!Object(r["a"])(s)||!s.isConstant||s.getValue(h["a"].MINIMUM_VALUE),c=a.outline,u=Object(r["a"])(c);if(u&&c.isConstant&&(u=c.getValue(h["a"].MINIMUM_VALUE)),l||u){var _=a.show;if(this._isHidden(t,a))(this._fillEnabled||this._outlineEnabled)&&(this._fillEnabled=!1,this._outlineEnabled=!1,this._geometryChanged.raiseEvent(this));else{this._materialProperty=Object(o["a"])(a.material,v),this._fillProperty=Object(o["a"])(s,O),this._showProperty=Object(o["a"])(_,g),this._showOutlineProperty=Object(o["a"])(a.outline,m),this._outlineColorProperty=u?Object(o["a"])(a.outlineColor,C):void 0,this._shadowsProperty=Object(o["a"])(a.shadows,j),this._distanceDisplayConditionProperty=Object(o["a"])(a.distanceDisplayCondition,w),this._classificationTypeProperty=Object(o["a"])(a.classificationType,E),this._fillEnabled=l;var f=this._isOnTerrain(t,a)&&(this._supportsMaterialsforEntitiesOnTerrain||this._materialProperty instanceof p["a"]);if(u&&f&&(Object(d["a"])(d["a"].geometryOutlines),u=!1),this._onTerrain=f,this._outlineEnabled=u,this._isDynamic(t,a))this._dynamic||(this._dynamic=!0,this._geometryChanged.raiseEvent(this));else{this._setStaticOptions(t,a),this._isClosed=this._getIsClosed(this._options);var b=a.outlineWidth;this._outlineWidth=Object(r["a"])(b)?b.getValue(h["a"].MINIMUM_VALUE):1,this._dynamic=!1,this._geometryChanged.raiseEvent(this)}}}else(this._fillEnabled||this._outlineEnabled)&&(this._fillEnabled=!1,this._outlineEnabled=!1,this._geometryChanged.raiseEvent(this))}else(this._fillEnabled||this._outlineEnabled)&&(this._fillEnabled=!1,this._outlineEnabled=!1,this._geometryChanged.raiseEvent(this))}},P.prototype.createDynamicUpdater=function(t,e){return new this.constructor.DynamicGeometryUpdater(this,t,e)},e["a"]=P},4820:function(t,e,i){"use strict";var n=i("77af"),o=i("670c"),r=i("be18"),a=i("535a"),s=i("2f63"),l=i("82d9"),c=i("21d7"),h=i("52f0"),d=i("3e44"),u=i("8f7c"),_=i("c26f"),p=i("04e1"),f=i("bdd0"),b=i("44bf"),y=i("a307"),v=i("98be");function g(t){t=Object(a["a"])(t,a["a"].EMPTY_OBJECT),this._enabled=Object(a["a"])(t.enabled,!1),this._pixelRange=Object(a["a"])(t.pixelRange,80),this._minimumClusterSize=Object(a["a"])(t.minimumClusterSize,2),this._clusterBillboards=Object(a["a"])(t.clusterBillboards,!0),this._clusterLabels=Object(a["a"])(t.clusterLabels,!0),this._clusterPoints=Object(a["a"])(t.clusterPoints,!0),this._labelCollection=void 0,this._billboardCollection=void 0,this._pointCollection=void 0,this._clusterBillboardCollection=void 0,this._clusterLabelCollection=void 0,this._clusterPointCollection=void 0,this._collectionIndicesByEntity={},this._unusedLabelIndices=[],this._unusedBillboardIndices=[],this._unusedPointIndices=[],this._previousClusters=[],this._previousHeight=void 0,this._enabledDirty=!1,this._clusterDirty=!1,this._cluster=void 0,this._removeEventListener=void 0,this._clusterEvent=new c["a"],this.show=Object(a["a"])(t.show,!0)}function O(t){return t.coord.x}function m(t){return t.coord.y}function C(t,e){t.x-=e,t.y-=e,t.width+=2*e,t.height+=2*e}var j=new n["a"];function w(t,e,i,o,r){if(Object(s["a"])(t._labelCollection)&&o._clusterLabels?r=_["a"].getScreenSpaceBoundingBox(t,e,r):Object(s["a"])(t._billboardCollection)&&o._clusterBillboards?r=d["a"].getScreenSpaceBoundingBox(t,e,r):Object(s["a"])(t._pointPrimitiveCollection)&&o._clusterPoints&&(r=f["a"].getScreenSpaceBoundingBox(t,e,r)),C(r,i),o._clusterLabels&&!Object(s["a"])(t._labelCollection)&&Object(s["a"])(t.id)&&B(o,t.id.id)&&Object(s["a"])(t.id._label)){var a=o._collectionIndicesByEntity[t.id.id].labelIndex,l=o._labelCollection.get(a),c=_["a"].getScreenSpaceBoundingBox(l,e,j);C(c,i),r=n["a"].union(r,c,r)}return r}function E(t,e){if(t.clusterShow=!0,!Object(s["a"])(t._labelCollection)&&Object(s["a"])(t.id)&&B(e,t.id.id)&&Object(s["a"])(t.id._label)){var i=e._collectionIndicesByEntity[t.id.id].labelIndex,n=e._labelCollection.get(i);n.clusterShow=!0}}function P(t,e,i,n){var o={billboard:n._clusterBillboardCollection.add(),label:n._clusterLabelCollection.add(),point:n._clusterPointCollection.add()};o.billboard.show=!1,o.point.show=!1,o.label.show=!0,o.label.text=e.toLocaleString(),o.label.id=i,o.billboard.position=o.label.position=o.point.position=t,n._clusterEvent.raiseEvent(i,o)}function B(t,e){return Object(s["a"])(t)&&Object(s["a"])(t._collectionIndicesByEntity[e])&&Object(s["a"])(t._collectionIndicesByEntity[e].labelIndex)}function S(t,e,i,n,o){if(Object(s["a"])(t))for(var r=t.length,a=0;a<r;++a){var l=t.get(a);if(l.clusterShow=!1,l.show&&(o._scene.mode!==y["a"].SCENE3D||n.isPointVisible(l.position))){var c=o._clusterLabels&&Object(s["a"])(l._labelCollection),h=o._clusterBillboards&&Object(s["a"])(l.id._billboard),d=o._clusterPoints&&Object(s["a"])(l.id._point);if(!c||!d&&!h){var u=l.computeScreenSpacePosition(i);Object(s["a"])(u)&&e.push({index:a,collection:t,clustered:!1,coord:u})}}}}var I=new n["a"],M=new n["a"],L=new n["a"];function T(t){return function(e){if(!(Object(s["a"])(e)&&e<.05)&&t.enabled){var i=t._scene,a=t._labelCollection,c=t._billboardCollection,_=t._pointCollection;if((Object(s["a"])(a)||Object(s["a"])(c)||Object(s["a"])(_))&&(t._clusterBillboards||t._clusterLabels||t._clusterPoints)){var f=t._clusterLabelCollection,y=t._clusterBillboardCollection,g=t._clusterPointCollection;Object(s["a"])(f)?f.removeAll():f=t._clusterLabelCollection=new p["a"]({scene:i}),Object(s["a"])(y)?y.removeAll():y=t._clusterBillboardCollection=new u["a"]({scene:i}),Object(s["a"])(g)?g.removeAll():g=t._clusterPointCollection=new b["a"];var C,j,B,T,x,D,A,N,k,U,V,R,G=t._pixelRange,z=t._minimumClusterSize,H=t._previousClusters,F=[],W=t._previousHeight,q=i.camera.positionCartographic.height,J=i.mapProjection.ellipsoid,Y=i.camera.positionWC,Z=new l["a"](J,Y),X=[];t._clusterLabels&&S(a,X,i,Z,t),t._clusterBillboards&&S(c,X,i,Z,t),t._clusterPoints&&S(_,X,i,Z,t);var Q=Object(v["a"])(X,O,m,64,Int32Array);if(q<W)for(B=H.length,C=0;C<B;++C){var K=H[C];if(Z.isPointVisible(K.position)){var $=d["a"]._computeScreenSpacePosition(h["a"].IDENTITY,K.position,r["a"].ZERO,o["a"].ZERO,i);if(Object(s["a"])($)){var tt=1-q/W,et=K.width=K.width*tt,it=K.height=K.height*tt;et=Math.max(et,K.minimumWidth),it=Math.max(it,K.minimumHeight);var nt=$.x-.5*et,ot=$.y-.5*it,rt=$.x+et,at=$.y+it;for(x=Q.range(nt,ot,rt,at),D=x.length,U=0,k=[],j=0;j<D;++j)A=x[j],N=X[A],N.clustered||(++U,V=N.collection,R=N.index,k.push(V.get(R).id));if(U>=z)for(P(K.position,U,k,t),F.push(K),j=0;j<D;++j)X[x[j]].clustered=!0}}}for(B=X.length,C=0;C<B;++C){var st=X[C];if(!st.clustered){st.clustered=!0,V=st.collection,R=st.index;var lt=V.get(R);T=w(lt,st.coord,G,t,I);var ct=n["a"].clone(T,M);x=Q.range(T.x,T.y,T.x+T.width,T.y+T.height),D=x.length;var ht=r["a"].clone(lt.position);for(U=1,k=[lt.id],j=0;j<D;++j)if(A=x[j],N=X[A],!N.clustered){var dt=N.collection.get(N.index),ut=w(dt,N.coord,G,t,L);r["a"].add(dt.position,ht,ht),n["a"].union(ct,ut,ct),++U,k.push(dt.id)}if(U>=z){var _t=r["a"].multiplyByScalar(ht,1/U,ht);for(P(_t,U,k,t),F.push({position:_t,width:ct.width,height:ct.height,minimumWidth:T.width,minimumHeight:T.height}),j=0;j<D;++j)X[x[j]].clustered=!0}else E(lt,t)}}0===f.length&&(f.destroy(),t._clusterLabelCollection=void 0),0===y.length&&(y.destroy(),t._clusterBillboardCollection=void 0),0===g.length&&(g.destroy(),t._clusterPointCollection=void 0),t._previousClusters=F,t._previousHeight=q}}}}function x(t,e,i,n){return function(o){var r=this[t];Object(s["a"])(this._collectionIndicesByEntity)||(this._collectionIndicesByEntity={});var a,l,c=this._collectionIndicesByEntity[o.id];if(Object(s["a"])(c)||(c=this._collectionIndicesByEntity[o.id]={billboardIndex:void 0,labelIndex:void 0,pointIndex:void 0}),Object(s["a"])(r)&&Object(s["a"])(c[n]))return r.get(c[n]);Object(s["a"])(r)||(r=this[t]=new e({scene:this._scene}));var h=this[i];return h.length>0?(a=h.pop(),l=r.get(a)):(l=r.add(),a=r.length-1),c[n]=a,this._clusterDirty=!0,l}}function D(t,e){var i=t._collectionIndicesByEntity[e];Object(s["a"])(i.billboardIndex)||Object(s["a"])(i.labelIndex)||Object(s["a"])(i.pointIndex)||delete t._collectionIndicesByEntity[e]}function A(t){if(Object(s["a"])(t))for(var e=t.length,i=0;i<e;++i)t.get(i).clusterShow=!0}function N(t){t.enabled||(Object(s["a"])(t._clusterLabelCollection)&&t._clusterLabelCollection.destroy(),Object(s["a"])(t._clusterBillboardCollection)&&t._clusterBillboardCollection.destroy(),Object(s["a"])(t._clusterPointCollection)&&t._clusterPointCollection.destroy(),t._clusterLabelCollection=void 0,t._clusterBillboardCollection=void 0,t._clusterPointCollection=void 0,A(t._labelCollection),A(t._billboardCollection),A(t._pointCollection))}g.prototype._initialize=function(t){this._scene=t;var e=T(this);this._cluster=e,this._removeEventListener=t.camera.changed.addEventListener(e)},Object.defineProperties(g.prototype,{enabled:{get:function(){return this._enabled},set:function(t){this._enabledDirty=t!==this._enabled,this._enabled=t}},pixelRange:{get:function(){return this._pixelRange},set:function(t){this._clusterDirty=this._clusterDirty||t!==this._pixelRange,this._pixelRange=t}},minimumClusterSize:{get:function(){return this._minimumClusterSize},set:function(t){this._clusterDirty=this._clusterDirty||t!==this._minimumClusterSize,this._minimumClusterSize=t}},clusterEvent:{get:function(){return this._clusterEvent}},clusterBillboards:{get:function(){return this._clusterBillboards},set:function(t){this._clusterDirty=this._clusterDirty||t!==this._clusterBillboards,this._clusterBillboards=t}},clusterLabels:{get:function(){return this._clusterLabels},set:function(t){this._clusterDirty=this._clusterDirty||t!==this._clusterLabels,this._clusterLabels=t}},clusterPoints:{get:function(){return this._clusterPoints},set:function(t){this._clusterDirty=this._clusterDirty||t!==this._clusterPoints,this._clusterPoints=t}}}),g.prototype.getLabel=x("_labelCollection",p["a"],"_unusedLabelIndices","labelIndex"),g.prototype.removeLabel=function(t){var e=this._collectionIndicesByEntity&&this._collectionIndicesByEntity[t.id];if(Object(s["a"])(this._labelCollection)&&Object(s["a"])(e)&&Object(s["a"])(e.labelIndex)){var i=e.labelIndex;e.labelIndex=void 0,D(this,t.id);var n=this._labelCollection.get(i);n.show=!1,n.text="",n.id=void 0,this._unusedLabelIndices.push(i),this._clusterDirty=!0}},g.prototype.getBillboard=x("_billboardCollection",u["a"],"_unusedBillboardIndices","billboardIndex"),g.prototype.removeBillboard=function(t){var e=this._collectionIndicesByEntity&&this._collectionIndicesByEntity[t.id];if(Object(s["a"])(this._billboardCollection)&&Object(s["a"])(e)&&Object(s["a"])(e.billboardIndex)){var i=e.billboardIndex;e.billboardIndex=void 0,D(this,t.id);var n=this._billboardCollection.get(i);n.id=void 0,n.show=!1,n.image=void 0,this._unusedBillboardIndices.push(i),this._clusterDirty=!0}},g.prototype.getPoint=x("_pointCollection",b["a"],"_unusedPointIndices","pointIndex"),g.prototype.removePoint=function(t){var e=this._collectionIndicesByEntity&&this._collectionIndicesByEntity[t.id];if(Object(s["a"])(this._pointCollection)&&Object(s["a"])(e)&&Object(s["a"])(e.pointIndex)){var i=e.pointIndex;e.pointIndex=void 0,D(this,t.id);var n=this._pointCollection.get(i);n.show=!1,n.id=void 0,this._unusedPointIndices.push(i),this._clusterDirty=!0}},g.prototype.update=function(t){var e;this.show&&(Object(s["a"])(this._labelCollection)&&this._labelCollection.length>0&&0===this._labelCollection.get(0)._glyphs.length&&(e=t.commandList,t.commandList=[],this._labelCollection.update(t),t.commandList=e),Object(s["a"])(this._billboardCollection)&&this._billboardCollection.length>0&&!Object(s["a"])(this._billboardCollection.get(0).width)&&(e=t.commandList,t.commandList=[],this._billboardCollection.update(t),t.commandList=e),this._enabledDirty&&(this._enabledDirty=!1,N(this),this._clusterDirty=!0),this._clusterDirty&&(this._clusterDirty=!1,this._cluster()),Object(s["a"])(this._clusterLabelCollection)&&this._clusterLabelCollection.update(t),Object(s["a"])(this._clusterBillboardCollection)&&this._clusterBillboardCollection.update(t),Object(s["a"])(this._clusterPointCollection)&&this._clusterPointCollection.update(t),Object(s["a"])(this._labelCollection)&&this._labelCollection.update(t),Object(s["a"])(this._billboardCollection)&&this._billboardCollection.update(t),Object(s["a"])(this._pointCollection)&&this._pointCollection.update(t))},g.prototype.destroy=function(){this._labelCollection=this._labelCollection&&this._labelCollection.destroy(),this._billboardCollection=this._billboardCollection&&this._billboardCollection.destroy(),this._pointCollection=this._pointCollection&&this._pointCollection.destroy(),this._clusterLabelCollection=this._clusterLabelCollection&&this._clusterLabelCollection.destroy(),this._clusterBillboardCollection=this._clusterBillboardCollection&&this._clusterBillboardCollection.destroy(),this._clusterPointCollection=this._clusterPointCollection&&this._clusterPointCollection.destroy(),Object(s["a"])(this._removeEventListener)&&(this._removeEventListener(),this._removeEventListener=void 0),this._labelCollection=void 0,this._billboardCollection=void 0,this._pointCollection=void 0,this._clusterBillboardCollection=void 0,this._clusterLabelCollection=void 0,this._clusterPointCollection=void 0,this._collectionIndicesByEntity=void 0,this._unusedLabelIndices=[],this._unusedBillboardIndices=[],this._unusedPointIndices=[],this._previousClusters=[],this._previousHeight=void 0,this._enabledDirty=!1,this._pixelRangeDirty=!1,this._minimumClusterSizeDirty=!1},e["a"]=g},"4ccd":function(t,e,i){"use strict";var n=i("670c"),o=i("bd8d"),r=i("535a"),a=i("2f63"),s=i("21d7"),l=i("0a43"),c=i("ea07"),h=o["a"].WHITE,d=.1,u=new n["a"](8,8),_=new n["a"](0,0),p=new n["a"](1,1);function f(t){t=Object(r["a"])(t,r["a"].EMPTY_OBJECT),this._definitionChanged=new s["a"],this._color=void 0,this._colorSubscription=void 0,this._cellAlpha=void 0,this._cellAlphaSubscription=void 0,this._lineCount=void 0,this._lineCountSubscription=void 0,this._lineThickness=void 0,this._lineThicknessSubscription=void 0,this._lineOffset=void 0,this._lineOffsetSubscription=void 0,this.color=t.color,this.cellAlpha=t.cellAlpha,this.lineCount=t.lineCount,this.lineThickness=t.lineThickness,this.lineOffset=t.lineOffset}Object.defineProperties(f.prototype,{isConstant:{get:function(){return c["a"].isConstant(this._color)&&c["a"].isConstant(this._cellAlpha)&&c["a"].isConstant(this._lineCount)&&c["a"].isConstant(this._lineThickness)&&c["a"].isConstant(this._lineOffset)}},definitionChanged:{get:function(){return this._definitionChanged}},color:Object(l["a"])("color"),cellAlpha:Object(l["a"])("cellAlpha"),lineCount:Object(l["a"])("lineCount"),lineThickness:Object(l["a"])("lineThickness"),lineOffset:Object(l["a"])("lineOffset")}),f.prototype.getType=function(t){return"Grid"},f.prototype.getValue=function(t,e){return Object(a["a"])(e)||(e={}),e.color=c["a"].getValueOrClonedDefault(this._color,t,h,e.color),e.cellAlpha=c["a"].getValueOrDefault(this._cellAlpha,t,d),e.lineCount=c["a"].getValueOrClonedDefault(this._lineCount,t,u,e.lineCount),e.lineThickness=c["a"].getValueOrClonedDefault(this._lineThickness,t,p,e.lineThickness),e.lineOffset=c["a"].getValueOrClonedDefault(this._lineOffset,t,_,e.lineOffset),e},f.prototype.equals=function(t){return this===t||t instanceof f&&c["a"].equals(this._color,t._color)&&c["a"].equals(this._cellAlpha,t._cellAlpha)&&c["a"].equals(this._lineCount,t._lineCount)&&c["a"].equals(this._lineThickness,t._lineThickness)&&c["a"].equals(this._lineOffset,t._lineOffset)},e["a"]=f},"509b":function(t,e,i){"use strict";var n=i("be18"),o=i("bef8"),r=i("71ce"),a=i("535a"),s=i("2f63"),l=i("21d7"),c=i("93da"),h=i("df07"),d=i("52f0"),u=i("0260"),_=i("f806"),p=i("a0f5"),f=i("acad"),b=i("2d75"),y=i("99f6"),v=i("4b92"),g=i("2bbe"),O=i("3422"),m=i("0a43"),C=i("108c"),j=i("1ce0"),w=i("474a"),E=i("bd0e"),P=i("e0b6"),B=i("d888"),S=i("7aa6"),I=i("bd04"),M=i("7fcb"),L=i("a796"),T=i("d9c4"),x=i("05b6"),D=i("8f3e"),A=i("ea07"),N=i("f0a0"),k=i("298a"),U=i("9816"),V=new o["a"];function R(t){return new g["a"](t)}function G(t){return Object(m["a"])(t,void 0,R)}function z(t,e){return Object(m["a"])(t,void 0,(function(t){return t instanceof e?t:new e(t)}))}function H(t){t=Object(a["a"])(t,a["a"].EMPTY_OBJECT);var e=t.id;Object(s["a"])(e)||(e=Object(r["a"])()),this._availability=void 0,this._id=e,this._definitionChanged=new l["a"],this._name=t.name,this._show=Object(a["a"])(t.show,!0),this._parent=void 0,this._propertyNames=["billboard","box","corridor","cylinder","description","ellipse","ellipsoid","label","model","tileset","orientation","path","plane","point","polygon","polyline","polylineVolume","position","properties","rectangle","viewFrom","wall"],this._billboard=void 0,this._billboardSubscription=void 0,this._box=void 0,this._boxSubscription=void 0,this._corridor=void 0,this._corridorSubscription=void 0,this._cylinder=void 0,this._cylinderSubscription=void 0,this._description=void 0,this._descriptionSubscription=void 0,this._ellipse=void 0,this._ellipseSubscription=void 0,this._ellipsoid=void 0,this._ellipsoidSubscription=void 0,this._label=void 0,this._labelSubscription=void 0,this._model=void 0,this._modelSubscription=void 0,this._tileset=void 0,this._tilesetSubscription=void 0,this._orientation=void 0,this._orientationSubscription=void 0,this._path=void 0,this._pathSubscription=void 0,this._plane=void 0,this._planeSubscription=void 0,this._point=void 0,this._pointSubscription=void 0,this._polygon=void 0,this._polygonSubscription=void 0,this._polyline=void 0,this._polylineSubscription=void 0,this._polylineVolume=void 0,this._polylineVolumeSubscription=void 0,this._position=void 0,this._positionSubscription=void 0,this._properties=void 0,this._propertiesSubscription=void 0,this._rectangle=void 0,this._rectangleSubscription=void 0,this._viewFrom=void 0,this._viewFromSubscription=void 0,this._wall=void 0,this._wallSubscription=void 0,this._children=[],this.entityCollection=void 0,this.parent=t.parent,this.merge(t)}function F(t,e,i){for(var n=e.length,o=0;o<n;o++){var r=e[o],a=r._show,s=!i&&a,l=i&&a;s!==l&&F(r,r._children,i)}t._definitionChanged.raiseEvent(t,"isShowing",i,!i)}Object.defineProperties(H.prototype,{availability:Object(C["a"])("availability"),id:{get:function(){return this._id}},definitionChanged:{get:function(){return this._definitionChanged}},name:Object(C["a"])("name"),show:{get:function(){return this._show},set:function(t){if(t!==this._show){var e=this.isShowing;this._show=t;var i=this.isShowing;e!==i&&F(this,this._children,i),this._definitionChanged.raiseEvent(this,"show",t,!t)}}},isShowing:{get:function(){return this._show&&(!Object(s["a"])(this.entityCollection)||this.entityCollection.show)&&(!Object(s["a"])(this._parent)||this._parent.isShowing)}},parent:{get:function(){return this._parent},set:function(t){var e=this._parent;if(e!==t){var i=this.isShowing;if(Object(s["a"])(e)){var n=e._children.indexOf(this);e._children.splice(n,1)}this._parent=t,Object(s["a"])(t)&&t._children.push(this);var o=this.isShowing;i!==o&&F(this,this._children,o),this._definitionChanged.raiseEvent(this,"parent",t,e)}}},propertyNames:{get:function(){return this._propertyNames}},billboard:z("billboard",y["a"]),box:z("box",v["a"]),corridor:z("corridor",O["a"]),cylinder:z("cylinder",j["a"]),description:Object(m["a"])("description"),ellipse:z("ellipse",w["a"]),ellipsoid:z("ellipsoid",E["a"]),label:z("label",P["a"]),model:z("model",B["a"]),tileset:z("tileset",S["a"]),orientation:Object(m["a"])("orientation"),path:z("path",I["a"]),plane:z("plane",M["a"]),point:z("point",L["a"]),polygon:z("polygon",T["a"]),polyline:z("polyline",x["a"]),polylineVolume:z("polylineVolume",D["a"]),properties:z("properties",N["a"]),position:G("position"),rectangle:z("rectangle",k["a"]),viewFrom:Object(m["a"])("viewFrom"),wall:z("wall",U["a"])}),H.prototype.isAvailable=function(t){var e=this._availability;return!Object(s["a"])(e)||e.contains(t)},H.prototype.addProperty=function(t){var e=this._propertyNames;e.push(t),Object.defineProperty(this,t,Object(C["a"])(t,!0))},H.prototype.removeProperty=function(t){var e=this._propertyNames,i=e.indexOf(t);this._propertyNames.splice(i,1),delete this[t]},H.prototype.merge=function(t){this.name=Object(a["a"])(this.name,t.name),this.availability=Object(a["a"])(this.availability,t.availability);for(var e=this._propertyNames,i=Object(s["a"])(t._propertyNames)?t._propertyNames:Object.keys(t),n=i.length,o=0;o<n;o++){var r=i[o];if("parent"!==r&&"name"!==r&&"availability"!==r){var l=this[r],c=t[r];Object(s["a"])(l)||-1!==e.indexOf(r)||this.addProperty(r),Object(s["a"])(c)&&(Object(s["a"])(l)?Object(s["a"])(l.merge)&&l.merge(c):Object(s["a"])(c.merge)&&Object(s["a"])(c.clone)?this[r]=c.clone():this[r]=c)}}};var W=new h["a"],q=new n["a"],J=new u["a"];H.prototype.computeModelMatrix=function(t,e){var i=A["a"].getValueOrUndefined(this._position,t,q);if(Object(s["a"])(i)){var n=A["a"].getValueOrUndefined(this._orientation,t,J);return e=Object(s["a"])(n)?d["a"].fromRotationTranslation(h["a"].fromQuaternion(n,W),i,e):_["a"].eastNorthUpToFixedFrame(i,void 0,e),e}},H.prototype.computeModelMatrixForHeightReference=function(t,e,i,o,r){var a=A["a"].getValueOrDefault(e,t,b["a"].NONE),l=A["a"].getValueOrUndefined(this._position,t,q);if(a===b["a"].NONE||!Object(s["a"])(l)||n["a"].equalsEpsilon(l,n["a"].ZERO,c["a"].EPSILON8))return this.computeModelMatrix(t,r);var u=o.cartesianToCartographic(l,V);a===b["a"].CLAMP_TO_GROUND?u.height=i:u.height+=i,l=o.cartographicToCartesian(u,l);var p=A["a"].getValueOrUndefined(this._orientation,t,J);return r=Object(s["a"])(p)?d["a"].fromRotationTranslation(h["a"].fromQuaternion(p,W),l,r):_["a"].eastNorthUpToFixedFrame(l,void 0,r),r},H.supportsMaterialsforEntitiesOnTerrain=function(t){return f["a"].supportsMaterials(t)},H.supportsPolylinesOnTerrain=function(t){return p["a"].isSupported(t)},e["a"]=H},"57b5":function(t,e,i){"use strict";var n=i("670c"),o=i("bd8d"),r=i("535a"),a=i("2f63"),s=i("21d7"),l=i("0a43"),c=i("ea07"),h=new n["a"](1,1),d=!1,u=o["a"].WHITE;function _(t){t=Object(r["a"])(t,r["a"].EMPTY_OBJECT),this._definitionChanged=new s["a"],this._image=void 0,this._imageSubscription=void 0,this._repeat=void 0,this._repeatSubscription=void 0,this._color=void 0,this._colorSubscription=void 0,this._transparent=void 0,this._transparentSubscription=void 0,this.image=t.image,this.repeat=t.repeat,this.color=t.color,this.transparent=t.transparent}Object.defineProperties(_.prototype,{isConstant:{get:function(){return c["a"].isConstant(this._image)&&c["a"].isConstant(this._repeat)}},definitionChanged:{get:function(){return this._definitionChanged}},image:Object(l["a"])("image"),repeat:Object(l["a"])("repeat"),color:Object(l["a"])("color"),transparent:Object(l["a"])("transparent")}),_.prototype.getType=function(t){return"Image"},_.prototype.getValue=function(t,e){return Object(a["a"])(e)||(e={}),e.image=c["a"].getValueOrUndefined(this._image,t),e.repeat=c["a"].getValueOrClonedDefault(this._repeat,t,h,e.repeat),e.color=c["a"].getValueOrClonedDefault(this._color,t,u,e.color),c["a"].getValueOrDefault(this._transparent,t,d)&&(e.color.alpha=Math.min(.99,e.color.alpha)),e},_.prototype.equals=function(t){return this===t||t instanceof _&&c["a"].equals(this._image,t._image)&&c["a"].equals(this._repeat,t._repeat)&&c["a"].equals(this._color,t._color)&&c["a"].equals(this._transparent,t._transparent)},e["a"]=_},"70fd":function(t,e,i){"use strict";var n=i("933b"),o=i("cef5"),r=i("535a"),a=i("2f63"),s=i("7d62"),l=i("21d7"),c=i("eff8"),h=i("5a6c"),d=i("d6db"),u=i("3a8e"),_=i("c86b"),p=i("2d19"),f=i("4997"),b=i("b83c"),y=i("b74b"),v=i("7b37"),g=i("cab1"),O=i("4df0"),m=i("8be7"),C=i("509b"),j=i("be67"),w=i("ba13"),E=i("4b0e"),P=i("9ea2"),B=i("02a7"),S=i("d5c7"),I=i("5f9f"),M=i("e74f"),L=i("2fd1"),T=i("c4da"),x=[],D=[f["a"],v["a"],y["a"],O["a"],m["a"],j["a"],w["a"],E["a"],P["a"],T["a"]];function A(t,e){this.entity=t,this.scene=e;var i=new Array(D.length),n=new l["a"];function o(t){n.raiseEvent(t)}for(var r=new c["a"],a=0;a<i.length;a++){var s=new D[a](t,e);r.add(s.geometryChanged,o),i[a]=s}this.updaters=i,this.geometryChanged=n,this.eventHelper=r,this._removeEntitySubscription=t.definitionChanged.addEventListener(A.prototype._onEntityPropertyChanged,this)}function N(t,e,i,o){i=Object(r["a"])(i,t.primitives),o=Object(r["a"])(o,t.groundPrimitives),this._scene=t,this._primitives=i,this._groundPrimitives=o,this._entityCollection=void 0,this._addedObjects=new n["a"],this._removedObjects=new n["a"],this._changedObjects=new n["a"];var a=_["a"].NUMBER_OF_SHADOW_MODES;this._outlineBatches=new Array(2*a),this._closedColorBatches=new Array(2*a),this._closedMaterialBatches=new Array(2*a),this._openColorBatches=new Array(2*a),this._openMaterialBatches=new Array(2*a);var s,l=C["a"].supportsMaterialsforEntitiesOnTerrain(t);for(this._supportsMaterialsforEntitiesOnTerrain=l,s=0;s<a;++s)this._outlineBatches[s]=new L["a"](i,t,s,!1),this._outlineBatches[a+s]=new L["a"](i,t,s,!0),this._closedColorBatches[s]=new B["a"](i,u["a"],void 0,!0,s,!0),this._closedColorBatches[a+s]=new B["a"](i,u["a"],void 0,!0,s,!1),this._closedMaterialBatches[s]=new S["a"](i,d["a"],void 0,!0,s,!0),this._closedMaterialBatches[a+s]=new S["a"](i,d["a"],void 0,!0,s,!1),this._openColorBatches[s]=new B["a"](i,u["a"],void 0,!1,s,!0),this._openColorBatches[a+s]=new B["a"](i,u["a"],void 0,!1,s,!1),this._openMaterialBatches[s]=new S["a"](i,d["a"],void 0,!1,s,!0),this._openMaterialBatches[a+s]=new S["a"](i,d["a"],void 0,!1,s,!1);var c=h["a"].NUMBER_OF_CLASSIFICATION_TYPES,p=new Array(c),f=[];if(l)for(s=0;s<c;++s)f.push(new M["a"](o,s,d["a"])),p[s]=new I["a"](o,s);else for(s=0;s<c;++s)p[s]=new I["a"](o,s);this._groundColorBatches=p,this._groundMaterialBatches=f,this._dynamicBatch=new g["a"](i,o),this._batches=this._outlineBatches.concat(this._closedColorBatches,this._closedMaterialBatches,this._openColorBatches,this._openMaterialBatches,this._groundColorBatches,this._groundMaterialBatches,this._dynamicBatch),this._subscriptions=new n["a"],this._updaterSets=new n["a"],this._entityCollection=e,e.collectionChanged.addEventListener(N.prototype._onCollectionChanged,this),this._onCollectionChanged(e,e.values,x)}A.prototype._onEntityPropertyChanged=function(t,e,i,n){for(var o=this.updaters,r=0;r<o.length;r++)o[r]._onEntityPropertyChanged(t,e,i,n)},A.prototype.forEach=function(t){for(var e=this.updaters,i=0;i<e.length;i++)t(e[i])},A.prototype.destroy=function(){this.eventHelper.removeAll();for(var t=this.updaters,e=0;e<t.length;e++)t[e].destroy();this._removeEntitySubscription(),Object(s["a"])(this)},N.prototype.update=function(t){var e,i,n,o,r=this._addedObjects,a=r.values,s=this._removedObjects,l=s.values,c=this._changedObjects,h=c.values,d=this;for(e=h.length-1;e>-1;e--)i=h[e],n=i.id,o=this._updaterSets.get(n),o.entity===i?o.forEach((function(e){d._removeUpdater(e),d._insertUpdaterIntoBatch(t,e)})):(l.push(i),a.push(i));for(e=l.length-1;e>-1;e--)i=l[e],n=i.id,o=this._updaterSets.get(n),o.forEach(this._removeUpdater.bind(this)),o.destroy(),this._updaterSets.remove(n),this._subscriptions.get(n)(),this._subscriptions.remove(n);for(e=a.length-1;e>-1;e--)i=a[e],n=i.id,o=new A(i,this._scene),this._updaterSets.set(n,o),o.forEach((function(e){d._insertUpdaterIntoBatch(t,e)})),this._subscriptions.set(n,o.geometryChanged.addEventListener(N._onGeometryChanged,this));r.removeAll(),s.removeAll(),c.removeAll();var u=!0,_=this._batches,p=_.length;for(e=0;e<p;e++)u=_[e].update(t)&&u;return u};var k=[],U=new o["a"];N.prototype.getBoundingSphere=function(t,e){for(var i=k,n=U,r=0,a=p["a"].DONE,s=this._batches,l=s.length,c=t.id,h=this._updaterSets.get(c).updaters,d=0;d<h.length;d++)for(var u=h[d],_=0;_<l;_++){if(a=s[_].getBoundingSphere(u,n),a===p["a"].PENDING)return p["a"].PENDING;a===p["a"].DONE&&(i[r]=o["a"].clone(n,i[r]),r++)}return 0===r?p["a"].FAILED:(i.length=r,o["a"].fromBoundingSpheres(i,e),p["a"].DONE)},N.prototype.isDestroyed=function(){return!1},N.prototype.destroy=function(){var t;this._entityCollection.collectionChanged.removeEventListener(N.prototype._onCollectionChanged,this),this._addedObjects.removeAll(),this._removedObjects.removeAll();var e=this._batches,i=e.length;for(t=0;t<i;t++)e[t].removeAllPrimitives();var n=this._subscriptions.values;for(i=n.length,t=0;t<i;t++)n[t]();this._subscriptions.removeAll();var o=this._updaterSets.values;for(i=o.length,t=0;t<i;t++)o[t].destroy();return this._updaterSets.removeAll(),Object(s["a"])(this)},N.prototype._removeUpdater=function(t){for(var e=this._batches,i=e.length,n=0;n<i;n++)e[n].remove(t)},N.prototype._insertUpdaterIntoBatch=function(t,e){if(e.isDynamic)this._dynamicBatch.add(t,e);else{var i;(e.outlineEnabled||e.fillEnabled)&&(i=e.shadowsProperty.getValue(t));var n=_["a"].NUMBER_OF_SHADOW_MODES;if(e.outlineEnabled&&(Object(a["a"])(e.terrainOffsetProperty)?this._outlineBatches[n+i].add(t,e):this._outlineBatches[i].add(t,e)),e.fillEnabled)if(e.onTerrain){var o=e.classificationTypeProperty.getValue(t);e.fillMaterialProperty instanceof b["a"]?this._groundColorBatches[o].add(t,e):this._groundMaterialBatches[o].add(t,e)}else e.isClosed?e.fillMaterialProperty instanceof b["a"]?Object(a["a"])(e.terrainOffsetProperty)?this._closedColorBatches[n+i].add(t,e):this._closedColorBatches[i].add(t,e):Object(a["a"])(e.terrainOffsetProperty)?this._closedMaterialBatches[n+i].add(t,e):this._closedMaterialBatches[i].add(t,e):e.fillMaterialProperty instanceof b["a"]?Object(a["a"])(e.terrainOffsetProperty)?this._openColorBatches[n+i].add(t,e):this._openColorBatches[i].add(t,e):Object(a["a"])(e.terrainOffsetProperty)?this._openMaterialBatches[n+i].add(t,e):this._openMaterialBatches[i].add(t,e)}},N._onGeometryChanged=function(t){var e=this._removedObjects,i=this._changedObjects,n=t.entity,o=n.id;Object(a["a"])(e.get(o))||Object(a["a"])(i.get(o))||i.set(o,n)},N.prototype._onCollectionChanged=function(t,e,i){var n,o,r,a=this._addedObjects,s=this._removedObjects,l=this._changedObjects;for(n=i.length-1;n>-1;n--)r=i[n],o=r.id,a.remove(o)||(s.set(o,r),l.remove(o));for(n=e.length-1;n>-1;n--)r=e[n],o=r.id,s.remove(o)?l.set(o,r):a.set(o,r)},e["a"]=N},"7d5d":function(t,e,i){"use strict";var n=i("933b"),o=i("71ce"),r=i("2f63"),a=i("21d7"),s=i("452d"),l=i("5ed2"),c=i("283e"),h=i("ea72"),d=i("509b"),u={id:void 0};function _(t){if(t._firing)t._refire=!0;else if(0===t._suspendCount){var e=t._addedEntities,i=t._removedEntities,n=t._changedEntities;if(0!==n.length||0!==e.length||0!==i.length){t._firing=!0;do{t._refire=!1;var o=e.values.slice(0),r=i.values.slice(0),a=n.values.slice(0);e.removeAll(),i.removeAll(),n.removeAll(),t._collectionChanged.raiseEvent(t,o,r,a)}while(t._refire);t._firing=!1}}}function p(t){this._owner=t,this._entities=new n["a"],this._addedEntities=new n["a"],this._removedEntities=new n["a"],this._changedEntities=new n["a"],this._suspendCount=0,this._collectionChanged=new a["a"],this._id=Object(o["a"])(),this._show=!0,this._firing=!1,this._refire=!1}p.prototype.suspendEvents=function(){this._suspendCount++},p.prototype.resumeEvents=function(){this._suspendCount--,_(this)},p.collectionChangedEventCallback=void 0,Object.defineProperties(p.prototype,{collectionChanged:{get:function(){return this._collectionChanged}},id:{get:function(){return this._id}},values:{get:function(){return this._entities.values}},show:{get:function(){return this._show},set:function(t){if(t!==this._show){var e;this.suspendEvents();var i=[],n=this._entities.values,o=n.length;for(e=0;e<o;e++)i.push(n[e].isShowing);for(this._show=t,e=0;e<o;e++){var r=i[e],a=n[e];r!==a.isShowing&&a.definitionChanged.raiseEvent(a,"isShowing",a.isShowing,r)}this.resumeEvents()}}},owner:{get:function(){return this._owner}}}),p.prototype.computeAvailability=function(){for(var t=s["a"].MAXIMUM_VALUE,e=s["a"].MINIMUM_VALUE,i=this._entities.values,n=0,o=i.length;n<o;n++){var a=i[n],c=a.availability;if(Object(r["a"])(c)){var d=c.start,u=c.stop;l["a"].lessThan(d,t)&&!d.equals(s["a"].MINIMUM_VALUE)&&(t=d),l["a"].greaterThan(u,e)&&!u.equals(s["a"].MAXIMUM_VALUE)&&(e=u)}}return s["a"].MAXIMUM_VALUE.equals(t)&&(t=s["a"].MINIMUM_VALUE),s["a"].MINIMUM_VALUE.equals(e)&&(e=s["a"].MAXIMUM_VALUE),new h["a"]({start:t,stop:e})},p.prototype.add=function(t){t instanceof d["a"]||(t=new d["a"](t));var e=t.id,i=this._entities;if(i.contains(e))throw new c["a"]("An entity with id "+e+" already exists in this collection.");return t.entityCollection=this,i.set(e,t),this._removedEntities.remove(e)||this._addedEntities.set(e,t),t.definitionChanged.addEventListener(p.prototype._onEntityDefinitionChanged,this),_(this),t},p.prototype.remove=function(t){return!!Object(r["a"])(t)&&this.removeById(t.id)},p.prototype.contains=function(t){return this._entities.get(t.id)===t},p.prototype.removeById=function(t){if(!Object(r["a"])(t))return!1;var e=this._entities,i=e.get(t);return!!this._entities.remove(t)&&(this._addedEntities.remove(t)||(this._removedEntities.set(t,i),this._changedEntities.remove(t)),this._entities.remove(t),i.definitionChanged.removeEventListener(p.prototype._onEntityDefinitionChanged,this),_(this),!0)},p.prototype.removeAll=function(){for(var t=this._entities,e=t.length,i=t.values,n=this._addedEntities,o=this._removedEntities,a=0;a<e;a++){var s=i[a],l=s.id,c=n.get(l);Object(r["a"])(c)||(s.definitionChanged.removeEventListener(p.prototype._onEntityDefinitionChanged,this),o.set(l,s))}t.removeAll(),n.removeAll(),this._changedEntities.removeAll(),_(this)},p.prototype.getById=function(t){return this._entities.get(t)},p.prototype.getOrCreateEntity=function(t){var e=this._entities.get(t);return Object(r["a"])(e)||(u.id=t,e=new d["a"](u),this.add(e)),e},p.prototype._onEntityDefinitionChanged=function(t){var e=t.id;this._addedEntities.contains(e)||this._changedEntities.set(e,t),_(this)},e["a"]=p},a64a:function(t,e,i){"use strict";var n=i("be18"),o=i("535a"),r=i("2f63"),a=i("c52f"),s=i("4f77"),l=i("5ed2"),c=i("93da"),h=i("df07"),d=i("52f0"),u=i("f806"),_=i("a307"),p=new h["a"],f=new h["a"],b=new h["a"],y=new d["a"],v=new n["a"],g=new n["a"],O=new n["a"],m=new n["a"],C=new n["a"],j=new n["a"],w=new l["a"],E=1.25;function P(t,e,i,o,a,s,d){var P=t.scene.mode,B=a.getValue(s,t._lastCartesian);if(Object(r["a"])(B)){var S,I,M,L,T,x,D=!1,A=!1;if(P===_["a"].SCENE3D){l["a"].addSeconds(s,.001,w);var N=a.getValue(w,v);if(Object(r["a"])(N)||(l["a"].addSeconds(s,-.001,w),N=a.getValue(w,v),A=!0),Object(r["a"])(N)){var k,U=u["a"].computeFixedToIcrfMatrix(s,p),V=u["a"].computeFixedToIcrfMatrix(w,f);Object(r["a"])(U)&&Object(r["a"])(V)?k=h["a"].transpose(U,b):(k=u["a"].computeTemeToPseudoFixedMatrix(s,b),U=h["a"].transpose(k,p),V=u["a"].computeTemeToPseudoFixedMatrix(w,f),h["a"].transpose(V,V));var R=h["a"].multiplyByVector(U,B,C),G=h["a"].multiplyByVector(V,N,j);n["a"].subtract(R,G,m);var z=1e3*n["a"].magnitude(m),H=c["a"].GRAVITATIONALPARAMETER,F=-H/(z*z-2*H/n["a"].magnitude(R));F<0||F>E*d.maximumRadius?(S=g,n["a"].normalize(B,S),n["a"].negate(S,S),M=n["a"].clone(n["a"].UNIT_Z,O),I=n["a"].cross(M,S,v),n["a"].magnitude(I)>c["a"].EPSILON7&&(n["a"].normalize(S,S),n["a"].normalize(I,I),M=n["a"].cross(S,I,O),n["a"].normalize(M,M),D=!0)):n["a"].equalsEpsilon(B,N,c["a"].EPSILON7)||(M=g,n["a"].normalize(R,M),n["a"].normalize(G,G),I=n["a"].cross(M,G,O),A&&(I=n["a"].multiplyByScalar(I,-1,I)),n["a"].equalsEpsilon(I,n["a"].ZERO,c["a"].EPSILON7)||(S=n["a"].cross(I,M,v),h["a"].multiplyByVector(k,S,S),h["a"].multiplyByVector(k,I,I),h["a"].multiplyByVector(k,M,M),n["a"].normalize(S,S),n["a"].normalize(I,I),n["a"].normalize(M,M),D=!0))}}Object(r["a"])(t.boundingSphere)&&(B=t.boundingSphere.center),o&&(L=n["a"].clone(e.position,m),T=n["a"].clone(e.direction,C),x=n["a"].clone(e.up,j));var W=y;D?(W[0]=S.x,W[1]=S.y,W[2]=S.z,W[3]=0,W[4]=I.x,W[5]=I.y,W[6]=I.z,W[7]=0,W[8]=M.x,W[9]=M.y,W[10]=M.z,W[11]=0,W[12]=B.x,W[13]=B.y,W[14]=B.z,W[15]=0):u["a"].eastNorthUpToFixedFrame(B,d,W),e._setTransform(W),o&&(n["a"].clone(L,e.position),n["a"].clone(T,e.direction),n["a"].clone(x,e.up),n["a"].cross(T,x,e.right))}if(i){var q=P===_["a"].SCENE2D||n["a"].equals(t._offset3D,n["a"].ZERO)?void 0:t._offset3D;e.lookAtTransform(e.transform,q)}}function B(t,e,i){this.entity=t,this.scene=e,this.ellipsoid=Object(o["a"])(i,a["a"].WGS84),this.boundingSphere=void 0,this._lastEntity=void 0,this._mode=void 0,this._lastCartesian=new n["a"],this._defaultOffset3D=void 0,this._offset3D=new n["a"]}Object.defineProperties(B,{defaultOffset3D:{get:function(){return this._defaultOffset3D},set:function(t){this._defaultOffset3D=n["a"].clone(t,new n["a"])}}}),B.defaultOffset3D=new n["a"](-14e3,3500,3500);var S=new s["a"],I=new n["a"];B.prototype.update=function(t,e){var i=this.scene,o=this.ellipsoid,a=i.mode;if(a!==_["a"].MORPHING){var s=this.entity,l=s.position;if(Object(r["a"])(l)){var h=s!==this._lastEntity,d=a!==this._mode,u=i.camera,p=h||d,f=!0;if(h){var b=s.viewFrom,y=Object(r["a"])(b);if(!y&&Object(r["a"])(e)){S.pitch=-c["a"].PI_OVER_FOUR,S.range=0;var v=l.getValue(t,I);if(Object(r["a"])(v)){var g=2-1/Math.max(1,n["a"].magnitude(v)/o.maximumRadius);S.pitch*=g}u.viewBoundingSphere(e,S),this.boundingSphere=e,p=!1,f=!1}else y&&Object(r["a"])(b.getValue(t,this._offset3D))||n["a"].clone(B._defaultOffset3D,this._offset3D)}else d||this._mode===_["a"].SCENE2D||n["a"].clone(u.position,this._offset3D);this._lastEntity=s,this._mode=a,P(this,u,p,f,l,t,o)}}},e["a"]=B},c6e8:function(t,e,i){"use strict";var n=i("535a"),o=i("2f63"),r=i("4f04"),a=i("0276"),s=i("b639"),l=i("acad"),c=i("2d75"),h=i("2d36"),d=i("984f"),u=i("3ba2"),_=i("fd5d"),p=new d["a"](0);function f(t){u["a"].call(this,t),this._zIndex=0,this._terrainOffsetProperty=void 0}Object(o["a"])(Object.create)&&(f.prototype=Object.create(u["a"].prototype),f.prototype.constructor=f),Object.defineProperties(f.prototype,{zIndex:{get:function(){return this._zIndex}},terrainOffsetProperty:{get:function(){return this._terrainOffsetProperty}}}),f.prototype._isOnTerrain=function(t,e){return this._fillEnabled&&!Object(o["a"])(e.height)&&!Object(o["a"])(e.extrudedHeight)&&l["a"].isSupported(this._scene)},f.prototype._getIsClosed=function(t){var e=t.height,i=t.extrudedHeight;return 0===e||Object(o["a"])(i)&&i!==e},f.prototype._computeCenter=r["a"].throwInstantiationError,f.prototype._onEntityPropertyChanged=function(t,e,i,r){if(u["a"].prototype._onEntityPropertyChanged.call(this,t,e,i,r),-1!==this._observedPropertyNames.indexOf(e)){var a=this._entity[this._geometryPropertyName];if(Object(o["a"])(a)){Object(o["a"])(a.zIndex)&&(Object(o["a"])(a.height)||Object(o["a"])(a.extrudedHeight))&&Object(s["a"])(s["a"].geometryZIndex),this._zIndex=Object(n["a"])(a.zIndex,p),Object(o["a"])(this._terrainOffsetProperty)&&(this._terrainOffsetProperty.destroy(),this._terrainOffsetProperty=void 0);var l=a.heightReference,c=a.extrudedHeightReference;if(Object(o["a"])(l)||Object(o["a"])(c)){var d=new h["a"](this._computeCenter.bind(this),!this._dynamic);this._terrainOffsetProperty=new _["a"](this._scene,d,l,c)}}}},f.prototype.destroy=function(){Object(o["a"])(this._terrainOffsetProperty)&&(this._terrainOffsetProperty.destroy(),this._terrainOffsetProperty=void 0),u["a"].prototype.destroy.call(this)},f.getGeometryHeight=function(t,e){if(Object(o["a"])(t))return e!==c["a"].CLAMP_TO_GROUND?t:0;e!==c["a"].NONE&&Object(s["a"])(s["a"].geometryHeightReference)},f.getGeometryExtrudedHeight=function(t,e){if(Object(o["a"])(t))return e!==c["a"].CLAMP_TO_GROUND?t:f.CLAMP_TO_GROUND;e!==c["a"].NONE&&Object(s["a"])(s["a"].geometryExtrudedHeightReference)},f.CLAMP_TO_GROUND="clamp",f.computeGeometryOffsetAttribute=function(t,e,i,n){Object(o["a"])(t)&&Object(o["a"])(e)||(e=c["a"].NONE),Object(o["a"])(i)&&Object(o["a"])(n)||(n=c["a"].NONE);var r=0;return e!==c["a"].NONE&&r++,n===c["a"].RELATIVE_TO_GROUND&&r++,2===r?a["a"].ALL:1===r?a["a"].TOP:void 0},e["a"]=f},c822:function(t,e,i){"use strict";var n=i("9201"),o=i("be18"),r=i("bd8d"),a=i("71ce"),s=i("8dfe"),l=i("535a"),c=i("2f63"),h=i("21d7"),d=i("157d"),u=i("ee11"),_=i("1757"),p=i("d4ed"),f=i("283e"),b=i("2d75"),y=i("05e5"),v=i("709a"),g=i("a58e"),O=i("99f6"),m=i("2d36"),C=i("b83c"),j=i("2bbe"),w=i("984f"),E=i("9023"),P=i("4820"),B=i("7d5d"),S=i("d9c4"),I=i("05b6");function M(t){return o["a"].fromDegrees(t[0],t[1],t[2])}var L,T={"urn:ogc:def:crs:OGC:1.3:CRS84":M,"EPSG:4326":M,"urn:ogc:def:crs:EPSG::4326":M},x={},D={},A=48,N=r["a"].ROYALBLUE,k=r["a"].YELLOW,U=2,V=r["a"].fromBytes(255,255,0,100),R=!1,G={small:24,medium:48,large:64},z=["title","description","marker-size","marker-symbol","marker-color","stroke","stroke-opacity","stroke-width","fill","fill-opacity"];function H(t,e){var i="";for(var n in t)if(t.hasOwnProperty(n)){if(n===e||-1!==z.indexOf(n))continue;var o=t[n];Object(c["a"])(o)&&(i+="object"===typeof o?"<tr><th>"+n+"</th><td>"+H(o)+"</td></tr>":"<tr><th>"+n+"</th><td>"+o+"</td></tr>")}return i.length>0&&(i='<table class="cesium-infoBox-defaultTable"><tbody>'+i+"</tbody></table>"),i}function F(t,e,i){var n;return function(o,r){return Object(c["a"])(n)||(n=t(e,i)),n}}function W(t,e){return new m["a"](F(H,t,e),!0)}function q(t,e,i){var n=t.id;if(Object(c["a"])(n)&&"Feature"===t.type){var o=2,r=n;while(Object(c["a"])(e.getById(r)))r=n+"_"+o,o++;n=r}else n=Object(a["a"])();var s=e.getOrCreateEntity(n),l=t.properties;if(Object(c["a"])(l)){var h;s.properties=l;var d=l.title;if(Object(c["a"])(d))s.name=d,h="title";else{var u=Number.MAX_VALUE;for(var _ in l)if(l.hasOwnProperty(_)&&l[_]){var p=_.toLowerCase();if(u>1&&"title"===p){u=1,h=_;break}u>2&&"name"===p?(u=2,h=_):u>3&&/title/i.test(_)?(u=3,h=_):u>4&&/name/i.test(_)&&(u=4,h=_)}Object(c["a"])(h)&&(s.name=l[h])}var f=l.description;null!==f&&(s.description=Object(c["a"])(f)?new w["a"](f):i(l,h))}return s}function J(t,e){for(var i=new Array(t.length),n=0;n<t.length;n++)i[n]=e(t[n]);return i}var Y={Feature:X,FeatureCollection:Q,GeometryCollection:K,LineString:nt,MultiLineString:ot,MultiPoint:et,MultiPolygon:st,Point:tt,Polygon:at,Topology:lt},Z={GeometryCollection:K,LineString:nt,MultiLineString:ot,MultiPoint:et,MultiPolygon:st,Point:tt,Polygon:at,Topology:lt};function X(t,e,i,n,o){if(null!==e.geometry){if(!Object(c["a"])(e.geometry))throw new f["a"]("feature.geometry is required.");var r=e.geometry.type,a=Z[r];if(!Object(c["a"])(a))throw new f["a"]("Unknown geometry type: "+r);a(t,e,e.geometry,n,o)}else q(e,t._entityCollection,o.describe)}function Q(t,e,i,n,o){for(var r=e.features,a=0,s=r.length;a<s;a++)X(t,r[a],void 0,n,o)}function K(t,e,i,n,o){for(var r=i.geometries,a=0,s=r.length;a<s;a++){var l=r[a],h=l.type,d=Z[h];if(!Object(c["a"])(d))throw new f["a"]("Unknown geometry type: "+h);d(t,e,l,n,o)}}function $(t,e,i,n,o){var a,s=o.markerSymbol,h=o.markerColor,d=o.markerSize,u=e.properties;if(Object(c["a"])(u)){var _=u["marker-color"];Object(c["a"])(_)&&(h=r["a"].fromCssColorString(_)),d=Object(l["a"])(G[u["marker-size"]],d);var p=u["marker-symbol"];Object(c["a"])(p)&&(s=p)}a=Object(c["a"])(s)?1===s.length?t._pinBuilder.fromText(s.toUpperCase(),h,d):t._pinBuilder.fromMakiIconId(s,h,d):t._pinBuilder.fromColor(h,d);var f=new O["a"];f.verticalOrigin=new w["a"](y["a"].BOTTOM),2===n.length&&o.clampToGround&&(f.heightReference=b["a"].CLAMP_TO_GROUND);var v=q(e,t._entityCollection,o.describe);v.billboard=f,v.position=new j["a"](i(n));var m=Object(g["a"])(a).then((function(t){f.image=new w["a"](t)})).otherwise((function(){f.image=new w["a"](t._pinBuilder.fromColor(h,d))}));t._promises.push(m)}function tt(t,e,i,n,o){$(t,e,n,i.coordinates,o)}function et(t,e,i,n,o){for(var r=i.coordinates,a=0;a<r.length;a++)$(t,e,n,r[a],o)}function it(t,e,i,o,a){var s=a.strokeMaterialProperty,l=a.strokeWidthProperty,h=e.properties;if(Object(c["a"])(h)){var d,u=h["stroke-width"];Object(c["a"])(u)&&(l=new w["a"](u));var _=h.stroke;Object(c["a"])(_)&&(d=r["a"].fromCssColorString(_));var p=h["stroke-opacity"];Object(c["a"])(p)&&1!==p&&(Object(c["a"])(d)||(d=s.color.clone()),d.alpha=p),Object(c["a"])(d)&&(s=new C["a"](d))}var f=q(e,t._entityCollection,a.describe),b=new I["a"];f.polyline=b,b.clampToGround=a.clampToGround,b.material=s,b.width=l,b.positions=new w["a"](J(o,i)),b.arcType=n["a"].RHUMB}function nt(t,e,i,n,o){it(t,e,n,i.coordinates,o)}function ot(t,e,i,n,o){for(var r=i.coordinates,a=0;a<r.length;a++)it(t,e,n,r[a],o)}function rt(t,e,i,o,a){if(0!==o.length&&0!==o[0].length){var s=a.strokeMaterialProperty.color,l=a.fillMaterialProperty,h=a.strokeWidthProperty,d=e.properties;if(Object(c["a"])(d)){var u,p=d["stroke-width"];Object(c["a"])(p)&&(h=new w["a"](p));var f=d.stroke;Object(c["a"])(f)&&(u=r["a"].fromCssColorString(f));var b,y=d["stroke-opacity"];Object(c["a"])(y)&&1!==y&&(Object(c["a"])(u)||(u=a.strokeMaterialProperty.color.clone()),u.alpha=y),Object(c["a"])(u)&&(s=new w["a"](u));var v=d.fill;Object(c["a"])(v)&&(b=r["a"].fromCssColorString(v),b.alpha=l.color.alpha),y=d["fill-opacity"],Object(c["a"])(y)&&y!==l.color.alpha&&(Object(c["a"])(b)||(b=l.color.clone()),b.alpha=y),Object(c["a"])(b)&&(l=new C["a"](b))}var g=new S["a"];g.outline=new w["a"](!0),g.outlineColor=s,g.outlineWidth=h,g.material=l,g.arcType=n["a"].RHUMB;for(var O=[],m=1,j=o.length;m<j;m++)O.push(new _["a"](J(o[m],i)));var E=o[0];g.hierarchy=new w["a"](new _["a"](J(E,i),O)),E[0].length>2?g.perPositionHeight=new w["a"](!0):a.clampToGround||(g.height=0);var P=q(e,t._entityCollection,a.describe);P.polygon=g}}function at(t,e,i,n,o){rt(t,e,n,i.coordinates,o)}function st(t,e,i,n,o){for(var r=i.coordinates,a=0;a<r.length;a++)rt(t,e,n,r[a],o)}function lt(t,e,i,n,o){for(var r in i.objects)if(i.objects.hasOwnProperty(r)){var a=v["a"].feature(i,i.objects[r]),s=Y[a.type];s(t,a,a,n,o)}}function ct(t){this._name=t,this._changed=new h["a"],this._error=new h["a"],this._isLoading=!1,this._loading=new h["a"],this._entityCollection=new B["a"](this),this._promises=[],this._pinBuilder=new u["a"],this._entityCluster=new P["a"],this._credit=void 0,this._resourceCredits=[]}function ht(t,e,i,n){var o;Object(c["a"])(n)&&(o=Object(d["a"])(n)),Object(c["a"])(o)&&t._name!==o&&(t._name=o,t._changed.raiseEvent(t));var r=Y[e.type];if(!Object(c["a"])(r))throw new f["a"]("Unsupported GeoJSON object type: "+e.type);var a=e.crs,s=null!==a?M:null;if(Object(c["a"])(a)){if(!Object(c["a"])(a.properties))throw new f["a"]("crs.properties is undefined.");var l=a.properties;if("name"===a.type){if(s=T[l.name],!Object(c["a"])(s))throw new f["a"]("Unknown crs name: "+l.name)}else if("link"===a.type){var h=x[l.href];if(Object(c["a"])(h)||(h=D[l.type]),!Object(c["a"])(h))throw new f["a"]("Unable to resolve crs link: "+JSON.stringify(l));s=h(l)}else{if("EPSG"!==a.type)throw new f["a"]("Unknown crs type: "+a.type);if(s=T["EPSG:"+l.code],!Object(c["a"])(s))throw new f["a"]("Unknown crs EPSG code: "+l.code)}}return Object(g["a"])(s,(function(n){return t._entityCollection.removeAll(),null!==n&&r(t,e,e,n,i),g["a"].all(t._promises,(function(){return t._promises.length=0,E["a"].setLoading(t,!1),t}))}))}ct.load=function(t,e){return(new ct).load(t,e)},Object.defineProperties(ct,{markerSize:{get:function(){return A},set:function(t){A=t}},markerSymbol:{get:function(){return L},set:function(t){L=t}},markerColor:{get:function(){return N},set:function(t){N=t}},stroke:{get:function(){return k},set:function(t){k=t}},strokeWidth:{get:function(){return U},set:function(t){U=t}},fill:{get:function(){return V},set:function(t){V=t}},clampToGround:{get:function(){return R},set:function(t){R=t}},crsNames:{get:function(){return T}},crsLinkHrefs:{get:function(){return x}},crsLinkTypes:{get:function(){return D}}}),Object.defineProperties(ct.prototype,{name:{get:function(){return this._name},set:function(t){this._name!==t&&(this._name=t,this._changed.raiseEvent(this))}},clock:{value:void 0,writable:!1},entities:{get:function(){return this._entityCollection}},isLoading:{get:function(){return this._isLoading}},changedEvent:{get:function(){return this._changed}},errorEvent:{get:function(){return this._error}},loadingEvent:{get:function(){return this._loading}},show:{get:function(){return this._entityCollection.show},set:function(t){this._entityCollection.show=t}},clustering:{get:function(){return this._entityCluster},set:function(t){this._entityCluster=t}},credit:{get:function(){return this._credit}}}),ct.prototype.load=function(t,e){E["a"].setLoading(this,!0),e=Object(l["a"])(e,l["a"].EMPTY_OBJECT);var i=e.credit;"string"===typeof i&&(i=new s["a"](i)),this._credit=i;var n=t,o=e.sourceUri;if("string"===typeof t||t instanceof p["a"]){t=p["a"].createIfNeeded(t),n=t.fetchJson(),o=Object(l["a"])(o,t.getUrlComponent());var r=this._resourceCredits,a=t.credits;if(Object(c["a"])(a))for(var h=a.length,d=0;d<h;d++)r.push(a[d])}e={describe:Object(l["a"])(e.describe,W),markerSize:Object(l["a"])(e.markerSize,A),markerSymbol:Object(l["a"])(e.markerSymbol,L),markerColor:Object(l["a"])(e.markerColor,N),strokeWidthProperty:new w["a"](Object(l["a"])(e.strokeWidth,U)),strokeMaterialProperty:new C["a"](Object(l["a"])(e.stroke,k)),fillMaterialProperty:new C["a"](Object(l["a"])(e.fill,V)),clampToGround:Object(l["a"])(e.clampToGround,R)};var u=this;return Object(g["a"])(n,(function(t){return ht(u,t,e,o)})).otherwise((function(t){return E["a"].setLoading(u,!1),u._error.raiseEvent(u,t),g["a"].reject(t)}))},ct.prototype.update=function(t){return!0},e["a"]=ct}}]);