(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Cesium~f31eb030"],{"0d09":function(e,t,n){"use strict";var a={NEAREST:0,LINEAR:1};t["a"]=a},"18a0":function(e,t,n){"use strict";var a=n("bd8d"),i=n("2f63"),r=n("7d62"),o=n("93da"),s=n("f845"),u=n("ac3b"),c=n("a913");function h(e){this._collection=e,this._framebuffers=[],this._stageNameToFramebuffer={},this._width=void 0,this._height=void 0,this._updateDependencies=!1}function l(e){while(Object(i["a"])(e.length))e=e.get(e.length-1);return e.name}function d(e,t,n,a,r){if(!a.enabled||!a._isSupported(t))return r;var o=n[a.name]={};if(Object(i["a"])(r)){var s=e.getStageByName(r);o[l(s)]=!0}var u=a.uniforms;if(Object(i["a"])(u))for(var c=Object.getOwnPropertyNames(u),h=c.length,d=0;d<h;++d){var f=u[c[d]];if("string"===typeof f){var _=e.getStageByName(f);Object(i["a"])(_)&&(o[l(_)]=!0)}}return a.name}function f(e,t,n,a,r){if(Object(i["a"])(a.enabled)&&!a.enabled||Object(i["a"])(a._isSupported)&&!a._isSupported(t))return r;for(var o,s,u=r,c=!Object(i["a"])(a.inputPreviousStageTexture)||a.inputPreviousStageTexture,h=r,_=a.length,p=0;p<_;++p){var m=a.get(p);h=Object(i["a"])(m.length)?f(e,t,n,m,r):d(e,t,n,m,r),c&&(r=h)}if(c)for(o=1;o<_;++o)s=l(a.get(o)),Object(i["a"])(n[s])||(n[s]={}),n[s][u]=!0;else for(o=1;o<_;++o){s=l(a.get(o));for(var g=n[s],b=0;b<o;++b)g[l(a.get(b))]=!0}return h}function _(e,t){var n={};if(Object(i["a"])(e.ambientOcclusion)){var a=e.ambientOcclusion,r=e.bloom,o=e._tonemapping,s=e.fxaa,u=f(e,t,n,a,void 0);u=f(e,t,n,r,u),u=d(e,t,n,o,u),u=f(e,t,n,e,u),d(e,t,n,s,u)}else f(e,t,n,e,void 0);return n}function p(e,t,n){var r,o,s=e._collection,u=s.getStageByName(t),c=u._textureScale,h=u._forcePowerOfTwo,l=u._pixelFormat,d=u._pixelDatatype,f=u._clearColor,_=e._framebuffers,p=_.length;for(r=0;r<p;++r)if(o=_[r],c===o.textureScale&&h===o.forcePowerOfTwo&&l===o.pixelFormat&&d===o.pixelDatatype&&a["a"].equals(f,o.clearColor)){for(var m=o.stages,g=m.length,b=!1,v=0;v<g;++v)if(n[m[v]]){b=!0;break}if(!b)break}return Object(i["a"])(o)&&r<p?(o.stages.push(t),o):(o={textureScale:c,forcePowerOfTwo:h,pixelFormat:l,pixelDatatype:d,clearColor:f,stages:[t],buffer:void 0,clear:void 0},_.push(o),o)}function m(e,t){var n=_(e._collection,t);for(var a in n)n.hasOwnProperty(a)&&(e._stageNameToFramebuffer[a]=p(e,a,n[a]))}function g(e){for(var t=e._framebuffers,n=t.length,a=0;a<n;++a){var i=t[a];i.buffer=i.buffer&&i.buffer.destroy(),i.buffer=void 0}}function b(e,t){for(var n=e._width,a=e._height,i=e._framebuffers,r=i.length,h=0;h<r;++h){var l=i[h],d=l.textureScale,f=Math.ceil(n*d),_=Math.ceil(a*d),p=Math.min(f,_);l.forcePowerOfTwo&&(o["a"].isPowerOfTwo(p)||(p=o["a"].nextPowerOfTwo(p)),f=p,_=p),l.buffer=new u["a"]({context:t,colorTextures:[new c["a"]({context:t,width:f,height:_,pixelFormat:l.pixelFormat,pixelDatatype:l.pixelDatatype})]}),l.clear=new s["a"]({color:l.clearColor,framebuffer:l.buffer})}}h.prototype.updateDependencies=function(){this._updateDependencies=!0},h.prototype.update=function(e){var t=this._collection,n=this._updateDependencies,a=Object(i["a"])(t.ambientOcclusion)&&t.ambientOcclusion.enabled&&t.ambientOcclusion._isSupported(e),r=Object(i["a"])(t.bloom)&&t.bloom.enabled&&t.bloom._isSupported(e),o=Object(i["a"])(t._tonemapping)&&t._tonemapping.enabled&&t._tonemapping._isSupported(e),s=Object(i["a"])(t.fxaa)&&t.fxaa.enabled&&t.fxaa._isSupported(e),u=!Object(i["a"])(t._activeStages)||t._activeStages.length>0||a||r||o||s;if((n||!u&&this._framebuffers.length>0)&&(g(this),this._framebuffers.length=0,this._stageNameToFramebuffer={},this._width=void 0,this._height=void 0),n||u){0===this._framebuffers.length&&m(this,e);var c=e.drawingBufferWidth,h=e.drawingBufferHeight,l=this._width!==c||this._height!==h;(n||l)&&(this._width=c,this._height=h,this._updateDependencies=!1,g(this),b(this,e))}},h.prototype.clear=function(e){for(var t=this._framebuffers,n=0;n<t.length;++n)t[n].clear.execute(e)},h.prototype.getStageByName=function(e){return this._collection.getStageByName(e)},h.prototype.getOutputTexture=function(e){return this._collection.getOutputTexture(e)},h.prototype.getFramebuffer=function(e){var t=this._stageNameToFramebuffer[e];if(Object(i["a"])(t))return t.buffer},h.prototype.isDestroyed=function(){return!1},h.prototype.destroy=function(){return g(this),Object(r["a"])(this)},t["a"]=h},"2e78":function(e,t,n){"use strict";var a=n("535a"),i=n("2f63"),r=n("5e57"),o=n("0541"),s=n("7be3"),u=n("b71e"),c=n("e187"),h=n("5cb0"),l=n("aea3"),d=u["a"]+"\n"+s["a"],f=c["a"];function _(e){e=Object(a["a"])(e,a["a"].EMPTY_OBJECT);var t=Object(a["a"])(e.translucent,!0),n=!1,r=_.VERTEX_FORMAT;this.material=Object(i["a"])(e.material)?e.material:l["a"].fromType(l["a"].ColorType),this.translucent=t,this._vertexShaderSource=Object(a["a"])(e.vertexShaderSource,d),this._fragmentShaderSource=Object(a["a"])(e.fragmentShaderSource,f),this._renderState=h["a"].getDefaultRenderState(t,n,e.renderState),this._closed=n,this._vertexFormat=r}r["a"].isInternetExplorer()||(d="#define CLIP_POLYLINE \n"+d),Object.defineProperties(_.prototype,{vertexShaderSource:{get:function(){var e=this._vertexShaderSource;return-1!==this.material.shaderSource.search(/varying\s+float\s+v_polylineAngle;/g)&&(e="#define POLYLINE_DASH\n"+e),e}},fragmentShaderSource:{get:function(){return this._fragmentShaderSource}},renderState:{get:function(){return this._renderState}},closed:{get:function(){return this._closed}},vertexFormat:{get:function(){return this._vertexFormat}}}),_.VERTEX_FORMAT=o["a"].POSITION_AND_ST,_.prototype.getFragmentShaderSource=h["a"].prototype.getFragmentShaderSource,_.prototype.isTranslucent=h["a"].prototype.isTranslucent,_.prototype.getRenderState=h["a"].prototype.getRenderState,t["a"]=_},4082:function(e,t,n){"use strict";var a=n("cef5"),i=n("670c"),r=n("be18"),o=n("a561"),s=n("bef8"),u=n("bd8d"),c=n("2bb9"),h=n("abab"),l=n("535a"),d=n("2f63"),f=n("7d62"),_=n("6cbd"),p=n("5e57"),m=n("0123"),g=n("66bf"),b=n("93da"),v=n("52f0"),y=n("188e"),S=n("283e"),x=n("f20a"),T=n("8b68"),O=n("b997"),w=n("a894"),E=n("d289"),D=n("6dc0"),I=n("e90c"),P=n("5770"),C=n("a913"),A=n("7c5e"),j=n("b71e"),B=n("e187"),N=n("bfb2"),L=n("2cc3"),R=n("b7c8"),M=n("aea3"),F=n("b836"),U=n("a307"),z=F["a"].SHOW_INDEX,V=F["a"].WIDTH_INDEX,k=F["a"].POSITION_INDEX,H=F["a"].MATERIAL_INDEX,Y=F["a"].POSITION_SIZE_INDEX,W=F["a"].DISTANCE_DISPLAY_CONDITION,X=F["a"].NUMBER_OF_PROPERTIES,G={texCoordExpandAndBatchIndex:0,position3DHigh:1,position3DLow:2,position2DHigh:3,position2DLow:4,prevPosition3DHigh:5,prevPosition3DLow:6,prevPosition2DHigh:7,prevPosition2DLow:8,nextPosition3DHigh:9,nextPosition3DLow:10,nextPosition2DHigh:11,nextPosition2DLow:12};function q(e){e=Object(l["a"])(e,l["a"].EMPTY_OBJECT),this.show=Object(l["a"])(e.show,!0),this.modelMatrix=v["a"].clone(Object(l["a"])(e.modelMatrix,v["a"].IDENTITY)),this._modelMatrix=v["a"].clone(v["a"].IDENTITY),this.debugShowBoundingVolume=Object(l["a"])(e.debugShowBoundingVolume,!1),this._opaqueRS=void 0,this._translucentRS=void 0,this._colorCommands=[],this._polylinesUpdated=!1,this._polylinesRemoved=!1,this._createVertexArray=!1,this._propertiesChanged=new Uint32Array(X),this._polylines=[],this._polylineBuckets={},this._positionBufferUsage={bufferUsage:T["a"].STATIC_DRAW,frameCount:0},this._mode=void 0,this._polylinesToUpdate=[],this._vertexArrays=[],this._positionBuffer=void 0,this._texCoordExpandAndBatchIndexBuffer=void 0,this._batchTable=void 0,this._createBatchTable=!1,this._useHighlightColor=!1,this._highlightColor=u["a"].clone(u["a"].WHITE);var t=this;this._uniformMap={u_highlightColor:function(){return t._highlightColor}}}function J(e,t){Object(d["a"])(e._batchTable)&&e._batchTable.destroy();var n=[{functionName:"batchTable_getWidthAndShow",componentDatatype:h["a"].UNSIGNED_BYTE,componentsPerAttribute:2},{functionName:"batchTable_getPickColor",componentDatatype:h["a"].UNSIGNED_BYTE,componentsPerAttribute:4,normalize:!0},{functionName:"batchTable_getCenterHigh",componentDatatype:h["a"].FLOAT,componentsPerAttribute:3},{functionName:"batchTable_getCenterLowAndRadius",componentDatatype:h["a"].FLOAT,componentsPerAttribute:4},{functionName:"batchTable_getDistanceDisplayCondition",componentDatatype:h["a"].FLOAT,componentsPerAttribute:2}];e._batchTable=new L["a"](t,n,e._polylines.length)}Object.defineProperties(q.prototype,{length:{get:function(){return he(this),this._polylines.length}}}),q.prototype.add=function(e){var t=new F["a"](e,this);return t._index=this._polylines.length,this._polylines.push(t),this._createVertexArray=!0,this._createBatchTable=!0,t},q.prototype.remove=function(e){if(this.contains(e)){if(this._polylinesRemoved=!0,this._createVertexArray=!0,this._createBatchTable=!0,Object(d["a"])(e._bucket)){var t=e._bucket;t.shaderProgram=t.shaderProgram&&t.shaderProgram.destroy()}return e._destroy(),!0}return!1},q.prototype.removeAll=function(){le(this),fe(this),this._polylineBuckets={},this._polylinesRemoved=!1,this._polylines.length=0,this._polylinesToUpdate.length=0,this._createVertexArray=!0},q.prototype.contains=function(e){return Object(d["a"])(e)&&e._polylineCollection===this},q.prototype.get=function(e){return he(this),this._polylines[e]};var K=new _["a"],Q=new o["a"],Z=new i["a"];q.prototype.update=function(e){if(he(this),0!==this._polylines.length&&this.show){ce(this,e);var t,n=e.context,a=e.mapProjection,r=this._propertiesChanged;if(this._createBatchTable){if(0===O["a"].maximumVertexTextureImageUnits)throw new S["a"]("Vertex texture fetch support is required to render polylines. The maximum number of vertex texture image units must be greater than zero.");J(this,n),this._createBatchTable=!1}if(this._createVertexArray||ne(this))ie(this,n,a);else if(this._polylinesUpdated){var s=this._polylinesToUpdate;if(this._mode!==U["a"].SCENE3D)for(var u=s.length,c=0;c<u;++c)t=s[c],t.update();if(r[Y]||r[H])ie(this,n,a);else for(var h=s.length,l=this._polylineBuckets,f=0;f<h;++f){t=s[f],r=t._propertiesChanged;var p=t._bucket,m=0;for(var g in l)if(l.hasOwnProperty(g)){if(l[g]===p){r[k]&&p.writeUpdate(m,t,this._positionBuffer,a);break}m+=l[g].lengthOfPositions}if((r[z]||r[V])&&this._batchTable.setBatchedAttribute(t._index,0,new i["a"](t._width,t._show)),this._batchTable.attributes.length>2){if(r[k]||r[Y]){var b=e.mode===U["a"].SCENE2D?t._boundingVolume2D:t._boundingVolumeWC,y=_["a"].fromCartesian(b.center,K),x=o["a"].fromElements(y.low.x,y.low.y,y.low.z,b.radius,Q);this._batchTable.setBatchedAttribute(t._index,2,y.high),this._batchTable.setBatchedAttribute(t._index,3,x)}if(r[W]){var T=Z;T.x=0,T.y=Number.MAX_VALUE;var w=t.distanceDisplayCondition;Object(d["a"])(w)&&(T.x=w.near,T.y=w.far),this._batchTable.setBatchedAttribute(t._index,4,T)}}t._clean()}s.length=0,this._polylinesUpdated=!1}r=this._propertiesChanged;for(var E=0;E<X;++E)r[E]=0;var I=v["a"].IDENTITY;e.mode===U["a"].SCENE3D&&(I=this.modelMatrix);var P=e.passes,C=0!==e.morphTime;if(Object(d["a"])(this._opaqueRS)&&this._opaqueRS.depthTest.enabled===C||(this._opaqueRS=D["a"].fromCache({depthMask:C,depthTest:{enabled:C}})),Object(d["a"])(this._translucentRS)&&this._translucentRS.depthTest.enabled===C||(this._translucentRS=D["a"].fromCache({blending:R["a"].ALPHA_BLEND,depthMask:!C,depthTest:{enabled:C}})),this._batchTable.update(e),P.render||P.pick){var A=this._colorCommands;te(this,e,A,I)}}};var $=new a["a"],ee=new a["a"];function te(e,t,n,i){for(var r=t.context,o=t.commandList,s=n.length,u=0,h=!0,l=e._vertexArrays,f=e.debugShowBoundingVolume,_=e._batchTable,p=_.getUniformMapCallback(),m=l.length,g=0;g<m;++g)for(var b=l[g],v=b.buckets,y=v.length,S=0;S<y;++S){for(var x,T,O,D,I=v[S],P=I.offset,C=I.bucket.shaderProgram,A=I.bucket.polylines,j=A.length,B=0,N=0;N<j;++N){var L=A[N],R=se(L._material);if(R!==x){if(Object(d["a"])(x)&&B>0){var M=T.isTranslucent();u>=s?(O=new w["a"]({owner:e}),n.push(O)):O=n[u],++u,D=Object(c["a"])(p(T._uniforms),e._uniformMap),O.boundingVolume=a["a"].clone($,O.boundingVolume),O.modelMatrix=i,O.shaderProgram=C,O.vertexArray=b.va,O.renderState=M?e._translucentRS:e._opaqueRS,O.pass=M?E["a"].TRANSLUCENT:E["a"].OPAQUE,O.debugShowBoundingVolume=f,O.pickId="v_pickColor",O.uniformMap=D,O.count=B,O.offset=P,P+=B,B=0,h=!0,o.push(O)}T=L._material,T.update(r),x=R}for(var F,z=L._locatorBuckets,V=z.length,k=0;k<V;++k){var H=z[k];H.locator===I&&(B+=H.count)}t.mode===U["a"].SCENE3D?F=L._boundingVolumeWC:t.mode===U["a"].COLUMBUS_VIEW?F=L._boundingVolume2D:t.mode===U["a"].SCENE2D?Object(d["a"])(L._boundingVolume2D)&&(F=a["a"].clone(L._boundingVolume2D,ee),F.center.x=0):Object(d["a"])(L._boundingVolumeWC)&&Object(d["a"])(L._boundingVolume2D)&&(F=a["a"].union(L._boundingVolumeWC,L._boundingVolume2D,ee)),h?(h=!1,a["a"].clone(F,$)):a["a"].union(F,$,$)}Object(d["a"])(x)&&B>0&&(u>=s?(O=new w["a"]({owner:e}),n.push(O)):O=n[u],++u,D=Object(c["a"])(p(T._uniforms),e._uniformMap),O.boundingVolume=a["a"].clone($,O.boundingVolume),O.modelMatrix=i,O.shaderProgram=C,O.vertexArray=b.va,O.renderState=T.isTranslucent()?e._translucentRS:e._opaqueRS,O.pass=T.isTranslucent()?E["a"].TRANSLUCENT:E["a"].OPAQUE,O.debugShowBoundingVolume=f,O.pickId="v_pickColor",O.uniformMap=D,O.count=B,O.offset=P,h=!0,o.push(O)),x=void 0}n.length=u}function ne(e){var t=!1,n=e._propertiesChanged,a=e._positionBufferUsage;return n[k]?a.bufferUsage!==T["a"].STREAM_DRAW?(t=!0,a.bufferUsage=T["a"].STREAM_DRAW,a.frameCount=100):a.frameCount=100:a.bufferUsage!==T["a"].STATIC_DRAW&&(0===a.frameCount?(t=!0,a.bufferUsage=T["a"].STATIC_DRAW):a.frameCount--),t}q.prototype.isDestroyed=function(){return!1},q.prototype.destroy=function(){return de(this),le(this),fe(this),this._batchTable=this._batchTable&&this._batchTable.destroy(),Object(f["a"])(this)};var ae=[0,0,0];function ie(e,t,n){e._createVertexArray=!1,le(e),de(e),ue(e);var a,i,r=[[]],o=r[0],s=e._batchTable,u=e._useHighlightColor,c=[0],l=0,f=[[]],_=0,p=e._polylineBuckets;for(a in p)p.hasOwnProperty(a)&&(i=p[a],i.updateShader(t,s,u),_+=i.lengthOfPositions);if(_>0){var g,v=e._mode,y=new Float32Array(6*_*3),S=new Float32Array(4*_),O=0,w=0,E=0;for(a in p)if(p.hasOwnProperty(a)){i=p[a],i.write(y,S,O,w,E,s,t,n),v===U["a"].MORPHING&&(Object(d["a"])(g)||(g=new Float32Array(6*_*3)),i.writeForMorph(g,O));var D=i.lengthOfPositions;O+=6*D*3,w+=4*D,E+=4*D,l=i.updateIndices(r,c,f,l)}var I,P=e._positionBufferUsage.bufferUsage,C=T["a"].STATIC_DRAW;e._positionBuffer=x["a"].createVertexBuffer({context:t,typedArray:y,usage:P}),Object(d["a"])(g)&&(I=x["a"].createVertexBuffer({context:t,typedArray:g,usage:P})),e._texCoordExpandAndBatchIndexBuffer=x["a"].createVertexBuffer({context:t,typedArray:S,usage:C});for(var j=3*Float32Array.BYTES_PER_ELEMENT,B=4*Float32Array.BYTES_PER_ELEMENT,N=0,L=r.length,R=0;R<L;++R)if(o=r[R],o.length>0){var M=new Uint16Array(o),F=x["a"].createIndexBuffer({context:t,typedArray:M,usage:T["a"].STATIC_DRAW,indexDatatype:m["a"].UNSIGNED_SHORT});N+=c[R];var z,V,k,H,Y=6*(R*(j*b["a"].SIXTY_FOUR_KILOBYTES)-N*j),W=j+Y,X=j+W,q=j+X,J=j+q,K=j+J,Q=R*(B*b["a"].SIXTY_FOUR_KILOBYTES)-N*B,Z=[{index:G.position3DHigh,componentsPerAttribute:3,componentDatatype:h["a"].FLOAT,offsetInBytes:Y,strideInBytes:6*j},{index:G.position3DLow,componentsPerAttribute:3,componentDatatype:h["a"].FLOAT,offsetInBytes:W,strideInBytes:6*j},{index:G.position2DHigh,componentsPerAttribute:3,componentDatatype:h["a"].FLOAT,offsetInBytes:Y,strideInBytes:6*j},{index:G.position2DLow,componentsPerAttribute:3,componentDatatype:h["a"].FLOAT,offsetInBytes:W,strideInBytes:6*j},{index:G.prevPosition3DHigh,componentsPerAttribute:3,componentDatatype:h["a"].FLOAT,offsetInBytes:X,strideInBytes:6*j},{index:G.prevPosition3DLow,componentsPerAttribute:3,componentDatatype:h["a"].FLOAT,offsetInBytes:q,strideInBytes:6*j},{index:G.prevPosition2DHigh,componentsPerAttribute:3,componentDatatype:h["a"].FLOAT,offsetInBytes:X,strideInBytes:6*j},{index:G.prevPosition2DLow,componentsPerAttribute:3,componentDatatype:h["a"].FLOAT,offsetInBytes:q,strideInBytes:6*j},{index:G.nextPosition3DHigh,componentsPerAttribute:3,componentDatatype:h["a"].FLOAT,offsetInBytes:J,strideInBytes:6*j},{index:G.nextPosition3DLow,componentsPerAttribute:3,componentDatatype:h["a"].FLOAT,offsetInBytes:K,strideInBytes:6*j},{index:G.nextPosition2DHigh,componentsPerAttribute:3,componentDatatype:h["a"].FLOAT,offsetInBytes:J,strideInBytes:6*j},{index:G.nextPosition2DLow,componentsPerAttribute:3,componentDatatype:h["a"].FLOAT,offsetInBytes:K,strideInBytes:6*j},{index:G.texCoordExpandAndBatchIndex,componentsPerAttribute:4,componentDatatype:h["a"].FLOAT,vertexBuffer:e._texCoordExpandAndBatchIndexBuffer,offsetInBytes:Q}];v===U["a"].SCENE3D?(z=e._positionBuffer,V="vertexBuffer",k=ae,H="value"):v===U["a"].SCENE2D||v===U["a"].COLUMBUS_VIEW?(z=ae,V="value",k=e._positionBuffer,H="vertexBuffer"):(z=I,V="vertexBuffer",k=e._positionBuffer,H="vertexBuffer"),Z[0][V]=z,Z[1][V]=z,Z[2][H]=k,Z[3][H]=k,Z[4][V]=z,Z[5][V]=z,Z[6][H]=k,Z[7][H]=k,Z[8][V]=z,Z[9][V]=z,Z[10][H]=k,Z[11][H]=k;var $=new A["a"]({context:t,attributes:Z,indexBuffer:F});e._vertexArrays.push({va:$,buckets:f[R]})}}}function re(e,t){return t instanceof C["a"]?t.id:t}var oe=[];function se(e){var t=M["a"]._uniformList[e.type],n=t.length;oe.length=2*n;for(var a=0,i=0;i<n;++i){var r=t[i];oe[a]=r,oe[a+1]=e._uniforms[r](),a+=2}return e.type+":"+JSON.stringify(oe,re)}function ue(e){for(var t=e._mode,n=e._modelMatrix,a=e._polylineBuckets={},i=e._polylines,r=i.length,o=0;o<r;++o){var s=i[o];if(s._actualPositions.length>1){s.update();var u=s.material,c=a[u.type];Object(d["a"])(c)||(c=a[u.type]=new pe(u,t,n)),c.addPolyline(s)}}}function ce(e,t){var n=t.mode;e._mode===n&&v["a"].equals(e._modelMatrix,e.modelMatrix)||(e._mode=n,e._modelMatrix=v["a"].clone(e.modelMatrix),e._createVertexArray=!0)}function he(e){if(e._polylinesRemoved){e._polylinesRemoved=!1;for(var t,n=[],a=[],i=0,r=e._polylines.length,o=0;o<r;++o)t=e._polylines[o],t.isDestroyed||(t._index=i++,a.push(t),n.push(t));e._polylines=n,e._polylinesToUpdate=a}}function le(e){for(var t=e._polylines,n=t.length,a=0;a<n;++a)if(!t[a].isDestroyed){var i=t[a]._bucket;Object(d["a"])(i)&&(i.shaderProgram=i.shaderProgram&&i.shaderProgram.destroy())}}function de(e){for(var t=e._vertexArrays.length,n=0;n<t;++n)e._vertexArrays[n].va.destroy();e._vertexArrays.length=0}function fe(e){for(var t=e._polylines,n=t.length,a=0;a<n;++a)t[a].isDestroyed||t[a]._destroy()}function _e(e,t,n){this.count=e,this.offset=t,this.bucket=n}function pe(e,t,n){this.polylines=[],this.lengthOfPositions=0,this.material=e,this.shaderProgram=void 0,this.mode=t,this.modelMatrix=n}function me(e){return r["a"].dot(r["a"].UNIT_X,e._boundingVolume.center)<0||e._boundingVolume.intersectPlane(y["a"].ORIGIN_ZX_PLANE)===g["a"].INTERSECTING}q.prototype._updatePolyline=function(e,t){this._polylinesUpdated=!0,e._dirty||this._polylinesToUpdate.push(e),++this._propertiesChanged[t]},pe.prototype.addPolyline=function(e){var t=this.polylines;t.push(e),e._actualLength=this.getPolylinePositionsLength(e),this.lengthOfPositions+=e._actualLength,e._bucket=this},pe.prototype.updateShader=function(e,t,n){if(!Object(d["a"])(this.shaderProgram)){var a=["DISTANCE_DISPLAY_CONDITION"];n&&a.push("VECTOR_TILE"),-1!==this.material.shaderSource.search(/varying\s+float\s+v_polylineAngle;/g)&&a.push("POLYLINE_DASH"),p["a"].isInternetExplorer()||a.push("CLIP_POLYLINE");var i=new P["a"]({defines:a,sources:["varying vec4 v_pickColor;\n",this.material.shaderSource,B["a"]]}),r=t.getVertexShaderCallback()(N["a"]),o=new P["a"]({defines:a,sources:[j["a"],r]});this.shaderProgram=I["a"].fromCache({context:e,vertexShaderSource:o,fragmentShaderSource:i,attributeLocations:G})}},pe.prototype.getPolylinePositionsLength=function(e){var t;if(this.mode===U["a"].SCENE3D||!me(e))return t=e._actualPositions.length,4*t-4;var n=0,a=e._segments.lengths;t=a.length;for(var i=0;i<t;++i)n+=4*a[i]-4;return n};var ge=new r["a"],be=new r["a"],ve=new r["a"],ye=new r["a"],Se=new o["a"],xe=new i["a"];pe.prototype.write=function(e,t,n,a,i,s,c,h){for(var l=this.mode,f=h.ellipsoid.maximumRadius*b["a"].PI,p=this.polylines,m=p.length,g=0;g<m;++g){for(var v,y=p[g],S=y.width,x=y.show&&S>0,T=y._index,O=this.getSegments(y,h),w=O.positions,E=O.lengths,D=w.length,I=y.getPickId(c).color,P=0,C=0,A=0;A<D;++A){0===A?y._loop?v=w[D-2]:(v=ye,r["a"].subtract(w[0],w[1],v),r["a"].add(w[0],v,v)):v=w[A-1],r["a"].clone(v,be),r["a"].clone(w[A],ge),A===D-1?y._loop?v=w[1]:(v=ye,r["a"].subtract(w[D-1],w[D-2],v),r["a"].add(w[D-1],v,v)):v=w[A+1],r["a"].clone(v,ve);var j=E[P];A===C+j&&(C+=j,++P);var B=A-C===0,N=A===C+E[P]-1;l===U["a"].SCENE2D&&(be.z=0,ge.z=0,ve.z=0),l!==U["a"].SCENE2D&&l!==U["a"].MORPHING||(B||N)&&f-Math.abs(ge.x)<1&&((ge.x<0&&be.x>0||ge.x>0&&be.x<0)&&r["a"].clone(ge,be),(ge.x<0&&ve.x>0||ge.x>0&&ve.x<0)&&r["a"].clone(ge,ve));for(var L=B?2:0,R=N?2:4,M=L;M<R;++M){_["a"].writeElements(ge,e,n),_["a"].writeElements(be,e,n+6),_["a"].writeElements(ve,e,n+12);var F=M-2<0?-1:1;t[i]=A/(D-1),t[i+1]=M%2*2-1,t[i+2]=F,t[i+3]=T,n+=18,i+=4}}var z=Se;z.x=u["a"].floatToByte(I.red),z.y=u["a"].floatToByte(I.green),z.z=u["a"].floatToByte(I.blue),z.w=u["a"].floatToByte(I.alpha);var V=xe;V.x=S,V.y=x?1:0;var k=l===U["a"].SCENE2D?y._boundingVolume2D:y._boundingVolumeWC,H=_["a"].fromCartesian(k.center,K),Y=H.high,W=o["a"].fromElements(H.low.x,H.low.y,H.low.z,k.radius,Q),X=Z;X.x=0,X.y=Number.MAX_VALUE;var G=y.distanceDisplayCondition;Object(d["a"])(G)&&(X.x=G.near,X.y=G.far),s.setBatchedAttribute(T,0,V),s.setBatchedAttribute(T,1,z),s.attributes.length>2&&(s.setBatchedAttribute(T,2,Y),s.setBatchedAttribute(T,3,W),s.setBatchedAttribute(T,4,X))}};var Te=new r["a"],Oe=new r["a"],we=new r["a"],Ee=new r["a"];pe.prototype.writeForMorph=function(e,t){for(var n=this.modelMatrix,a=this.polylines,i=a.length,o=0;o<i;++o)for(var s=a[o],u=s._segments.positions,c=s._segments.lengths,h=u.length,l=0,d=0,f=0;f<h;++f){var p;0===f?s._loop?p=u[h-2]:(p=Ee,r["a"].subtract(u[0],u[1],p),r["a"].add(u[0],p,p)):p=u[f-1],p=v["a"].multiplyByPoint(n,p,Oe);var m,g=v["a"].multiplyByPoint(n,u[f],Te);f===h-1?s._loop?m=u[1]:(m=Ee,r["a"].subtract(u[h-1],u[h-2],m),r["a"].add(u[h-1],m,m)):m=u[f+1],m=v["a"].multiplyByPoint(n,m,we);var b=c[l];f===d+b&&(d+=b,++l);for(var y=f-d===0,S=f===d+c[l]-1,x=y?2:0,T=S?2:4,O=x;O<T;++O)_["a"].writeElements(g,e,t),_["a"].writeElements(p,e,t+6),_["a"].writeElements(m,e,t+12),t+=18}};var De=new Array(1);pe.prototype.updateIndices=function(e,t,n,a){var i=n.length-1,r=new _e(0,a,this);n[i].push(r);var o=0,s=e[e.length-1],u=0;s.length>0&&(u=s[s.length-1]+1);for(var c=this.polylines,h=c.length,l=0;l<h;++l){var d,f=c[l];if(f._locatorBuckets=[],this.mode===U["a"].SCENE3D){d=De;var _=f._actualPositions.length;if(!(_>0))continue;d[0]=_}else d=f._segments.lengths;var p=d.length;if(p>0){for(var m=0,g=0;g<p;++g)for(var v=d[g]-1,y=0;y<v;++y)u+4>b["a"].SIXTY_FOUR_KILOBYTES&&(f._locatorBuckets.push({locator:r,count:m}),m=0,t.push(4),s=[],e.push(s),u=0,r.count=o,o=0,a=0,r=new _e(0,0,this),n[++i]=[r]),s.push(u,u+2,u+1),s.push(u+1,u+2,u+3),m+=6,o+=6,a+=6,u+=4;f._locatorBuckets.push({locator:r,count:m}),u+4>b["a"].SIXTY_FOUR_KILOBYTES&&(t.push(0),s=[],e.push(s),u=0,r.count=o,a=0,o=0,r=new _e(0,0,this),n[++i]=[r])}f._clean()}return r.count=o,a},pe.prototype.getPolylineStartIndex=function(e){for(var t=this.polylines,n=0,a=t.length,i=0;i<a;++i){var r=t[i];if(r===e)break;n+=r._actualLength}return n};var Ie,Pe={positions:void 0,lengths:void 0},Ce=new Array(1),Ae=new r["a"],je=new s["a"];pe.prototype.getSegments=function(e,t){var n=e._actualPositions;if(this.mode===U["a"].SCENE3D)return Ce[0]=n.length,Pe.positions=n,Pe.lengths=Ce,Pe;me(e)&&(n=e._segments.positions);for(var i,o=t.ellipsoid,s=[],u=this.modelMatrix,c=n.length,h=Ae,l=0;l<c;++l)i=n[l],h=v["a"].multiplyByPoint(u,i,h),s.push(t.project(o.cartesianToCartographic(h,je)));if(s.length>0){e._boundingVolume2D=a["a"].fromPoints(s,e._boundingVolume2D);var d=e._boundingVolume2D.center;e._boundingVolume2D.center=new r["a"](d.z,d.x,d.y)}return Pe.positions=s,Pe.lengths=e._segments.lengths,Pe},pe.prototype.writeUpdate=function(e,t,n,a){var i=this.mode,o=a.ellipsoid.maximumRadius*b["a"].PI,s=t._actualLength;if(s){e+=this.getPolylineStartIndex(t);var u=Ie,c=6*s*3;!Object(d["a"])(u)||u.length<c?u=Ie=new Float32Array(c):u.length>c&&(u=new Float32Array(u.buffer,0,c));var h,l=this.getSegments(t,a),f=l.positions,p=l.lengths,m=0,g=0,v=0;s=f.length;for(var y=0;y<s;++y){0===y?t._loop?h=f[s-2]:(h=ye,r["a"].subtract(f[0],f[1],h),r["a"].add(f[0],h,h)):h=f[y-1],r["a"].clone(h,be),r["a"].clone(f[y],ge),y===s-1?t._loop?h=f[1]:(h=ye,r["a"].subtract(f[s-1],f[s-2],h),r["a"].add(f[s-1],h,h)):h=f[y+1],r["a"].clone(h,ve);var S=p[g];y===v+S&&(v+=S,++g);var x=y-v===0,T=y===v+p[g]-1;i===U["a"].SCENE2D&&(be.z=0,ge.z=0,ve.z=0),i!==U["a"].SCENE2D&&i!==U["a"].MORPHING||(x||T)&&o-Math.abs(ge.x)<1&&((ge.x<0&&be.x>0||ge.x>0&&be.x<0)&&r["a"].clone(ge,be),(ge.x<0&&ve.x>0||ge.x>0&&ve.x<0)&&r["a"].clone(ge,ve));for(var O=x?2:0,w=T?2:4,E=O;E<w;++E)_["a"].writeElements(ge,u,m),_["a"].writeElements(be,u,m+6),_["a"].writeElements(ve,u,m+12),m+=18}n.copyFromArrayView(u,18*Float32Array.BYTES_PER_ELEMENT*e)}},t["a"]=q},"4d42":function(e,t,n){"use strict";var a=n("7229"),i=n("bd8d"),r=n("71ce"),o=n("2f63"),s=n("c52f"),u=n("8c6d"),c=n("2b1f"),h=n("7ae0"),l=n("2d5d"),d=n("2bfd"),f=n("bdad"),_=n("8a4d"),p=n("6768"),m=n("3573"),g=n("7e2c"),b=n("a415"),v=n("1c39"),y=n("ae18"),S=n("f1e5"),x=n("aab0"),T=n("bc38"),O=n("c470"),w=n("6448"),E=n("b92e"),D=n("0967"),I=n("9249"),P=n("f724"),C=n("0d09"),A={};function j(e){var t=1,n=2,a=1,i="#define USE_STEP_SIZE\n"+y["a"],r=new I["a"]({name:e+"_x_direction",fragmentShader:i,uniforms:{delta:t,sigma:n,stepSize:a,direction:0},sampleMode:C["a"].LINEAR}),o=new I["a"]({name:e+"_y_direction",fragmentShader:i,uniforms:{delta:t,sigma:n,stepSize:a,direction:1},sampleMode:C["a"].LINEAR}),s={};return Object.defineProperties(s,{delta:{get:function(){return r.uniforms.delta},set:function(e){var t=r.uniforms,n=o.uniforms;t.delta=n.delta=e}},sigma:{get:function(){return r.uniforms.sigma},set:function(e){var t=r.uniforms,n=o.uniforms;t.sigma=n.sigma=e}},stepSize:{get:function(){return r.uniforms.stepSize},set:function(e){var t=r.uniforms,n=o.uniforms;t.stepSize=n.stepSize=e}}}),new P["a"]({name:e,stages:[r,o],uniforms:s})}function B(e){if(!Object(o["a"])(e))return A.createEdgeDetectionStage();for(var t=new P["a"]({name:"czm_edge_detection_multiple",stages:e,inputPreviousStageTexture:!1}),n={},a="",i="",r=0;r<e.length;++r)a+="uniform sampler2D edgeTexture"+r+"; \n",i+="        vec4 edge"+r+" = texture2D(edgeTexture"+r+", v_textureCoordinates); \n        if (edge"+r+".a > 0.0) \n        { \n            color = edge"+r+"; \n            break; \n        } \n",n["edgeTexture"+r]=e[r].name;var s=a+"varying vec2 v_textureCoordinates; \nvoid main() { \n    vec4 color = vec4(0.0); \n    for (int i = 0; i < "+e.length+"; i++) \n    { \n"+i+"    } \n    gl_FragColor = color; \n} \n",u=new I["a"]({name:"czm_edge_detection_combine",fragmentShader:s,uniforms:n});return new P["a"]({name:"czm_edge_detection_composite",stages:[t,u]})}A.createBlurStage=function(){return j("czm_blur")},A.createDepthOfFieldStage=function(){var e=j("czm_depth_of_field_blur"),t=new I["a"]({name:"czm_depth_of_field_composite",fragmentShader:p["a"],uniforms:{focalDistance:5,blurTexture:e.name}}),n={};return Object.defineProperties(n,{focalDistance:{get:function(){return t.uniforms.focalDistance},set:function(e){t.uniforms.focalDistance=e}},delta:{get:function(){return e.uniforms.delta},set:function(t){e.uniforms.delta=t}},sigma:{get:function(){return e.uniforms.sigma},set:function(t){e.uniforms.sigma=t}},stepSize:{get:function(){return e.uniforms.stepSize},set:function(t){e.uniforms.stepSize=t}}}),new P["a"]({name:"czm_depth_of_field",stages:[e,t],inputPreviousStageTexture:!1,uniforms:n})},A.isDepthOfFieldSupported=function(e){return e.context.depthTexture},A.createEdgeDetectionStage=function(){var e=Object(r["a"])();return new I["a"]({name:"czm_edge_detection_"+e,fragmentShader:g["a"],uniforms:{length:.25,color:i["a"].clone(i["a"].BLACK)}})},A.isEdgeDetectionSupported=function(e){return e.context.depthTexture},A.createSilhouetteStage=function(e){var t=B(e),n=new I["a"]({name:"czm_silhouette_color_edges",fragmentShader:w["a"],uniforms:{silhouetteTexture:t.name}});return new P["a"]({name:"czm_silhouette",stages:[t,n],inputPreviousStageTexture:!1,uniforms:t.uniforms})},A.isSilhouetteSupported=function(e){return e.context.depthTexture},A.createBloomStage=function(){var e=new I["a"]({name:"czm_bloom_contrast_bias",fragmentShader:_["a"],uniforms:{contrast:128,brightness:-.3}}),t=j("czm_bloom_blur"),n=new P["a"]({name:"czm_bloom_contrast_bias_blur",stages:[e,t]}),a=new I["a"]({name:"czm_bloom_generate_composite",fragmentShader:d["a"],uniforms:{glowOnly:!1,bloomTexture:n.name}}),i={};return Object.defineProperties(i,{glowOnly:{get:function(){return a.uniforms.glowOnly},set:function(e){a.uniforms.glowOnly=e}},contrast:{get:function(){return e.uniforms.contrast},set:function(t){e.uniforms.contrast=t}},brightness:{get:function(){return e.uniforms.brightness},set:function(t){e.uniforms.brightness=t}},delta:{get:function(){return t.uniforms.delta},set:function(e){t.uniforms.delta=e}},sigma:{get:function(){return t.uniforms.sigma},set:function(e){t.uniforms.sigma=e}},stepSize:{get:function(){return t.uniforms.stepSize},set:function(e){t.uniforms.stepSize=e}}}),new P["a"]({name:"czm_bloom",stages:[n,a],inputPreviousStageTexture:!1,uniforms:i})},A.createAmbientOcclusionStage=function(){var e=new I["a"]({name:"czm_ambient_occlusion_generate",fragmentShader:c["a"],uniforms:{intensity:3,bias:.1,lengthCap:.26,stepSize:1.95,frustumLength:1e3,randomTexture:void 0}}),t=j("czm_ambient_occlusion_blur");t.uniforms.stepSize=.86;var n=new P["a"]({name:"czm_ambient_occlusion_generate_blur",stages:[e,t]}),a=new I["a"]({name:"czm_ambient_occlusion_composite",fragmentShader:h["a"],uniforms:{ambientOcclusionOnly:!1,ambientOcclusionTexture:n.name}}),i={};return Object.defineProperties(i,{intensity:{get:function(){return e.uniforms.intensity},set:function(t){e.uniforms.intensity=t}},bias:{get:function(){return e.uniforms.bias},set:function(t){e.uniforms.bias=t}},lengthCap:{get:function(){return e.uniforms.lengthCap},set:function(t){e.uniforms.lengthCap=t}},stepSize:{get:function(){return e.uniforms.stepSize},set:function(t){e.uniforms.stepSize=t}},frustumLength:{get:function(){return e.uniforms.frustumLength},set:function(t){e.uniforms.frustumLength=t}},randomTexture:{get:function(){return e.uniforms.randomTexture},set:function(t){e.uniforms.randomTexture=t}},delta:{get:function(){return t.uniforms.delta},set:function(e){t.uniforms.delta=e}},sigma:{get:function(){return t.uniforms.sigma},set:function(e){t.uniforms.sigma=e}},blurStepSize:{get:function(){return t.uniforms.stepSize},set:function(e){t.uniforms.stepSize=e}},ambientOcclusionOnly:{get:function(){return a.uniforms.ambientOcclusionOnly},set:function(e){a.uniforms.ambientOcclusionOnly=e}}}),new P["a"]({name:"czm_ambient_occlusion",stages:[n,a],inputPreviousStageTexture:!1,uniforms:i})},A.isAmbientOcclusionSupported=function(e){return e.context.depthTexture};var N="#define FXAA_QUALITY_PRESET 39 \n"+E["a"]+"\n"+v["a"];A.createFXAAStage=function(){return new I["a"]({name:"czm_FXAA",fragmentShader:N,sampleMode:C["a"].LINEAR})},A.createAcesTonemappingStage=function(e){var t=e?"#define AUTO_EXPOSURE\n":"";return t+=u["a"],new I["a"]({name:"czm_aces",fragmentShader:t,uniforms:{autoExposure:void 0}})},A.createFilmicTonemappingStage=function(e){var t=e?"#define AUTO_EXPOSURE\n":"";return t+=b["a"],new I["a"]({name:"czm_filmic",fragmentShader:t,uniforms:{autoExposure:void 0}})},A.createReinhardTonemappingStage=function(e){var t=e?"#define AUTO_EXPOSURE\n":"";return t+=O["a"],new I["a"]({name:"czm_reinhard",fragmentShader:t,uniforms:{autoExposure:void 0}})},A.createModifiedReinhardTonemappingStage=function(e){var t=e?"#define AUTO_EXPOSURE\n":"";return t+=x["a"],new I["a"]({name:"czm_modified_reinhard",fragmentShader:t,uniforms:{white:i["a"].WHITE,autoExposure:void 0}})},A.createAutoExposureStage=function(){return new D["a"]},A.createBlackAndWhiteStage=function(){return new I["a"]({name:"czm_black_and_white",fragmentShader:l["a"],uniforms:{gradations:5}})},A.createBrightnessStage=function(){return new I["a"]({name:"czm_brightness",fragmentShader:f["a"],uniforms:{brightness:.5}})},A.createNightVisionStage=function(){return new I["a"]({name:"czm_night_vision",fragmentShader:T["a"]})},A.createDepthViewStage=function(){return new I["a"]({name:"czm_depth_view",fragmentShader:m["a"]})},A.createLensFlareStage=function(){return new I["a"]({name:"czm_lens_flare",fragmentShader:S["a"],uniforms:{dirtTexture:Object(a["a"])("Assets/Textures/LensFlare/DirtMask.jpg"),starTexture:Object(a["a"])("Assets/Textures/LensFlare/StarBurst.jpg"),intensity:2,distortion:10,ghostDispersal:.4,haloWidth:.4,dirtAmount:.4,earthRadius:s["a"].WGS84.maximumRadius}})},t["a"]=A},"63ae":function(e,t,n){"use strict";var a=n("535a"),i=n("5e57"),r=n("0541"),o=n("d3f9"),s=n("a0fe"),u=n("b71e"),c=n("5cb0"),h=u["a"]+"\n"+s["a"],l=o["a"];function d(e){e=Object(a["a"])(e,a["a"].EMPTY_OBJECT);var t=Object(a["a"])(e.translucent,!0),n=!1,i=d.VERTEX_FORMAT;this.material=void 0,this.translucent=t,this._vertexShaderSource=Object(a["a"])(e.vertexShaderSource,h),this._fragmentShaderSource=Object(a["a"])(e.fragmentShaderSource,l),this._renderState=c["a"].getDefaultRenderState(t,n,e.renderState),this._closed=n,this._vertexFormat=i}i["a"].isInternetExplorer()||(h="#define CLIP_POLYLINE \n"+h),Object.defineProperties(d.prototype,{vertexShaderSource:{get:function(){return this._vertexShaderSource}},fragmentShaderSource:{get:function(){return this._fragmentShaderSource}},renderState:{get:function(){return this._renderState}},closed:{get:function(){return this._closed}},vertexFormat:{get:function(){return this._vertexFormat}}}),d.VERTEX_FORMAT=r["a"].POSITION_ONLY,d.prototype.getFragmentShaderSource=c["a"].prototype.getFragmentShaderSource,d.prototype.isTranslucent=c["a"].prototype.isTranslucent,d.prototype.getRenderState=c["a"].prototype.getRenderState,t["a"]=d},9249:function(e,t,n){"use strict";var a=n("77af"),i=n("bd8d"),r=n("2bb9"),o=n("71ce"),s=n("535a"),u=n("2f63"),c=n("7d62"),h=n("e42d"),l=n("d4ed"),d=n("00f8"),f=n("6ef5"),_=n("6dc0"),p=n("6c84"),m=n("5770"),g=n("a913"),b=n("3022"),v=n("03f1"),y=n("23b6"),S=n("a58e"),x=n("0d09");function T(e){e=Object(s["a"])(e,s["a"].EMPTY_OBJECT);var t=e.fragmentShader,n=Object(s["a"])(e.textureScale,1),r=Object(s["a"])(e.pixelFormat,h["a"].RGBA);this._fragmentShader=t,this._uniforms=e.uniforms,this._textureScale=n,this._forcePowerOfTwo=Object(s["a"])(e.forcePowerOfTwo,!1),this._sampleMode=Object(s["a"])(e.sampleMode,x["a"].NEAREST),this._pixelFormat=r,this._pixelDatatype=Object(s["a"])(e.pixelDatatype,f["a"].UNSIGNED_BYTE),this._clearColor=Object(s["a"])(e.clearColor,i["a"].BLACK),this._uniformMap=void 0,this._command=void 0,this._colorTexture=void 0,this._depthTexture=void 0,this._idTexture=void 0,this._actualUniforms={},this._dirtyUniforms=[],this._texturesToRelease=[],this._texturesToCreate=[],this._texturePromise=void 0;var c=new d["a"];c.scissorTest={enabled:!0,rectangle:Object(u["a"])(e.scissorRectangle)?a["a"].clone(e.scissorRectangle):new a["a"]},this._passState=c,this._ready=!1;var l=e.name;Object(u["a"])(l)||(l=Object(o["a"])()),this._name=l,this._logDepthChanged=void 0,this._useLogDepth=void 0,this._selectedIdTexture=void 0,this._selected=void 0,this._selectedShadow=void 0,this._parentSelected=void 0,this._parentSelectedShadow=void 0,this._combinedSelected=void 0,this._combinedSelectedShadow=void 0,this._selectedLength=0,this._parentSelectedLength=0,this._selectedDirty=!0,this._textureCache=void 0,this._index=void 0,this.enabled=!0,this._enabled=!0}Object.defineProperties(T.prototype,{ready:{get:function(){return this._ready}},name:{get:function(){return this._name}},fragmentShader:{get:function(){return this._fragmentShader}},uniforms:{get:function(){return this._uniforms}},textureScale:{get:function(){return this._textureScale}},forcePowerOfTwo:{get:function(){return this._forcePowerOfTwo}},sampleMode:{get:function(){return this._sampleMode}},pixelFormat:{get:function(){return this._pixelFormat}},pixelDatatype:{get:function(){return this._pixelDatatype}},clearColor:{get:function(){return this._clearColor}},scissorRectangle:{get:function(){return this._passState.scissorTest.rectangle}},outputTexture:{get:function(){if(Object(u["a"])(this._textureCache)){var e=this._textureCache.getFramebuffer(this._name);if(Object(u["a"])(e))return e.getColorTexture(0)}}},selected:{get:function(){return this._selected},set:function(e){this._selected=e}},parentSelected:{get:function(){return this._parentSelected},set:function(e){this._parentSelected=e}}});var O=/uniform\s+sampler2D\s+depthTexture/g;function w(e,t,n){var a=t[n];return("string"===typeof a||a instanceof HTMLCanvasElement||a instanceof HTMLImageElement||a instanceof HTMLVideoElement||a instanceof ImageData)&&e._dirtyUniforms.push(n),{get:function(){return t[n]},set:function(a){var i=t[n];t[n]=a;var r=e._actualUniforms,o=r[n];Object(u["a"])(o)&&o!==i&&o instanceof g["a"]&&!Object(u["a"])(e._textureCache.getStageByName(n))&&(e._texturesToRelease.push(o),delete r[n],delete r[n+"Dimensions"]),i instanceof g["a"]&&e._texturesToRelease.push(i),"string"===typeof a||a instanceof HTMLCanvasElement||a instanceof HTMLImageElement||a instanceof HTMLVideoElement||a instanceof ImageData?e._dirtyUniforms.push(n):r[n]=a}}}function E(e,t){return function(){var n=e._actualUniforms[t];return"function"===typeof n?n():n}}function D(e,t){return function(){var n=e[t]();if(Object(u["a"])(n))return n.dimensions}}function I(e){if(!Object(u["a"])(e._uniformMap)){var t={},n={},a=e._uniforms,i=e._actualUniforms;for(var o in a)if(a.hasOwnProperty(o)){"function"!==typeof a[o]?(t[o]=E(e,o),n[o]=w(e,a,o)):(t[o]=a[o],n[o]=a[o]),i[o]=a[o];var s=t[o]();("string"===typeof s||s instanceof g["a"]||s instanceof HTMLImageElement||s instanceof HTMLCanvasElement||s instanceof HTMLVideoElement)&&(t[o+"Dimensions"]=D(t,o))}e._uniforms={},Object.defineProperties(e._uniforms,n),e._uniformMap=Object(r["a"])(t,{colorTexture:function(){return e._colorTexture},colorTextureDimensions:function(){return e._colorTexture.dimensions},depthTexture:function(){return e._depthTexture},depthTextureDimensions:function(){return e._depthTexture.dimensions},czm_idTexture:function(){return e._idTexture},czm_selectedIdTexture:function(){return e._selectedIdTexture},czm_selectedIdTextureStep:function(){return 1/e._selectedIdTexture.width}})}}function P(e,t){if(!Object(u["a"])(e._command)||e._logDepthChanged||e._selectedDirty){var n=e._fragmentShader;if(Object(u["a"])(e._selectedIdTexture)){var a=e._selectedIdTexture.width;n=n.replace(/varying\s+vec2\s+v_textureCoordinates;/g,""),n="#define CZM_SELECTED_FEATURE \nuniform sampler2D czm_idTexture; \nuniform sampler2D czm_selectedIdTexture; \nuniform float czm_selectedIdTextureStep; \nvarying vec2 v_textureCoordinates; \nbool czm_selected(vec2 offset) \n{ \n    bool selected = false;\n    vec4 id = texture2D(czm_idTexture, v_textureCoordinates + offset); \n    for (int i = 0; i < "+a+"; ++i) \n    { \n        vec4 selectedId = texture2D(czm_selectedIdTexture, vec2((float(i) + 0.5) * czm_selectedIdTextureStep, 0.5)); \n        if (all(equal(id, selectedId))) \n        { \n            return true; \n        } \n    } \n    return false; \n} \n\nbool czm_selected() \n{ \n    return czm_selected(vec2(0.0)); \n} \n\n"+n}var i=new m["a"]({defines:[e._useLogDepth?"LOG_DEPTH":""],sources:[n]});e._command=t.createViewportQuadCommand(i,{uniformMap:e._uniformMap,owner:e})}}function C(e){var t,n,a=e._sampleMode;a===x["a"].LINEAR?(t=v["a"].LINEAR,n=b["a"].LINEAR):(t=v["a"].NEAREST,n=b["a"].NEAREST);var i=e._sampler;Object(u["a"])(i)&&i.minificationFilter===t&&i.magnificationFilter===n||(e._sampler=new p["a"]({wrapS:y["a"].CLAMP_TO_EDGE,wrapT:y["a"].CLAMP_TO_EDGE,minificationFilter:t,magnificationFilter:n}))}function A(e,t){return function(n){e._texturesToCreate.push({name:t,source:n})}}function j(e,t){return function(){return e._textureCache.getOutputTexture(t)}}function B(e,t){var n,a,i,r=e._texturesToRelease,o=r.length;for(n=0;n<o;++n)a=r[n],a=a&&a.destroy();r.length=0;var s=e._texturesToCreate;for(o=s.length,n=0;n<o;++n){var c=s[n];i=c.name;var h=c.source;e._actualUniforms[i]=new g["a"]({context:t,source:h})}s.length=0;var d=e._dirtyUniforms;if(0!==d.length||Object(u["a"])(e._texturePromise)){if(0!==d.length&&!Object(u["a"])(e._texturePromise)){o=d.length;var f=e._uniforms,_=[];for(n=0;n<o;++n){i=d[n];var p=f[i],m=e._textureCache.getStageByName(p);if(Object(u["a"])(m))e._actualUniforms[i]=j(e,p);else if("string"===typeof p){var b=new l["a"]({url:p});_.push(b.fetchImage().then(A(e,i)))}else e._texturesToCreate.push({name:i,source:p})}d.length=0,_.length>0?(e._ready=!1,e._texturePromise=S["a"].all(_).then((function(){e._ready=!0,e._texturePromise=void 0}))):e._ready=!0}}else e._ready=!0}function N(e){Object(u["a"])(e._command)&&(e._command.shaderProgram=e._command.shaderProgram&&e._command.shaderProgram.destroy(),e._command=void 0),e._selectedIdTexture=e._selectedIdTexture&&e._selectedIdTexture.destroy();var t=e._textureCache;if(Object(u["a"])(t)){var n=e._uniforms,a=e._actualUniforms;for(var i in a)a.hasOwnProperty(i)&&a[i]instanceof g["a"]&&(Object(u["a"])(t.getStageByName(n[i]))||a[i].destroy(),e._dirtyUniforms.push(i))}}function L(e){var t=Object(u["a"])(e._selected)?e._selected.length:0,n=Object(u["a"])(e._parentSelected)?e._parentSelected:0,a=e._selected!==e._selectedShadow||t!==e._selectedLength;if(a=a||e._parentSelected!==e._parentSelectedShadow||n!==e._parentSelectedLength,Object(u["a"])(e._selected)&&Object(u["a"])(e._parentSelected)?e._combinedSelected=e._selected.concat(e._parentSelected):Object(u["a"])(e._parentSelected)?e._combinedSelected=e._parentSelected:e._combinedSelected=e._selected,!a&&Object(u["a"])(e._combinedSelected)){if(!Object(u["a"])(e._combinedSelectedShadow))return!0;t=e._combinedSelected.length;for(var i=0;i<t;++i)if(e._combinedSelected[i]!==e._combinedSelectedShadow[i])return!0}return a}function R(e,t){if(e._selectedDirty){e._selectedIdTexture=e._selectedIdTexture&&e._selectedIdTexture.destroy(),e._selectedIdTexture=void 0;var n=e._combinedSelected;if(Object(u["a"])(n)){var a,r,o,s=0,c=n.length;for(a=0;a<c;++a)r=n[a],Object(u["a"])(r.pickIds)?s+=r.pickIds.length:Object(u["a"])(r.pickId)&&++s;if(0===c||0===s){var l=new Uint8Array(4);return l[0]=255,l[1]=255,l[2]=255,l[3]=255,void(e._selectedIdTexture=new g["a"]({context:t,pixelFormat:h["a"].RGBA,pixelDatatype:f["a"].UNSIGNED_BYTE,source:{arrayBufferView:l,width:1,height:1},sampler:p["a"].NEAREST}))}var d=0,_=new Uint8Array(4*s);for(a=0;a<c;++a)if(r=n[a],Object(u["a"])(r.pickIds))for(var m=r.pickIds,b=m.length,v=0;v<b;++v)o=m[v].color,_[d]=i["a"].floatToByte(o.red),_[d+1]=i["a"].floatToByte(o.green),_[d+2]=i["a"].floatToByte(o.blue),_[d+3]=i["a"].floatToByte(o.alpha),d+=4;else Object(u["a"])(r.pickId)&&(o=r.pickId.color,_[d]=i["a"].floatToByte(o.red),_[d+1]=i["a"].floatToByte(o.green),_[d+2]=i["a"].floatToByte(o.blue),_[d+3]=i["a"].floatToByte(o.alpha),d+=4);e._selectedIdTexture=new g["a"]({context:t,pixelFormat:h["a"].RGBA,pixelDatatype:f["a"].UNSIGNED_BYTE,source:{arrayBufferView:_,width:s,height:1},sampler:p["a"].NEAREST})}}}T.prototype._isSupported=function(e){return!O.test(this._fragmentShader)||e.depthTexture},T.prototype.update=function(e,t){if(this.enabled===this._enabled||this.enabled||N(this),this._enabled=this.enabled,this._enabled&&(this._logDepthChanged=t!==this._useLogDepth,this._useLogDepth=t,this._selectedDirty=L(this),this._selectedShadow=this._selected,this._parentSelectedShadow=this._parentSelected,this._combinedSelectedShadow=this._combinedSelected,this._selectedLength=Object(u["a"])(this._selected)?this._selected.length:0,this._parentSelectedLength=Object(u["a"])(this._parentSelected)?this._parentSelected.length:0,R(this,e),I(this),B(this,e),P(this,e),C(this),this._selectedDirty=!1,this._ready)){var n=this._textureCache.getFramebuffer(this._name);if(this._command.framebuffer=n,Object(u["a"])(n)){var i,r=n.getColorTexture(0);r.width===e.drawingBufferWidth&&r.height===e.drawingBufferHeight||(i=this._renderState,Object(u["a"])(i)&&r.width===i.viewport.width&&r.height===i.viewport.height||(this._renderState=_["a"].fromCache({viewport:new a["a"](0,0,r.width,r.height)}))),this._command.renderState=i}}},T.prototype.execute=function(e,t,n,a){if(Object(u["a"])(this._command)&&Object(u["a"])(this._command.framebuffer)&&this._ready&&this._enabled){this._colorTexture=t,this._depthTexture=n,this._idTexture=a,p["a"].equals(this._colorTexture.sampler,this._sampler)||(this._colorTexture.sampler=this._sampler);var i=this.scissorRectangle.width>0&&this.scissorRectangle.height>0?this._passState:void 0;Object(u["a"])(i)&&(i.context=e),this._command.execute(e,i)}},T.prototype.isDestroyed=function(){return!1},T.prototype.destroy=function(){return N(this),Object(c["a"])(this)},t["a"]=T},"9e4a":function(e,t,n){"use strict";var a=n("1d87"),i=n("2f63"),r=n("7d62"),o=n("e42d"),s=n("6ef5"),u=n("6c84"),c=n("a913"),h=n("3022"),l=n("03f1"),d=n("23b6"),f=n("3720"),_=n("4d42"),p=n("18a0"),m=n("c3f4"),g=[];function b(){var e=_["a"].createFXAAStage(),t=_["a"].createAmbientOcclusionStage(),n=_["a"].createBloomStage();this._autoExposureEnabled=!1,this._autoExposure=_["a"].createAutoExposureStage(),this._tonemapping=void 0,this._tonemapper=void 0,this.tonemapper=m["a"].ACES;var a=this._tonemapping;e.enabled=!1,t.enabled=!1,n.enabled=!1,a.enabled=!1;var r=new p["a"](this),o={},s=g;s.push(e,t,n,a);while(s.length>0){var u=s.pop();o[u.name]=u,u._textureCache=r;var c=u.length;if(Object(i["a"])(c))for(var h=0;h<c;++h)s.push(u.get(h))}this._stages=[],this._activeStages=[],this._previousActiveStages=[],this._randomTexture=void 0;var l=this;t.uniforms.randomTexture=function(){return l._randomTexture},this._ao=t,this._bloom=n,this._fxaa=e,this._lastLength=void 0,this._aoEnabled=void 0,this._bloomEnabled=void 0,this._tonemappingEnabled=void 0,this._fxaaEnabled=void 0,this._stagesRemoved=!1,this._textureCacheDirty=!1,this._stageNames=o,this._textureCache=r}function v(e){if(e._stagesRemoved){e._stagesRemoved=!1;for(var t=[],n=e._stages,a=n.length,i=0,r=0;i<a;++i){var o=n[i];o&&(o._index=r++,t.push(o))}e._stages=t}}function y(e){while(Object(i["a"])(e.length))e=e.get(e.length-1);return e.outputTexture}function S(e,t,n,a,r){if(Object(i["a"])(e.execute))e.execute(t,n,a,r);else{var o,s=e.length;if(e.inputPreviousStageTexture)for(S(e.get(0),t,n,a,r),o=1;o<s;++o)S(e.get(o),t,y(e.get(o-1)),a,r);else for(o=0;o<s;++o)S(e.get(o),t,n,a,r)}}Object.defineProperties(b.prototype,{ready:{get:function(){for(var e=!1,t=this._stages,n=t.length,a=n-1;a>=0;--a){var i=t[a];e=e||i.ready&&i.enabled}var r=this._fxaa,o=this._ao,s=this._bloom,u=this._tonemapping;return e=e||r.ready&&r.enabled,e=e||o.ready&&o.enabled,e=e||s.ready&&s.enabled,e=e||u.ready&&u.enabled,e}},fxaa:{get:function(){return this._fxaa}},ambientOcclusion:{get:function(){return this._ao}},bloom:{get:function(){return this._bloom}},length:{get:function(){return v(this),this._stages.length}},outputTexture:{get:function(){var e=this._fxaa;if(e.enabled&&e.ready)return this.getOutputTexture(e.name);for(var t=this._stages,n=t.length,a=n-1;a>=0;--a){var r=t[a];if(Object(i["a"])(r)&&r.ready&&r.enabled)return this.getOutputTexture(r.name)}var o=this._tonemapping;if(o.enabled&&o.ready)return this.getOutputTexture(o.name);var s=this._bloom;if(s.enabled&&s.ready)return this.getOutputTexture(s.name);var u=this._ao;return u.enabled&&u.ready?this.getOutputTexture(u.name):void 0}},hasSelected:{get:function(){var e=Object(a["a"])(this._stages);while(e.length>0){var t=e.pop();if(Object(i["a"])(t)){if(Object(i["a"])(t.selected))return!0;var n=t.length;if(Object(i["a"])(n))for(var r=0;r<n;++r)e.push(t.get(r))}}return!1}},tonemapper:{get:function(){return this._tonemapper},set:function(e){if(this._tonemapper!==e){Object(i["a"])(this._tonemapping)&&(delete this._stageNames[this._tonemapping.name],this._tonemapping.destroy());var t,n=this._autoExposureEnabled;switch(e){case m["a"].REINHARD:t=_["a"].createReinhardTonemappingStage(n);break;case m["a"].MODIFIED_REINHARD:t=_["a"].createModifiedReinhardTonemappingStage(n);break;case m["a"].FILMIC:t=_["a"].createFilmicTonemappingStage(n);break;default:t=_["a"].createAcesTonemappingStage(n);break}if(n){var a=this._autoExposure;t.uniforms.autoExposure=function(){return a.outputTexture}}this._tonemapper=e,this._tonemapping=t,Object(i["a"])(this._stageNames)&&(this._stageNames[t.name]=t,t._textureCache=this._textureCache),this._textureCacheDirty=!0}}}}),b.prototype.add=function(e){var t=this._stageNames,n=g;n.push(e);while(n.length>0){var a=n.pop();t[a.name]=a,a._textureCache=this._textureCache;var r=a.length;if(Object(i["a"])(r))for(var o=0;o<r;++o)n.push(a.get(o))}var s=this._stages;return e._index=s.length,s.push(e),this._textureCacheDirty=!0,e},b.prototype.remove=function(e){if(!this.contains(e))return!1;var t=this._stageNames,n=g;n.push(e);while(n.length>0){var a=n.pop();delete t[a.name];var r=a.length;if(Object(i["a"])(r))for(var o=0;o<r;++o)n.push(a.get(o))}return this._stages[e._index]=void 0,this._stagesRemoved=!0,this._textureCacheDirty=!0,e._index=void 0,e._textureCache=void 0,e.destroy(),!0},b.prototype.contains=function(e){return Object(i["a"])(e)&&Object(i["a"])(e._index)&&e._textureCache===this._textureCache},b.prototype.get=function(e){v(this);var t=this._stages;return t[e]},b.prototype.removeAll=function(){for(var e=this._stages,t=e.length,n=0;n<t;++n)this.remove(e[n]);e.length=0},b.prototype.getStageByName=function(e){return this._stageNames[e]},b.prototype.update=function(e,t,n){v(this);var a=this._activeStages,r=this._activeStages=this._previousActiveStages;this._previousActiveStages=a;var f,_,p=this._stages,m=r.length=p.length,g=0;for(f=0;f<m;++f)_=p[f],_.ready&&_.enabled&&_._isSupported(e)&&(r[g++]=_);r.length=g;var b=g!==a.length;if(!b)for(f=0;f<g;++f)if(r[f]!==a[f]){b=!0;break}var y=this._ao,S=this._bloom,x=this._autoExposure,T=this._tonemapping,O=this._fxaa;T.enabled=n;var w=y.enabled&&y._isSupported(e),E=S.enabled&&S._isSupported(e),D=T.enabled&&T._isSupported(e),I=O.enabled&&O._isSupported(e);if((b||this._textureCacheDirty||g!==this._lastLength||w!==this._aoEnabled||E!==this._bloomEnabled||D!==this._tonemappingEnabled||I!==this._fxaaEnabled)&&(this._textureCache.updateDependencies(),this._lastLength=g,this._aoEnabled=w,this._bloomEnabled=E,this._tonemappingEnabled=D,this._fxaaEnabled=I,this._textureCacheDirty=!1),Object(i["a"])(this._randomTexture)&&!w&&(this._randomTexture.destroy(),this._randomTexture=void 0),!Object(i["a"])(this._randomTexture)&&w){m=196608;var P=new Uint8Array(m);for(f=0;f<m;f+=3)P[f]=Math.floor(255*Math.random());this._randomTexture=new c["a"]({context:e,pixelFormat:o["a"].RGB,pixelDatatype:s["a"].UNSIGNED_BYTE,source:{arrayBufferView:P,width:256,height:256},sampler:new u["a"]({wrapS:d["a"].REPEAT,wrapT:d["a"].REPEAT,minificationFilter:l["a"].NEAREST,magnificationFilter:h["a"].NEAREST})})}for(this._textureCache.update(e),O.update(e,t),y.update(e,t),S.update(e,t),T.update(e,t),this._autoExposureEnabled&&x.update(e,t),m=p.length,f=0;f<m;++f)p[f].update(e,t)},b.prototype.clear=function(e){this._textureCache.clear(e),this._autoExposureEnabled&&this._autoExposure.clear(e)},b.prototype.getOutputTexture=function(e){var t=this.getStageByName(e);if(Object(i["a"])(t))return y(t)},b.prototype.execute=function(e,t,n,a){var i=this._activeStages,r=i.length,o=this._fxaa,s=this._ao,u=this._bloom,c=this._autoExposure,h=this._tonemapping,l=s.enabled&&s._isSupported(e),d=u.enabled&&u._isSupported(e),f=this._autoExposureEnabled,_=h.enabled&&h._isSupported(e),p=o.enabled&&o._isSupported(e);if(p||l||d||_||0!==r){var m=t;l&&s.ready&&(S(s,e,m,n,a),m=y(s)),d&&u.ready&&(S(u,e,m,n,a),m=y(u)),f&&c.ready&&S(c,e,m,n,a),_&&h.ready&&(S(h,e,m,n,a),m=y(h));var g=m;if(r>0){S(i[0],e,m,n,a);for(var b=1;b<r;++b)S(i[b],e,y(i[b-1]),n,a);g=y(i[r-1])}p&&o.ready&&S(o,e,g,n,a)}},b.prototype.copy=function(e,t){if(!Object(i["a"])(this._copyColorCommand)){var n=this;this._copyColorCommand=e.createViewportQuadCommand(f["a"],{uniformMap:{colorTexture:function(){return n.outputTexture}},owner:this})}this._copyColorCommand.framebuffer=t,this._copyColorCommand.execute(e)},b.prototype.isDestroyed=function(){return!1},b.prototype.destroy=function(){return this._fxaa.destroy(),this._ao.destroy(),this._bloom.destroy(),this._autoExposure.destroy(),this._tonemapping.destroy(),this.removeAll(),this._textureCache=this._textureCache&&this._textureCache.destroy(),Object(r["a"])(this)},t["a"]=b},b836:function(e,t,n){"use strict";var a=n("ee1e"),i=n("cef5"),r=n("be18"),o=n("bd8d"),s=n("535a"),u=n("2f63"),c=n("aee6"),h=n("52f0"),l=n("31af"),d=n("aea3");function f(e,t){e=Object(s["a"])(e,s["a"].EMPTY_OBJECT),this._show=Object(s["a"])(e.show,!0),this._width=Object(s["a"])(e.width,1),this._loop=Object(s["a"])(e.loop,!1),this._distanceDisplayCondition=e.distanceDisplayCondition,this._material=e.material,Object(u["a"])(this._material)||(this._material=d["a"].fromType(d["a"].ColorType,{color:new o["a"](1,1,1,1)}));var n,c=e.positions;Object(u["a"])(c)||(c=[]),this._positions=c,this._actualPositions=Object(a["a"])(c,r["a"].equalsEpsilon),this._loop&&this._actualPositions.length>2&&(this._actualPositions===this._positions&&(this._actualPositions=c.slice()),this._actualPositions.push(r["a"].clone(this._actualPositions[0]))),this._length=this._actualPositions.length,this._id=e.id,Object(u["a"])(t)&&(n=h["a"].clone(t.modelMatrix)),this._modelMatrix=n,this._segments=l["a"].wrapLongitude(this._actualPositions,n),this._actualLength=void 0,this._propertiesChanged=new Uint32Array(y),this._polylineCollection=t,this._dirty=!1,this._pickId=void 0,this._boundingVolume=i["a"].fromPoints(this._actualPositions),this._boundingVolumeWC=i["a"].transform(this._boundingVolume,this._modelMatrix),this._boundingVolume2D=new i["a"]}var _=f.POSITION_INDEX=0,p=f.SHOW_INDEX=1,m=f.WIDTH_INDEX=2,g=f.MATERIAL_INDEX=3,b=f.POSITION_SIZE_INDEX=4,v=f.DISTANCE_DISPLAY_CONDITION=5,y=f.NUMBER_OF_PROPERTIES=6;function S(e,t){++e._propertiesChanged[t];var n=e._polylineCollection;Object(u["a"])(n)&&(n._updatePolyline(e,t),e._dirty=!0)}Object.defineProperties(f.prototype,{show:{get:function(){return this._show},set:function(e){e!==this._show&&(this._show=e,S(this,p))}},positions:{get:function(){return this._positions},set:function(e){var t=Object(a["a"])(e,r["a"].equalsEpsilon);this._loop&&t.length>2&&(t===e&&(t=e.slice()),t.push(r["a"].clone(t[0]))),this._actualPositions.length===t.length&&this._actualPositions.length===this._length||S(this,b),this._positions=e,this._actualPositions=t,this._length=t.length,this._boundingVolume=i["a"].fromPoints(this._actualPositions,this._boundingVolume),this._boundingVolumeWC=i["a"].transform(this._boundingVolume,this._modelMatrix,this._boundingVolumeWC),S(this,_),this.update()}},material:{get:function(){return this._material},set:function(e){this._material!==e&&(this._material=e,S(this,g))}},width:{get:function(){return this._width},set:function(e){var t=this._width;e!==t&&(this._width=e,S(this,m))}},loop:{get:function(){return this._loop},set:function(e){if(e!==this._loop){var t=this._actualPositions;e?t.length>2&&!r["a"].equals(t[0],t[t.length-1])&&(t.length===this._positions.length&&(this._actualPositions=t=this._positions.slice()),t.push(r["a"].clone(t[0]))):t.length>2&&r["a"].equals(t[0],t[t.length-1])&&(t.length-1===this._positions.length?this._actualPositions=this._positions:t.pop()),this._loop=e,S(this,b)}}},id:{get:function(){return this._id},set:function(e){this._id=e,Object(u["a"])(this._pickId)&&(this._pickId.object.id=e)}},pickId:{get:function(){return this._pickId}},isDestroyed:{get:function(){return!Object(u["a"])(this._polylineCollection)}},distanceDisplayCondition:{get:function(){return this._distanceDisplayCondition},set:function(e){c["a"].equals(e,this._distanceDisplayCondition)||(this._distanceDisplayCondition=c["a"].clone(e,this._distanceDisplayCondition),S(this,v))}}}),f.prototype.update=function(){var e=h["a"].IDENTITY;Object(u["a"])(this._polylineCollection)&&(e=this._polylineCollection.modelMatrix);var t=this._segments.positions.length,n=this._segments.lengths,a=this._propertiesChanged[_]>0||this._propertiesChanged[b]>0;if(h["a"].equals(e,this._modelMatrix)&&!a||(this._segments=l["a"].wrapLongitude(this._actualPositions,e),this._boundingVolumeWC=i["a"].transform(this._boundingVolume,e,this._boundingVolumeWC)),this._modelMatrix=h["a"].clone(e,this._modelMatrix),this._segments.positions.length!==t)S(this,b);else for(var r=n.length,o=0;o<r;++o)if(n[o]!==this._segments.lengths[o]){S(this,b);break}},f.prototype.getPickId=function(e){return Object(u["a"])(this._pickId)||(this._pickId=e.createPickId({primitive:this,collection:this._polylineCollection,id:this._id})),this._pickId},f.prototype._clean=function(){this._dirty=!1;for(var e=this._propertiesChanged,t=0;t<y-1;++t)e[t]=0},f.prototype._destroy=function(){this._pickId=this._pickId&&this._pickId.destroy(),this._material=this._material&&this._material.destroy(),this._polylineCollection=void 0},t["a"]=f},f724:function(e,t,n){"use strict";var a=n("71ce"),i=n("535a"),r=n("2f63"),o=n("7d62");function s(e){e=Object(i["a"])(e,i["a"].EMPTY_OBJECT),this._stages=e.stages,this._inputPreviousStageTexture=Object(i["a"])(e.inputPreviousStageTexture,!0);var t=e.name;Object(r["a"])(t)||(t=Object(a["a"])()),this._name=t,this._uniforms=e.uniforms,this._textureCache=void 0,this._index=void 0,this._selected=void 0,this._selectedShadow=void 0,this._parentSelected=void 0,this._parentSelectedShadow=void 0,this._combinedSelected=void 0,this._combinedSelectedShadow=void 0,this._selectedLength=0,this._parentSelectedLength=0,this._selectedDirty=!0}function u(e){var t=Object(r["a"])(e._selected)?e._selected.length:0,n=Object(r["a"])(e._parentSelected)?e._parentSelected:0,a=e._selected!==e._selectedShadow||t!==e._selectedLength;if(a=a||e._parentSelected!==e._parentSelectedShadow||n!==e._parentSelectedLength,Object(r["a"])(e._selected)&&Object(r["a"])(e._parentSelected)?e._combinedSelected=e._selected.concat(e._parentSelected):Object(r["a"])(e._parentSelected)?e._combinedSelected=e._parentSelected:e._combinedSelected=e._selected,!a&&Object(r["a"])(e._combinedSelected)){if(!Object(r["a"])(e._combinedSelectedShadow))return!0;t=e._combinedSelected.length;for(var i=0;i<t;++i)if(e._combinedSelected[i]!==e._combinedSelectedShadow[i])return!0}return a}Object.defineProperties(s.prototype,{ready:{get:function(){for(var e=this._stages,t=e.length,n=0;n<t;++n)if(!e[n].ready)return!1;return!0}},name:{get:function(){return this._name}},enabled:{get:function(){return this._stages[0].enabled},set:function(e){for(var t=this._stages,n=t.length,a=0;a<n;++a)t[a].enabled=e}},uniforms:{get:function(){return this._uniforms}},inputPreviousStageTexture:{get:function(){return this._inputPreviousStageTexture}},length:{get:function(){return this._stages.length}},selected:{get:function(){return this._selected},set:function(e){this._selected=e}},parentSelected:{get:function(){return this._parentSelected},set:function(e){this._parentSelected=e}}}),s.prototype._isSupported=function(e){for(var t=this._stages,n=t.length,a=0;a<n;++a)if(!t[a]._isSupported(e))return!1;return!0},s.prototype.get=function(e){return this._stages[e]},s.prototype.update=function(e,t){this._selectedDirty=u(this),this._selectedShadow=this._selected,this._parentSelectedShadow=this._parentSelected,this._combinedSelectedShadow=this._combinedSelected,this._selectedLength=Object(r["a"])(this._selected)?this._selected.length:0,this._parentSelectedLength=Object(r["a"])(this._parentSelected)?this._parentSelected.length:0;for(var n=this._stages,a=n.length,i=0;i<a;++i){var o=n[i];this._selectedDirty&&(o.parentSelected=this._combinedSelected),o.update(e,t)}},s.prototype.isDestroyed=function(){return!1},s.prototype.destroy=function(){for(var e=this._stages,t=e.length,n=0;n<t;++n)e[n].destroy();return Object(o["a"])(this)},t["a"]=s}}]);