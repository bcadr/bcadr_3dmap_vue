(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Cesium~83e9c9fc"],{"00f8":function(e,t,i){"use strict";function r(e){this.context=e,this.framebuffer=void 0,this.blendingEnabled=void 0,this.scissorTest=void 0,this.viewport=void 0}t["a"]=r},"0134":function(e,t,i){"use strict";var r=i("77af"),n=i("670c"),a=i("be18"),o=i("a561"),s=i("bef8"),c=i("bd8d"),u=i("535a"),l=i("2f63"),h=i("c52f"),f=i("6cbd"),_=i("93da"),d=i("df07"),m=i("52f0"),p=i("713f"),v=i("08db"),g=i("f806"),b=i("a307"),y=i("e065");function O(){this.globeDepthTexture=void 0,this.gamma=void 0,this._viewport=new r["a"],this._viewportCartesian4=new o["a"],this._viewportDirty=!1,this._viewportOrthographicMatrix=m["a"].clone(m["a"].IDENTITY),this._viewportTransformation=m["a"].clone(m["a"].IDENTITY),this._model=m["a"].clone(m["a"].IDENTITY),this._view=m["a"].clone(m["a"].IDENTITY),this._inverseView=m["a"].clone(m["a"].IDENTITY),this._projection=m["a"].clone(m["a"].IDENTITY),this._infiniteProjection=m["a"].clone(m["a"].IDENTITY),this._entireFrustum=new n["a"],this._currentFrustum=new n["a"],this._frustumPlanes=new o["a"],this._farDepthFromNearPlusOne=void 0,this._log2FarDepthFromNearPlusOne=void 0,this._oneOverLog2FarDepthFromNearPlusOne=void 0,this._frameState=void 0,this._temeToPseudoFixed=d["a"].clone(m["a"].IDENTITY),this._view3DDirty=!0,this._view3D=new m["a"],this._inverseView3DDirty=!0,this._inverseView3D=new m["a"],this._inverseModelDirty=!0,this._inverseModel=new m["a"],this._inverseTransposeModelDirty=!0,this._inverseTransposeModel=new d["a"],this._viewRotation=new d["a"],this._inverseViewRotation=new d["a"],this._viewRotation3D=new d["a"],this._inverseViewRotation3D=new d["a"],this._inverseProjectionDirty=!0,this._inverseProjection=new m["a"],this._modelViewDirty=!0,this._modelView=new m["a"],this._modelView3DDirty=!0,this._modelView3D=new m["a"],this._modelViewRelativeToEyeDirty=!0,this._modelViewRelativeToEye=new m["a"],this._inverseModelViewDirty=!0,this._inverseModelView=new m["a"],this._inverseModelView3DDirty=!0,this._inverseModelView3D=new m["a"],this._viewProjectionDirty=!0,this._viewProjection=new m["a"],this._inverseViewProjectionDirty=!0,this._inverseViewProjection=new m["a"],this._modelViewProjectionDirty=!0,this._modelViewProjection=new m["a"],this._inverseModelViewProjectionDirty=!0,this._inverseModelViewProjection=new m["a"],this._modelViewProjectionRelativeToEyeDirty=!0,this._modelViewProjectionRelativeToEye=new m["a"],this._modelViewInfiniteProjectionDirty=!0,this._modelViewInfiniteProjection=new m["a"],this._normalDirty=!0,this._normal=new d["a"],this._normal3DDirty=!0,this._normal3D=new d["a"],this._inverseNormalDirty=!0,this._inverseNormal=new d["a"],this._inverseNormal3DDirty=!0,this._inverseNormal3D=new d["a"],this._encodedCameraPositionMCDirty=!0,this._encodedCameraPositionMC=new f["a"],this._cameraPosition=new a["a"],this._sunPositionWC=new a["a"],this._sunPositionColumbusView=new a["a"],this._sunDirectionWC=new a["a"],this._sunDirectionEC=new a["a"],this._moonDirectionEC=new a["a"],this._lightDirectionWC=new a["a"],this._lightDirectionEC=new a["a"],this._lightColor=new a["a"],this._lightColorHdr=new a["a"],this._pass=void 0,this._mode=void 0,this._mapProjection=void 0,this._ellipsoid=void 0,this._cameraDirection=new a["a"],this._cameraRight=new a["a"],this._cameraUp=new a["a"],this._frustum2DWidth=0,this._eyeHeight=0,this._eyeHeight2D=new n["a"],this._pixelRatio=1,this._orthographicIn3D=!1,this._backgroundColor=new c["a"],this._brdfLut=void 0,this._environmentMap=void 0,this._sphericalHarmonicCoefficients=void 0,this._specularEnvironmentMaps=void 0,this._specularEnvironmentMapsDimensions=new n["a"],this._specularEnvironmentMapsMaximumLOD=void 0,this._fogDensity=void 0,this._invertClassificationColor=void 0,this._imagerySplitPosition=0,this._pixelSizePerMeter=void 0,this._geometricToleranceOverMeter=void 0,this._minimumDisableDepthTestDistance=void 0}function T(e,t){m["a"].clone(t,e._view),m["a"].getMatrix3(t,e._viewRotation),e._view3DDirty=!0,e._inverseView3DDirty=!0,e._modelViewDirty=!0,e._modelView3DDirty=!0,e._modelViewRelativeToEyeDirty=!0,e._inverseModelViewDirty=!0,e._inverseModelView3DDirty=!0,e._viewProjectionDirty=!0,e._inverseViewProjectionDirty=!0,e._modelViewProjectionDirty=!0,e._modelViewProjectionRelativeToEyeDirty=!0,e._modelViewInfiniteProjectionDirty=!0,e._normalDirty=!0,e._inverseNormalDirty=!0,e._normal3DDirty=!0,e._inverseNormal3DDirty=!0}function D(e,t){m["a"].clone(t,e._inverseView),m["a"].getMatrix3(t,e._inverseViewRotation)}function E(e,t){m["a"].clone(t,e._projection),e._inverseProjectionDirty=!0,e._viewProjectionDirty=!0,e._inverseViewProjectionDirty=!0,e._modelViewProjectionDirty=!0,e._modelViewProjectionRelativeToEyeDirty=!0}function x(e,t){m["a"].clone(t,e._infiniteProjection),e._modelViewInfiniteProjectionDirty=!0}function w(e,t){a["a"].clone(t.positionWC,e._cameraPosition),a["a"].clone(t.directionWC,e._cameraDirection),a["a"].clone(t.rightWC,e._cameraRight),a["a"].clone(t.upWC,e._cameraUp);var i=t.positionCartographic;Object(l["a"])(i)?e._eyeHeight=i.height:e._eyeHeight=-e._ellipsoid.maximumRadius,e._encodedCameraPositionMCDirty=!0}Object.defineProperties(O.prototype,{frameState:{get:function(){return this._frameState}},viewport:{get:function(){return this._viewport},set:function(e){if(!r["a"].equals(e,this._viewport)){r["a"].clone(e,this._viewport);var t=this._viewport,i=this._viewportCartesian4;i.x=t.x,i.y=t.y,i.z=t.width,i.w=t.height,this._viewportDirty=!0}}},viewportCartesian4:{get:function(){return this._viewportCartesian4}},viewportOrthographic:{get:function(){return N(this),this._viewportOrthographicMatrix}},viewportTransformation:{get:function(){return N(this),this._viewportTransformation}},model:{get:function(){return this._model},set:function(e){m["a"].clone(e,this._model),this._modelView3DDirty=!0,this._inverseModelView3DDirty=!0,this._inverseModelDirty=!0,this._inverseTransposeModelDirty=!0,this._modelViewDirty=!0,this._inverseModelViewDirty=!0,this._modelViewRelativeToEyeDirty=!0,this._inverseModelViewDirty=!0,this._modelViewProjectionDirty=!0,this._inverseModelViewProjectionDirty=!0,this._modelViewProjectionRelativeToEyeDirty=!0,this._modelViewInfiniteProjectionDirty=!0,this._normalDirty=!0,this._inverseNormalDirty=!0,this._normal3DDirty=!0,this._inverseNormal3DDirty=!0,this._encodedCameraPositionMCDirty=!0}},inverseModel:{get:function(){return this._inverseModelDirty&&(this._inverseModelDirty=!1,m["a"].inverse(this._model,this._inverseModel)),this._inverseModel}},inverseTransposeModel:{get:function(){var e=this._inverseTransposeModel;return this._inverseTransposeModelDirty&&(this._inverseTransposeModelDirty=!1,m["a"].getMatrix3(this.inverseModel,e),d["a"].transpose(e,e)),e}},view:{get:function(){return this._view}},view3D:{get:function(){return ae(this),this._view3D}},viewRotation:{get:function(){return ae(this),this._viewRotation}},viewRotation3D:{get:function(){return ae(this),this._viewRotation3D}},inverseView:{get:function(){return this._inverseView}},inverseView3D:{get:function(){return oe(this),this._inverseView3D}},inverseViewRotation:{get:function(){return this._inverseViewRotation}},inverseViewRotation3D:{get:function(){return oe(this),this._inverseViewRotation3D}},projection:{get:function(){return this._projection}},inverseProjection:{get:function(){return C(this),this._inverseProjection}},infiniteProjection:{get:function(){return this._infiniteProjection}},modelView:{get:function(){return R(this),this._modelView}},modelView3D:{get:function(){return M(this),this._modelView3D}},modelViewRelativeToEye:{get:function(){return z(this),this._modelViewRelativeToEye}},inverseModelView:{get:function(){return B(this),this._inverseModelView}},inverseModelView3D:{get:function(){return F(this),this._inverseModelView3D}},viewProjection:{get:function(){return L(this),this._viewProjection}},inverseViewProjection:{get:function(){return V(this),this._inverseViewProjection}},modelViewProjection:{get:function(){return U(this),this._modelViewProjection}},inverseModelViewProjection:{get:function(){return G(this),this._inverseModelViewProjection}},modelViewProjectionRelativeToEye:{get:function(){return k(this),this._modelViewProjectionRelativeToEye}},modelViewInfiniteProjection:{get:function(){return H(this),this._modelViewInfiniteProjection}},normal:{get:function(){return W(this),this._normal}},normal3D:{get:function(){return Y(this),this._normal3D}},inverseNormal:{get:function(){return K(this),this._inverseNormal}},inverseNormal3D:{get:function(){return J(this),this._inverseNormal3D}},entireFrustum:{get:function(){return this._entireFrustum}},currentFrustum:{get:function(){return this._currentFrustum}},frustumPlanes:{get:function(){return this._frustumPlanes}},farDepthFromNearPlusOne:{get:function(){return this._farDepthFromNearPlusOne}},log2FarDepthFromNearPlusOne:{get:function(){return this._log2FarDepthFromNearPlusOne}},oneOverLog2FarDepthFromNearPlusOne:{get:function(){return this._oneOverLog2FarDepthFromNearPlusOne}},eyeHeight:{get:function(){return this._eyeHeight}},eyeHeight2D:{get:function(){return this._eyeHeight2D}},sunPositionWC:{get:function(){return this._sunPositionWC}},sunPositionColumbusView:{get:function(){return this._sunPositionColumbusView}},sunDirectionWC:{get:function(){return this._sunDirectionWC}},sunDirectionEC:{get:function(){return this._sunDirectionEC}},moonDirectionEC:{get:function(){return this._moonDirectionEC}},lightDirectionWC:{get:function(){return this._lightDirectionWC}},lightDirectionEC:{get:function(){return this._lightDirectionEC}},lightColor:{get:function(){return this._lightColor}},lightColorHdr:{get:function(){return this._lightColorHdr}},encodedCameraPositionMCHigh:{get:function(){return X(this),this._encodedCameraPositionMC.high}},encodedCameraPositionMCLow:{get:function(){return X(this),this._encodedCameraPositionMC.low}},temeToPseudoFixedMatrix:{get:function(){return this._temeToPseudoFixed}},pixelRatio:{get:function(){return this._pixelRatio}},fogDensity:{get:function(){return this._fogDensity}},geometricToleranceOverMeter:{get:function(){return this._geometricToleranceOverMeter}},pass:{get:function(){return this._pass}},backgroundColor:{get:function(){return this._backgroundColor}},brdfLut:{get:function(){return this._brdfLut}},environmentMap:{get:function(){return this._environmentMap}},sphericalHarmonicCoefficients:{get:function(){return this._sphericalHarmonicCoefficients}},specularEnvironmentMaps:{get:function(){return this._specularEnvironmentMaps}},specularEnvironmentMapsDimensions:{get:function(){return this._specularEnvironmentMapsDimensions}},specularEnvironmentMapsMaximumLOD:{get:function(){return this._specularEnvironmentMapsMaximumLOD}},imagerySplitPosition:{get:function(){return this._imagerySplitPosition}},minimumDisableDepthTestDistance:{get:function(){return this._minimumDisableDepthTestDistance}},invertClassificationColor:{get:function(){return this._invertClassificationColor}},orthographicIn3D:{get:function(){return this._orthographicIn3D}},ellipsoid:{get:function(){return Object(u["a"])(this._ellipsoid,h["a"].WGS84)}}});var P=new d["a"],S=new s["a"];function A(e,t){Object(l["a"])(g["a"].computeIcrfToFixedMatrix(t.time,P))||(P=g["a"].computeTemeToPseudoFixedMatrix(t.time,P));var i=v["a"].computeSunPositionInEarthInertialFrame(t.time,e._sunPositionWC);d["a"].multiplyByVector(P,i,i),a["a"].normalize(i,e._sunDirectionWC),i=d["a"].multiplyByVector(e.viewRotation3D,i,e._sunDirectionEC),a["a"].normalize(i,i),i=v["a"].computeMoonPositionInEarthInertialFrame(t.time,e._moonDirectionEC),d["a"].multiplyByVector(P,i,i),d["a"].multiplyByVector(e.viewRotation3D,i,i),a["a"].normalize(i,i);var r=t.mapProjection,n=r.ellipsoid,o=n.cartesianToCartographic(e._sunPositionWC,S);r.project(o,e._sunPositionColumbusView)}O.prototype.updateCamera=function(e){T(this,e.viewMatrix),D(this,e.inverseViewMatrix),w(this,e),this._entireFrustum.x=e.frustum.near,this._entireFrustum.y=e.frustum.far,this.updateFrustum(e.frustum),this._orthographicIn3D=this._mode!==b["a"].SCENE2D&&e.frustum instanceof p["a"]},O.prototype.updateFrustum=function(e){E(this,e.projectionMatrix),Object(l["a"])(e.infiniteProjectionMatrix)&&x(this,e.infiniteProjectionMatrix),this._currentFrustum.x=e.near,this._currentFrustum.y=e.far,this._farDepthFromNearPlusOne=e.far-e.near+1,this._log2FarDepthFromNearPlusOne=_["a"].log2(this._farDepthFromNearPlusOne),this._oneOverLog2FarDepthFromNearPlusOne=1/this._log2FarDepthFromNearPlusOne,Object(l["a"])(e._offCenterFrustum)&&(e=e._offCenterFrustum),this._frustumPlanes.x=e.top,this._frustumPlanes.y=e.bottom,this._frustumPlanes.z=e.left,this._frustumPlanes.w=e.right},O.prototype.updatePass=function(e){this._pass=e};var j=[],I=new y["a"];function N(e){if(e._viewportDirty){var t=e._viewport;m["a"].computeOrthographicOffCenter(t.x,t.x+t.width,t.y,t.y+t.height,0,1,e._viewportOrthographicMatrix),m["a"].computeViewportTransformation(t,0,1,e._viewportTransformation),e._viewportDirty=!1}}function C(e){e._inverseProjectionDirty&&(e._inverseProjectionDirty=!1,e._mode===b["a"].SCENE2D||e._mode===b["a"].MORPHING||e._orthographicIn3D?m["a"].clone(m["a"].ZERO,e._inverseProjection):m["a"].inverse(e._projection,e._inverseProjection))}function R(e){e._modelViewDirty&&(e._modelViewDirty=!1,m["a"].multiplyTransformation(e._view,e._model,e._modelView))}function M(e){e._modelView3DDirty&&(e._modelView3DDirty=!1,m["a"].multiplyTransformation(e.view3D,e._model,e._modelView3D))}function B(e){e._inverseModelViewDirty&&(e._inverseModelViewDirty=!1,m["a"].inverse(e.modelView,e._inverseModelView))}function F(e){e._inverseModelView3DDirty&&(e._inverseModelView3DDirty=!1,m["a"].inverse(e.modelView3D,e._inverseModelView3D))}function L(e){e._viewProjectionDirty&&(e._viewProjectionDirty=!1,m["a"].multiply(e._projection,e._view,e._viewProjection))}function V(e){e._inverseViewProjectionDirty&&(e._inverseViewProjectionDirty=!1,m["a"].inverse(e.viewProjection,e._inverseViewProjection))}function U(e){e._modelViewProjectionDirty&&(e._modelViewProjectionDirty=!1,m["a"].multiply(e._projection,e.modelView,e._modelViewProjection))}function z(e){if(e._modelViewRelativeToEyeDirty){e._modelViewRelativeToEyeDirty=!1;var t=e.modelView,i=e._modelViewRelativeToEye;i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i[4]=t[4],i[5]=t[5],i[6]=t[6],i[7]=t[7],i[8]=t[8],i[9]=t[9],i[10]=t[10],i[11]=t[11],i[12]=0,i[13]=0,i[14]=0,i[15]=t[15]}}function G(e){e._inverseModelViewProjectionDirty&&(e._inverseModelViewProjectionDirty=!1,m["a"].inverse(e.modelViewProjection,e._inverseModelViewProjection))}function k(e){e._modelViewProjectionRelativeToEyeDirty&&(e._modelViewProjectionRelativeToEyeDirty=!1,m["a"].multiply(e._projection,e.modelViewRelativeToEye,e._modelViewProjectionRelativeToEye))}function H(e){e._modelViewInfiniteProjectionDirty&&(e._modelViewInfiniteProjectionDirty=!1,m["a"].multiply(e._infiniteProjection,e.modelView,e._modelViewInfiniteProjection))}function W(e){if(e._normalDirty){e._normalDirty=!1;var t=e._normal;m["a"].getMatrix3(e.inverseModelView,t),d["a"].getRotation(t,t),d["a"].transpose(t,t)}}function Y(e){if(e._normal3DDirty){e._normal3DDirty=!1;var t=e._normal3D;m["a"].getMatrix3(e.inverseModelView3D,t),d["a"].getRotation(t,t),d["a"].transpose(t,t)}}function K(e){e._inverseNormalDirty&&(e._inverseNormalDirty=!1,m["a"].getMatrix3(e.inverseModelView,e._inverseNormal),d["a"].getRotation(e._inverseNormal,e._inverseNormal))}function J(e){e._inverseNormal3DDirty&&(e._inverseNormal3DDirty=!1,m["a"].getMatrix3(e.inverseModelView3D,e._inverseNormal3D),d["a"].getRotation(e._inverseNormal3D,e._inverseNormal3D))}O.prototype.update=function(e){this._mode=e.mode,this._mapProjection=e.mapProjection,this._ellipsoid=e.mapProjection.ellipsoid,this._pixelRatio=e.pixelRatio;var t=e.camera;this.updateCamera(t),e.mode===b["a"].SCENE2D?(this._frustum2DWidth=t.frustum.right-t.frustum.left,this._eyeHeight2D.x=.5*this._frustum2DWidth,this._eyeHeight2D.y=this._eyeHeight2D.x*this._eyeHeight2D.x):(this._frustum2DWidth=0,this._eyeHeight2D.x=0,this._eyeHeight2D.y=0),A(this,e);var i=Object(u["a"])(e.light,I);i instanceof y["a"]?(this._lightDirectionWC=a["a"].clone(this._sunDirectionWC,this._lightDirectionWC),this._lightDirectionEC=a["a"].clone(this._sunDirectionEC,this._lightDirectionEC)):(this._lightDirectionWC=a["a"].normalize(a["a"].negate(i.direction,this._lightDirectionWC),this._lightDirectionWC),this._lightDirectionEC=d["a"].multiplyByVector(this.viewRotation3D,this._lightDirectionWC,this._lightDirectionEC));var r=i.color,o=a["a"].fromElements(r.red,r.green,r.blue,this._lightColorHdr);o=a["a"].multiplyByScalar(o,i.intensity,o);var s=a["a"].maximumComponent(o);s>1?a["a"].divideByScalar(o,s,this._lightColor):a["a"].clone(o,this._lightColor);var h=e.brdfLutGenerator,f=Object(l["a"])(h)?h.colorTexture:void 0;this._brdfLut=f,this._environmentMap=Object(u["a"])(e.environmentMap,e.context.defaultCubeMap),this._sphericalHarmonicCoefficients=Object(u["a"])(e.sphericalHarmonicCoefficients,j),this._specularEnvironmentMaps=e.specularEnvironmentMaps,this._specularEnvironmentMapsMaximumLOD=e.specularEnvironmentMapsMaximumLOD,Object(l["a"])(this._specularEnvironmentMaps)&&n["a"].clone(this._specularEnvironmentMaps.dimensions,this._specularEnvironmentMapsDimensions),this._fogDensity=e.fog.density,this._invertClassificationColor=e.invertClassificationColor,this._frameState=e,this._temeToPseudoFixed=g["a"].computeTemeToPseudoFixedMatrix(e.time,this._temeToPseudoFixed),this._imagerySplitPosition=e.imagerySplitPosition*e.context.drawingBufferWidth;var _,m=t.frustum.fov,p=this._viewport;_=Object(l["a"])(m)?p.height>p.width?2*Math.tan(.5*m)/p.height:2*Math.tan(.5*m)/p.width:1/Math.max(p.width,p.height),this._geometricToleranceOverMeter=_*e.maximumScreenSpaceError,c["a"].clone(e.backgroundColor,this._backgroundColor),this._minimumDisableDepthTestDistance=e.minimumDisableDepthTestDistance,this._minimumDisableDepthTestDistance*=this._minimumDisableDepthTestDistance,this._minimumDisableDepthTestDistance===Number.POSITIVE_INFINITY&&(this._minimumDisableDepthTestDistance=-1)};var q=new a["a"];function X(e){e._encodedCameraPositionMCDirty&&(e._encodedCameraPositionMCDirty=!1,m["a"].multiplyByPoint(e.inverseModel,e._cameraPosition,q),f["a"].fromCartesian(q,e._encodedCameraPositionMC))}var Q=new a["a"],Z=new a["a"],$=new a["a"],ee=new a["a"],te=new s["a"],ie=new a["a"],re=new m["a"];function ne(e,t,i,r,n,o,s,c){var u=Q;u.x=e.y,u.y=e.z,u.z=e.x;var h=Z;h.x=i.y,h.y=i.z,h.z=i.x;var f=$;f.x=r.y,f.y=r.z,f.z=r.x;var d=ee;d.x=t.y,d.y=t.z,d.z=t.x,o===b["a"].SCENE2D&&(u.z=.5*n);var p=s.unproject(u,te);p.longitude=_["a"].clamp(p.longitude,-Math.PI,Math.PI),p.latitude=_["a"].clamp(p.latitude,-_["a"].PI_OVER_TWO,_["a"].PI_OVER_TWO);var v=s.ellipsoid,y=v.cartographicToCartesian(p,ie),O=g["a"].eastNorthUpToFixedFrame(y,v,re);return m["a"].multiplyByPointAsVector(O,h,h),m["a"].multiplyByPointAsVector(O,f,f),m["a"].multiplyByPointAsVector(O,d,d),Object(l["a"])(c)||(c=new m["a"]),c[0]=h.x,c[1]=f.x,c[2]=-d.x,c[3]=0,c[4]=h.y,c[5]=f.y,c[6]=-d.y,c[7]=0,c[8]=h.z,c[9]=f.z,c[10]=-d.z,c[11]=0,c[12]=-a["a"].dot(h,y),c[13]=-a["a"].dot(f,y),c[14]=a["a"].dot(d,y),c[15]=1,c}function ae(e){e._view3DDirty&&(e._mode===b["a"].SCENE3D?m["a"].clone(e._view,e._view3D):ne(e._cameraPosition,e._cameraDirection,e._cameraRight,e._cameraUp,e._frustum2DWidth,e._mode,e._mapProjection,e._view3D),m["a"].getMatrix3(e._view3D,e._viewRotation3D),e._view3DDirty=!1)}function oe(e){e._inverseView3DDirty&&(m["a"].inverseTransformation(e.view3D,e._inverseView3D),m["a"].getMatrix3(e._inverseView3D,e._inverseViewRotation3D),e._inverseView3DDirty=!1)}t["a"]=O},"03f1":function(e,t,i){"use strict";var r=i("daa2"),n={NEAREST:r["a"].NEAREST,LINEAR:r["a"].LINEAR,NEAREST_MIPMAP_NEAREST:r["a"].NEAREST_MIPMAP_NEAREST,LINEAR_MIPMAP_NEAREST:r["a"].LINEAR_MIPMAP_NEAREST,NEAREST_MIPMAP_LINEAR:r["a"].NEAREST_MIPMAP_LINEAR,LINEAR_MIPMAP_LINEAR:r["a"].LINEAR_MIPMAP_LINEAR,validate:function(e){return e===n.NEAREST||e===n.LINEAR||e===n.NEAREST_MIPMAP_NEAREST||e===n.LINEAR_MIPMAP_NEAREST||e===n.NEAREST_MIPMAP_LINEAR||e===n.LINEAR_MIPMAP_LINEAR}};t["a"]=Object.freeze(n)},"23b6":function(e,t,i){"use strict";var r=i("daa2"),n={CLAMP_TO_EDGE:r["a"].CLAMP_TO_EDGE,REPEAT:r["a"].REPEAT,MIRRORED_REPEAT:r["a"].MIRRORED_REPEAT,validate:function(e){return e===n.CLAMP_TO_EDGE||e===n.REPEAT||e===n.MIRRORED_REPEAT}};t["a"]=Object.freeze(n)},3022:function(e,t,i){"use strict";var r=i("daa2"),n={NEAREST:r["a"].NEAREST,LINEAR:r["a"].LINEAR,validate:function(e){return e===n.NEAREST||e===n.LINEAR}};t["a"]=Object.freeze(n)},3550:function(e,t,i){"use strict";var r=i("daa2"),n={RGBA4:r["a"].RGBA4,RGB5_A1:r["a"].RGB5_A1,RGB565:r["a"].RGB565,DEPTH_COMPONENT16:r["a"].DEPTH_COMPONENT16,STENCIL_INDEX8:r["a"].STENCIL_INDEX8,DEPTH_STENCIL:r["a"].DEPTH_STENCIL,validate:function(e){return e===n.RGBA4||e===n.RGB5_A1||e===n.RGB565||e===n.DEPTH_COMPONENT16||e===n.STENCIL_INDEX8||e===n.DEPTH_STENCIL}};t["a"]=Object.freeze(n)},4521:function(e,t,i){"use strict";var r=i("2f63"),n=i("7d62"),a=i("e90c"),o=i("5770");function s(e){this._context=e,this._shaders={},this._numberOfShaders=0,this._shadersToRelease={}}function c(e,t){for(var i=t.derivedKeywords,r=i.length,n=0;n<r;++n){var a=i[n]+t.keyword,o=e._shaders[a];c(e,o)}delete e._shaders[t.keyword],t.shaderProgram.finalDestroy()}Object.defineProperties(s.prototype,{numberOfShaders:{get:function(){return this._numberOfShaders}}}),s.prototype.replaceShaderProgram=function(e){return Object(r["a"])(e.shaderProgram)&&e.shaderProgram.destroy(),this.getShaderProgram(e)},s.prototype.getShaderProgram=function(e){var t=e.vertexShaderSource,i=e.fragmentShaderSource,n=e.attributeLocations;"string"===typeof t&&(t=new o["a"]({sources:[t]})),"string"===typeof i&&(i=new o["a"]({sources:[i]}));var s,c=t.createCombinedVertexShader(this._context),u=i.createCombinedFragmentShader(this._context),l=c+u+JSON.stringify(n);if(Object(r["a"])(this._shaders[l]))s=this._shaders[l],delete this._shadersToRelease[l];else{var h=this._context,f=new a["a"]({gl:h._gl,logShaderCompilation:h.logShaderCompilation,debugShaders:h.debugShaders,vertexShaderSource:t,vertexShaderText:c,fragmentShaderSource:i,fragmentShaderText:u,attributeLocations:n});s={cache:this,shaderProgram:f,keyword:l,derivedKeywords:[],count:0},f._cachedShader=s,this._shaders[l]=s,++this._numberOfShaders}return++s.count,s.shaderProgram},s.prototype.replaceDerivedShaderProgram=function(e,t,i){var n=e._cachedShader,a=t+n.keyword,o=this._shaders[a];if(Object(r["a"])(o)){c(this,o);var s=n.derivedKeywords.indexOf(t);s>-1&&n.derivedKeywords.splice(s,1)}return this.createDerivedShaderProgram(e,t,i)},s.prototype.getDerivedShaderProgram=function(e,t){var i=e._cachedShader,n=t+i.keyword,a=this._shaders[n];if(Object(r["a"])(a))return a.shaderProgram},s.prototype.createDerivedShaderProgram=function(e,t,i){var r=e._cachedShader,n=t+r.keyword,s=i.vertexShaderSource,c=i.fragmentShaderSource,u=i.attributeLocations;"string"===typeof s&&(s=new o["a"]({sources:[s]})),"string"===typeof c&&(c=new o["a"]({sources:[c]}));var l=this._context,h=s.createCombinedVertexShader(l),f=c.createCombinedFragmentShader(l),_=new a["a"]({gl:l._gl,logShaderCompilation:l.logShaderCompilation,debugShaders:l.debugShaders,vertexShaderSource:s,vertexShaderText:h,fragmentShaderSource:c,fragmentShaderText:f,attributeLocations:u}),d={cache:this,shaderProgram:_,keyword:n,derivedKeywords:[],count:0};return r.derivedKeywords.push(t),_._cachedShader=d,this._shaders[n]=d,_},s.prototype.destroyReleasedShaderPrograms=function(){var e=this._shadersToRelease;for(var t in e)if(e.hasOwnProperty(t)){var i=e[t];c(this,i),--this._numberOfShaders}this._shadersToRelease={}},s.prototype.releaseShaderProgram=function(e){if(Object(r["a"])(e)){var t=e._cachedShader;t&&0===--t.count&&(this._shadersToRelease[t.keyword]=t)}},s.prototype.isDestroyed=function(){return!1},s.prototype.destroy=function(){var e=this._shaders;for(var t in e)e.hasOwnProperty(t)&&e[t].shaderProgram.finalDestroy();return Object(n["a"])(this)},t["a"]=s},5770:function(e,t,i){"use strict";var r=i("535a"),n=i("2f63"),a=i("99fe"),o=i("726d"),s=i("e945");function c(e){return e=e.replace(/\/\/.*/g,""),e.replace(/\/\*\*[\s\S]*?\*\//gm,(function(e){for(var t=e.match(/\n/gm).length,i="",r=0;r<t;++r)i+="\n";return i}))}function u(e,t,i){for(var r,a=0;a<i.length;++a)i[a].name===e&&(r=i[a]);return Object(n["a"])(r)||(t=c(t),r={name:e,glslSource:t,dependsOn:[],requiredBy:[],evaluated:!1},i.push(r)),r}function l(e,t){if(!e.evaluated){e.evaluated=!0;var i=e.glslSource.match(/\bczm_[a-zA-Z0-9_]*/g);Object(n["a"])(i)&&null!==i&&(i=i.filter((function(e,t){return i.indexOf(e)===t})),i.forEach((function(i){if(i!==e.name&&d._czmBuiltinsAndUniforms.hasOwnProperty(i)){var r=u(i,d._czmBuiltinsAndUniforms[i],t);e.dependsOn.push(r),r.requiredBy.push(e),l(r,t)}})))}}function h(e){var t=[],i=[];while(e.length>0){var r=e.pop();i.push(r),0===r.requiredBy.length&&t.push(r)}while(t.length>0){var n=t.shift();e.push(n);for(var a=0;a<n.dependsOn.length;++a){var o=n.dependsOn[a],s=o.requiredBy.indexOf(n);o.requiredBy.splice(s,1),0===o.requiredBy.length&&t.push(o)}}for(var c=[],u=0;u<i.length;++u)0!==i[u].requiredBy.length&&c.push(i[u])}function f(e){var t=[],i=u("main",e,t);l(i,t),h(t);for(var r="",n=t.length-1;n>=0;--n)r=r+t[n].glslSource+"\n";return r.replace(i.glslSource,"")}function _(e,t,i){var r,o,s,u="",l=e.sources;if(Object(n["a"])(l))for(r=0,o=l.length;r<o;++r)u+="\n#line 0\n"+l[r];u=c(u),u=u.replace(/#version\s+(.*?)\n/gm,(function(e,t){return s=t,"\n"}));var h=[];u=u.replace(/#extension.*\n/gm,(function(e){return h.push(e),"\n"})),u=u.replace(/precision\s(lowp|mediump|highp)\s(float|int);/,"");var _=e.pickColorQualifier;Object(n["a"])(_)&&(u=d.createPickFragmentShaderSource(u,_));var m="";Object(n["a"])(s)&&(m="#version "+s+"\n");var p=h.length;for(r=0;r<p;r++)m+=h[r];t&&(m+="#ifdef GL_FRAGMENT_PRECISION_HIGH\n    precision highp float;\n#else\n    precision mediump float;\n    #define highp mediump\n#endif\n\n");var v=e.defines;if(Object(n["a"])(v))for(r=0,o=v.length;r<o;++r){var g=v[r];0!==g.length&&(m+="#define "+g+"\n")}return i.webgl2&&(m+="#define OUTPUT_DECLARATION\n\n"),i.textureFloatLinear&&(m+="#define OES_texture_float_linear\n\n"),i.floatingPointTexture&&(m+="#define OES_texture_float\n\n"),e.includeBuiltIns&&(m+=f(u)),m+="\n#line 0\n",m+=u,i.webgl2&&(m=Object(a["a"])(m,t,!0)),m}function d(e){e=Object(r["a"])(e,r["a"].EMPTY_OBJECT);var t=e.pickColorQualifier;this.defines=Object(n["a"])(e.defines)?e.defines.slice(0):[],this.sources=Object(n["a"])(e.sources)?e.sources.slice(0):[],this.pickColorQualifier=t,this.includeBuiltIns=Object(r["a"])(e.includeBuiltIns,!0)}for(var m in d.prototype.clone=function(){return new d({sources:this.sources,defines:this.defines,pickColorQualifier:this.pickColorQualifier,includeBuiltIns:this.includeBuiltIns})},d.replaceMain=function(e,t){return t="void "+t+"()",e.replace(/void\s+main\s*\(\s*(?:void)?\s*\)/g,t)},d.prototype.createCombinedVertexShader=function(e){return _(this,!1,e)},d.prototype.createCombinedFragmentShader=function(e){return _(this,!0,e)},d._czmBuiltinsAndUniforms={},o["a"])o["a"].hasOwnProperty(m)&&(d._czmBuiltinsAndUniforms[m]=o["a"][m]);for(var p in s["a"])if(s["a"].hasOwnProperty(p)){var v=s["a"][p];"function"===typeof v.getDeclaration&&(d._czmBuiltinsAndUniforms[p]=v.getDeclaration(p))}d.createPickVertexShaderSource=function(e){var t=d.replaceMain(e,"czm_old_main"),i="attribute vec4 pickColor; \nvarying vec4 czm_pickColor; \nvoid main() \n{ \n    czm_old_main(); \n    czm_pickColor = pickColor; \n}";return t+"\n"+i},d.createPickFragmentShaderSource=function(e,t){var i=d.replaceMain(e,"czm_old_main"),r=t+" vec4 czm_pickColor; \nvoid main() \n{ \n    czm_old_main(); \n    if (gl_FragColor.a == 0.0) { \n       discard; \n    } \n    gl_FragColor = czm_pickColor; \n}";return i+"\n"+r},d.findVarying=function(e,t){for(var i=e.sources,r=t.length,n=0;n<r;++n)for(var a=t[n],o=i.length,s=0;s<o;++s)if(-1!==i[s].indexOf(a))return a};var g=["v_normalEC","v_normal"];d.findNormalVarying=function(e){return d.findVarying(e,g)};var b=["v_positionEC"];d.findPositionVarying=function(e){return d.findVarying(e,b)},t["a"]=d},"61ec":function(e,t,i){"use strict";var r=i("2f63"),n=i("7d62");function a(){this._textures={},this._numberOfTextures=0,this._texturesToRelease={}}Object.defineProperties(a.prototype,{numberOfTextures:{get:function(){return this._numberOfTextures}}}),a.prototype.getTexture=function(e){var t=this._textures[e];if(Object(r["a"])(t))return delete this._texturesToRelease[e],++t.count,t.texture},a.prototype.addTexture=function(e,t){var i={texture:t,count:1};t.finalDestroy=t.destroy;var r=this;t.destroy=function(){0===--i.count&&(r._texturesToRelease[e]=i)},this._textures[e]=i,++this._numberOfTextures},a.prototype.destroyReleasedTextures=function(){var e=this._texturesToRelease;for(var t in e)if(e.hasOwnProperty(t)){var i=e[t];delete this._textures[t],i.texture.finalDestroy(),--this._numberOfTextures}this._texturesToRelease={}},a.prototype.isDestroyed=function(){return!1},a.prototype.destroy=function(){var e=this._textures;for(var t in e)e.hasOwnProperty(t)&&e[t].texture.finalDestroy();return Object(n["a"])(this)},t["a"]=a},"6c84":function(e,t,i){"use strict";var r=i("535a"),n=i("2f63"),a=i("3022"),o=i("03f1"),s=i("23b6");function c(e){e=Object(r["a"])(e,r["a"].EMPTY_OBJECT);var t=Object(r["a"])(e.wrapS,s["a"].CLAMP_TO_EDGE),i=Object(r["a"])(e.wrapT,s["a"].CLAMP_TO_EDGE),c=Object(r["a"])(e.minificationFilter,o["a"].LINEAR),u=Object(r["a"])(e.magnificationFilter,a["a"].LINEAR),l=Object(n["a"])(e.maximumAnisotropy)?e.maximumAnisotropy:1;this._wrapS=t,this._wrapT=i,this._minificationFilter=c,this._magnificationFilter=u,this._maximumAnisotropy=l}Object.defineProperties(c.prototype,{wrapS:{get:function(){return this._wrapS}},wrapT:{get:function(){return this._wrapT}},minificationFilter:{get:function(){return this._minificationFilter}},magnificationFilter:{get:function(){return this._magnificationFilter}},maximumAnisotropy:{get:function(){return this._maximumAnisotropy}}}),c.equals=function(e,t){return e===t||Object(n["a"])(e)&&Object(n["a"])(t)&&e._wrapS===t._wrapS&&e._wrapT===t._wrapT&&e._minificationFilter===t._minificationFilter&&e._magnificationFilter===t._magnificationFilter&&e._maximumAnisotropy===t._maximumAnisotropy},c.NEAREST=Object.freeze(new c({wrapS:s["a"].CLAMP_TO_EDGE,wrapT:s["a"].CLAMP_TO_EDGE,minificationFilter:o["a"].NEAREST,magnificationFilter:a["a"].NEAREST})),t["a"]=c},"6dc0":function(e,t,i){"use strict";var r=i("77af"),n=i("bd8d"),a=i("535a"),o=i("2f63"),s=i("daa2"),c=i("b48e");function u(e){var t=Object(a["a"])(e,a["a"].EMPTY_OBJECT),i=Object(a["a"])(t.cull,a["a"].EMPTY_OBJECT),u=Object(a["a"])(t.polygonOffset,a["a"].EMPTY_OBJECT),l=Object(a["a"])(t.scissorTest,a["a"].EMPTY_OBJECT),h=Object(a["a"])(l.rectangle,a["a"].EMPTY_OBJECT),f=Object(a["a"])(t.depthRange,a["a"].EMPTY_OBJECT),_=Object(a["a"])(t.depthTest,a["a"].EMPTY_OBJECT),d=Object(a["a"])(t.colorMask,a["a"].EMPTY_OBJECT),m=Object(a["a"])(t.blending,a["a"].EMPTY_OBJECT),p=Object(a["a"])(m.color,a["a"].EMPTY_OBJECT),v=Object(a["a"])(t.stencilTest,a["a"].EMPTY_OBJECT),g=Object(a["a"])(v.frontOperation,a["a"].EMPTY_OBJECT),b=Object(a["a"])(v.backOperation,a["a"].EMPTY_OBJECT),y=Object(a["a"])(t.sampleCoverage,a["a"].EMPTY_OBJECT),O=t.viewport;this.frontFace=Object(a["a"])(t.frontFace,c["a"].COUNTER_CLOCKWISE),this.cull={enabled:Object(a["a"])(i.enabled,!1),face:Object(a["a"])(i.face,s["a"].BACK)},this.lineWidth=Object(a["a"])(t.lineWidth,1),this.polygonOffset={enabled:Object(a["a"])(u.enabled,!1),factor:Object(a["a"])(u.factor,0),units:Object(a["a"])(u.units,0)},this.scissorTest={enabled:Object(a["a"])(l.enabled,!1),rectangle:r["a"].clone(h)},this.depthRange={near:Object(a["a"])(f.near,0),far:Object(a["a"])(f.far,1)},this.depthTest={enabled:Object(a["a"])(_.enabled,!1),func:Object(a["a"])(_.func,s["a"].LESS)},this.colorMask={red:Object(a["a"])(d.red,!0),green:Object(a["a"])(d.green,!0),blue:Object(a["a"])(d.blue,!0),alpha:Object(a["a"])(d.alpha,!0)},this.depthMask=Object(a["a"])(t.depthMask,!0),this.stencilMask=Object(a["a"])(t.stencilMask,-1),this.blending={enabled:Object(a["a"])(m.enabled,!1),color:new n["a"](Object(a["a"])(p.red,0),Object(a["a"])(p.green,0),Object(a["a"])(p.blue,0),Object(a["a"])(p.alpha,0)),equationRgb:Object(a["a"])(m.equationRgb,s["a"].FUNC_ADD),equationAlpha:Object(a["a"])(m.equationAlpha,s["a"].FUNC_ADD),functionSourceRgb:Object(a["a"])(m.functionSourceRgb,s["a"].ONE),functionSourceAlpha:Object(a["a"])(m.functionSourceAlpha,s["a"].ONE),functionDestinationRgb:Object(a["a"])(m.functionDestinationRgb,s["a"].ZERO),functionDestinationAlpha:Object(a["a"])(m.functionDestinationAlpha,s["a"].ZERO)},this.stencilTest={enabled:Object(a["a"])(v.enabled,!1),frontFunction:Object(a["a"])(v.frontFunction,s["a"].ALWAYS),backFunction:Object(a["a"])(v.backFunction,s["a"].ALWAYS),reference:Object(a["a"])(v.reference,0),mask:Object(a["a"])(v.mask,-1),frontOperation:{fail:Object(a["a"])(g.fail,s["a"].KEEP),zFail:Object(a["a"])(g.zFail,s["a"].KEEP),zPass:Object(a["a"])(g.zPass,s["a"].KEEP)},backOperation:{fail:Object(a["a"])(b.fail,s["a"].KEEP),zFail:Object(a["a"])(b.zFail,s["a"].KEEP),zPass:Object(a["a"])(b.zPass,s["a"].KEEP)}},this.sampleCoverage={enabled:Object(a["a"])(y.enabled,!1),value:Object(a["a"])(y.value,1),invert:Object(a["a"])(y.invert,!1)},this.viewport=Object(o["a"])(O)?new r["a"](O.x,O.y,O.width,O.height):void 0,this.id=0,this._applyFunctions=[]}var l=0,h={};function f(e,t,i){i?e.enable(t):e.disable(t)}function _(e,t){e.frontFace(t.frontFace)}function d(e,t){var i=t.cull,r=i.enabled;f(e,e.CULL_FACE,r),r&&e.cullFace(i.face)}function m(e,t){e.lineWidth(t.lineWidth)}function p(e,t){var i=t.polygonOffset,r=i.enabled;f(e,e.POLYGON_OFFSET_FILL,r),r&&e.polygonOffset(i.factor,i.units)}function v(e,t,i){var r=t.scissorTest,n=Object(o["a"])(i.scissorTest)?i.scissorTest.enabled:r.enabled;if(f(e,e.SCISSOR_TEST,n),n){var a=Object(o["a"])(i.scissorTest)?i.scissorTest.rectangle:r.rectangle;e.scissor(a.x,a.y,a.width,a.height)}}function g(e,t){var i=t.depthRange;e.depthRange(i.near,i.far)}function b(e,t){var i=t.depthTest,r=i.enabled;f(e,e.DEPTH_TEST,r),r&&e.depthFunc(i.func)}function y(e,t){var i=t.colorMask;e.colorMask(i.red,i.green,i.blue,i.alpha)}function O(e,t){e.depthMask(t.depthMask)}function T(e,t){e.stencilMask(t.stencilMask)}function D(e,t){e.blendColor(t.red,t.green,t.blue,t.alpha)}function E(e,t,i){var r=t.blending,n=Object(o["a"])(i.blendingEnabled)?i.blendingEnabled:r.enabled;f(e,e.BLEND,n),n&&(D(e,r.color),e.blendEquationSeparate(r.equationRgb,r.equationAlpha),e.blendFuncSeparate(r.functionSourceRgb,r.functionDestinationRgb,r.functionSourceAlpha,r.functionDestinationAlpha))}function x(e,t){var i=t.stencilTest,r=i.enabled;if(f(e,e.STENCIL_TEST,r),r){var n=i.frontFunction,a=i.backFunction,o=i.reference,s=i.mask;e.stencilFunc(n,o,s),e.stencilFuncSeparate(e.BACK,a,o,s),e.stencilFuncSeparate(e.FRONT,n,o,s);var c=i.frontOperation,u=c.fail,l=c.zFail,h=c.zPass;e.stencilOpSeparate(e.FRONT,u,l,h);var _=i.backOperation,d=_.fail,m=_.zFail,p=_.zPass;e.stencilOpSeparate(e.BACK,d,m,p)}}function w(e,t){var i=t.sampleCoverage,r=i.enabled;f(e,e.SAMPLE_COVERAGE,r),r&&e.sampleCoverage(i.value,i.invert)}u.fromCache=function(e){var t=JSON.stringify(e),i=h[t];if(Object(o["a"])(i))return++i.referenceCount,i.state;var r=new u(e),n=JSON.stringify(r);return i=h[n],Object(o["a"])(i)||(r.id=l++,i={referenceCount:0,state:r},h[n]=i),++i.referenceCount,h[t]={referenceCount:1,state:i.state},i.state},u.removeFromCache=function(e){var t=new u(e),i=JSON.stringify(t),r=h[i],n=JSON.stringify(e),a=h[n];Object(o["a"])(a)&&(--a.referenceCount,0===a.referenceCount&&(delete h[n],Object(o["a"])(r)&&--r.referenceCount)),Object(o["a"])(r)&&0===r.referenceCount&&delete h[i]},u.getCache=function(){return h},u.clearCache=function(){h={}};var P=new r["a"];function S(e,t,i){var r=Object(a["a"])(t.viewport,i.viewport);Object(o["a"])(r)||(r=P,r.width=i.context.drawingBufferWidth,r.height=i.context.drawingBufferHeight),i.context.uniformState.viewport=r,e.viewport(r.x,r.y,r.width,r.height)}function A(e,t){var i=[];return e.frontFace!==t.frontFace&&i.push(_),e.cull.enabled===t.cull.enabled&&e.cull.face===t.cull.face||i.push(d),e.lineWidth!==t.lineWidth&&i.push(m),e.polygonOffset.enabled===t.polygonOffset.enabled&&e.polygonOffset.factor===t.polygonOffset.factor&&e.polygonOffset.units===t.polygonOffset.units||i.push(p),e.depthRange.near===t.depthRange.near&&e.depthRange.far===t.depthRange.far||i.push(g),e.depthTest.enabled===t.depthTest.enabled&&e.depthTest.func===t.depthTest.func||i.push(b),e.colorMask.red===t.colorMask.red&&e.colorMask.green===t.colorMask.green&&e.colorMask.blue===t.colorMask.blue&&e.colorMask.alpha===t.colorMask.alpha||i.push(y),e.depthMask!==t.depthMask&&i.push(O),e.stencilMask!==t.stencilMask&&i.push(T),e.stencilTest.enabled===t.stencilTest.enabled&&e.stencilTest.frontFunction===t.stencilTest.frontFunction&&e.stencilTest.backFunction===t.stencilTest.backFunction&&e.stencilTest.reference===t.stencilTest.reference&&e.stencilTest.mask===t.stencilTest.mask&&e.stencilTest.frontOperation.fail===t.stencilTest.frontOperation.fail&&e.stencilTest.frontOperation.zFail===t.stencilTest.frontOperation.zFail&&e.stencilTest.backOperation.fail===t.stencilTest.backOperation.fail&&e.stencilTest.backOperation.zFail===t.stencilTest.backOperation.zFail&&e.stencilTest.backOperation.zPass===t.stencilTest.backOperation.zPass||i.push(x),e.sampleCoverage.enabled===t.sampleCoverage.enabled&&e.sampleCoverage.value===t.sampleCoverage.value&&e.sampleCoverage.invert===t.sampleCoverage.invert||i.push(w),i}u.apply=function(e,t,i){_(e,t),d(e,t),m(e,t),p(e,t),g(e,t),b(e,t),y(e,t),O(e,t),T(e,t),x(e,t),w(e,t),v(e,t,i),E(e,t,i),S(e,t,i)},u.partialApply=function(e,t,i,r,n,a){if(t!==i){var s=i._applyFunctions[t.id];Object(o["a"])(s)||(s=A(t,i),i._applyFunctions[t.id]=s);for(var c=s.length,u=0;u<c;++u)s[u](e,i)}var l=Object(o["a"])(r.scissorTest)?r.scissorTest:t.scissorTest,h=Object(o["a"])(n.scissorTest)?n.scissorTest:i.scissorTest;(l!==h||a)&&v(e,i,n);var f=Object(o["a"])(r.blendingEnabled)?r.blendingEnabled:t.blending.enabled,_=Object(o["a"])(n.blendingEnabled)?n.blendingEnabled:i.blending.enabled;(f!==_||_&&t.blending!==i.blending)&&E(e,i,n),t===i&&r===n&&r.context===n.context||S(e,i,n)},u.getState=function(e){return{frontFace:e.frontFace,cull:{enabled:e.cull.enabled,face:e.cull.face},lineWidth:e.lineWidth,polygonOffset:{enabled:e.polygonOffset.enabled,factor:e.polygonOffset.factor,units:e.polygonOffset.units},scissorTest:{enabled:e.scissorTest.enabled,rectangle:r["a"].clone(e.scissorTest.rectangle)},depthRange:{near:e.depthRange.near,far:e.depthRange.far},depthTest:{enabled:e.depthTest.enabled,func:e.depthTest.func},colorMask:{red:e.colorMask.red,green:e.colorMask.green,blue:e.colorMask.blue,alpha:e.colorMask.alpha},depthMask:e.depthMask,stencilMask:e.stencilMask,blending:{enabled:e.blending.enabled,color:n["a"].clone(e.blending.color),equationRgb:e.blending.equationRgb,equationAlpha:e.blending.equationAlpha,functionSourceRgb:e.blending.functionSourceRgb,functionSourceAlpha:e.blending.functionSourceAlpha,functionDestinationRgb:e.blending.functionDestinationRgb,functionDestinationAlpha:e.blending.functionDestinationAlpha},stencilTest:{enabled:e.stencilTest.enabled,frontFunction:e.stencilTest.frontFunction,backFunction:e.stencilTest.backFunction,reference:e.stencilTest.reference,mask:e.stencilTest.mask,frontOperation:{fail:e.stencilTest.frontOperation.fail,zFail:e.stencilTest.frontOperation.zFail,zPass:e.stencilTest.frontOperation.zPass},backOperation:{fail:e.stencilTest.backOperation.fail,zFail:e.stencilTest.backOperation.zFail,zPass:e.stencilTest.backOperation.zPass}},sampleCoverage:{enabled:e.sampleCoverage.enabled,value:e.sampleCoverage.value,invert:e.sampleCoverage.invert},viewport:Object(o["a"])(e.viewport)?r["a"].clone(e.viewport):void 0}},t["a"]=u},"6ef5":function(e,t,i){"use strict";var r=i("daa2"),n={UNSIGNED_BYTE:r["a"].UNSIGNED_BYTE,UNSIGNED_SHORT:r["a"].UNSIGNED_SHORT,UNSIGNED_INT:r["a"].UNSIGNED_INT,FLOAT:r["a"].FLOAT,HALF_FLOAT:r["a"].HALF_FLOAT_OES,UNSIGNED_INT_24_8:r["a"].UNSIGNED_INT_24_8,UNSIGNED_SHORT_4_4_4_4:r["a"].UNSIGNED_SHORT_4_4_4_4,UNSIGNED_SHORT_5_5_5_1:r["a"].UNSIGNED_SHORT_5_5_5_1,UNSIGNED_SHORT_5_6_5:r["a"].UNSIGNED_SHORT_5_6_5,toWebGLConstant:function(e,t){switch(e){case n.UNSIGNED_BYTE:return r["a"].UNSIGNED_BYTE;case n.UNSIGNED_SHORT:return r["a"].UNSIGNED_SHORT;case n.UNSIGNED_INT:return r["a"].UNSIGNED_INT;case n.FLOAT:return r["a"].FLOAT;case n.HALF_FLOAT:return t.webgl2?r["a"].HALF_FLOAT:r["a"].HALF_FLOAT_OES;case n.UNSIGNED_INT_24_8:return r["a"].UNSIGNED_INT_24_8;case n.UNSIGNED_SHORT_4_4_4_4:return r["a"].UNSIGNED_SHORT_4_4_4_4;case n.UNSIGNED_SHORT_5_5_5_1:return r["a"].UNSIGNED_SHORT_5_5_5_1;case n.UNSIGNED_SHORT_5_6_5:return n.UNSIGNED_SHORT_5_6_5}},isPacked:function(e){return e===n.UNSIGNED_INT_24_8||e===n.UNSIGNED_SHORT_4_4_4_4||e===n.UNSIGNED_SHORT_5_5_5_1||e===n.UNSIGNED_SHORT_5_6_5},sizeInBytes:function(e){switch(e){case n.UNSIGNED_BYTE:return 1;case n.UNSIGNED_SHORT:case n.UNSIGNED_SHORT_4_4_4_4:case n.UNSIGNED_SHORT_5_5_5_1:case n.UNSIGNED_SHORT_5_6_5:case n.HALF_FLOAT:return 2;case n.UNSIGNED_INT:case n.FLOAT:case n.UNSIGNED_INT_24_8:return 4}},validate:function(e){return e===n.UNSIGNED_BYTE||e===n.UNSIGNED_SHORT||e===n.UNSIGNED_INT||e===n.FLOAT||e===n.HALF_FLOAT||e===n.UNSIGNED_INT_24_8||e===n.UNSIGNED_SHORT_4_4_4_4||e===n.UNSIGNED_SHORT_5_5_5_1||e===n.UNSIGNED_SHORT_5_6_5}};t["a"]=Object.freeze(n)},"7c5e":function(e,t,i){"use strict";var r=i("abab"),n=i("535a"),a=i("2f63"),o=i("7d62"),s=i("d2c7"),c=i("0123"),u=i("93da"),l=i("283e"),h=i("f20a"),f=i("8b68"),_=i("b997");function d(e,t,i,o){var s=Object(a["a"])(t.vertexBuffer),c=Object(a["a"])(t.value),u=t.value?t.value.length:t.componentsPerAttribute,l={index:Object(n["a"])(t.index,i),enabled:Object(n["a"])(t.enabled,!0),vertexBuffer:t.vertexBuffer,value:c?t.value.slice(0):void 0,componentsPerAttribute:u,componentDatatype:Object(n["a"])(t.componentDatatype,r["a"].FLOAT),normalize:Object(n["a"])(t.normalize,!1),offsetInBytes:Object(n["a"])(t.offsetInBytes,0),strideInBytes:Object(n["a"])(t.strideInBytes,0),instanceDivisor:Object(n["a"])(t.instanceDivisor,0)};if(s)l.vertexAttrib=function(e){var t=this.index;e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer._getBuffer()),e.vertexAttribPointer(t,this.componentsPerAttribute,this.componentDatatype,this.normalize,this.strideInBytes,this.offsetInBytes),e.enableVertexAttribArray(t),this.instanceDivisor>0&&(o.glVertexAttribDivisor(t,this.instanceDivisor),o._vertexAttribDivisors[t]=this.instanceDivisor,o._previousDrawInstanced=!0)},l.disableVertexAttribArray=function(e){e.disableVertexAttribArray(this.index),this.instanceDivisor>0&&o.glVertexAttribDivisor(i,0)};else{switch(l.componentsPerAttribute){case 1:l.vertexAttrib=function(e){e.vertexAttrib1fv(this.index,this.value)};break;case 2:l.vertexAttrib=function(e){e.vertexAttrib2fv(this.index,this.value)};break;case 3:l.vertexAttrib=function(e){e.vertexAttrib3fv(this.index,this.value)};break;case 4:l.vertexAttrib=function(e){e.vertexAttrib4fv(this.index,this.value)};break}l.disableVertexAttribArray=function(e){}}e.push(l)}function m(e,t,i){for(var r=0;r<t.length;++r){var n=t[r];n.enabled&&n.vertexAttrib(e)}Object(a["a"])(i)&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,i._getBuffer())}function p(e){e=Object(n["a"])(e,n["a"].EMPTY_OBJECT);var t,i,o=e.context,s=o._gl,c=e.attributes,u=e.indexBuffer,l=[],h=1,f=!1,_=!1,p=c.length;for(t=0;t<p;++t)d(l,c[t],t,o);for(p=l.length,t=0;t<p;++t){var v=l[t];if(Object(a["a"])(v.vertexBuffer)&&0===v.instanceDivisor){var g=v.strideInBytes||v.componentsPerAttribute*r["a"].getSizeInBytes(v.componentDatatype);h=v.vertexBuffer.sizeInBytes/g;break}}for(t=0;t<p;++t)l[t].instanceDivisor>0&&(f=!0),Object(a["a"])(l[t].value)&&(_=!0);o.vertexArrayObject&&(i=o.glCreateVertexArray(),o.glBindVertexArray(i),m(s,l,u),o.glBindVertexArray(null)),this._numberOfVertices=h,this._hasInstancedAttributes=f,this._hasConstantAttributes=_,this._context=o,this._gl=s,this._vao=i,this._attributes=l,this._indexBuffer=u}function v(e){return e.values.length/e.componentsPerAttribute}function g(e){return r["a"].getSizeInBytes(e.componentDatatype)*e.componentsPerAttribute}function b(e){var t,i,n,o,s=[];for(i in e)e.hasOwnProperty(i)&&Object(a["a"])(e[i])&&Object(a["a"])(e[i].values)&&(s.push(i),e[i].componentDatatype===r["a"].DOUBLE&&(e[i].componentDatatype=r["a"].FLOAT,e[i].values=r["a"].createTypedArray(r["a"].FLOAT,e[i].values)));var c=s.length;if(c>0)for(o=v(e[s[0]]),t=1;t<c;++t){var u=v(e[s[t]]);if(u!==o)throw new l["a"]("Each attribute list must have the same number of vertices.  Attribute "+s[t]+" has a different number of vertices ("+u.toString()+") than attribute "+s[0]+" ("+o.toString()+").")}s.sort((function(t,i){return r["a"].getSizeInBytes(e[i].componentDatatype)-r["a"].getSizeInBytes(e[t].componentDatatype)}));var h=0,f={};for(t=0;t<c;++t)i=s[t],n=e[i],f[i]=h,h+=g(n);if(h>0){var _=r["a"].getSizeInBytes(e[s[0]].componentDatatype),d=h%_;0!==d&&(h+=_-d);var m=o*h,p=new ArrayBuffer(m),b={};for(t=0;t<c;++t){i=s[t];var y=r["a"].getSizeInBytes(e[i].componentDatatype);b[i]={pointer:r["a"].createTypedArray(e[i].componentDatatype,p),index:f[i]/y,strideInComponentType:h/y}}for(t=0;t<o;++t)for(var O=0;O<c;++O){i=s[O],n=e[i];for(var T=n.values,D=b[i],E=D.pointer,x=n.componentsPerAttribute,w=0;w<x;++w)E[D.index+w]=T[t*x+w];D.index+=D.strideInComponentType}return{buffer:p,offsetsInBytes:f,vertexSizeInBytes:h}}}function y(e){var t=e._context,i=e._hasInstancedAttributes;if(i||t._previousDrawInstanced){t._previousDrawInstanced=i;var r,n=t._vertexAttribDivisors,a=e._attributes,o=_["a"].maximumVertexAttributes;if(i){var s=a.length;for(r=0;r<s;++r){var c=a[r];if(c.enabled){var u=c.instanceDivisor,l=c.index;u!==n[l]&&(t.glVertexAttribDivisor(l,u),n[l]=u)}}}else for(r=0;r<o;++r)n[r]>0&&(t.glVertexAttribDivisor(r,0),n[r]=0)}}function O(e,t){for(var i=e._attributes,r=i.length,n=0;n<r;++n){var o=i[n];o.enabled&&Object(a["a"])(o.value)&&o.vertexAttrib(t)}}p.fromGeometry=function(e){e=Object(n["a"])(e,n["a"].EMPTY_OBJECT);var t,i,o,l,_=e.context,d=Object(n["a"])(e.geometry,n["a"].EMPTY_OBJECT),m=Object(n["a"])(e.bufferUsage,f["a"].DYNAMIC_DRAW),v=Object(n["a"])(e.attributeLocations,n["a"].EMPTY_OBJECT),g=Object(n["a"])(e.interleave,!1),y=e.vertexArrayAttributes,O=Object(a["a"])(y)?y:[],T=d.attributes;if(g){var D=b(T);if(Object(a["a"])(D)){o=h["a"].createVertexBuffer({context:_,typedArray:D.buffer,usage:m});var E=D.offsetsInBytes,x=D.vertexSizeInBytes;for(t in T)T.hasOwnProperty(t)&&Object(a["a"])(T[t])&&(i=T[t],Object(a["a"])(i.values)?O.push({index:v[t],vertexBuffer:o,componentDatatype:i.componentDatatype,componentsPerAttribute:i.componentsPerAttribute,normalize:i.normalize,offsetInBytes:E[t],strideInBytes:x}):O.push({index:v[t],value:i.value,componentDatatype:i.componentDatatype,normalize:i.normalize}))}}else for(t in T)if(T.hasOwnProperty(t)&&Object(a["a"])(T[t])){i=T[t];var w=i.componentDatatype;w===r["a"].DOUBLE&&(w=r["a"].FLOAT),o=void 0,Object(a["a"])(i.values)&&(o=h["a"].createVertexBuffer({context:_,typedArray:r["a"].createTypedArray(w,i.values),usage:m})),O.push({index:v[t],vertexBuffer:o,value:i.value,componentDatatype:w,componentsPerAttribute:i.componentsPerAttribute,normalize:i.normalize})}var P=d.indices;return Object(a["a"])(P)&&(l=s["a"].computeNumberOfVertices(d)>=u["a"].SIXTY_FOUR_KILOBYTES&&_.elementIndexUint?h["a"].createIndexBuffer({context:_,typedArray:new Uint32Array(P),usage:m,indexDatatype:c["a"].UNSIGNED_INT}):h["a"].createIndexBuffer({context:_,typedArray:new Uint16Array(P),usage:m,indexDatatype:c["a"].UNSIGNED_SHORT})),new p({context:_,attributes:O,indexBuffer:l})},Object.defineProperties(p.prototype,{numberOfAttributes:{get:function(){return this._attributes.length}},numberOfVertices:{get:function(){return this._numberOfVertices}},indexBuffer:{get:function(){return this._indexBuffer}}}),p.prototype.getAttribute=function(e){return this._attributes[e]},p.prototype._bind=function(){Object(a["a"])(this._vao)?(this._context.glBindVertexArray(this._vao),this._context.instancedArrays&&y(this),this._hasConstantAttributes&&O(this,this._gl)):m(this._gl,this._attributes,this._indexBuffer)},p.prototype._unBind=function(){if(Object(a["a"])(this._vao))this._context.glBindVertexArray(null);else{for(var e=this._attributes,t=this._gl,i=0;i<e.length;++i){var r=e[i];r.enabled&&r.disableVertexAttribArray(t)}this._indexBuffer&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)}},p.prototype.isDestroyed=function(){return!1},p.prototype.destroy=function(){for(var e=this._attributes,t=0;t<e.length;++t){var i=e[t].vertexBuffer;Object(a["a"])(i)&&!i.isDestroyed()&&i.vertexArrayDestroyable&&i.destroy()}var r=this._indexBuffer;return Object(a["a"])(r)&&!r.isDestroyed()&&r.vertexArrayDestroyable&&r.destroy(),Object(a["a"])(this._vao)&&this._context.glDeleteVertexArray(this._vao),Object(o["a"])(this)},t["a"]=p},"8a65":function(e,t,i){"use strict";var r=i("535a"),n=i("2f63"),a=i("7d62"),o=i("b997"),s=i("3550");function c(e){e=Object(r["a"])(e,r["a"].EMPTY_OBJECT);var t=e.context,i=t._gl,a=(o["a"].maximumRenderbufferSize,Object(r["a"])(e.format,s["a"].RGBA4)),c=Object(n["a"])(e.width)?e.width:i.drawingBufferWidth,u=Object(n["a"])(e.height)?e.height:i.drawingBufferHeight;this._gl=i,this._format=a,this._width=c,this._height=u,this._renderbuffer=this._gl.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,this._renderbuffer),i.renderbufferStorage(i.RENDERBUFFER,a,c,u),i.bindRenderbuffer(i.RENDERBUFFER,null)}Object.defineProperties(c.prototype,{format:{get:function(){return this._format}},width:{get:function(){return this._width}},height:{get:function(){return this._height}}}),c.prototype._getRenderbuffer=function(){return this._renderbuffer},c.prototype.isDestroyed=function(){return!1},c.prototype.destroy=function(){return this._gl.deleteRenderbuffer(this._renderbuffer),Object(a["a"])(this)},t["a"]=c},"9d80":function(e,t,i){"use strict";var r=i("abab"),n=i("535a"),a=i("2f63"),o=i("7d62"),s=i("93da"),c=i("f20a"),u=i("8b68"),l=i("7c5e");function h(e,t,i,o){var s=h._verifyAttributes(t);i=Object(n["a"])(i,0);for(var c,u,l=[],f={},_=s.length,d=0;d<_;++d){var m=s[d];m.vertexBuffer?l.push(m):(u=m.usage,c=f[u],Object(a["a"])(c)||(c=f[u]=[]),c.push(m))}function p(e,t){return r["a"].getSizeInBytes(t.componentDatatype)-r["a"].getSizeInBytes(e.componentDatatype)}for(u in this._allBuffers=[],f)if(f.hasOwnProperty(u)){c=f[u],c.sort(p);var v=h._vertexSizeInBytes(c),g=c[0].usage,b={vertexSizeInBytes:v,vertexBuffer:void 0,usage:g,needsCommit:!1,arrayBuffer:void 0,arrayViews:h._createArrayViews(c,v)};this._allBuffers.push(b)}this._size=0,this._instanced=Object(n["a"])(o,!1),this._precreated=l,this._context=e,this.writers=void 0,this.va=void 0,this.resize(i)}h._verifyAttributes=function(e){for(var t=[],i=0;i<e.length;++i){var a=e[i],o={index:Object(n["a"])(a.index,i),enabled:Object(n["a"])(a.enabled,!0),componentsPerAttribute:a.componentsPerAttribute,componentDatatype:Object(n["a"])(a.componentDatatype,r["a"].FLOAT),normalize:Object(n["a"])(a.normalize,!1),vertexBuffer:a.vertexBuffer,usage:Object(n["a"])(a.usage,u["a"].STATIC_DRAW)};t.push(o)}for(var s=new Array(t.length),c=0;c<t.length;++c){var l=t[c],h=l.index;s[h]=!0}return t},h._vertexSizeInBytes=function(e){for(var t=0,i=e.length,n=0;n<i;++n){var a=e[n];t+=a.componentsPerAttribute*r["a"].getSizeInBytes(a.componentDatatype)}var o=i>0?r["a"].getSizeInBytes(e[0].componentDatatype):0,s=o>0?t%o:0,c=0===s?0:o-s;return t+=c,t},h._createArrayViews=function(e,t){for(var i=[],n=0,a=e.length,o=0;o<a;++o){var s=e[o],c=s.componentDatatype;i.push({index:s.index,enabled:s.enabled,componentsPerAttribute:s.componentsPerAttribute,componentDatatype:c,normalize:s.normalize,offsetInBytes:n,vertexSizeInComponentType:t/r["a"].getSizeInBytes(c),view:void 0}),n+=s.componentsPerAttribute*r["a"].getSizeInBytes(c)}return i},h.prototype.resize=function(e){this._size=e;var t=this._allBuffers;this.writers=[];for(var i=0,r=t.length;i<r;++i){var n=t[i];h._resize(n,this._size),h._appendWriters(this.writers,n)}m(this)},h._resize=function(e,t){if(e.vertexSizeInBytes>0){var i=new ArrayBuffer(t*e.vertexSizeInBytes);if(Object(a["a"])(e.arrayBuffer))for(var n=new Uint8Array(i),o=new Uint8Array(e.arrayBuffer),s=o.length,c=0;c<s;++c)n[c]=o[c];for(var u=e.arrayViews,l=u.length,h=0;h<l;++h){var f=u[h];f.view=r["a"].createArrayBufferView(f.componentDatatype,i,f.offsetInBytes)}e.arrayBuffer=i}};var f=[function(e,t,i){return function(r,n){t[r*i]=n,e.needsCommit=!0}},function(e,t,i){return function(r,n,a){var o=r*i;t[o]=n,t[o+1]=a,e.needsCommit=!0}},function(e,t,i){return function(r,n,a,o){var s=r*i;t[s]=n,t[s+1]=a,t[s+2]=o,e.needsCommit=!0}},function(e,t,i){return function(r,n,a,o,s){var c=r*i;t[c]=n,t[c+1]=a,t[c+2]=o,t[c+3]=s,e.needsCommit=!0}}];function _(e,t){if(t.needsCommit&&t.vertexSizeInBytes>0){t.needsCommit=!1;var i=t.vertexBuffer,r=e._size*t.vertexSizeInBytes,n=Object(a["a"])(i);if(!n||i.sizeInBytes<r)return n&&i.destroy(),t.vertexBuffer=c["a"].createVertexBuffer({context:e._context,typedArray:t.arrayBuffer,usage:t.usage}),t.vertexBuffer.vertexArrayDestroyable=!1,!0;t.vertexBuffer.copyFromArrayView(t.arrayBuffer)}return!1}function d(e,t,i){if(e.needsCommit&&e.vertexSizeInBytes>0){var r=e.vertexSizeInBytes*t,n=e.vertexSizeInBytes*i;e.vertexBuffer.copyFromArrayView(new Uint8Array(e.arrayBuffer,r,n),r)}}function m(e){var t=e.va;if(Object(a["a"])(t)){for(var i=t.length,r=0;r<i;++r)t[r].va.destroy();e.va=void 0}}h._appendWriters=function(e,t){for(var i=t.arrayViews,r=i.length,n=0;n<r;++n){var a=i[n];e[a.index]=f[a.componentsPerAttribute-1](t,a.view,a.vertexSizeInComponentType)}},h.prototype.commit=function(e){var t,i,r,n=!1,o=this._allBuffers;for(i=0,r=o.length;i<r;++i)t=o[i],n=_(this,t)||n;if(n||!Object(a["a"])(this.va)){m(this);for(var c=this.va=[],u=s["a"].SIXTY_FOUR_KILOBYTES-4,f=Object(a["a"])(e)&&!this._instanced?Math.ceil(this._size/u):1,d=0;d<f;++d){var p=[];for(i=0,r=o.length;i<r;++i){t=o[i];var v=d*(t.vertexSizeInBytes*u);h._appendAttributes(p,t,v,this._instanced)}p=p.concat(this._precreated),c.push({va:new l["a"]({context:this._context,attributes:p,indexBuffer:e}),indicesCount:1.5*(d!==f-1?u:this._size%u)})}}},h._appendAttributes=function(e,t,i,r){for(var n=t.arrayViews,a=n.length,o=0;o<a;++o){var s=n[o];e.push({index:s.index,enabled:s.enabled,componentsPerAttribute:s.componentsPerAttribute,componentDatatype:s.componentDatatype,normalize:s.normalize,vertexBuffer:t.vertexBuffer,offsetInBytes:i+s.offsetInBytes,strideInBytes:t.vertexSizeInBytes,instanceDivisor:r?1:0})}},h.prototype.subCommit=function(e,t){for(var i=this._allBuffers,r=0,n=i.length;r<n;++r)d(i[r],e,t)},h.prototype.endSubCommits=function(){for(var e=this._allBuffers,t=0,i=e.length;t<i;++t)e[t].needsCommit=!1},h.prototype.isDestroyed=function(){return!1},h.prototype.destroy=function(){for(var e=this._allBuffers,t=0,i=e.length;t<i;++t){var r=e[t];r.vertexBuffer=r.vertexBuffer&&r.vertexBuffer.destroy()}return m(this),Object(o["a"])(this)},t["a"]=h},a913:function(e,t,i){"use strict";var r=i("670c"),n=i("71ce"),a=i("535a"),o=i("2f63"),s=i("7d62"),c=i("e42d"),u=i("b0e6"),l=i("6ef5"),h=i("6c84"),f=i("3022"),_=i("03f1");function d(e){e=Object(a["a"])(e,a["a"].EMPTY_OBJECT);var t=e.context,i=e.width,s=e.height,u=e.source;Object(o["a"])(u)&&(Object(o["a"])(i)||(i=Object(a["a"])(u.videoWidth,u.width)),Object(o["a"])(s)||(s=Object(a["a"])(u.videoHeight,u.height)));var f=Object(a["a"])(e.pixelFormat,c["a"].RGBA),_=Object(a["a"])(e.pixelDatatype,l["a"].UNSIGNED_BYTE),d=c["a"].toInternalFormat(f,_,t),m=c["a"].isCompressedFormat(d),p=e.preMultiplyAlpha||f===c["a"].RGB||f===c["a"].LUMINANCE,v=Object(a["a"])(e.flipY,!0),g=!0,b=t._gl,y=b.TEXTURE_2D,O=b.createTexture();b.activeTexture(b.TEXTURE0),b.bindTexture(y,O);var T,D=4;if(Object(o["a"])(u)&&Object(o["a"])(u.arrayBufferView)&&!m&&(D=c["a"].alignmentInBytes(f,_,i)),b.pixelStorei(b.UNPACK_ALIGNMENT,D),Object(o["a"])(u))if(Object(o["a"])(u.arrayBufferView)){b.pixelStorei(b.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1);var E=u.arrayBufferView;if(m)b.compressedTexImage2D(y,0,d,i,s,0,E);else if(v&&(E=c["a"].flipY(E,f,_,i,s)),b.texImage2D(y,0,d,i,s,0,f,l["a"].toWebGLConstant(_,t),E),Object(o["a"])(u.mipLevels))for(var x=i,w=s,P=0;P<u.mipLevels.length;++P)x=0|Math.floor(x/2),x<1&&(x=1),w=0|Math.floor(w/2),w<1&&(w=1),b.texImage2D(y,P+1,d,x,w,0,f,l["a"].toWebGLConstant(_,t),u.mipLevels[P])}else Object(o["a"])(u.framebuffer)?(b.pixelStorei(b.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1),u.framebuffer!==t.defaultFramebuffer&&u.framebuffer._bind(),b.copyTexImage2D(y,0,d,u.xOffset,u.yOffset,i,s,0),u.framebuffer!==t.defaultFramebuffer&&u.framebuffer._unBind()):(b.pixelStorei(b.UNPACK_PREMULTIPLY_ALPHA_WEBGL,p),b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,v),b.texImage2D(y,0,d,f,l["a"].toWebGLConstant(_,t),u));else b.texImage2D(y,0,d,i,s,0,f,l["a"].toWebGLConstant(_,t),null),g=!1;b.bindTexture(y,null),T=m?c["a"].compressedTextureSizeInBytes(f,i,s):c["a"].textureSizeInBytes(f,_,i,s),this._id=Object(n["a"])(),this._context=t,this._textureFilterAnisotropic=t._textureFilterAnisotropic,this._textureTarget=y,this._texture=O,this._internalFormat=d,this._pixelFormat=f,this._pixelDatatype=_,this._width=i,this._height=s,this._dimensions=new r["a"](i,s),this._hasMipmap=!1,this._sizeInBytes=T,this._preMultiplyAlpha=p,this._flipY=v,this._initialized=g,this._sampler=void 0,this.sampler=Object(o["a"])(e.sampler)?e.sampler:new h["a"]}d.create=function(e){return new d(e)},d.fromFramebuffer=function(e){e=Object(a["a"])(e,a["a"].EMPTY_OBJECT);var t=e.context,i=t._gl,r=Object(a["a"])(e.pixelFormat,c["a"].RGB),n=Object(a["a"])(e.framebufferXOffset,0),s=Object(a["a"])(e.framebufferYOffset,0),u=Object(a["a"])(e.width,i.drawingBufferWidth),l=Object(a["a"])(e.height,i.drawingBufferHeight),h=e.framebuffer,f=new d({context:t,width:u,height:l,pixelFormat:r,source:{framebuffer:Object(o["a"])(h)?h:t.defaultFramebuffer,xOffset:n,yOffset:s,width:u,height:l}});return f},Object.defineProperties(d.prototype,{id:{get:function(){return this._id}},sampler:{get:function(){return this._sampler},set:function(e){var t=e.minificationFilter,i=e.magnificationFilter,r=this._context,n=this._pixelFormat,a=this._pixelDatatype,s=t===_["a"].NEAREST_MIPMAP_NEAREST||t===_["a"].NEAREST_MIPMAP_LINEAR||t===_["a"].LINEAR_MIPMAP_NEAREST||t===_["a"].LINEAR_MIPMAP_LINEAR;(a===l["a"].FLOAT&&!r.textureFloatLinear||a===l["a"].HALF_FLOAT&&!r.textureHalfFloatLinear)&&(t=s?_["a"].NEAREST_MIPMAP_NEAREST:_["a"].NEAREST,i=f["a"].NEAREST),r.webgl2&&c["a"].isDepthFormat(n)&&(t=_["a"].NEAREST,i=f["a"].NEAREST);var u=r._gl,h=this._textureTarget;u.activeTexture(u.TEXTURE0),u.bindTexture(h,this._texture),u.texParameteri(h,u.TEXTURE_MIN_FILTER,t),u.texParameteri(h,u.TEXTURE_MAG_FILTER,i),u.texParameteri(h,u.TEXTURE_WRAP_S,e.wrapS),u.texParameteri(h,u.TEXTURE_WRAP_T,e.wrapT),Object(o["a"])(this._textureFilterAnisotropic)&&u.texParameteri(h,this._textureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,e.maximumAnisotropy),u.bindTexture(h,null),this._sampler=e}},pixelFormat:{get:function(){return this._pixelFormat}},pixelDatatype:{get:function(){return this._pixelDatatype}},dimensions:{get:function(){return this._dimensions}},preMultiplyAlpha:{get:function(){return this._preMultiplyAlpha}},flipY:{get:function(){return this._flipY}},width:{get:function(){return this._width}},height:{get:function(){return this._height}},sizeInBytes:{get:function(){return this._hasMipmap?Math.floor(4*this._sizeInBytes/3):this._sizeInBytes}},_target:{get:function(){return this._textureTarget}}}),d.prototype.copyFrom=function(e,t,i){t=Object(a["a"])(t,0),i=Object(a["a"])(i,0);var r=this._context,n=r._gl,s=this._textureTarget;n.activeTexture(n.TEXTURE0),n.bindTexture(s,this._texture);var u=e.width,h=e.height,f=e.arrayBufferView,_=this._width,d=this._height,m=this._internalFormat,p=this._pixelFormat,v=this._pixelDatatype,g=this._preMultiplyAlpha,b=this._flipY,y=4;Object(o["a"])(f)&&(y=c["a"].alignmentInBytes(p,v,u)),n.pixelStorei(n.UNPACK_ALIGNMENT,y);var O=!1;if(!this._initialized){if(0===t&&0===i&&u===_&&h===d)Object(o["a"])(f)?(n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!1),b&&(f=c["a"].flipY(f,p,v,_,d)),n.texImage2D(s,0,m,_,d,0,p,l["a"].toWebGLConstant(v,r),f)):(n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,g),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,b),n.texImage2D(s,0,m,p,l["a"].toWebGLConstant(v,r),e)),O=!0;else{n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!1);var T=c["a"].createTypedArray(p,v,_,d);n.texImage2D(s,0,m,_,d,0,p,l["a"].toWebGLConstant(v,r),T)}this._initialized=!0}O||(Object(o["a"])(f)?(n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!1),b&&(f=c["a"].flipY(f,p,v,u,h)),n.texSubImage2D(s,0,t,i,u,h,p,l["a"].toWebGLConstant(v,r),f)):(n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,g),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,b),n.texSubImage2D(s,0,t,i,p,l["a"].toWebGLConstant(v,r),e))),n.bindTexture(s,null)},d.prototype.copyFromFramebuffer=function(e,t,i,r,n,o){e=Object(a["a"])(e,0),t=Object(a["a"])(t,0),i=Object(a["a"])(i,0),r=Object(a["a"])(r,0),n=Object(a["a"])(n,this._width),o=Object(a["a"])(o,this._height);var s=this._context._gl,c=this._textureTarget;s.activeTexture(s.TEXTURE0),s.bindTexture(c,this._texture),s.copyTexSubImage2D(c,0,e,t,i,r,n,o),s.bindTexture(c,null),this._initialized=!0},d.prototype.generateMipmap=function(e){e=Object(a["a"])(e,u["a"].DONT_CARE),this._hasMipmap=!0;var t=this._context._gl,i=this._textureTarget;t.hint(t.GENERATE_MIPMAP_HINT,e),t.activeTexture(t.TEXTURE0),t.bindTexture(i,this._texture),t.generateMipmap(i),t.bindTexture(i,null)},d.prototype.isDestroyed=function(){return!1},d.prototype.destroy=function(){return this._context._gl.deleteTexture(this._texture),Object(s["a"])(this)},t["a"]=d},d289:function(e,t,i){"use strict";var r={ENVIRONMENT:0,COMPUTE:1,GLOBE:2,TERRAIN_CLASSIFICATION:3,CESIUM_3D_TILE:4,CESIUM_3D_TILE_CLASSIFICATION:5,CESIUM_3D_TILE_CLASSIFICATION_IGNORE_SHOW:6,OPAQUE:7,TRANSLUCENT:8,OVERLAY:9,NUMBER_OF_PASSES:10};t["a"]=Object.freeze(r)},e90c:function(e,t,i){"use strict";var r=i("535a"),n=i("2f63"),a=i("7d62"),o=i("283e"),s=i("e945"),c=i("b997"),u=i("5bfa"),l=i("1ca0"),h=0;function f(e){var t=e.vertexShaderText,i=e.fragmentShaderText;"undefined"!==typeof spector&&(t=t.replace(/^#line/gm,"//#line"),i=i.replace(/^#line/gm,"//#line"));var r=d(t,i);this._gl=e.gl,this._logShaderCompilation=e.logShaderCompilation,this._debugShaders=e.debugShaders,this._attributeLocations=e.attributeLocations,this._program=void 0,this._numberOfVertexAttributes=void 0,this._vertexAttributes=void 0,this._uniformsByName=void 0,this._uniforms=void 0,this._automaticUniforms=void 0,this._manualUniforms=void 0,this._duplicateUniformNames=r.duplicateUniformNames,this._cachedShader=void 0,this.maximumTextureUnitIndex=void 0,this._vertexShaderSource=e.vertexShaderSource,this._vertexShaderText=e.vertexShaderText,this._fragmentShaderSource=e.fragmentShaderSource,this._fragmentShaderText=r.fragmentShaderText,this.id=h++}function _(e){var t=[],i=e.match(/uniform.*?(?![^{]*})(?=[=\[;])/g);if(Object(n["a"])(i))for(var r=i.length,a=0;a<r;a++){var o=i[a].trim(),s=o.slice(o.lastIndexOf(" ")+1);t.push(s)}return t}function d(e,t){var i={};if(!c["a"].highpFloatSupported||!c["a"].highpIntSupported){var r,n,a,o,s=_(e),u=_(t),l=s.length,h=u.length;for(r=0;r<l;r++)for(n=0;n<h;n++)if(s[r]===u[n]){a=s[r],o="czm_mediump_"+a;var f=new RegExp(a+"\\b","g");t=t.replace(f,o),i[o]=a}}return{fragmentShaderText:t,duplicateUniformNames:i}}f.fromCache=function(e){return e=Object(r["a"])(e,r["a"].EMPTY_OBJECT),e.context.shaderCache.getShaderProgram(e)},f.replaceCache=function(e){return e=Object(r["a"])(e,r["a"].EMPTY_OBJECT),e.context.shaderCache.replaceShaderProgram(e)},Object.defineProperties(f.prototype,{vertexShaderSource:{get:function(){return this._vertexShaderSource}},fragmentShaderSource:{get:function(){return this._fragmentShaderSource}},vertexAttributes:{get:function(){return y(this),this._vertexAttributes}},numberOfVertexAttributes:{get:function(){return y(this),this._numberOfVertexAttributes}},allUniforms:{get:function(){return y(this),this._uniformsByName}}});function m(e,t){var i=t._vertexShaderText,r=t._fragmentShaderText,a=e.createShader(e.VERTEX_SHADER);e.shaderSource(a,i),e.compileShader(a);var s=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(s,r),e.compileShader(s);var c=e.createProgram();e.attachShader(c,a),e.attachShader(c,s),e.deleteShader(a),e.deleteShader(s);var u,l=t._attributeLocations;if(Object(n["a"])(l))for(var h in l)l.hasOwnProperty(h)&&e.bindAttribLocation(c,l[h],h);if(e.linkProgram(c),!e.getProgramParameter(c,e.LINK_STATUS)){var f=t._debugShaders;if(!e.getShaderParameter(s,e.COMPILE_STATUS)){if(u=e.getShaderInfoLog(s),Object(n["a"])(f))f.getTranslatedShaderSource(s);throw e.deleteProgram(c),new o["a"]("Fragment shader failed to compile.  Compile log: "+u)}if(!e.getShaderParameter(a,e.COMPILE_STATUS)){if(u=e.getShaderInfoLog(a),Object(n["a"])(f))f.getTranslatedShaderSource(a);throw e.deleteProgram(c),new o["a"]("Vertex shader failed to compile.  Compile log: "+u)}throw u=e.getProgramInfoLog(c),Object(n["a"])(f),e.deleteProgram(c),new o["a"]("Program failed to link.  Link log: "+u)}var _=t._logShaderCompilation;return _&&(u=e.getShaderInfoLog(a),Object(n["a"])(u)&&u.length),_&&(u=e.getShaderInfoLog(s),Object(n["a"])(u)&&u.length),_&&(u=e.getProgramInfoLog(c),Object(n["a"])(u)&&u.length),c}function p(e,t,i){for(var r={},n=0;n<i;++n){var a=e.getActiveAttrib(t,n),o=e.getAttribLocation(t,a.name);r[a.name]={name:a.name,type:a.type,index:o}}return r}function v(e,t){for(var i={},r=[],a=[],o=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),s=0;s<o;++s){var c=e.getActiveUniform(t,s),h="[0]",f=-1!==c.name.indexOf(h,c.name.length-h.length)?c.name.slice(0,c.name.length-3):c.name;if(0!==f.indexOf("gl_"))if(c.name.indexOf("[")<0){var _=e.getUniformLocation(t,f);if(null!==_){var d=Object(u["a"])(e,c,f,_);i[f]=d,r.push(d),d._setSampler&&a.push(d)}}else{var m,p,v,g,b=f.indexOf("[");if(b>=0){if(m=i[f.slice(0,b)],!Object(n["a"])(m))continue;p=m._locations,p.length<=1&&(v=m.value,g=e.getUniformLocation(t,f),null!==g&&(p.push(g),v.push(e.getUniform(t,g))))}else{p=[];for(var y=0;y<c.size;++y)g=e.getUniformLocation(t,f+"["+y+"]"),null!==g&&p.push(g);m=Object(l["a"])(e,c,f,p),i[f]=m,r.push(m),m._setSampler&&a.push(m)}}}return{uniformsByName:i,uniforms:r,samplerUniforms:a}}function g(e,t){var i=[],r=[];for(var a in t)if(t.hasOwnProperty(a)){var o=t[a],c=a,u=e._duplicateUniformNames[c];Object(n["a"])(u)&&(o.name=u,c=u);var l=s["a"][c];Object(n["a"])(l)?i.push({uniform:o,automaticUniform:l}):r.push(o)}return{automaticUniforms:i,manualUniforms:r}}function b(e,t,i){e.useProgram(t);for(var r=0,n=i.length,a=0;a<n;++a)r=i[a]._setSampler(r);return e.useProgram(null),r}function y(e){Object(n["a"])(e._program)||O(e)}function O(e){var t=e._program,i=e._gl,r=m(i,e,e._debugShaders),n=i.getProgramParameter(r,i.ACTIVE_ATTRIBUTES),a=v(i,r),o=g(e,a.uniformsByName);e._program=r,e._numberOfVertexAttributes=n,e._vertexAttributes=p(i,r,n),e._uniformsByName=a.uniformsByName,e._uniforms=a.uniforms,e._automaticUniforms=o.automaticUniforms,e._manualUniforms=o.manualUniforms,e.maximumTextureUnitIndex=b(i,r,a.samplerUniforms),t&&e._gl.deleteProgram(t),"undefined"!==typeof spector&&(e._program.__SPECTOR_rebuildProgram=function(t,i,r,n){var a=e._vertexShaderText,o=e._fragmentShaderText,s=/ ! = /g;e._vertexShaderText=t.replace(s," != "),e._fragmentShaderText=i.replace(s," != ");try{O(e),r(e._program)}catch(l){e._vertexShaderText=a,e._fragmentShaderText=o;var c=/(?:Compile|Link) error: ([^]*)/,u=c.exec(l.message);n(u?u[1]:l.message)}})}f.prototype._bind=function(){y(this),this._gl.useProgram(this._program)},f.prototype._setUniforms=function(e,t,i){var r,a;if(Object(n["a"])(e)){var o=this._manualUniforms;for(r=o.length,a=0;a<r;++a){var s=o[a];s.value=e[s.name]()}}var c=this._automaticUniforms;for(r=c.length,a=0;a<r;++a){var u=c[a];u.uniform.value=u.automaticUniform.getValue(t)}var l=this._uniforms;for(r=l.length,a=0;a<r;++a)l[a].set();if(i){var h=this._gl,f=this._program;h.validateProgram(f)}},f.prototype.isDestroyed=function(){return!1},f.prototype.destroy=function(){this._cachedShader.cache.releaseShaderProgram(this)},f.prototype.finalDestroy=function(){return this._gl.deleteProgram(this._program),Object(a["a"])(this)},t["a"]=f}}]);