(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Cesium~1acf902e"],{"06f0":function(e,t,a){"use strict";var r=a("daa2"),n={NEVER:r["a"].NEVER,LESS:r["a"].LESS,EQUAL:r["a"].EQUAL,LESS_OR_EQUAL:r["a"].LEQUAL,GREATER:r["a"].GREATER,NOT_EQUAL:r["a"].NOTEQUAL,GREATER_OR_EQUAL:r["a"].GEQUAL,ALWAYS:r["a"].ALWAYS};t["a"]=Object.freeze(n)},"0838":function(e,t,a){"use strict";var r=a("be18"),n=a("2f63"),i=a("93da"),o=a("a307");function s(){this.enabled=!0,this.density=2e-4,this.screenSpaceErrorFactor=2,this.minimumBrightness=.03}for(var u=[359.393,800.749,1275.6501,2151.1192,3141.7763,4777.5198,6281.2493,12364.307,15900.765,49889.0549,78026.8259,99260.7344,120036.3873,151011.0158,156091.1953,203849.3112,274866.9803,319916.3149,493552.0528,628733.5874],c=[2e-5,2e-4,1e-4,7e-5,5e-5,4e-5,3e-5,19e-6,1e-5,85e-7,62e-7,58e-7,53e-7,52e-7,51e-7,42e-7,4e-6,34e-7,26e-7,22e-7],h=0;h<c.length;++h)c[h]*=1e6;for(var l=c[1],f=c[c.length-1],d=0;d<c.length;++d)c[d]=(c[d]-f)/(l-f);var m=0;function p(e){var t,a=u,r=a.length;if(e<a[0])return m=0,m;if(e>a[r-1])return m=r-2,m;if(e>=a[m]){if(m+1<r&&e<a[m+1])return m;if(m+2<r&&e<a[m+2])return++m,m}else if(m-1>=0&&e>=a[m-1])return--m,m;for(t=0;t<r-2;++t)if(e>=a[t]&&e<a[t+1])break;return m=t,m}var v=new r["a"];s.prototype.update=function(e){var t=e.fog.enabled=this.enabled;if(t){var a=e.camera,s=a.positionCartographic;if(!Object(n["a"])(s)||s.height>8e5||e.mode!==o["a"].SCENE3D)e.fog.enabled=!1;else{var h=s.height,d=p(h),m=i["a"].clamp((h-u[d])/(u[d+1]-u[d]),0,1),_=i["a"].lerp(c[d],c[d+1],m),g=1e6*this.density,b=g/l*f;_=_*(g-b)*1e-6;var y=r["a"].normalize(a.positionWC,v),w=Math.abs(r["a"].dot(a.directionWC,y));_*=1-w,e.fog.density=_,e.fog.sse=this.screenSpaceErrorFactor,e.fog.minimumBrightness=this.minimumBrightness}}},t["a"]=s},"08b8":function(e,t,a){"use strict";var r=a("1d87"),n=a("abab"),i=a("2f63"),o=a("5e57"),s=a("6a29"),u=a("77d1"),c=a("a58e");function h(){}function l(e,t){var a="runtime."+Object.keys(e.createdBufferViews).length,r=e.buffers,n=Object.keys(r).length;return r[n]=t,e.createdBufferViews[a]={buffer:n,byteOffset:0,byteLength:t.byteLength},a}function f(e,t,a){var r=t._loadResources,n=l(r,e);return r.vertexBuffersToCreate.enqueue(n),n}function d(e,t,a){var r=e.typedArray,i=t._loadResources,o=l(i,r);return i.indexBuffersToCreate.enqueue({id:o,componentType:n["a"].fromTypedArray(r)}),{bufferViewId:o,numberOfIndices:e.numberOfIndices}}function m(e,t,a,r){if(h._taskProcessorReady){var n=a.primitivesToDecode.peek();if(Object(i["a"])(n)){var o=e.scheduleTask(n,[n.array.buffer]);if(Object(i["a"])(o))return a.activeDecodingTasks++,a.primitivesToDecode.dequeue(),o.then((function(e){a.activeDecodingTasks--;var i=d(e.indexArray,t,r),o={},s=e.attributeData;for(var u in s)if(s.hasOwnProperty(u)){var c=s[u],h=c.array,l=f(h,t,r),m=c.data;m.bufferView=l,o[u]=m}t._decodedData[n.mesh+".primitive."+n.primitive]={bufferView:i.bufferViewId,numberOfIndices:i.numberOfIndices,attributes:o}}))}}}h._maxDecodingConcurrency=Math.max(o["a"].hardwareConcurrency-1,1),h._decoderTaskProcessor=void 0,h._taskProcessorReady=!1,h._getDecoderTaskProcessor=function(){if(!Object(i["a"])(h._decoderTaskProcessor)){var e=new s["a"]("decodeDraco",h._maxDecodingConcurrency);e.initWebAssemblyModule({modulePath:"ThirdParty/Workers/draco_wasm_wrapper.js",wasmBinaryFile:"ThirdParty/draco_decoder.wasm",fallbackModulePath:"ThirdParty/Workers/draco_decoder.js"}).then((function(){h._taskProcessorReady=!0})),h._decoderTaskProcessor=e}return h._decoderTaskProcessor},h.hasExtension=function(e){return Object(i["a"])(e.extensionsRequired.KHR_draco_mesh_compression)||Object(i["a"])(e.extensionsUsed.KHR_draco_mesh_compression)},h._decodedModelResourceCache=void 0,h.parse=function(e,t){if(h.hasExtension(e)){var a=e._loadResources,n=e.cacheKey;if(Object(i["a"])(n)){Object(i["a"])(h._decodedModelResourceCache)||(Object(i["a"])(t.cache.modelDecodingCache)||(t.cache.modelDecodingCache={}),h._decodedModelResourceCache=t.cache.modelDecodingCache);var o=h._decodedModelResourceCache[n];if(Object(i["a"])(o))return o.count++,void(a.pendingDecodingCache=!0)}var s=e._dequantizeInShader,c=e.gltf;u["a"].mesh(c,(function(e,t){u["a"].meshPrimitive(e,(function(e,n){if(Object(i["a"])(e.extensions)){var o=e.extensions.KHR_draco_mesh_compression;if(Object(i["a"])(o)){var u=c.bufferViews[o.bufferView],h=Object(r["a"])(c.buffers[u.buffer].extras._pipeline.source,u.byteOffset,u.byteOffset+u.byteLength);a.primitivesToDecode.enqueue({mesh:t,primitive:n,array:h,bufferView:u,compressedAttributes:o.attributes,dequantizeInShader:s})}}}))}))}},h.decodeModel=function(e,t){if(!h.hasExtension(e))return c["a"].resolve();var a=e._loadResources,r=e.cacheKey;if(Object(i["a"])(r)&&Object(i["a"])(h._decodedModelResourceCache)){var n=h._decodedModelResourceCache[r];if(Object(i["a"])(n)&&a.pendingDecodingCache)return Object(c["a"])(n.ready,(function(){e._decodedData=n.data,a.pendingDecodingCache=!1}));h._decodedModelResourceCache[r]={ready:!1,count:1,data:void 0}}if(0===a.primitivesToDecode.length)return c["a"].resolve();var o=h._getDecoderTaskProcessor(),s=[],u=m(o,e,a,t);while(Object(i["a"])(u))s.push(u),u=m(o,e,a,t);return c["a"].all(s)},h.decodePointCloud=function(e){var t=h._getDecoderTaskProcessor();if(h._taskProcessorReady)return t.scheduleTask(e,[e.buffer.buffer])},h.cacheDataForModel=function(e){var t=e.cacheKey;if(Object(i["a"])(t)&&Object(i["a"])(h._decodedModelResourceCache)){var a=h._decodedModelResourceCache[t];Object(i["a"])(a)&&(a.ready=!0,a.data=e._decodedData)}},h.destroyCachedDataForModel=function(e){var t=e.cacheKey;if(Object(i["a"])(t)&&Object(i["a"])(h._decodedModelResourceCache)){var a=h._decodedModelResourceCache[t];Object(i["a"])(a)&&0===--a.count&&delete h._decodedModelResourceCache[t]}},t["a"]=h},1360:function(e,t,a){"use strict";var r,n=a("2f63");function i(e){}i.prototype.isReady=function(){return!0},i.prototype.shouldDiscardImage=function(e){return i.EMPTY_IMAGE===e},Object.defineProperties(i,{EMPTY_IMAGE:{get:function(){return Object(n["a"])(r)||(r=new Image,r.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII="),r}}}),t["a"]=i},"37eb":function(e,t,a){"use strict";var r=a("cef5"),n=a("b482"),i=a("be18"),o=a("2bb9"),s=a("535a"),u=a("2f63"),c=a("7d62"),h=a("52f0"),l=a("0541"),f=a("8b68"),d=a("a894"),m=a("d289"),p=a("6dc0"),v=a("e90c"),_=a("5770"),g=a("7c5e"),b=a("fc40"),y=a("ed46"),w=a("b7c8"),E=a("29ab"),O=a("aea3"),C=a("a307"),x={position:0};function A(e){e=Object(s["a"])(e,s["a"].EMPTY_OBJECT),this.center=i["a"].clone(Object(s["a"])(e.center,i["a"].ZERO)),this._center=new i["a"],this.radii=i["a"].clone(e.radii),this._radii=new i["a"],this._oneOverEllipsoidRadiiSquared=new i["a"],this._boundingSphere=new r["a"],this.modelMatrix=h["a"].clone(Object(s["a"])(e.modelMatrix,h["a"].IDENTITY)),this._modelMatrix=new h["a"],this._computedModelMatrix=new h["a"],this.show=Object(s["a"])(e.show,!0),this.material=Object(s["a"])(e.material,O["a"].fromType(O["a"].ColorType)),this._material=void 0,this._translucent=void 0,this.id=e.id,this._id=void 0,this.debugShowBoundingVolume=Object(s["a"])(e.debugShowBoundingVolume,!1),this.onlySunLighting=Object(s["a"])(e.onlySunLighting,!1),this._onlySunLighting=!1,this._depthTestEnabled=Object(s["a"])(e.depthTestEnabled,!0),this._useLogDepth=!1,this._sp=void 0,this._rs=void 0,this._va=void 0,this._pickSP=void 0,this._pickId=void 0,this._colorCommand=new d["a"]({owner:Object(s["a"])(e._owner,this)}),this._pickCommand=new d["a"]({owner:Object(s["a"])(e._owner,this),pickOnly:!0});var t=this;this._uniforms={u_radii:function(){return t.radii},u_oneOverEllipsoidRadiiSquared:function(){return t._oneOverEllipsoidRadiiSquared}},this._pickUniforms={czm_pickColor:function(){return t._pickId.color}}}function S(e){var t=e.cache.ellipsoidPrimitive_vertexArray;if(Object(u["a"])(t))return t;var a=n["a"].createGeometry(n["a"].fromDimensions({dimensions:new i["a"](2,2,2),vertexFormat:l["a"].POSITION_ONLY}));return t=g["a"].fromGeometry({context:e,geometry:a,attributeLocations:x,bufferUsage:f["a"].STATIC_DRAW,interleave:!0}),e.cache.ellipsoidPrimitive_vertexArray=t,t}var R="#ifdef GL_EXT_frag_depth \n#extension GL_EXT_frag_depth : enable \n#endif \n\n";A.prototype.update=function(e){if(this.show&&e.mode===C["a"].SCENE3D&&Object(u["a"])(this.center)&&Object(u["a"])(this.radii)){var t=e.context,a=this.material.isTranslucent(),n=this._translucent!==a;Object(u["a"])(this._rs)&&!n||(this._translucent=a,this._rs=p["a"].fromCache({cull:{enabled:!0,face:E["a"].FRONT},depthTest:{enabled:this._depthTestEnabled},depthMask:!a&&t.fragmentDepth,blending:a?w["a"].ALPHA_BLEND:void 0})),Object(u["a"])(this._va)||(this._va=S(t));var s=!1,c=this.radii;if(!i["a"].equals(this._radii,c)){i["a"].clone(c,this._radii);var l=this._oneOverEllipsoidRadiiSquared;l.x=1/(c.x*c.x),l.y=1/(c.y*c.y),l.z=1/(c.z*c.z),s=!0}h["a"].equals(this.modelMatrix,this._modelMatrix)&&i["a"].equals(this.center,this._center)||(h["a"].clone(this.modelMatrix,this._modelMatrix),i["a"].clone(this.center,this._center),h["a"].multiplyByTranslation(this.modelMatrix,this.center,this._computedModelMatrix),s=!0),s&&(i["a"].clone(i["a"].ZERO,this._boundingSphere.center),this._boundingSphere.radius=i["a"].maximumComponent(c),r["a"].transform(this._boundingSphere,this._computedModelMatrix,this._boundingSphere));var f=this._material!==this.material;this._material=this.material,this._material.update(t);var d=this.onlySunLighting!==this._onlySunLighting;this._onlySunLighting=this.onlySunLighting;var g=e.useLogDepth,O=this._useLogDepth!==g;this._useLogDepth=g;var A,L,T=this._colorCommand;(f||d||n||O)&&(A=new _["a"]({sources:[y["a"]]}),L=new _["a"]({sources:[this.material.shaderSource,b["a"]]}),this.onlySunLighting&&L.defines.push("ONLY_SUN_LIGHTING"),!a&&t.fragmentDepth&&L.defines.push("WRITE_DEPTH"),this._useLogDepth&&(A.defines.push("LOG_DEPTH"),L.defines.push("LOG_DEPTH"),L.sources.push(R)),this._sp=v["a"].replaceCache({context:t,shaderProgram:this._sp,vertexShaderSource:A,fragmentShaderSource:L,attributeLocations:x}),T.vertexArray=this._va,T.renderState=this._rs,T.shaderProgram=this._sp,T.uniformMap=Object(o["a"])(this._uniforms,this.material._uniforms),T.executeInClosestFrustum=a);var I=e.commandList,N=e.passes;if(N.render&&(T.boundingVolume=this._boundingSphere,T.debugShowBoundingVolume=this.debugShowBoundingVolume,T.modelMatrix=this._computedModelMatrix,T.pass=a?m["a"].TRANSLUCENT:m["a"].OPAQUE,I.push(T)),N.pick){var j=this._pickCommand;Object(u["a"])(this._pickId)&&this._id===this.id||(this._id=this.id,this._pickId=this._pickId&&this._pickId.destroy(),this._pickId=t.createPickId({primitive:this,id:this.id})),(f||d||!Object(u["a"])(this._pickSP)||O)&&(A=new _["a"]({sources:[y["a"]]}),L=new _["a"]({sources:[this.material.shaderSource,b["a"]],pickColorQualifier:"uniform"}),this.onlySunLighting&&L.defines.push("ONLY_SUN_LIGHTING"),!a&&t.fragmentDepth&&L.defines.push("WRITE_DEPTH"),this._useLogDepth&&(A.defines.push("LOG_DEPTH"),L.defines.push("LOG_DEPTH"),L.sources.push(R)),this._pickSP=v["a"].replaceCache({context:t,shaderProgram:this._pickSP,vertexShaderSource:A,fragmentShaderSource:L,attributeLocations:x}),j.vertexArray=this._va,j.renderState=this._rs,j.shaderProgram=this._pickSP,j.uniformMap=Object(o["a"])(Object(o["a"])(this._uniforms,this._pickUniforms),this.material._uniforms),j.executeInClosestFrustum=a),j.boundingVolume=this._boundingSphere,j.modelMatrix=this._computedModelMatrix,j.pass=a?m["a"].TRANSLUCENT:m["a"].OPAQUE,I.push(j)}}},A.prototype.isDestroyed=function(){return!1},A.prototype.destroy=function(){return this._sp=this._sp&&this._sp.destroy(),this._pickSP=this._pickSP&&this._pickSP.destroy(),this._pickId=this._pickId&&this._pickId.destroy(),Object(c["a"])(this)},t["a"]=A},5966:function(e,t,a){"use strict";var r=a("535a"),n=a("2f63"),i=a("0541"),o=a("e64a"),s=a("f74b"),u=a("5cb0"),c=a("aea3");function h(e){e=Object(r["a"])(e,r["a"].EMPTY_OBJECT);var t=Object(r["a"])(e.translucent,!0),a=Object(r["a"])(e.aboveGround,!1);this.material=Object(n["a"])(e.material)?e.material:c["a"].fromType(c["a"].ColorType),this.translucent=Object(r["a"])(e.translucent,!0),this._vertexShaderSource=Object(r["a"])(e.vertexShaderSource,s["a"]),this._fragmentShaderSource=Object(r["a"])(e.fragmentShaderSource,o["a"]),this._renderState=u["a"].getDefaultRenderState(t,!a,e.renderState),this._closed=!1,this._flat=Object(r["a"])(e.flat,!1),this._faceForward=Object(r["a"])(e.faceForward,a),this._aboveGround=a}Object.defineProperties(h.prototype,{vertexShaderSource:{get:function(){return this._vertexShaderSource}},fragmentShaderSource:{get:function(){return this._fragmentShaderSource}},renderState:{get:function(){return this._renderState}},closed:{get:function(){return this._closed}},vertexFormat:{get:function(){return h.VERTEX_FORMAT}},flat:{get:function(){return this._flat}},faceForward:{get:function(){return this._faceForward}},aboveGround:{get:function(){return this._aboveGround}}}),h.VERTEX_FORMAT=i["a"].POSITION_AND_ST,h.prototype.getFragmentShaderSource=u["a"].prototype.getFragmentShaderSource,h.prototype.isTranslucent=u["a"].prototype.isTranslucent,h.prototype.getRenderState=u["a"].prototype.getRenderState,t["a"]=h},6928:function(e,t,a){"use strict";var r=a("670c"),n=a("be18"),i=a("a561"),o=a("bd8d"),s=a("2f63"),u=a("93da"),c=a("283e"),h=a("e787"),l=a("7a2e");function f(e,t){var a;this._expression=e,e=D(e,t),e=F(B(e)),h["a"].addBinaryOp("=~",0),h["a"].addBinaryOp("!~",0);try{a=Object(h["a"])(e)}catch(r){throw new c["a"](r)}this._runtimeAst=K(this,a)}Object.defineProperties(f.prototype,{expression:{get:function(){return this._expression}}});var d={arrayIndex:0,arrayArray:[[]],cartesian2Index:0,cartesian3Index:0,cartesian4Index:0,cartesian2Array:[new r["a"]],cartesian3Array:[new n["a"]],cartesian4Array:[new i["a"]],reset:function(){this.arrayIndex=0,this.cartesian2Index=0,this.cartesian3Index=0,this.cartesian4Index=0},getArray:function(){this.arrayIndex>=this.arrayArray.length&&this.arrayArray.push([]);var e=this.arrayArray[this.arrayIndex++];return e.length=0,e},getCartesian2:function(){return this.cartesian2Index>=this.cartesian2Array.length&&this.cartesian2Array.push(new r["a"]),this.cartesian2Array[this.cartesian2Index++]},getCartesian3:function(){return this.cartesian3Index>=this.cartesian3Array.length&&this.cartesian3Array.push(new n["a"]),this.cartesian3Array[this.cartesian3Index++]},getCartesian4:function(){return this.cartesian4Index>=this.cartesian4Array.length&&this.cartesian4Array.push(new i["a"]),this.cartesian4Array[this.cartesian4Index++]}};f.prototype.evaluate=function(e,t){d.reset();var a=this._runtimeAst.evaluate(e);return t instanceof o["a"]&&a instanceof i["a"]?o["a"].fromCartesian4(a,t):a instanceof r["a"]||a instanceof n["a"]||a instanceof i["a"]?a.clone(t):a},f.prototype.evaluateColor=function(e,t){d.reset();var a=this._runtimeAst.evaluate(e);return o["a"].fromCartesian4(a,t)},f.prototype.getShaderFunction=function(e,t,a,r){var n=this.getShaderExpression(t,a);return n=r+" "+e+"() \n{ \n    return "+n+"; \n} \n",n},f.prototype.getShaderExpression=function(e,t){return this._runtimeAst.getShaderExpression(e,t)};var m=["!","-","+"],p=["+","-","*","/","%","===","!==",">",">=","<","<=","&&","||","!~","=~"],v=/\${(.*?)}/g,_=/\\/g,g="@#%",b=/@#%/g,y=new o["a"],w={abs:S(Math.abs),sqrt:S(Math.sqrt),cos:S(Math.cos),sin:S(Math.sin),tan:S(Math.tan),acos:S(Math.acos),asin:S(Math.asin),atan:S(Math.atan),radians:S(u["a"].toRadians),degrees:S(u["a"].toDegrees),sign:S(u["a"].sign),floor:S(Math.floor),ceil:S(Math.ceil),round:S(Math.round),exp:S(Math.exp),exp2:S(x),log:S(Math.log),log2:S(A),fract:S(C),length:T,normalize:I},E={atan2:R(Math.atan2,!1),pow:R(Math.pow,!1),min:R(Math.min,!0),max:R(Math.max,!0),distance:N,dot:j,cross:P},O={clamp:L(u["a"].clamp,!0),mix:L(u["a"].lerp,!0)};function C(e){return e-Math.floor(e)}function x(e){return Math.pow(2,e)}function A(e){return u["a"].log2(e)}function S(e){return function(t,a){if("number"===typeof a)return e(a);if(a instanceof r["a"])return r["a"].fromElements(e(a.x),e(a.y),d.getCartesian2());if(a instanceof n["a"])return n["a"].fromElements(e(a.x),e(a.y),e(a.z),d.getCartesian3());if(a instanceof i["a"])return i["a"].fromElements(e(a.x),e(a.y),e(a.z),e(a.w),d.getCartesian4());throw new c["a"]('Function "'+t+'" requires a vector or number argument. Argument is '+a+".")}}function R(e,t){return function(a,o,s){if(t&&"number"===typeof s){if("number"===typeof o)return e(o,s);if(o instanceof r["a"])return r["a"].fromElements(e(o.x,s),e(o.y,s),d.getCartesian2());if(o instanceof n["a"])return n["a"].fromElements(e(o.x,s),e(o.y,s),e(o.z,s),d.getCartesian3());if(o instanceof i["a"])return i["a"].fromElements(e(o.x,s),e(o.y,s),e(o.z,s),e(o.w,s),d.getCartesian4())}if("number"===typeof o&&"number"===typeof s)return e(o,s);if(o instanceof r["a"]&&s instanceof r["a"])return r["a"].fromElements(e(o.x,s.x),e(o.y,s.y),d.getCartesian2());if(o instanceof n["a"]&&s instanceof n["a"])return n["a"].fromElements(e(o.x,s.x),e(o.y,s.y),e(o.z,s.z),d.getCartesian3());if(o instanceof i["a"]&&s instanceof i["a"])return i["a"].fromElements(e(o.x,s.x),e(o.y,s.y),e(o.z,s.z),e(o.w,s.w),d.getCartesian4());throw new c["a"]('Function "'+a+'" requires vector or number arguments of matching types. Arguments are '+o+" and "+s+".")}}function L(e,t){return function(a,o,s,u){if(t&&"number"===typeof u){if("number"===typeof o&&"number"===typeof s)return e(o,s,u);if(o instanceof r["a"]&&s instanceof r["a"])return r["a"].fromElements(e(o.x,s.x,u),e(o.y,s.y,u),d.getCartesian2());if(o instanceof n["a"]&&s instanceof n["a"])return n["a"].fromElements(e(o.x,s.x,u),e(o.y,s.y,u),e(o.z,s.z,u),d.getCartesian3());if(o instanceof i["a"]&&s instanceof i["a"])return i["a"].fromElements(e(o.x,s.x,u),e(o.y,s.y,u),e(o.z,s.z,u),e(o.w,s.w,u),d.getCartesian4())}if("number"===typeof o&&"number"===typeof s&&"number"===typeof u)return e(o,s,u);if(o instanceof r["a"]&&s instanceof r["a"]&&u instanceof r["a"])return r["a"].fromElements(e(o.x,s.x,u.x),e(o.y,s.y,u.y),d.getCartesian2());if(o instanceof n["a"]&&s instanceof n["a"]&&u instanceof n["a"])return n["a"].fromElements(e(o.x,s.x,u.x),e(o.y,s.y,u.y),e(o.z,s.z,u.z),d.getCartesian3());if(o instanceof i["a"]&&s instanceof i["a"]&&u instanceof i["a"])return i["a"].fromElements(e(o.x,s.x,u.x),e(o.y,s.y,u.y),e(o.z,s.z,u.z),e(o.w,s.w,u.w),d.getCartesian4());throw new c["a"]('Function "'+a+'" requires vector or number arguments of matching types. Arguments are '+o+", "+s+", and "+u+".")}}function T(e,t){if("number"===typeof t)return Math.abs(t);if(t instanceof r["a"])return r["a"].magnitude(t);if(t instanceof n["a"])return n["a"].magnitude(t);if(t instanceof i["a"])return i["a"].magnitude(t);throw new c["a"]('Function "'+e+'" requires a vector or number argument. Argument is '+t+".")}function I(e,t){if("number"===typeof t)return 1;if(t instanceof r["a"])return r["a"].normalize(t,d.getCartesian2());if(t instanceof n["a"])return n["a"].normalize(t,d.getCartesian3());if(t instanceof i["a"])return i["a"].normalize(t,d.getCartesian4());throw new c["a"]('Function "'+e+'" requires a vector or number argument. Argument is '+t+".")}function N(e,t,a){if("number"===typeof t&&"number"===typeof a)return Math.abs(t-a);if(t instanceof r["a"]&&a instanceof r["a"])return r["a"].distance(t,a);if(t instanceof n["a"]&&a instanceof n["a"])return n["a"].distance(t,a);if(t instanceof i["a"]&&a instanceof i["a"])return i["a"].distance(t,a);throw new c["a"]('Function "'+e+'" requires vector or number arguments of matching types. Arguments are '+t+" and "+a+".")}function j(e,t,a){if("number"===typeof t&&"number"===typeof a)return t*a;if(t instanceof r["a"]&&a instanceof r["a"])return r["a"].dot(t,a);if(t instanceof n["a"]&&a instanceof n["a"])return n["a"].dot(t,a);if(t instanceof i["a"]&&a instanceof i["a"])return i["a"].dot(t,a);throw new c["a"]('Function "'+e+'" requires vector or number arguments of matching types. Arguments are '+t+" and "+a+".")}function P(e,t,a){if(t instanceof n["a"]&&a instanceof n["a"])return n["a"].cross(t,a,d.getCartesian3());throw new c["a"]('Function "'+e+'" requires vec3 arguments. Arguments are '+t+" and "+a+".")}function M(e,t,a,r,n){this._type=e,this._value=t,this._left=a,this._right=r,this._test=n,this.evaluate=void 0,Z(this)}function D(e,t){if(!Object(s["a"])(t))return e;for(var a in t)if(t.hasOwnProperty(a)){var r=new RegExp("\\$\\{"+a+"\\}","g"),n="("+t[a]+")";Object(s["a"])(n)&&(e=e.replace(r,n))}return e}function B(e){return e.replace(_,g)}function k(e){return e.replace(b,"\\")}function F(e){var t=e,a="",r=t.indexOf("${");while(r>=0){var n,i=t.indexOf("'"),o=t.indexOf('"');if(i>=0&&i<r)n=t.indexOf("'",i+1),a+=t.substr(0,n+1),t=t.substr(n+1),r=t.indexOf("${");else if(o>=0&&o<r)n=t.indexOf('"',o+1),a+=t.substr(0,n+1),t=t.substr(n+1),r=t.indexOf("${");else{a+=t.substr(0,r);var s=t.indexOf("}");if(s<0)throw new c["a"]("Unmatched {.");a+="czm_"+t.substr(r+2,s-(r+2)),t=t.substr(s+1),r=t.indexOf("${")}}return a+=t,a}function U(e){var t=typeof e.value;return null===e.value?new M(l["a"].LITERAL_NULL,null):"boolean"===t?new M(l["a"].LITERAL_BOOLEAN,e.value):"number"===t?new M(l["a"].LITERAL_NUMBER,e.value):"string"===t?e.value.indexOf("${")>=0?new M(l["a"].VARIABLE_IN_STRING,e.value):new M(l["a"].LITERAL_STRING,k(e.value)):void 0}function G(e,t){var a,r,n,i,o=t.arguments,u=o.length;if("MemberExpression"===t.callee.type){a=t.callee.property.name;var h=t.callee.object;if("test"===a||"exec"===a){if("regExp"!==h.callee.name)throw new c["a"](a+" is not a function.");return 0===u?"test"===a?new M(l["a"].LITERAL_BOOLEAN,!1):new M(l["a"].LITERAL_NULL,null):(n=K(e,h),i=K(e,o[0]),new M(l["a"].FUNCTION_CALL,a,n,i))}if("toString"===a)return r=K(e,h),new M(l["a"].FUNCTION_CALL,a,r);throw new c["a"]('Unexpected function call "'+a+'".')}if(a=t.callee.name,"color"===a){if(0===u)return new M(l["a"].LITERAL_COLOR,a);if(r=K(e,o[0]),Object(s["a"])(o[1])){var f=K(e,o[1]);return new M(l["a"].LITERAL_COLOR,a,[r,f])}return new M(l["a"].LITERAL_COLOR,a,[r])}if("rgb"===a||"hsl"===a){if(u<3)throw new c["a"](a+" requires three arguments.");return r=[K(e,o[0]),K(e,o[1]),K(e,o[2])],new M(l["a"].LITERAL_COLOR,a,r)}if("rgba"===a||"hsla"===a){if(u<4)throw new c["a"](a+" requires four arguments.");return r=[K(e,o[0]),K(e,o[1]),K(e,o[2]),K(e,o[3])],new M(l["a"].LITERAL_COLOR,a,r)}if("vec2"===a||"vec3"===a||"vec4"===a){r=new Array(u);for(var d=0;d<u;++d)r[d]=K(e,o[d]);return new M(l["a"].LITERAL_VECTOR,a,r)}if("isNaN"===a||"isFinite"===a)return 0===u?new M(l["a"].LITERAL_BOOLEAN,"isNaN"===a):(r=K(e,o[0]),new M(l["a"].UNARY,a,r));if("isExactClass"===a||"isClass"===a){if(u<1||u>1)throw new c["a"](a+" requires exactly one argument.");return r=K(e,o[0]),new M(l["a"].UNARY,a,r)}if("getExactClassName"===a){if(u>0)throw new c["a"](a+" does not take any argument.");return new M(l["a"].UNARY,a)}if(Object(s["a"])(w[a])){if(1!==u)throw new c["a"](a+" requires exactly one argument.");return r=K(e,o[0]),new M(l["a"].UNARY,a,r)}if(Object(s["a"])(E[a])){if(2!==u)throw new c["a"](a+" requires exactly two arguments.");return n=K(e,o[0]),i=K(e,o[1]),new M(l["a"].BINARY,a,n,i)}if(Object(s["a"])(O[a])){if(3!==u)throw new c["a"](a+" requires exactly three arguments.");n=K(e,o[0]),i=K(e,o[1]);var m=K(e,o[2]);return new M(l["a"].TERNARY,a,n,i,m)}if("Boolean"===a)return 0===u?new M(l["a"].LITERAL_BOOLEAN,!1):(r=K(e,o[0]),new M(l["a"].UNARY,a,r));if("Number"===a)return 0===u?new M(l["a"].LITERAL_NUMBER,0):(r=K(e,o[0]),new M(l["a"].UNARY,a,r));if("String"===a)return 0===u?new M(l["a"].LITERAL_STRING,""):(r=K(e,o[0]),new M(l["a"].UNARY,a,r));if("regExp"===a)return z(e,t);throw new c["a"]('Unexpected function call "'+a+'".')}function z(e,t){var a=t.arguments;if(0===a.length)return new M(l["a"].LITERAL_REGEX,new RegExp);var r,n=K(e,a[0]);if(a.length>1){var i=K(e,a[1]);if(X(n)&&X(i)){try{r=new RegExp(k(String(n._value)),i._value)}catch(o){throw new c["a"](o)}return new M(l["a"].LITERAL_REGEX,r)}return new M(l["a"].REGEX,n,i)}if(X(n)){try{r=new RegExp(k(String(n._value)))}catch(o){throw new c["a"](o)}return new M(l["a"].LITERAL_REGEX,r)}return new M(l["a"].REGEX,n)}function q(e){if(W(e.name)){var t=Q(e.name);return"tiles3d_"===t.substr(0,8)?new M(l["a"].BUILTIN_VARIABLE,t):new M(l["a"].VARIABLE,t)}if("NaN"===e.name)return new M(l["a"].LITERAL_NUMBER,NaN);if("Infinity"===e.name)return new M(l["a"].LITERAL_NUMBER,1/0);if("undefined"===e.name)return new M(l["a"].LITERAL_UNDEFINED,void 0);throw new c["a"](e.name+" is not defined.")}function V(e){var t=e.property.name;return"PI"===t?new M(l["a"].LITERAL_NUMBER,Math.PI):"E"===t?new M(l["a"].LITERAL_NUMBER,Math.E):void 0}function Y(e){var t=e.property.name;if("POSITIVE_INFINITY"===t)return new M(l["a"].LITERAL_NUMBER,Number.POSITIVE_INFINITY)}function H(e,t){if("Math"===t.object.name)return V(t);if("Number"===t.object.name)return Y(t);var a,r=K(e,t.object);return t.computed?(a=K(e,t.property),new M(l["a"].MEMBER,"brackets",r,a)):(a=new M(l["a"].LITERAL_STRING,t.property.name),new M(l["a"].MEMBER,"dot",r,a))}function X(e){return e._type>=l["a"].LITERAL_NULL}function W(e){return"czm_"===e.substr(0,4)}function Q(e){return e.substr(4)}function K(e,t){var a,r,n,i;if("Literal"===t.type)a=U(t);else if("CallExpression"===t.type)a=G(e,t);else if("Identifier"===t.type)a=q(t);else if("UnaryExpression"===t.type){r=t.operator;var o=K(e,t.argument);if(!(m.indexOf(r)>-1))throw new c["a"]('Unexpected operator "'+r+'".');a=new M(l["a"].UNARY,r,o)}else if("BinaryExpression"===t.type){if(r=t.operator,n=K(e,t.left),i=K(e,t.right),!(p.indexOf(r)>-1))throw new c["a"]('Unexpected operator "'+r+'".');a=new M(l["a"].BINARY,r,n,i)}else if("LogicalExpression"===t.type)r=t.operator,n=K(e,t.left),i=K(e,t.right),p.indexOf(r)>-1&&(a=new M(l["a"].BINARY,r,n,i));else if("ConditionalExpression"===t.type){var s=K(e,t.test);n=K(e,t.consequent),i=K(e,t.alternate),a=new M(l["a"].CONDITIONAL,"?",n,i,s)}else if("MemberExpression"===t.type)a=H(e,t);else{if("ArrayExpression"!==t.type)throw"Compound"===t.type?new c["a"]("Provide exactly one expression."):new c["a"]("Cannot parse expression.");for(var u=[],h=0;h<t.elements.length;h++)u[h]=K(e,t.elements[h]);a=new M(l["a"].ARRAY,u)}return a}function Z(e){e._type===l["a"].CONDITIONAL?e.evaluate=e._evaluateConditional:e._type===l["a"].FUNCTION_CALL?"test"===e._value?e.evaluate=e._evaluateRegExpTest:"exec"===e._value?e.evaluate=e._evaluateRegExpExec:"toString"===e._value&&(e.evaluate=e._evaluateToString):e._type===l["a"].UNARY?"!"===e._value?e.evaluate=e._evaluateNot:"-"===e._value?e.evaluate=e._evaluateNegative:"+"===e._value?e.evaluate=e._evaluatePositive:"isNaN"===e._value?e.evaluate=e._evaluateNaN:"isFinite"===e._value?e.evaluate=e._evaluateIsFinite:"isExactClass"===e._value?e.evaluate=e._evaluateIsExactClass:"isClass"===e._value?e.evaluate=e._evaluateIsClass:"getExactClassName"===e._value?e.evaluate=e._evaluateGetExactClassName:"Boolean"===e._value?e.evaluate=e._evaluateBooleanConversion:"Number"===e._value?e.evaluate=e._evaluateNumberConversion:"String"===e._value?e.evaluate=e._evaluateStringConversion:Object(s["a"])(w[e._value])&&(e.evaluate=$(e._value)):e._type===l["a"].BINARY?"+"===e._value?e.evaluate=e._evaluatePlus:"-"===e._value?e.evaluate=e._evaluateMinus:"*"===e._value?e.evaluate=e._evaluateTimes:"/"===e._value?e.evaluate=e._evaluateDivide:"%"===e._value?e.evaluate=e._evaluateMod:"==="===e._value?e.evaluate=e._evaluateEqualsStrict:"!=="===e._value?e.evaluate=e._evaluateNotEqualsStrict:"<"===e._value?e.evaluate=e._evaluateLessThan:"<="===e._value?e.evaluate=e._evaluateLessThanOrEquals:">"===e._value?e.evaluate=e._evaluateGreaterThan:">="===e._value?e.evaluate=e._evaluateGreaterThanOrEquals:"&&"===e._value?e.evaluate=e._evaluateAnd:"||"===e._value?e.evaluate=e._evaluateOr:"=~"===e._value?e.evaluate=e._evaluateRegExpMatch:"!~"===e._value?e.evaluate=e._evaluateRegExpNotMatch:Object(s["a"])(E[e._value])&&(e.evaluate=ee(e._value)):e._type===l["a"].TERNARY?e.evaluate=te(e._value):e._type===l["a"].MEMBER?"brackets"===e._value?e.evaluate=e._evaluateMemberBrackets:e.evaluate=e._evaluateMemberDot:e._type===l["a"].ARRAY?e.evaluate=e._evaluateArray:e._type===l["a"].VARIABLE?e.evaluate=e._evaluateVariable:e._type===l["a"].VARIABLE_IN_STRING?e.evaluate=e._evaluateVariableString:e._type===l["a"].LITERAL_COLOR?e.evaluate=e._evaluateLiteralColor:e._type===l["a"].LITERAL_VECTOR?e.evaluate=e._evaluateLiteralVector:e._type===l["a"].LITERAL_STRING?e.evaluate=e._evaluateLiteralString:e._type===l["a"].REGEX?e.evaluate=e._evaluateRegExp:e._type===l["a"].BUILTIN_VARIABLE?"tiles3d_tileset_time"===e._value&&(e.evaluate=J):e.evaluate=e._evaluateLiteral}function J(e){return Object(s["a"])(e)?e.content.tileset.timeSinceLoad:0}function $(e){var t=w[e];return function(a){var r=this._left.evaluate(a);return t(e,r)}}function ee(e){var t=E[e];return function(a){var r=this._left.evaluate(a),n=this._right.evaluate(a);return t(e,r,n)}}function te(e){var t=O[e];return function(a){var r=this._left.evaluate(a),n=this._right.evaluate(a),i=this._test.evaluate(a);return t(e,r,n,i)}}function ae(e,t){if(Object(s["a"])(e))return e.getProperty(t)}function re(e){return"feature"===e._value}function ne(e){for(var t=e._left,a=t.length,r=0;r<a;++r)if(t[r]._type!==l["a"].LITERAL_NUMBER)return;var n=t[0]._value,i=t[1]._value,s=t[2]._value,u=4===a?t[3]._value:1;return o["a"].fromHsl(n,i,s,u,y)}function ie(e){for(var t=e._left,a=t.length,r=0;r<a;++r)if(t[r]._type!==l["a"].LITERAL_NUMBER)return;var n=y;return n.red=t[0]._value/255,n.green=t[1]._value/255,n.blue=t[2]._value/255,n.alpha=4===a?t[3]._value:1,n}function oe(e){return e%1===0?e.toFixed(1):e.toString()}function se(e){var t=oe(e.red),a=oe(e.green),r=oe(e.blue);return"vec3("+t+", "+a+", "+r+")"}function ue(e){var t=oe(e.red),a=oe(e.green),r=oe(e.blue),n=oe(e.alpha);return"vec4("+t+", "+a+", "+r+", "+n+")"}function ce(e,t,a,r){for(var n=e.length,i=new Array(n),o=0;o<n;++o)i[o]=e[o].getShaderExpression(t,a,r);return i}function he(e,t){if(!Object(s["a"])(t[e]))throw new c["a"]('Style references a property "'+e+'" that does not exist or is not styleable.');return t[e]}M.prototype._evaluateLiteral=function(){return this._value},M.prototype._evaluateLiteralColor=function(e){var t=y,a=this._left;if("color"===this._value)Object(s["a"])(a)?a.length>1?(o["a"].fromCssColorString(a[0].evaluate(e),t),t.alpha=a[1].evaluate(e)):o["a"].fromCssColorString(a[0].evaluate(e),t):o["a"].fromBytes(255,255,255,255,t);else if("rgb"===this._value)o["a"].fromBytes(a[0].evaluate(e),a[1].evaluate(e),a[2].evaluate(e),255,t);else if("rgba"===this._value){var r=255*a[3].evaluate(e);o["a"].fromBytes(a[0].evaluate(e),a[1].evaluate(e),a[2].evaluate(e),r,t)}else"hsl"===this._value?o["a"].fromHsl(a[0].evaluate(e),a[1].evaluate(e),a[2].evaluate(e),1,t):"hsla"===this._value&&o["a"].fromHsl(a[0].evaluate(e),a[1].evaluate(e),a[2].evaluate(e),a[3].evaluate(e),t);return i["a"].fromColor(t,d.getCartesian4())},M.prototype._evaluateLiteralVector=function(e){for(var t=d.getArray(),a=this._value,o=this._left,s=o.length,u=0;u<s;++u){var h=o[u].evaluate(e);if("number"===typeof h)t.push(h);else if(h instanceof r["a"])t.push(h.x,h.y);else if(h instanceof n["a"])t.push(h.x,h.y,h.z);else{if(!(h instanceof i["a"]))throw new c["a"](a+" argument must be a vector or number. Argument is "+h+".");t.push(h.x,h.y,h.z,h.w)}}var l=t.length,f=parseInt(a.charAt(3));if(0===l)throw new c["a"]("Invalid "+a+" constructor. No valid arguments.");if(l<f&&l>1)throw new c["a"]("Invalid "+a+" constructor. Not enough arguments.");if(l>f&&s>1)throw new c["a"]("Invalid "+a+" constructor. Too many arguments.");if(1===l){var m=t[0];t.push(m,m,m)}return"vec2"===a?r["a"].fromArray(t,0,d.getCartesian2()):"vec3"===a?n["a"].fromArray(t,0,d.getCartesian3()):"vec4"===a?i["a"].fromArray(t,0,d.getCartesian4()):void 0},M.prototype._evaluateLiteralString=function(){return this._value},M.prototype._evaluateVariableString=function(e){var t=this._value,a=v.exec(t);while(null!==a){var r=a[0],n=a[1],i=ae(e,n);Object(s["a"])(i)||(i=""),t=t.replace(r,i),a=v.exec(t)}return t},M.prototype._evaluateVariable=function(e){return ae(e,this._value)},M.prototype._evaluateMemberDot=function(e){if(re(this._left))return ae(e,this._right.evaluate(e));var t=this._left.evaluate(e);if(Object(s["a"])(t)){var a=this._right.evaluate(e);if(t instanceof r["a"]||t instanceof n["a"]||t instanceof i["a"]){if("r"===a)return t.x;if("g"===a)return t.y;if("b"===a)return t.z;if("a"===a)return t.w}return t[a]}},M.prototype._evaluateMemberBrackets=function(e){if(re(this._left))return ae(e,this._right.evaluate(e));var t=this._left.evaluate(e);if(Object(s["a"])(t)){var a=this._right.evaluate(e);if(t instanceof r["a"]||t instanceof n["a"]||t instanceof i["a"]){if(0===a||"r"===a)return t.x;if(1===a||"g"===a)return t.y;if(2===a||"b"===a)return t.z;if(3===a||"a"===a)return t.w}return t[a]}},M.prototype._evaluateArray=function(e){for(var t=[],a=0;a<this._value.length;a++)t[a]=this._value[a].evaluate(e);return t},M.prototype._evaluateNot=function(e){var t=this._left.evaluate(e);if("boolean"!==typeof t)throw new c["a"]('Operator "!" requires a boolean argument. Argument is '+t+".");return!t},M.prototype._evaluateNegative=function(e){var t=this._left.evaluate(e);if(t instanceof r["a"])return r["a"].negate(t,d.getCartesian2());if(t instanceof n["a"])return n["a"].negate(t,d.getCartesian3());if(t instanceof i["a"])return i["a"].negate(t,d.getCartesian4());if("number"===typeof t)return-t;throw new c["a"]('Operator "-" requires a vector or number argument. Argument is '+t+".")},M.prototype._evaluatePositive=function(e){var t=this._left.evaluate(e);if(!(t instanceof r["a"]||t instanceof n["a"]||t instanceof i["a"]||"number"===typeof t))throw new c["a"]('Operator "+" requires a vector or number argument. Argument is '+t+".");return t},M.prototype._evaluateLessThan=function(e){var t=this._left.evaluate(e),a=this._right.evaluate(e);if("number"!==typeof t||"number"!==typeof a)throw new c["a"]('Operator "<" requires number arguments. Arguments are '+t+" and "+a+".");return t<a},M.prototype._evaluateLessThanOrEquals=function(e){var t=this._left.evaluate(e),a=this._right.evaluate(e);if("number"!==typeof t||"number"!==typeof a)throw new c["a"]('Operator "<=" requires number arguments. Arguments are '+t+" and "+a+".");return t<=a},M.prototype._evaluateGreaterThan=function(e){var t=this._left.evaluate(e),a=this._right.evaluate(e);if("number"!==typeof t||"number"!==typeof a)throw new c["a"]('Operator ">" requires number arguments. Arguments are '+t+" and "+a+".");return t>a},M.prototype._evaluateGreaterThanOrEquals=function(e){var t=this._left.evaluate(e),a=this._right.evaluate(e);if("number"!==typeof t||"number"!==typeof a)throw new c["a"]('Operator ">=" requires number arguments. Arguments are '+t+" and "+a+".");return t>=a},M.prototype._evaluateOr=function(e){var t=this._left.evaluate(e);if("boolean"!==typeof t)throw new c["a"]('Operator "||" requires boolean arguments. First argument is '+t+".");if(t)return!0;var a=this._right.evaluate(e);if("boolean"!==typeof a)throw new c["a"]('Operator "||" requires boolean arguments. Second argument is '+a+".");return t||a},M.prototype._evaluateAnd=function(e){var t=this._left.evaluate(e);if("boolean"!==typeof t)throw new c["a"]('Operator "&&" requires boolean arguments. First argument is '+t+".");if(!t)return!1;var a=this._right.evaluate(e);if("boolean"!==typeof a)throw new c["a"]('Operator "&&" requires boolean arguments. Second argument is '+a+".");return t&&a},M.prototype._evaluatePlus=function(e){var t=this._left.evaluate(e),a=this._right.evaluate(e);if(a instanceof r["a"]&&t instanceof r["a"])return r["a"].add(t,a,d.getCartesian2());if(a instanceof n["a"]&&t instanceof n["a"])return n["a"].add(t,a,d.getCartesian3());if(a instanceof i["a"]&&t instanceof i["a"])return i["a"].add(t,a,d.getCartesian4());if("string"===typeof t||"string"===typeof a)return t+a;if("number"===typeof t&&"number"===typeof a)return t+a;throw new c["a"]('Operator "+" requires vector or number arguments of matching types, or at least one string argument. Arguments are '+t+" and "+a+".")},M.prototype._evaluateMinus=function(e){var t=this._left.evaluate(e),a=this._right.evaluate(e);if(a instanceof r["a"]&&t instanceof r["a"])return r["a"].subtract(t,a,d.getCartesian2());if(a instanceof n["a"]&&t instanceof n["a"])return n["a"].subtract(t,a,d.getCartesian3());if(a instanceof i["a"]&&t instanceof i["a"])return i["a"].subtract(t,a,d.getCartesian4());if("number"===typeof t&&"number"===typeof a)return t-a;throw new c["a"]('Operator "-" requires vector or number arguments of matching types. Arguments are '+t+" and "+a+".")},M.prototype._evaluateTimes=function(e){var t=this._left.evaluate(e),a=this._right.evaluate(e);if(a instanceof r["a"]&&t instanceof r["a"])return r["a"].multiplyComponents(t,a,d.getCartesian2());if(a instanceof r["a"]&&"number"===typeof t)return r["a"].multiplyByScalar(a,t,d.getCartesian2());if(t instanceof r["a"]&&"number"===typeof a)return r["a"].multiplyByScalar(t,a,d.getCartesian2());if(a instanceof n["a"]&&t instanceof n["a"])return n["a"].multiplyComponents(t,a,d.getCartesian3());if(a instanceof n["a"]&&"number"===typeof t)return n["a"].multiplyByScalar(a,t,d.getCartesian3());if(t instanceof n["a"]&&"number"===typeof a)return n["a"].multiplyByScalar(t,a,d.getCartesian3());if(a instanceof i["a"]&&t instanceof i["a"])return i["a"].multiplyComponents(t,a,d.getCartesian4());if(a instanceof i["a"]&&"number"===typeof t)return i["a"].multiplyByScalar(a,t,d.getCartesian4());if(t instanceof i["a"]&&"number"===typeof a)return i["a"].multiplyByScalar(t,a,d.getCartesian4());if("number"===typeof t&&"number"===typeof a)return t*a;throw new c["a"]('Operator "*" requires vector or number arguments. If both arguments are vectors they must be matching types. Arguments are '+t+" and "+a+".")},M.prototype._evaluateDivide=function(e){var t=this._left.evaluate(e),a=this._right.evaluate(e);if(a instanceof r["a"]&&t instanceof r["a"])return r["a"].divideComponents(t,a,d.getCartesian2());if(t instanceof r["a"]&&"number"===typeof a)return r["a"].divideByScalar(t,a,d.getCartesian2());if(a instanceof n["a"]&&t instanceof n["a"])return n["a"].divideComponents(t,a,d.getCartesian3());if(t instanceof n["a"]&&"number"===typeof a)return n["a"].divideByScalar(t,a,d.getCartesian3());if(a instanceof i["a"]&&t instanceof i["a"])return i["a"].divideComponents(t,a,d.getCartesian4());if(t instanceof i["a"]&&"number"===typeof a)return i["a"].divideByScalar(t,a,d.getCartesian4());if("number"===typeof t&&"number"===typeof a)return t/a;throw new c["a"]('Operator "/" requires vector or number arguments of matching types, or a number as the second argument. Arguments are '+t+" and "+a+".")},M.prototype._evaluateMod=function(e){var t=this._left.evaluate(e),a=this._right.evaluate(e);if(a instanceof r["a"]&&t instanceof r["a"])return r["a"].fromElements(t.x%a.x,t.y%a.y,d.getCartesian2());if(a instanceof n["a"]&&t instanceof n["a"])return n["a"].fromElements(t.x%a.x,t.y%a.y,t.z%a.z,d.getCartesian3());if(a instanceof i["a"]&&t instanceof i["a"])return i["a"].fromElements(t.x%a.x,t.y%a.y,t.z%a.z,t.w%a.w,d.getCartesian4());if("number"===typeof t&&"number"===typeof a)return t%a;throw new c["a"]('Operator "%" requires vector or number arguments of matching types. Arguments are '+t+" and "+a+".")},M.prototype._evaluateEqualsStrict=function(e){var t=this._left.evaluate(e),a=this._right.evaluate(e);return a instanceof r["a"]&&t instanceof r["a"]||a instanceof n["a"]&&t instanceof n["a"]||a instanceof i["a"]&&t instanceof i["a"]?t.equals(a):t===a},M.prototype._evaluateNotEqualsStrict=function(e){var t=this._left.evaluate(e),a=this._right.evaluate(e);return a instanceof r["a"]&&t instanceof r["a"]||a instanceof n["a"]&&t instanceof n["a"]||a instanceof i["a"]&&t instanceof i["a"]?!t.equals(a):t!==a},M.prototype._evaluateConditional=function(e){var t=this._test.evaluate(e);if("boolean"!==typeof t)throw new c["a"]("Conditional argument of conditional expression must be a boolean. Argument is "+t+".");return t?this._left.evaluate(e):this._right.evaluate(e)},M.prototype._evaluateNaN=function(e){return isNaN(this._left.evaluate(e))},M.prototype._evaluateIsFinite=function(e){return isFinite(this._left.evaluate(e))},M.prototype._evaluateIsExactClass=function(e){return!!Object(s["a"])(e)&&e.isExactClass(this._left.evaluate(e))},M.prototype._evaluateIsClass=function(e){return!!Object(s["a"])(e)&&e.isClass(this._left.evaluate(e))},M.prototype._evaluateGetExactClassName=function(e){if(Object(s["a"])(e))return e.getExactClassName()},M.prototype._evaluateBooleanConversion=function(e){return Boolean(this._left.evaluate(e))},M.prototype._evaluateNumberConversion=function(e){return Number(this._left.evaluate(e))},M.prototype._evaluateStringConversion=function(e){return String(this._left.evaluate(e))},M.prototype._evaluateRegExp=function(e){var t,a=this._value.evaluate(e),r="";Object(s["a"])(this._left)&&(r=this._left.evaluate(e));try{t=new RegExp(a,r)}catch(n){throw new c["a"](n)}return t},M.prototype._evaluateRegExpTest=function(e){var t=this._left.evaluate(e),a=this._right.evaluate(e);if(!(t instanceof RegExp&&"string"===typeof a))throw new c["a"]("RegExp.test requires the first argument to be a RegExp and the second argument to be a string. Arguments are "+t+" and "+a+".");return t.test(a)},M.prototype._evaluateRegExpMatch=function(e){var t=this._left.evaluate(e),a=this._right.evaluate(e);if(t instanceof RegExp&&"string"===typeof a)return t.test(a);if(a instanceof RegExp&&"string"===typeof t)return a.test(t);throw new c["a"]('Operator "=~" requires one RegExp argument and one string argument. Arguments are '+t+" and "+a+".")},M.prototype._evaluateRegExpNotMatch=function(e){var t=this._left.evaluate(e),a=this._right.evaluate(e);if(t instanceof RegExp&&"string"===typeof a)return!t.test(a);if(a instanceof RegExp&&"string"===typeof t)return!a.test(t);throw new c["a"]('Operator "!~" requires one RegExp argument and one string argument. Arguments are '+t+" and "+a+".")},M.prototype._evaluateRegExpExec=function(e){var t=this._left.evaluate(e),a=this._right.evaluate(e);if(!(t instanceof RegExp&&"string"===typeof a))throw new c["a"]("RegExp.exec requires the first argument to be a RegExp and the second argument to be a string. Arguments are "+t+" and "+a+".");var r=t.exec(a);return Object(s["a"])(r)?r[1]:null},M.prototype._evaluateToString=function(e){var t=this._left.evaluate(e);if(t instanceof RegExp||t instanceof r["a"]||t instanceof n["a"]||t instanceof i["a"])return String(t);throw new c["a"]('Unexpected function call "'+this._value+'".')};var le="czm_infinity";M.prototype.getShaderExpression=function(e,t,a){var r,n,i,u,h=this._type,f=this._value;switch(Object(s["a"])(this._left)&&(n=Array.isArray(this._left)?ce(this._left,e,t,this):this._left.getShaderExpression(e,t,this)),Object(s["a"])(this._right)&&(i=this._right.getShaderExpression(e,t,this)),Object(s["a"])(this._test)&&(u=this._test.getShaderExpression(e,t,this)),Array.isArray(this._value)&&(f=ce(this._value,e,t,this)),h){case l["a"].VARIABLE:if(re(this))return;return he(f,e);case l["a"].UNARY:if("Boolean"===f)return"bool("+n+")";if("Number"===f)return"float("+n+")";if("round"===f)return"floor("+n+" + 0.5)";if(Object(s["a"])(w[f]))return f+"("+n+")";if("isNaN"===f)return"("+n+" != "+n+")";if("isFinite"===f)return"(abs("+n+") < czm_infinity)";if("String"===f||"isExactClass"===f||"isClass"===f||"getExactClassName"===f)throw new c["a"]('Error generating style shader: "'+f+'" is not supported.');return f+n;case l["a"].BINARY:return"%"===f?"mod("+n+", "+i+")":"==="===f?"("+n+" == "+i+")":"!=="===f?"("+n+" != "+i+")":"atan2"===f?"atan("+n+", "+i+")":Object(s["a"])(E[f])?f+"("+n+", "+i+")":"("+n+" "+f+" "+i+")";case l["a"].TERNARY:if(Object(s["a"])(O[f]))return f+"("+n+", "+i+", "+u+")";break;case l["a"].CONDITIONAL:return"("+u+" ? "+n+" : "+i+")";case l["a"].MEMBER:return re(this._left)?he(i,e):"r"===i||"x"===i||"0.0"===i?n+"[0]":"g"===i||"y"===i||"1.0"===i?n+"[1]":"b"===i||"z"===i||"2.0"===i?n+"[2]":"a"===i||"w"===i||"3.0"===i?n+"[3]":n+"[int("+i+")]";case l["a"].FUNCTION_CALL:throw new c["a"]('Error generating style shader: "'+f+'" is not supported.');case l["a"].ARRAY:if(4===f.length)return"vec4("+f[0]+", "+f[1]+", "+f[2]+", "+f[3]+")";if(3===f.length)return"vec3("+f[0]+", "+f[1]+", "+f[2]+")";if(2===f.length)return"vec2("+f[0]+", "+f[1]+")";throw new c["a"]("Error generating style shader: Invalid array length. Array length should be 2, 3, or 4.");case l["a"].REGEX:throw new c["a"]("Error generating style shader: Regular expressions are not supported.");case l["a"].VARIABLE_IN_STRING:throw new c["a"]("Error generating style shader: Converting a variable to a string is not supported.");case l["a"].LITERAL_NULL:return le;case l["a"].LITERAL_BOOLEAN:return f?"true":"false";case l["a"].LITERAL_NUMBER:return oe(f);case l["a"].LITERAL_STRING:if(Object(s["a"])(a)&&a._type===l["a"].MEMBER&&("r"===f||"g"===f||"b"===f||"a"===f||"x"===f||"y"===f||"z"===f||"w"===f||re(a._left)))return f;if(r=o["a"].fromCssColorString(f,y),Object(s["a"])(r))return se(r);throw new c["a"]("Error generating style shader: String literals are not supported.");case l["a"].LITERAL_COLOR:var d=n;if("color"===f){if(!Object(s["a"])(d))return"vec4(1.0)";if(d.length>1){var m=d[0],p=d[1];return"1.0"!==p&&(t.translucent=!0),"vec4("+m+", "+p+")"}return"vec4("+d[0]+", 1.0)"}if("rgb"===f)return r=ie(this),Object(s["a"])(r)?ue(r):"vec4("+d[0]+" / 255.0, "+d[1]+" / 255.0, "+d[2]+" / 255.0, 1.0)";if("rgba"===f)return"1.0"!==d[3]&&(t.translucent=!0),r=ie(this),Object(s["a"])(r)?ue(r):"vec4("+d[0]+" / 255.0, "+d[1]+" / 255.0, "+d[2]+" / 255.0, "+d[3]+")";if("hsl"===f)return r=ne(this),Object(s["a"])(r)?ue(r):"vec4(czm_HSLToRGB(vec3("+d[0]+", "+d[1]+", "+d[2]+")), 1.0)";if("hsla"===f)return r=ne(this),Object(s["a"])(r)?(1!==r.alpha&&(t.translucent=!0),ue(r)):("1.0"!==d[3]&&(t.translucent=!0),"vec4(czm_HSLToRGB(vec3("+d[0]+", "+d[1]+", "+d[2]+")), "+d[3]+")");break;case l["a"].LITERAL_VECTOR:for(var v=n.length,_=f+"(",g=0;g<v;++g)_+=n[g],g<v-1&&(_+=", ");return _+=")",_;case l["a"].LITERAL_REGEX:throw new c["a"]("Error generating style shader: Regular expressions are not supported.");case l["a"].LITERAL_UNDEFINED:return le;case l["a"].BUILTIN_VARIABLE:if("tiles3d_tileset_time"===f)return"u_time"}},t["a"]=f},"71af":function(e,t,a){"use strict";var r=a("535a"),n=a("2f63"),i=a("2720"),o=a("d4ed");function s(e){e=Object(r["a"])(e,r["a"].EMPTY_OBJECT),this._pixelsToCheck=e.pixelsToCheck,this._missingImagePixels=void 0,this._missingImageByteLength=void 0,this._isReady=!1;var t=o["a"].createIfNeeded(e.missingImageUrl),a=this;function s(t){Object(n["a"])(t.blob)&&(a._missingImageByteLength=t.blob.size);var r=Object(i["a"])(t);if(e.disableCheckIfAllPixelsAreTransparent){for(var o=!0,s=t.width,u=e.pixelsToCheck,c=0,h=u.length;o&&c<h;++c){var l=u[c],f=4*l.x+l.y*s,d=r[f+3];d>0&&(o=!1)}o&&(r=void 0)}a._missingImagePixels=r,a._isReady=!0}function u(){a._missingImagePixels=void 0,a._isReady=!0}t.fetchImage({preferBlob:!0,preferImageBitmap:!0,flipY:!0}).then(s).otherwise(u)}s.prototype.isReady=function(){return this._isReady},s.prototype.shouldDiscardImage=function(e){var t=this._pixelsToCheck,a=this._missingImagePixels;if(!Object(n["a"])(a))return!1;if(Object(n["a"])(e.blob)&&e.blob.size!==this._missingImageByteLength)return!1;for(var r=Object(i["a"])(e),o=e.width,s=0,u=t.length;s<u;++s)for(var c=t[s],h=4*c.x+c.y*o,l=0;l<4;++l){var f=h+l;if(r[f]!==a[f])return!1}return!0},t["a"]=s},"7a2e":function(e,t,a){"use strict";var r={VARIABLE:0,UNARY:1,BINARY:2,TERNARY:3,CONDITIONAL:4,MEMBER:5,FUNCTION_CALL:6,ARRAY:7,REGEX:8,VARIABLE_IN_STRING:9,LITERAL_NULL:10,LITERAL_BOOLEAN:11,LITERAL_NUMBER:12,LITERAL_STRING:13,LITERAL_COLOR:14,LITERAL_VECTOR:15,LITERAL_REGEX:16,LITERAL_UNDEFINED:17,BUILTIN_VARIABLE:18};t["a"]=Object.freeze(r)},"81e1":function(e,t,a){"use strict";var r=a("cef5"),n=a("be18"),i=a("abab"),o=a("2f63"),s=a("5e57"),u=a("d2c7"),c=a("81d7"),h=a("713f"),l=a("1b8d"),f=a("8b68"),d=a("a894"),m=a("d289"),p=a("6dc0"),v=a("e90c"),_=a("5770"),g=a("7c5e"),b=a("9182"),y=a("9c6c"),w=a("a307");function E(){this._rs=void 0,this._sp=void 0,this._va=void 0,this._command=void 0,this._mode=void 0,this._useLogDepth=!1}var O=s["a"].supportsTypedArrays()?new Float32Array(12):[],C=new n["a"],x=new n["a"],A=new n["a"],S=new n["a"],R=new n["a"];function L(e,t){var a,r,i,o=e.radii,s=t.camera;if(s.frustum instanceof h["a"])a=n["a"].ZERO,r=s.rightWC,i=s.upWC;else{var u=s.positionWC,c=n["a"].multiplyComponents(e.oneOverRadii,u,C),l=n["a"].normalize(c,x),f=n["a"].normalize(n["a"].cross(n["a"].UNIT_Z,c,A),A),d=n["a"].normalize(n["a"].cross(l,f,S),S),m=n["a"].magnitude(c),p=Math.sqrt(m*m-1);a=n["a"].multiplyByScalar(l,1/m,C);var v=p/m;r=n["a"].multiplyByScalar(f,v,x),i=n["a"].multiplyByScalar(d,v,A)}var _=n["a"].add(a,i,R);n["a"].subtract(_,r,_),n["a"].multiplyComponents(o,_,_),n["a"].pack(_,O,0);var g=n["a"].subtract(a,i,R);n["a"].subtract(g,r,g),n["a"].multiplyComponents(o,g,g),n["a"].pack(g,O,3);var b=n["a"].add(a,i,R);n["a"].add(b,r,b),n["a"].multiplyComponents(o,b,b),n["a"].pack(b,O,6);var y=n["a"].subtract(a,i,R);return n["a"].add(y,r,y),n["a"].multiplyComponents(o,y,y),n["a"].pack(y,O,9),O}E.prototype.update=function(e){if(this._mode=e.mode,e.mode===w["a"].SCENE3D){var t=e.context,a=e.mapProjection.ellipsoid,s=e.useLogDepth;if(Object(o["a"])(this._command)||(this._rs=p["a"].fromCache({cull:{enabled:!0},depthTest:{enabled:!0},colorMask:{red:!1,green:!1,blue:!1,alpha:!1}}),this._command=new d["a"]({renderState:this._rs,boundingVolume:new r["a"](n["a"].ZERO,a.maximumRadius),pass:m["a"].OPAQUE,owner:this})),!Object(o["a"])(this._sp)||this._useLogDepth!==s){this._useLogDepth=s;var h=new _["a"]({sources:[y["a"]]}),E=new _["a"]({sources:[b["a"]]});if(s){var O="#ifdef GL_EXT_frag_depth \n#extension GL_EXT_frag_depth : enable \n#endif \n\n";E.sources.push(O),E.defines.push("LOG_DEPTH"),h.defines.push("LOG_DEPTH")}this._sp=v["a"].replaceCache({shaderProgram:this._sp,context:t,vertexShaderSource:h,fragmentShaderSource:E,attributeLocations:{position:0}}),this._command.shaderProgram=this._sp}var C=L(a,e);if(Object(o["a"])(this._va))this._va.getAttribute(0).vertexBuffer.copyFromArrayView(C);else{var x=new u["a"]({attributes:{position:new c["a"]({componentDatatype:i["a"].FLOAT,componentsPerAttribute:3,values:C})},indices:[0,1,2,2,1,3],primitiveType:l["a"].TRIANGLES});this._va=g["a"].fromGeometry({context:t,geometry:x,attributeLocations:{position:0},bufferUsage:f["a"].DYNAMIC_DRAW}),this._command.vertexArray=this._va}}},E.prototype.execute=function(e,t){this._mode===w["a"].SCENE3D&&this._command.execute(e,t)},E.prototype.isDestroyed=function(){return!1},E.prototype.destroy=function(){this._sp=this._sp&&this._sp.destroy(),this._va=this._va&&this._va.destroy()},t["a"]=E},"892b":function(e,t,a){"use strict";var r=a("535a"),n=a("2f63"),i=a("5cb0");function o(e){e=Object(r["a"])(e,r["a"].EMPTY_OBJECT);var t=e.attributeName,a=e.perInstanceAttribute;Object(n["a"])(a)||(a=!1);var o,s=Object(r["a"])(e.glslDatatype,"vec3"),u="v_"+t;if("normal"===t||"tangent"===t||"bitangent"===t)o="vec4 getColor() { return vec4(("+u+" + vec3(1.0)) * 0.5, 1.0); }\n";else switch("st"===t&&(s="vec2"),s){case"float":o="vec4 getColor() { return vec4(vec3("+u+"), 1.0); }\n";break;case"vec2":o="vec4 getColor() { return vec4("+u+", 0.0, 1.0); }\n";break;case"vec3":o="vec4 getColor() { return vec4("+u+", 1.0); }\n";break;case"vec4":o="vec4 getColor() { return "+u+"; }\n";break}var c="attribute vec3 position3DHigh;\nattribute vec3 position3DLow;\nattribute float batchId;\n"+(a?"":"attribute "+s+" "+t+";\n")+"varying "+s+" "+u+";\nvoid main()\n{\nvec4 p = czm_translateRelativeToEye(position3DHigh, position3DLow);\n"+(a?u+" = czm_batchTable_"+t+"(batchId);\n":u+" = "+t+";\n")+"gl_Position = czm_modelViewProjectionRelativeToEye * p;\n}",h="varying "+s+" "+u+";\n"+o+"\nvoid main()\n{\ngl_FragColor = getColor();\n}";this.material=void 0,this.translucent=Object(r["a"])(e.translucent,!1),this._vertexShaderSource=Object(r["a"])(e.vertexShaderSource,c),this._fragmentShaderSource=Object(r["a"])(e.fragmentShaderSource,h),this._renderState=i["a"].getDefaultRenderState(!1,!1,e.renderState),this._closed=Object(r["a"])(e.closed,!1),this._attributeName=t,this._glslDatatype=s}Object.defineProperties(o.prototype,{vertexShaderSource:{get:function(){return this._vertexShaderSource}},fragmentShaderSource:{get:function(){return this._fragmentShaderSource}},renderState:{get:function(){return this._renderState}},closed:{get:function(){return this._closed}},attributeName:{get:function(){return this._attributeName}},glslDatatype:{get:function(){return this._glslDatatype}}}),o.prototype.getFragmentShaderSource=i["a"].prototype.getFragmentShaderSource,o.prototype.isTranslucent=i["a"].prototype.isTranslucent,o.prototype.getRenderState=i["a"].prototype.getRenderState,t["a"]=o},"8e47":function(e,t,a){"use strict";var r=a("bd8d"),n=a("a894"),i=a("5770"),o=a("e90c"),s=a("2f63");function u(){this._cachedShowFrustumsShaders={}}function c(e){var t={},a=e.vertexAttributes;for(var r in a)a.hasOwnProperty(r)&&(t[r]=a[r].index);return t}function h(e,t){var a=e.context,r=t,n=r.fragmentShaderSource.clone(),s=[];n.sources=n.sources.map((function(e){e=i["a"].replaceMain(e,"czm_Debug_main");var t,a=/gl_FragData\[(\d+)\]/g;while(null!==(t=a.exec(e)))-1===s.indexOf(t[1])&&s.push(t[1]);return e}));var u,h=s.length,l="";if(l+="uniform vec3 debugShowCommandsColor;\n",l+="uniform vec3 debugShowFrustumsColor;\n",l+="void main() \n{ \n    czm_Debug_main(); \n",h>0)for(u=0;u<h;++u)l+="    gl_FragData["+s[u]+"].rgb *= debugShowCommandsColor;\n",l+="    gl_FragData["+s[u]+"].rgb *= debugShowFrustumsColor;\n";else l+="    gl_FragColor.rgb *= debugShowCommandsColor;\n",l+="    gl_FragColor.rgb *= debugShowFrustumsColor;\n";l+="}",n.sources.push(l);var f=c(r);return o["a"].fromCache({context:a,vertexShaderSource:r.vertexShaderSource,fragmentShaderSource:n,attributeLocations:f})}var l=new r["a"];function f(e,t){var a;return a=Object(s["a"])(t.uniformMap)?t.uniformMap:{},Object(s["a"])(a.debugShowCommandsColor)||Object(s["a"])(a.debugShowFrustumsColor)||(a.debugShowCommandsColor=function(){return e.debugShowCommands?(Object(s["a"])(t._debugColor)||(t._debugColor=r["a"].fromRandom()),t._debugColor):r["a"].WHITE},a.debugShowFrustumsColor=function(){return e.debugShowFrustums?(l.red=1&t.debugOverlappingFrustums?1:0,l.green=2&t.debugOverlappingFrustums?1:0,l.blue=4&t.debugOverlappingFrustums?1:0,l.alpha=1,l):r["a"].WHITE}),a}var d=new n["a"];u.prototype.executeDebugShowFrustumsCommand=function(e,t,a){var r=t.shaderProgram.id,i=this._cachedShowFrustumsShaders[r];Object(s["a"])(i)||(i=h(e,t.shaderProgram),this._cachedShowFrustumsShaders[r]=i);var o=n["a"].shallowClone(t,d);o.shaderProgram=i,o.uniformMap=f(e,t),o.execute(e.context,a)},t["a"]=u},"9cff":function(e,t,a){"use strict";var r=a("2f63"),n=a("7d62"),i=a("93da"),o=a("df07"),s=a("0260");function u(e){this._scene=e,this._lastAlpha=void 0,this._lastBeta=void 0,this._lastGamma=void 0,this._alpha=void 0,this._beta=void 0,this._gamma=void 0;var t=this;function a(e){var a=e.alpha;if(!Object(r["a"])(a))return t._alpha=void 0,t._beta=void 0,void(t._gamma=void 0);t._alpha=i["a"].toRadians(a),t._beta=i["a"].toRadians(e.beta),t._gamma=i["a"].toRadians(e.gamma)}window.addEventListener("deviceorientation",a,!1),this._removeListener=function(){window.removeEventListener("deviceorientation",a,!1)}}var c=new s["a"],h=new s["a"],l=new o["a"];function f(e,t,a,r){var n=e.direction,i=e.right,u=e.up,f=s["a"].fromAxisAngle(n,a,h),d=s["a"].fromAxisAngle(i,r,c),m=s["a"].multiply(d,f,d),p=s["a"].fromAxisAngle(u,t,h);s["a"].multiply(p,m,m);var v=o["a"].fromQuaternion(m,l);o["a"].multiplyByVector(v,i,i),o["a"].multiplyByVector(v,u,u),o["a"].multiplyByVector(v,n,n)}u.prototype.update=function(){if(Object(r["a"])(this._alpha)){Object(r["a"])(this._lastAlpha)||(this._lastAlpha=this._alpha,this._lastBeta=this._beta,this._lastGamma=this._gamma);var e=this._lastAlpha-this._alpha,t=this._lastBeta-this._beta,a=this._lastGamma-this._gamma;f(this._scene.camera,-e,t,a),this._lastAlpha=this._alpha,this._lastBeta=this._beta,this._lastGamma=this._gamma}},u.prototype.isDestroyed=function(){return!1},u.prototype.destroy=function(){return this._removeListener(),Object(n["a"])(this)},t["a"]=u},c36f:function(e,t,a){"use strict";var r=a("9201"),n=a("be18"),i=a("bd8d"),o=a("535a"),s=a("2f63"),u=a("7d62"),c=a("d9403"),h=a("52f0"),l=a("bb71"),f=a("63ae"),d=a("894b");function m(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT),this.length=Object(o["a"])(e.length,1e7),this._length=void 0,this.width=Object(o["a"])(e.width,2),this._width=void 0,this.show=Object(o["a"])(e.show,!0),this.modelMatrix=h["a"].clone(Object(o["a"])(e.modelMatrix,h["a"].IDENTITY)),this._modelMatrix=new h["a"],this.id=e.id,this._id=void 0,this._primitive=void 0}m.prototype.update=function(e){if(this.show){if(!Object(s["a"])(this._primitive)||!h["a"].equals(this._modelMatrix,this.modelMatrix)||this._length!==this.length||this._width!==this.width||this._id!==this.id){this._modelMatrix=h["a"].clone(this.modelMatrix,this._modelMatrix),this._length=this.length,this._width=this.width,this._id=this.id,Object(s["a"])(this._primitive)&&this._primitive.destroy(),0===this.modelMatrix[12]&&0===this.modelMatrix[13]&&0===this.modelMatrix[14]&&(this.modelMatrix[14]=.01);var t=new c["a"]({geometry:new l["a"]({positions:[n["a"].ZERO,n["a"].UNIT_X],width:this.width,vertexFormat:f["a"].VERTEX_FORMAT,colors:[i["a"].RED,i["a"].RED],arcType:r["a"].NONE}),modelMatrix:h["a"].multiplyByUniformScale(this.modelMatrix,this.length,new h["a"]),id:this.id,pickPrimitive:this}),a=new c["a"]({geometry:new l["a"]({positions:[n["a"].ZERO,n["a"].UNIT_Y],width:this.width,vertexFormat:f["a"].VERTEX_FORMAT,colors:[i["a"].GREEN,i["a"].GREEN],arcType:r["a"].NONE}),modelMatrix:h["a"].multiplyByUniformScale(this.modelMatrix,this.length,new h["a"]),id:this.id,pickPrimitive:this}),o=new c["a"]({geometry:new l["a"]({positions:[n["a"].ZERO,n["a"].UNIT_Z],width:this.width,vertexFormat:f["a"].VERTEX_FORMAT,colors:[i["a"].BLUE,i["a"].BLUE],arcType:r["a"].NONE}),modelMatrix:h["a"].multiplyByUniformScale(this.modelMatrix,this.length,new h["a"]),id:this.id,pickPrimitive:this});this._primitive=new d["a"]({geometryInstances:[t,a,o],appearance:new f["a"],asynchronous:!1})}this._primitive.update(e)}},m.prototype.isDestroyed=function(){return!1},m.prototype.destroy=function(){return this._primitive=this._primitive&&this._primitive.destroy(),Object(u["a"])(this)},t["a"]=m},c872:function(e,t,a){"use strict";var r=a("7d62");function n(e,t){this._tileset=e,this._tile=t,this.featurePropertiesDirty=!1}Object.defineProperties(n.prototype,{featuresLength:{get:function(){return 0}},pointsLength:{get:function(){return 0}},trianglesLength:{get:function(){return 0}},geometryByteLength:{get:function(){return 0}},texturesByteLength:{get:function(){return 0}},batchTableByteLength:{get:function(){return 0}},innerContents:{get:function(){}},readyPromise:{get:function(){}},tileset:{get:function(){return this._tileset}},tile:{get:function(){return this._tile}},url:{get:function(){}},batchTable:{get:function(){}}}),n.prototype.hasProperty=function(e,t){return!1},n.prototype.getFeature=function(e){},n.prototype.applyDebugSettings=function(e,t){},n.prototype.applyStyle=function(e){},n.prototype.update=function(e,t){},n.prototype.isDestroyed=function(){return!1},n.prototype.destroy=function(){return Object(r["a"])(this)},t["a"]=n},c965:function(e,t,a){"use strict";var r=a("be18"),n=a("bd8d"),i=a("9541"),o=a("535a"),s=a("2f63"),u=a("7d62"),c=a("8d4e"),h=a("797c"),l=a("d9403"),f=a("df07"),d=a("713f"),m=a("c34a"),p=a("4e1a"),v=a("4dc8"),_=a("0260"),g=a("3a8e"),b=a("894b");function y(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT),this._camera=e.camera,this._frustumSplits=e.frustumSplits,this._color=Object(o["a"])(e.color,n["a"].CYAN),this._updateOnChange=Object(o["a"])(e.updateOnChange,!0),this.show=Object(o["a"])(e.show,!0),this.id=e.id,this._id=void 0,this._outlinePrimitives=[],this._planesPrimitives=[]}var w=new r["a"],E=new f["a"],O=new _["a"],C=new p["a"],x=new v["a"],A=new d["a"],S=new m["a"],R=new n["a"],L=[1,1e5];y.prototype.update=function(e){if(this.show){var t,a,o=this._planesPrimitives,u=this._outlinePrimitives;if(this._updateOnChange){for(a=o.length,t=0;t<a;++t)u[t]=u[t]&&u[t].destroy(),o[t]=o[t]&&o[t].destroy();o.length=0,u.length=0}if(0===o.length){var m,y,T=this._camera,I=T.frustum;m=I instanceof p["a"]?C:I instanceof v["a"]?x:I instanceof d["a"]?A:S,m=I.clone(m);var N=this._frustumSplits;!Object(s["a"])(N)||N.length<=1?(N=L,N[0]=this._camera.frustum.near,N[1]=this._camera.frustum.far,y=1):y=N.length-1;var j=T.positionWC,P=T.directionWC,M=T.upWC,D=T.rightWC;D=r["a"].negate(D,w);var B=E;f["a"].setColumn(B,0,D,B),f["a"].setColumn(B,1,M,B),f["a"].setColumn(B,2,P,B);var k=_["a"].fromRotationMatrix(B,O);for(o.length=u.length=y,t=0;t<y;++t)m.near=N[t],m.far=N[t+1],o[t]=new b["a"]({geometryInstances:new l["a"]({geometry:new c["a"]({origin:j,orientation:k,frustum:m,_drawNearPlane:0===t}),attributes:{color:i["a"].fromColor(n["a"].fromAlpha(this._color,.1,R))},id:this.id,pickPrimitive:this}),appearance:new g["a"]({translucent:!0,flat:!0}),asynchronous:!1}),u[t]=new b["a"]({geometryInstances:new l["a"]({geometry:new h["a"]({origin:j,orientation:k,frustum:m,_drawNearPlane:0===t}),attributes:{color:i["a"].fromColor(this._color)},id:this.id,pickPrimitive:this}),appearance:new g["a"]({translucent:!1,flat:!0}),asynchronous:!1})}for(a=o.length,t=0;t<a;++t)u[t].update(e),o[t].update(e)}},y.prototype.isDestroyed=function(){return!1},y.prototype.destroy=function(){for(var e=this._planesPrimitives.length,t=0;t<e;++t)this._outlinePrimitives[t]=this._outlinePrimitives[t]&&this._outlinePrimitives[t].destroy(),this._planesPrimitives[t]=this._planesPrimitives[t]&&this._planesPrimitives[t].destroy();return Object(u["a"])(this)},t["a"]=y},cc61:function(e,t,a){"use strict";var r=a("be18"),n=a("bd8d"),i=a("535a");function o(e){this.direction=r["a"].clone(e.direction),this.color=n["a"].clone(Object(i["a"])(e.color,n["a"].WHITE)),this.intensity=Object(i["a"])(e.intensity,1)}t["a"]=o},ed8b:function(e,t,a){"use strict";var r=a("2f63"),n=a("a894"),i=a("6dc0"),o=a("5770");function s(){}var u=/\bgl_FragDepthEXT\b/,c=/\bdiscard\b/;function h(e,t){var a=e.shaderCache.getDerivedShaderProgram(t,"depthOnly");if(!Object(r["a"])(a)){var n,i=t._attributeLocations,s=t.fragmentShaderSource,h=!1,l=s.sources,f=l.length;for(n=0;n<f;++n)if(u.test(l[n])||c.test(l[n])){h=!0;break}var d,m=!1,p=s.defines;for(f=p.length,n=0;n<f;++n)if("LOG_DEPTH"===p[n]){m=!0;break}h||m?!h&&m&&(d="#ifdef GL_EXT_frag_depth \n#extension GL_EXT_frag_depth : enable \n#endif \n\nvoid main() \n{ \n    gl_FragColor = vec4(1.0); \n    czm_writeLogDepth(); \n} \n",s=new o["a"]({defines:["LOG_DEPTH"],sources:[d]})):(d="void main() \n{ \n    gl_FragColor = vec4(1.0); \n} \n",s=new o["a"]({sources:[d]})),a=e.shaderCache.createDerivedShaderProgram(t,"depthOnly",{vertexShaderSource:t.vertexShaderSource,fragmentShaderSource:s,attributeLocations:i})}return a}function l(e,t){var a=e._depthOnlyRenderStateCache,n=a[t.id];if(!Object(r["a"])(n)){var o=i["a"].getState(t);o.depthMask=!0,o.colorMask={red:!1,green:!1,blue:!1,alpha:!1},n=i["a"].fromCache(o),a[t.id]=n}return n}s.createDepthOnlyDerivedCommand=function(e,t,a,i){var o,s;return Object(r["a"])(i)||(i={}),Object(r["a"])(i.depthOnlyCommand)&&(o=i.depthOnlyCommand.shaderProgram,s=i.depthOnlyCommand.renderState),i.depthOnlyCommand=n["a"].shallowClone(t,i.depthOnlyCommand),Object(r["a"])(o)&&i.shaderProgramId===t.shaderProgram.id?(i.depthOnlyCommand.shaderProgram=o,i.depthOnlyCommand.renderState=s):(i.depthOnlyCommand.shaderProgram=h(a,t.shaderProgram),i.depthOnlyCommand.renderState=l(e,t.renderState),i.shaderProgramId=t.shaderProgram.id),i};var f=/\s+czm_writeLogDepth\(/,d=/\s+czm_vertexLogDepth\(/,m=/\s*#extension\s+GL_EXT_frag_depth\s*:\s*enable/;function p(e,t){var a=e.shaderCache.getDerivedShaderProgram(t,"logDepth");if(!Object(r["a"])(a)){var n,i,s=t._attributeLocations,u=t.vertexShaderSource.clone(),c=t.fragmentShaderSource.clone();u.defines=Object(r["a"])(u.defines)?u.defines.slice(0):[],u.defines.push("LOG_DEPTH"),c.defines=Object(r["a"])(c.defines)?c.defines.slice(0):[],c.defines.push("LOG_DEPTH");var h=!1,l=u.sources,p=l.length;for(n=0;n<p;++n)if(d.test(l[n])){h=!0;break}if(!h){for(n=0;n<p;++n)l[n]=o["a"].replaceMain(l[n],"czm_log_depth_main");i="\n\nvoid main() \n{ \n    czm_log_depth_main(); \n    czm_vertexLogDepth(); \n} \n",l.push(i)}for(l=c.sources,p=l.length,h=!1,n=0;n<p;++n)f.test(l[n])&&(h=!0);-1!==c.defines.indexOf("LOG_DEPTH_WRITE")&&(h=!0);var v=!0;for(n=0;n<p;++n)m.test(l[n])&&(v=!1);var _="";if(v&&(_+="#ifdef GL_EXT_frag_depth \n#extension GL_EXT_frag_depth : enable \n#endif \n\n"),!h){for(n=0;n<p;n++)l[n]=o["a"].replaceMain(l[n],"czm_log_depth_main");_+="\nvoid main() \n{ \n    czm_log_depth_main(); \n    czm_writeLogDepth(); \n} \n"}l.push(_),a=e.shaderCache.createDerivedShaderProgram(t,"logDepth",{vertexShaderSource:u,fragmentShaderSource:c,attributeLocations:s})}return a}function v(e,t,a){var n=e.shaderCache.getDerivedShaderProgram(t,"pick");if(!Object(r["a"])(n)){for(var i=t._attributeLocations,s=t.fragmentShaderSource,u=s.sources,c=u.length,h="void main() \n{ \n    czm_non_pick_main(); \n    if (gl_FragColor.a == 0.0) { \n        discard; \n    } \n    gl_FragColor = "+a+"; \n} \n",l=new Array(c+1),f=0;f<c;++f)l[f]=o["a"].replaceMain(u[f],"czm_non_pick_main");l[c]=h,s=new o["a"]({sources:l,defines:s.defines}),n=e.shaderCache.createDerivedShaderProgram(t,"pick",{vertexShaderSource:t.vertexShaderSource,fragmentShaderSource:s,attributeLocations:i})}return n}function _(e,t){var a=e.picking.pickRenderStateCache,n=a[t.id];if(!Object(r["a"])(n)){var o=i["a"].getState(t);o.blending.enabled=!1,o.depthMask=!0,n=i["a"].fromCache(o),a[t.id]=n}return n}function g(e,t){var a=e.shaderCache.getDerivedShaderProgram(t,"HDR");if(!Object(r["a"])(a)){var n=t._attributeLocations,i=t.vertexShaderSource.clone(),o=t.fragmentShaderSource.clone();i.defines=Object(r["a"])(i.defines)?i.defines.slice(0):[],i.defines.push("HDR"),o.defines=Object(r["a"])(o.defines)?o.defines.slice(0):[],o.defines.push("HDR"),a=e.shaderCache.createDerivedShaderProgram(t,"HDR",{vertexShaderSource:i,fragmentShaderSource:o,attributeLocations:n})}return a}s.createLogDepthCommand=function(e,t,a){var i;return Object(r["a"])(a)||(a={}),Object(r["a"])(a.command)&&(i=a.command.shaderProgram),a.command=n["a"].shallowClone(e,a.command),Object(r["a"])(i)&&a.shaderProgramId===e.shaderProgram.id?a.command.shaderProgram=i:(a.command.shaderProgram=p(t,e.shaderProgram),a.shaderProgramId=e.shaderProgram.id),a},s.createPickDerivedCommand=function(e,t,a,i){var o,s;return Object(r["a"])(i)||(i={}),Object(r["a"])(i.pickCommand)&&(o=i.pickCommand.shaderProgram,s=i.pickCommand.renderState),i.pickCommand=n["a"].shallowClone(t,i.pickCommand),Object(r["a"])(o)&&i.shaderProgramId===t.shaderProgram.id?(i.pickCommand.shaderProgram=o,i.pickCommand.renderState=s):(i.pickCommand.shaderProgram=v(a,t.shaderProgram,t.pickId),i.pickCommand.renderState=_(e,t.renderState),i.shaderProgramId=t.shaderProgram.id),i},s.createHdrCommand=function(e,t,a){var i;return Object(r["a"])(a)||(a={}),Object(r["a"])(a.command)&&(i=a.command.shaderProgram),a.command=n["a"].shallowClone(e,a.command),Object(r["a"])(i)&&a.shaderProgramId===e.shaderProgram.id?a.command.shaderProgram=i:(a.command.shaderProgram=g(t,e.shaderProgram),a.shaderProgramId=e.shaderProgram.id),a},t["a"]=s}}]);