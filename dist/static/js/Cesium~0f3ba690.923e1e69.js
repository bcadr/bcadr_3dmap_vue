(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Cesium~0f3ba690"],{"054e":function(e,t,i){"use strict";var a=i("1d87"),r=i("be18"),n=i("bd8d"),o=i("535a"),s=i("2f63"),c=i("7d62"),d=i("c52f"),h=i("0123"),l=i("78e5"),u=i("eace"),_=i("6a29"),p=i("a58e"),f=i("5a6c"),b=i("d8f6"),m=i("27aa");function g(e){this._batchTable=e.batchTable,this._batchIds=e.batchIds,this._positions=e.positions,this._counts=e.counts,this._indices=e.indices,this._indexCounts=e.indexCounts,this._indexOffsets=void 0,this._batchTableColors=void 0,this._packedBuffer=void 0,this._batchedPositions=void 0,this._transferrableBatchIds=void 0,this._vertexBatchIds=void 0,this._ellipsoid=Object(o["a"])(e.ellipsoid,d["a"].WGS84),this._minimumHeight=e.minimumHeight,this._maximumHeight=e.maximumHeight,this._polygonMinimumHeights=e.polygonMinimumHeights,this._polygonMaximumHeights=e.polygonMaximumHeights,this._center=Object(o["a"])(e.center,r["a"].ZERO),this._rectangle=e.rectangle,this._center=void 0,this._boundingVolume=e.boundingVolume,this._boundingVolumes=void 0,this._batchedIndices=void 0,this._ready=!1,this._readyPromise=p["a"].defer(),this._verticesPromise=void 0,this._primitive=void 0,this.debugWireframe=!1,this.forceRebatch=!1,this.classificationType=f["a"].BOTH}function v(e){var t=new Float64Array(3+r["a"].packedLength+d["a"].packedLength+u["a"].packedLength),i=0;return t[i++]=e._indices.BYTES_PER_ELEMENT,t[i++]=e._minimumHeight,t[i++]=e._maximumHeight,r["a"].pack(e._center,t,i),i+=r["a"].packedLength,d["a"].pack(e._ellipsoid,t,i),i+=d["a"].packedLength,u["a"].pack(e._rectangle,t,i),t}function y(e,t){for(var i=1,a=t[i++],r=e._boundingVolumes=new Array(a),o=0;o<a;++o)r[o]=l["a"].unpack(t,i),i+=l["a"].packedLength;for(var s=t[i++],c=e._batchedIndices=new Array(s),d=0;d<s;++d){var h=n["a"].unpack(t,i);i+=n["a"].packedLength;for(var u=t[i++],_=t[i++],p=t[i++],f=new Array(p),m=0;m<p;++m)f[m]=t[i++];c[d]=new b["a"]({color:h,offset:u,count:_,batchIds:f})}}Object.defineProperties(g.prototype,{trianglesLength:{get:function(){return Object(s["a"])(this._primitive)?this._primitive.trianglesLength:0}},geometryByteLength:{get:function(){return Object(s["a"])(this._primitive)?this._primitive.geometryByteLength:0}},readyPromise:{get:function(){return this._readyPromise.promise}}});var O=new _["a"]("createVectorTilePolygons",5),I=new n["a"];function T(e){if(!Object(s["a"])(e._primitive)){if(!Object(s["a"])(e._verticesPromise)){var t=e._positions,i=e._counts,r=e._indexCounts,n=e._indices,o=e._transferrableBatchIds,c=e._batchTableColors,d=e._packedBuffer;if(!Object(s["a"])(c)){t=e._positions=Object(a["a"])(e._positions),i=e._counts=Object(a["a"])(e._counts),r=e._indexCounts=Object(a["a"])(e._indexCounts),n=e._indices=Object(a["a"])(e._indices),e._center=e._ellipsoid.cartographicToCartesian(u["a"].center(e._rectangle)),o=e._transferrableBatchIds=new Uint32Array(e._batchIds),c=e._batchTableColors=new Uint32Array(o.length);for(var l=e._batchTable,_=c.length,f=0;f<_;++f){var b=l.getColor(f,I);c[f]=b.toRgba()}d=e._packedBuffer=v(e)}var g=[t.buffer,i.buffer,r.buffer,n.buffer,o.buffer,c.buffer,d.buffer],T={packedBuffer:d.buffer,positions:t.buffer,counts:i.buffer,indexCounts:r.buffer,indices:n.buffer,batchIds:o.buffer,batchTableColors:c.buffer},C=e._polygonMinimumHeights,x=e._polygonMaximumHeights;Object(s["a"])(C)&&Object(s["a"])(x)&&(C=Object(a["a"])(C),x=Object(a["a"])(x),g.push(C.buffer,x.buffer),T.minimumHeights=C,T.maximumHeights=x);var S=e._verticesPromise=O.scheduleTask(T,g);if(!Object(s["a"])(S))return;Object(p["a"])(S,(function(t){e._positions=void 0,e._counts=void 0,e._polygonMinimumHeights=void 0,e._polygonMaximumHeights=void 0;var i=new Float64Array(t.packedBuffer),a=i[0];y(e,i),e._indices=2===h["a"].getSizeInBytes(a)?new Uint16Array(t.indices):new Uint32Array(t.indices),e._indexOffsets=new Uint32Array(t.indexOffsets),e._indexCounts=new Uint32Array(t.indexCounts),e._batchedPositions=new Float32Array(t.positions),e._vertexBatchIds=new Uint16Array(t.batchIds),e._ready=!0}))}e._ready&&!Object(s["a"])(e._primitive)&&(e._primitive=new m["a"]({batchTable:e._batchTable,positions:e._batchedPositions,batchIds:e._batchIds,vertexBatchIds:e._vertexBatchIds,indices:e._indices,indexOffsets:e._indexOffsets,indexCounts:e._indexCounts,batchedIndices:e._batchedIndices,boundingVolume:e._boundingVolume,boundingVolumes:e._boundingVolumes,center:e._center}),e._batchTable=void 0,e._batchIds=void 0,e._positions=void 0,e._counts=void 0,e._indices=void 0,e._indexCounts=void 0,e._indexOffsets=void 0,e._batchTableColors=void 0,e._packedBuffer=void 0,e._batchedPositions=void 0,e._transferrableBatchIds=void 0,e._vertexBatchIds=void 0,e._ellipsoid=void 0,e._minimumHeight=void 0,e._maximumHeight=void 0,e._polygonMinimumHeights=void 0,e._polygonMaximumHeights=void 0,e._center=void 0,e._rectangle=void 0,e._boundingVolume=void 0,e._boundingVolumes=void 0,e._batchedIndices=void 0,e._verticesPromise=void 0,e._readyPromise.resolve())}}g.prototype.createFeatures=function(e,t){this._primitive.createFeatures(e,t)},g.prototype.applyDebugSettings=function(e,t){this._primitive.applyDebugSettings(e,t)},g.prototype.applyStyle=function(e,t){this._primitive.applyStyle(e,t)},g.prototype.updateCommands=function(e,t){this._primitive.updateCommands(e,t)},g.prototype.update=function(e){T(this),this._ready&&(this._primitive.debugWireframe=this.debugWireframe,this._primitive.forceRebatch=this.forceRebatch,this._primitive.classificationType=this.classificationType,this._primitive.update(e))},g.prototype.isDestroyed=function(){return!1},g.prototype.destroy=function(){return this._primitive=this._primitive&&this._primitive.destroy(),Object(c["a"])(this)},t["a"]=g},"05e5":function(e,t,i){"use strict";var a={CENTER:0,BOTTOM:1,BASELINE:2,TOP:-1};t["a"]=Object.freeze(a)},"27aa":function(e,t,i){"use strict";var a=i("be18"),r=i("bd8d"),n=i("abab"),o=i("535a"),s=i("2f63"),c=i("7d62"),d=i("0123"),h=i("52f0"),l=i("1b8d"),u=i("f20a"),_=i("8b68"),p=i("a894"),f=i("d289"),b=i("6dc0"),m=i("e90c"),g=i("5770"),v=i("7c5e"),y=i("ae16"),O=i("8fa0"),I=i("b7c8"),T=i("5af0"),C=i("5a6c"),x=i("06f0"),S=i("6928"),w=i("3626"),j=i("6102"),A=i("25ef"),P=i("d8f6");function L(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT),this._batchTable=e.batchTable,this._batchIds=e.batchIds,this._positions=e.positions,this._vertexBatchIds=e.vertexBatchIds,this._indices=e.indices,this._indexCounts=e.indexCounts,this._indexOffsets=e.indexOffsets,this._batchedIndices=e.batchedIndices,this._boundingVolume=e.boundingVolume,this._boundingVolumes=e.boundingVolumes,this._center=Object(o["a"])(e.center,a["a"].ZERO),this._va=void 0,this._sp=void 0,this._spStencil=void 0,this._spPick=void 0,this._uniformMap=void 0,this._vaSwap=void 0,this._rsStencilDepthPass=void 0,this._rsStencilDepthPass3DTiles=void 0,this._rsColorPass=void 0,this._rsPickPass=void 0,this._rsWireframe=void 0,this._commands=[],this._commandsIgnoreShow=[],this._pickCommands=[],this._constantColor=r["a"].clone(r["a"].WHITE),this._highlightColor=this._constantColor,this._batchDirty=!0,this._pickCommandsDirty=!0,this._framesSinceLastRebatch=0,this._updatingAllCommands=!1,this._trianglesLength=this._indices.length/3,this._geometryByteLength=this._indices.byteLength+this._positions.byteLength+this._vertexBatchIds.byteLength,this.debugWireframe=!1,this._debugWireframe=this.debugWireframe,this._wireframeDirty=!1,this.forceRebatch=!1,this.classificationType=Object(o["a"])(e.classificationType,C["a"].BOTH),this._vertexShaderSource=e._vertexShaderSource,this._fragmentShaderSource=e._fragmentShaderSource,this._attributeLocations=e._attributeLocations,this._uniformMap=e._uniformMap,this._pickId=e._pickId,this._modelMatrix=e._modelMatrix,this._boundingSphere=e._boundingSphere,this._batchIdLookUp={};for(var t=this._batchIds.length,i=0;i<t;++i){var n=this._batchIds[i];this._batchIdLookUp[n]=i}}Object.defineProperties(L.prototype,{trianglesLength:{get:function(){return this._trianglesLength}},geometryByteLength:{get:function(){return this._geometryByteLength}}});var E={position:0,a_batchId:1};function D(e,t){if(!Object(s["a"])(e._va)){var i=u["a"].createVertexBuffer({context:t,typedArray:e._positions,usage:_["a"].STATIC_DRAW}),a=u["a"].createVertexBuffer({context:t,typedArray:e._vertexBatchIds,usage:_["a"].STATIC_DRAW}),r=u["a"].createIndexBuffer({context:t,typedArray:e._indices,usage:_["a"].DYNAMIC_DRAW,indexDatatype:2===e._indices.BYTES_PER_ELEMENT?d["a"].UNSIGNED_SHORT:d["a"].UNSIGNED_INT}),o=[{index:0,vertexBuffer:i,componentDatatype:n["a"].fromTypedArray(e._positions),componentsPerAttribute:3},{index:1,vertexBuffer:a,componentDatatype:n["a"].fromTypedArray(e._vertexBatchIds),componentsPerAttribute:1}];e._va=new v["a"]({context:t,attributes:o,indexBuffer:r}),t.webgl2&&(e._vaSwap=new v["a"]({context:t,attributes:o,indexBuffer:u["a"].createIndexBuffer({context:t,sizeInBytes:r.sizeInBytes,usage:_["a"].DYNAMIC_DRAW,indexDatatype:r.indexDatatype})})),e._batchedPositions=void 0,e._transferrableBatchIds=void 0,e._vertexBatchIds=void 0,e._verticesPromise=void 0}}function B(e,t){if(!Object(s["a"])(e._sp)){var i=e._batchTable,a=Object(o["a"])(e._attributeLocations,E),r=e._pickId,n=e._vertexShaderSource,c=e._fragmentShaderSource;if(Object(s["a"])(n))return e._sp=m["a"].fromCache({context:t,vertexShaderSource:n,fragmentShaderSource:c,attributeLocations:a}),e._spStencil=e._sp,c=g["a"].replaceMain(c,"czm_non_pick_main"),c=c+"void main() \n{ \n    czm_non_pick_main(); \n    gl_FragColor = "+r+"; \n} \n",void(e._spPick=m["a"].fromCache({context:t,vertexShaderSource:n,fragmentShaderSource:c,attributeLocations:a}));var d=i.getVertexShaderCallback(!1,"a_batchId",void 0)(O["a"]),h=i.getFragmentShaderCallback(!1,void 0,!0)(y["a"]);r=i.getPickId();var l=new g["a"]({sources:[d]}),u=new g["a"]({defines:["VECTOR_TILE"],sources:[h]});e._sp=m["a"].fromCache({context:t,vertexShaderSource:l,fragmentShaderSource:u,attributeLocations:a}),l=new g["a"]({sources:[O["a"]]}),u=new g["a"]({defines:["VECTOR_TILE"],sources:[y["a"]]}),e._spStencil=m["a"].fromCache({context:t,vertexShaderSource:l,fragmentShaderSource:u,attributeLocations:a}),h=g["a"].replaceMain(h,"czm_non_pick_main"),h=h+"\nvoid main() \n{ \n    czm_non_pick_main(); \n    gl_FragColor = "+r+"; \n} \n";var _=new g["a"]({sources:[d]}),p=new g["a"]({defines:["VECTOR_TILE"],sources:[h]});e._spPick=m["a"].fromCache({context:t,vertexShaderSource:_,fragmentShaderSource:p,attributeLocations:a})}}function k(e){var t=e?j["a"].EQUAL:j["a"].ALWAYS;return{colorMask:{red:!1,green:!1,blue:!1,alpha:!1},stencilTest:{enabled:!0,frontFunction:t,frontOperation:{fail:A["a"].KEEP,zFail:A["a"].DECREMENT_WRAP,zPass:A["a"].KEEP},backFunction:t,backOperation:{fail:A["a"].KEEP,zFail:A["a"].INCREMENT_WRAP,zPass:A["a"].KEEP},reference:w["a"].CESIUM_3D_TILE_MASK,mask:w["a"].CESIUM_3D_TILE_MASK},stencilMask:w["a"].CLASSIFICATION_MASK,depthTest:{enabled:!0,func:x["a"].LESS_OR_EQUAL},depthMask:!1}}var N={stencilTest:{enabled:!0,frontFunction:j["a"].NOT_EQUAL,frontOperation:{fail:A["a"].ZERO,zFail:A["a"].ZERO,zPass:A["a"].ZERO},backFunction:j["a"].NOT_EQUAL,backOperation:{fail:A["a"].ZERO,zFail:A["a"].ZERO,zPass:A["a"].ZERO},reference:0,mask:w["a"].CLASSIFICATION_MASK},stencilMask:w["a"].CLASSIFICATION_MASK,depthTest:{enabled:!1},depthMask:!1,blending:I["a"].PRE_MULTIPLIED_ALPHA_BLEND},F={stencilTest:{enabled:!0,frontFunction:j["a"].NOT_EQUAL,frontOperation:{fail:A["a"].ZERO,zFail:A["a"].ZERO,zPass:A["a"].ZERO},backFunction:j["a"].NOT_EQUAL,backOperation:{fail:A["a"].ZERO,zFail:A["a"].ZERO,zPass:A["a"].ZERO},reference:0,mask:w["a"].CLASSIFICATION_MASK},stencilMask:w["a"].CLASSIFICATION_MASK,depthTest:{enabled:!1},depthMask:!1};function H(e){Object(s["a"])(e._rsStencilDepthPass)||(e._rsStencilDepthPass=b["a"].fromCache(k(!1)),e._rsStencilDepthPass3DTiles=b["a"].fromCache(k(!0)),e._rsColorPass=b["a"].fromCache(N),e._rsPickPass=b["a"].fromCache(F))}var R=new h["a"],M=new a["a"];function U(e,t){if(!Object(s["a"])(e._uniformMap)){var i={u_modifiedModelViewProjection:function(){var i=t.uniformState.view,a=t.uniformState.projection;return h["a"].clone(i,R),h["a"].multiplyByPoint(R,e._center,M),h["a"].setTranslation(R,M,R),h["a"].multiply(a,R,R),R},u_highlightColor:function(){return e._highlightColor}};e._uniformMap=e._batchTable.getUniformMapCallback()(i)}}function V(e,t,i,a,r,n,o){for(var s=e.constructor.BYTES_PER_ELEMENT,c=n.length,d=0;d<c;++d){var h=n[d],l=o[h],u=a[l],_=r[l],p=new e.constructor(e.buffer,s*u,_);t.set(p,i),a[l]=i,i+=_}return i}function W(e,t){var i=e._indices,a=e._indexOffsets,n=e._indexCounts,o=e._batchIdLookUp,s=new i.constructor(i.length),c=t.pop(),d=[c],h=V(i,s,0,a,n,c.batchIds,o);c.offset=0,c.count=h;while(t.length>0){var l=t.pop();if(r["a"].equals(l.color,c.color))h=V(i,s,h,a,n,l.batchIds,o),c.batchIds=c.batchIds.concat(l.batchIds),c.count=h-c.offset;else{var u=h;h=V(i,s,h,a,n,l.batchIds,o),l.offset=u,l.count=h-u,d.push(l),c=l}}e._va.indexBuffer.copyFromArrayView(s),e._indices=s,e._batchedIndices=d}function G(e,t,i,a,r,n,o){for(var s=e.bytesPerIndex,c=n.length,d=0;d<c;++d){var h=n[d],l=o[h],u=a[l],_=r[l];t.copyFromBuffer(e,u*s,i*s,_*s),a[l]=i,i+=_}return i}function Y(e,t){var i=e._indexOffsets,a=e._indexCounts,n=e._batchIdLookUp,o=t.pop(),s=[o],c=e._va.indexBuffer,d=e._vaSwap.indexBuffer,h=G(c,d,0,i,a,o.batchIds,n);o.offset=0,o.count=h;while(t.length>0){var l=t.pop();if(r["a"].equals(l.color,o.color))h=G(c,d,h,i,a,l.batchIds,n),o.batchIds=o.batchIds.concat(l.batchIds),o.count=h-o.offset;else{var u=h;h=G(c,d,h,i,a,l.batchIds,n),l.offset=u,l.count=h-u,s.push(l),o=l}}var _=e._va;e._va=e._vaSwap,e._vaSwap=_,e._batchedIndices=s}function z(e,t){return t.color.toRgba()-e.color.toRgba()}function Z(e,t){if(!e._batchDirty)return!1;for(var i=e._batchedIndices,a=i.length,r=!1,n={},o=0;o<a;++o){var c=i[o].color,d=c.toRgba();if(Object(s["a"])(n[d])){r=!0;break}n[d]=!0}return r?r&&!e.forceRebatch&&e._framesSinceLastRebatch<120?void++e._framesSinceLastRebatch:(i.sort(z),t.webgl2?Y(e,i):W(e,i),e._framesSinceLastRebatch=0,e._batchDirty=!1,e._pickCommandsDirty=!0,e._wireframeDirty=!0,!0):(e._batchDirty=!1,!1)}function K(e,t){var i=Z(e,t),a=e._commands,r=e._batchedIndices,n=r.length,c=2*n;if(!Object(s["a"])(a)||i||a.length!==c){a.length=c;for(var d=e._va,l=e._sp,u=Object(o["a"])(e._modelMatrix,h["a"].IDENTITY),_=e._uniformMap,b=e._boundingVolume,m=0;m<n;++m){var g=r[m].offset,v=r[m].count,y=a[2*m];Object(s["a"])(y)||(y=a[2*m]=new p["a"]({owner:e})),y.vertexArray=d,y.modelMatrix=u,y.offset=g,y.count=v,y.renderState=e._rsStencilDepthPass,y.shaderProgram=l,y.uniformMap=_,y.boundingVolume=b,y.cull=!1,y.pass=f["a"].TERRAIN_CLASSIFICATION;var O=p["a"].shallowClone(y,y.derivedCommands.tileset);O.renderState=e._rsStencilDepthPass3DTiles,O.pass=f["a"].CESIUM_3D_TILE_CLASSIFICATION,y.derivedCommands.tileset=O;var I=a[2*m+1];Object(s["a"])(I)||(I=a[2*m+1]=new p["a"]({owner:e})),I.vertexArray=d,I.modelMatrix=u,I.offset=g,I.count=v,I.renderState=e._rsColorPass,I.shaderProgram=l,I.uniformMap=_,I.boundingVolume=b,I.cull=!1,I.pass=f["a"].TERRAIN_CLASSIFICATION;var T=p["a"].shallowClone(I,I.derivedCommands.tileset);T.pass=f["a"].CESIUM_3D_TILE_CLASSIFICATION,I.derivedCommands.tileset=T}e._commandsDirty=!0}}function q(e,t){if(e.classificationType!==C["a"].TERRAIN&&t.invertClassification&&(!Object(s["a"])(e._commandsIgnoreShow)||e._commandsDirty)){for(var i=e._commands,a=e._commandsIgnoreShow,r=e._spStencil,n=i.length,o=a.length=n/2,c=0,d=0;d<o;++d){var h=a[d]=p["a"].shallowClone(i[c],a[d]);h.shaderProgram=r,h.pass=f["a"].CESIUM_3D_TILE_CLASSIFICATION_IGNORE_SHOW,c+=2}e._commandsDirty=!1}}function Q(e){if(e._pickCommandsDirty){var t=e._indexOffsets.length,i=e._pickCommands;i.length=2*t;for(var a=e._va,r=e._spStencil,n=e._spPick,c=Object(o["a"])(e._modelMatrix,h["a"].IDENTITY),d=e._uniformMap,l=0;l<t;++l){var u=e._indexOffsets[l],_=e._indexCounts[l],b=Object(s["a"])(e._boundingVolumes)?e._boundingVolumes[l]:e.boundingVolume,m=i[2*l];Object(s["a"])(m)||(m=i[2*l]=new p["a"]({owner:e,pickOnly:!0})),m.vertexArray=a,m.modelMatrix=c,m.offset=u,m.count=_,m.renderState=e._rsStencilDepthPass,m.shaderProgram=r,m.uniformMap=d,m.boundingVolume=b,m.pass=f["a"].TERRAIN_CLASSIFICATION;var g=p["a"].shallowClone(m,m.derivedCommands.tileset);g.renderState=e._rsStencilDepthPass3DTiles,g.pass=f["a"].CESIUM_3D_TILE_CLASSIFICATION,m.derivedCommands.tileset=g;var v=i[2*l+1];Object(s["a"])(v)||(v=i[2*l+1]=new p["a"]({owner:e,pickOnly:!0})),v.vertexArray=a,v.modelMatrix=c,v.offset=u,v.count=_,v.renderState=e._rsPickPass,v.shaderProgram=n,v.uniformMap=d,v.boundingVolume=b,v.pass=f["a"].TERRAIN_CLASSIFICATION;var y=p["a"].shallowClone(v,v.derivedCommands.tileset);y.pass=f["a"].CESIUM_3D_TILE_CLASSIFICATION,v.derivedCommands.tileset=y}e._pickCommandsDirty=!1}}function X(e,t){e._updatingAllCommands=!0;var i,a=e._batchIds,n=a.length;for(i=0;i<n;++i){var o=a[i],s=t[o];s.show=!0,s.color=r["a"].WHITE}var c=e._batchedIndices;for(n=c.length,i=0;i<n;++i)c[i].color=r["a"].clone(r["a"].WHITE);e._updatingAllCommands=!1,e._batchDirty=!0}L.prototype.createFeatures=function(e,t){for(var i=this._batchIds,a=i.length,r=0;r<a;++r){var n=i[r];t[n]=new T["a"](e,n)}},L.prototype.applyDebugSettings=function(e,t){this._highlightColor=e?t:this._constantColor};var J=new r["a"],$=r["a"].WHITE,ee=!0,te=/\$/;function ie(e,t,i,a){var r,n,o=e.classificationType,c=o!==C["a"].CESIUM_3D_TILE,d=o!==C["a"].TERRAIN,h=t.commandList,l=i.length;for(n=0;n<l;++n)c&&(r=i[n],r.pass=f["a"].TERRAIN_CLASSIFICATION,h.push(r)),d&&(r=i[n].derivedCommands.tileset,r.pass=f["a"].CESIUM_3D_TILE_CLASSIFICATION,h.push(r));if(t.invertClassification&&Object(s["a"])(a))for(l=a.length,n=0;n<l;++n)h.push(a[n])}function ae(e,t){for(var i=e.commandList,a=t.length,r=0;r<a;r+=2){var n=t[r+1];n.pass=f["a"].OPAQUE,i.push(n)}}function re(e){var t=e.debugWireframe===e._debugWireframe;if(t=t&&!(e.debugWireframe&&e._wireframeDirty),!t){var i,a;Object(s["a"])(e._rsWireframe)||(e._rsWireframe=b["a"].fromCache({})),e.debugWireframe?(i=e._rsWireframe,a=l["a"].LINES):(i=e._rsColorPass,a=l["a"].TRIANGLES);for(var r=e._commands,n=r.length,o=0;o<n;o+=2){var c=r[o+1];c.renderState=i,c.primitiveType=a}e._debugWireframe=e.debugWireframe,e._wireframeDirty=!1}}L.prototype.applyStyle=function(e,t){if(Object(s["a"])(e)){var i=e.color,a=i instanceof S["a"]&&!te.test(i.expression);this._updatingAllCommands=a;var n,o=this._batchIds,c=o.length;for(n=0;n<c;++n){var d=o[n],h=t[d];h.color=Object(s["a"])(e.color)?e.color.evaluateColor(h,J):$,h.show=Object(s["a"])(e.show)?e.show.evaluate(h):ee}if(a){var l=this._batchedIndices;for(c=l.length,n=0;n<c;++n)l[n].color=r["a"].clone(r["a"].WHITE);this._updatingAllCommands=!1,this._batchDirty=!0}}else X(this,t)},L.prototype.updateCommands=function(e,t){if(!this._updatingAllCommands){var i=this._batchIdLookUp,a=i[e];if(Object(s["a"])(a)){var n,o=this._indexOffsets,c=this._indexCounts,d=o[a],h=c[a],l=this._batchedIndices,u=l.length;for(n=0;n<u;++n){var _=l[n].offset,p=l[n].count;if(d>=_&&d<_+p)break}l.push(new P["a"]({color:r["a"].clone(t),offset:d,count:h,batchIds:[e]}));for(var f=[],b=[],m=l[n].batchIds,g=m.length,v=0;v<g;++v){var y=m[v];if(y!==e){var O=i[y];o[O]<d?f.push(y):b.push(y)}}0!==b.length&&l.push(new P["a"]({color:r["a"].clone(l[n].color),offset:d+h,count:l[n].offset+l[n].count-(d+h),batchIds:b})),0!==f.length?(l[n].count=d-l[n].offset,l[n].batchIds=f):l.splice(n,1),this._batchDirty=!0}}},L.prototype.update=function(e){var t=e.context;D(this,t),B(this,t),H(this),U(this,t);var i=e.passes;i.render&&(K(this,t),q(this,e),re(this),this._debugWireframe?ae(e,this._commands):ie(this,e,this._commands,this._commandsIgnoreShow)),i.pick&&(Q(this),ie(this,e,this._pickCommands))},L.prototype.isDestroyed=function(){return!1},L.prototype.destroy=function(){return this._va=this._va&&this._va.destroy(),this._sp=this._sp&&this._sp.destroy(),this._spPick=this._spPick&&this._spPick.destroy(),this._vaSwap=this._vaSwap&&this._vaSwap.destroy(),Object(c["a"])(this)},t["a"]=L},"364c":function(e,t,i){"use strict";var a=i("be18"),r=i("535a"),n=i("2f63"),o=i("7d62"),s=i("c52f"),c=i("e856"),d=i("abab"),h=i("93da"),l=i("52f0"),u=i("eace"),_=i("283e"),p=i("a58e"),f=i("6596"),b=i("9889"),m=i("db4b"),g=i("054e"),v=i("a230"),y=i("b61c"),O=i("713c");function I(e,t,i,a,r){this._tileset=e,this._tile=t,this._resource=i,this._polygons=void 0,this._polylines=void 0,this._points=void 0,this._contentReadyPromise=void 0,this._readyPromise=p["a"].defer(),this._batchTable=void 0,this._features=void 0,this.featurePropertiesDirty=!1,j(this,a,r)}function T(e){return function(t,i){Object(n["a"])(e._polygons)&&e._polygons.updateCommands(t,i)}}function C(e,t){var i,a,o,s,c=Object(r["a"])(e.POLYGONS_LENGTH,0),d=Object(r["a"])(e.POLYLINES_LENGTH,0),h=Object(r["a"])(e.POINTS_LENGTH,0);if(c>0&&Object(n["a"])(e.POLYGON_BATCH_IDS)){var l=t.byteOffset+e.POLYGON_BATCH_IDS.byteOffset;i=new Uint16Array(t.buffer,l,c)}if(d>0&&Object(n["a"])(e.POLYLINE_BATCH_IDS)){var u=t.byteOffset+e.POLYLINE_BATCH_IDS.byteOffset;a=new Uint16Array(t.buffer,u,d)}if(h>0&&Object(n["a"])(e.POINT_BATCH_IDS)){var p=t.byteOffset+e.POINT_BATCH_IDS.byteOffset;o=new Uint16Array(t.buffer,p,h)}var f=Object(n["a"])(i)||Object(n["a"])(a)||Object(n["a"])(o),b=c>0&&!Object(n["a"])(i)||d>0&&!Object(n["a"])(a)||h>0&&!Object(n["a"])(o);if(f&&b)throw new _["a"]("If one group of batch ids is defined, then all batch ids must be defined.");var m=!Object(n["a"])(i)&&!Object(n["a"])(a)&&!Object(n["a"])(o);if(m){var g=0;if(!Object(n["a"])(i)&&c>0)for(i=new Uint16Array(c),s=0;s<c;++s)i[s]=g++;if(!Object(n["a"])(a)&&d>0)for(a=new Uint16Array(d),s=0;s<d;++s)a[s]=g++;if(!Object(n["a"])(o)&&h>0)for(o=new Uint16Array(h),s=0;s<h;++s)o[s]=g++}return{polygons:i,polylines:a,points:o}}Object.defineProperties(I.prototype,{featuresLength:{get:function(){return Object(n["a"])(this._batchTable)?this._batchTable.featuresLength:0}},pointsLength:{get:function(){return Object(n["a"])(this._points)?this._points.pointsLength:0}},trianglesLength:{get:function(){var e=0;return Object(n["a"])(this._polygons)&&(e+=this._polygons.trianglesLength),Object(n["a"])(this._polylines)&&(e+=this._polylines.trianglesLength),e}},geometryByteLength:{get:function(){var e=0;return Object(n["a"])(this._polygons)&&(e+=this._polygons.geometryByteLength),Object(n["a"])(this._polylines)&&(e+=this._polylines.geometryByteLength),e}},texturesByteLength:{get:function(){return Object(n["a"])(this._points)?this._points.texturesByteLength:0}},batchTableByteLength:{get:function(){return Object(n["a"])(this._batchTable)?this._batchTable.memorySizeInBytes:0}},innerContents:{get:function(){}},readyPromise:{get:function(){return this._readyPromise.promise}},tileset:{get:function(){return this._tileset}},tile:{get:function(){return this._tile}},url:{get:function(){return this._resource.getUrlComponent(!0)}},batchTable:{get:function(){return this._batchTable}}});var x=Uint32Array.BYTES_PER_ELEMENT;function S(e){return new v["a"](e)}function w(e){return new y["a"](e)}function j(e,t,i){i=Object(r["a"])(i,0);var o=new Uint8Array(t),p=new DataView(t);i+=x;var v=p.getUint32(i,!0);if(1!==v)throw new _["a"]("Only Vector tile version 1 is supported.  Version "+v+" is not.");i+=x;var y=p.getUint32(i,!0);if(i+=x,0!==y){var I=p.getUint32(i,!0);if(i+=x,0===I)throw new _["a"]("Feature table must have a byte length greater than zero");var j=p.getUint32(i,!0);i+=x;var A=p.getUint32(i,!0);i+=x;var L=p.getUint32(i,!0);i+=x;var E=p.getUint32(i,!0);i+=x;var D=p.getUint32(i,!0);i+=x;var B=p.getUint32(i,!0);i+=x;var k=p.getUint32(i,!0);i+=x;var N=Object(c["a"])(o,i,I);i+=I;var F,H,R=new Uint8Array(t,i,j);i+=j,A>0&&(F=Object(c["a"])(o,i,A),i+=A,L>0&&(H=new Uint8Array(t,i,L),H=new Uint8Array(H),i+=L));var M=Object(r["a"])(N.POLYGONS_LENGTH,0),U=Object(r["a"])(N.POLYLINES_LENGTH,0),V=Object(r["a"])(N.POINTS_LENGTH,0),W=M+U+V,G=new f["a"](e,W,F,H,T(e));if(e._batchTable=G,0!==W){var Y=new b["a"](N,R),z=Y.getGlobalProperty("REGION");if(!Object(n["a"])(z))throw new _["a"]("Feature table global property: REGION must be defined");var Z=u["a"].unpack(z),K=z[4],q=z[5],Q=e._tile.computedTransform,X=Y.getGlobalProperty("RTC_CENTER",d["a"].FLOAT,3);Object(n["a"])(X)?(X=a["a"].unpack(X),l["a"].multiplyByPoint(Q,X,X)):(X=u["a"].center(Z),X.height=h["a"].lerp(K,q,.5),X=s["a"].WGS84.cartographicToCartesian(X));var J=C(N,R);if(i+=i%4,M>0){Y.featuresLength=M;var $=Object(r["a"])(Y.getPropertyArray("POLYGON_COUNTS",d["a"].UNSIGNED_INT,1),Y.getPropertyArray("POLYGON_COUNT",d["a"].UNSIGNED_INT,1));if(!Object(n["a"])($))throw new _["a"]("Feature table property: POLYGON_COUNTS must be defined when POLYGONS_LENGTH is greater than 0");var ee=Object(r["a"])(Y.getPropertyArray("POLYGON_INDEX_COUNTS",d["a"].UNSIGNED_INT,1),Y.getPropertyArray("POLYGON_INDEX_COUNT",d["a"].UNSIGNED_INT,1));if(!Object(n["a"])(ee))throw new _["a"]("Feature table property: POLYGON_INDEX_COUNTS must be defined when POLYGONS_LENGTH is greater than 0");var te=$.reduce((function(e,t){return e+2*t}),0),ie=ee.reduce((function(e,t){return e+t}),0),ae=new Uint32Array(t,i,ie);i+=E;var re,ne,oe=new Uint16Array(t,i,te);i+=D,Object(n["a"])(N.POLYGON_MINIMUM_HEIGHTS)&&Object(n["a"])(N.POLYGON_MAXIMUM_HEIGHTS)&&(re=Y.getPropertyArray("POLYGON_MINIMUM_HEIGHTS",d["a"].FLOAT,1),ne=Y.getPropertyArray("POLYGON_MAXIMUM_HEIGHTS",d["a"].FLOAT,1)),e._polygons=new g["a"]({positions:oe,counts:$,indexCounts:ee,indices:ae,minimumHeight:K,maximumHeight:q,polygonMinimumHeights:re,polygonMaximumHeights:ne,center:X,rectangle:Z,boundingVolume:e.tile.boundingVolume.boundingVolume,batchTable:G,batchIds:J.polygons,modelMatrix:Q})}if(U>0){Y.featuresLength=U;var se=Object(r["a"])(Y.getPropertyArray("POLYLINE_COUNTS",d["a"].UNSIGNED_INT,1),Y.getPropertyArray("POLYLINE_COUNT",d["a"].UNSIGNED_INT,1));if(!Object(n["a"])(se))throw new _["a"]("Feature table property: POLYLINE_COUNTS must be defined when POLYLINES_LENGTH is greater than 0");var ce=Y.getPropertyArray("POLYLINE_WIDTHS",d["a"].UNSIGNED_SHORT,1);if(!Object(n["a"])(ce)){ce=new Uint16Array(U);for(var de=0;de<U;++de)ce[de]=2}var he=se.reduce((function(e,t){return e+3*t}),0),le=new Uint16Array(t,i,he);i+=B;var ue=e._tileset,_e=ue.examineVectorLinesFunction;if(Object(n["a"])(_e)){var pe=Object(O["a"])(new Uint16Array(le),Z,K,q,s["a"].WGS84);P(pe,se,J.polylines,G,e.url,_e)}var fe=S;Object(n["a"])(ue.classificationType)&&(fe=w),e._polylines=fe({positions:le,widths:ce,counts:se,batchIds:J.polylines,minimumHeight:K,maximumHeight:q,center:X,rectangle:Z,boundingVolume:e.tile.boundingVolume.boundingVolume,batchTable:G,tileset:ue})}if(V>0){var be=new Uint16Array(t,i,3*V);i+=k,e._points=new m["a"]({positions:be,batchIds:J.points,minimumHeight:K,maximumHeight:q,rectangle:Z,batchTable:G})}}}else e._readyPromise.resolve(e)}function A(e){var t=e.featuresLength;if(!Object(n["a"])(e._features)&&t>0){var i=new Array(t);Object(n["a"])(e._polygons)&&e._polygons.createFeatures(e,i),Object(n["a"])(e._polylines)&&e._polylines.createFeatures(e,i),Object(n["a"])(e._points)&&e._points.createFeatures(e,i),e._features=i}}function P(e,t,i,a,r,n){for(var o=t.length,s=0,c=0;c<o;c++){var d=3*t[c],h=e.slice(s,s+d);s+=d,n(h,i[c],r,a)}}I.prototype.hasProperty=function(e,t){return this._batchTable.hasProperty(e,t)},I.prototype.getFeature=function(e){return A(this),this._features[e]},I.prototype.applyDebugSettings=function(e,t){Object(n["a"])(this._polygons)&&this._polygons.applyDebugSettings(e,t),Object(n["a"])(this._polylines)&&this._polylines.applyDebugSettings(e,t),Object(n["a"])(this._points)&&this._points.applyDebugSettings(e,t)},I.prototype.applyStyle=function(e){A(this),Object(n["a"])(this._polygons)&&this._polygons.applyStyle(e,this._features),Object(n["a"])(this._polylines)&&this._polylines.applyStyle(e,this._features),Object(n["a"])(this._points)&&this._points.applyStyle(e,this._features)},I.prototype.update=function(e,t){var i=!0;if(Object(n["a"])(this._polygons)&&(this._polygons.classificationType=this._tileset.classificationType,this._polygons.debugWireframe=this._tileset.debugWireframe,this._polygons.update(t),i=i&&this._polygons._ready),Object(n["a"])(this._polylines)&&(this._polylines.update(t),i=i&&this._polylines._ready),Object(n["a"])(this._points)&&(this._points.update(t),i=i&&this._points._ready),Object(n["a"])(this._batchTable)&&i&&this._batchTable.update(e,t),!Object(n["a"])(this._contentReadyPromise)){var a=Object(n["a"])(this._points)?this._points.readyPromise:void 0,r=Object(n["a"])(this._polygons)?this._polygons.readyPromise:void 0,o=Object(n["a"])(this._polylines)?this._polylines.readyPromise:void 0,s=this;this._contentReadyPromise=p["a"].all([a,r,o]).then((function(){s._readyPromise.resolve(s)})).otherwise((function(e){s._readyPromise.reject(e)}))}},I.prototype.isDestroyed=function(){return!1},I.prototype.destroy=function(){return this._polygons=this._polygons&&this._polygons.destroy(),this._polylines=this._polylines&&this._polylines.destroy(),this._points=this._points&&this._points.destroy(),this._batchTable=this._batchTable&&this._batchTable.destroy(),Object(o["a"])(this)},t["a"]=I},"51a0":function(e,t,i){"use strict";var a=i("1d87"),r=i("cef5"),n=i("be18"),o=i("bd8d"),s=i("535a"),c=i("2f63"),d=i("7d62"),h=i("52f0"),l=i("6a29"),u=i("a58e"),_=i("5a6c"),p=i("d8f6"),f=i("27aa");function b(e){this._boxes=e.boxes,this._boxBatchIds=e.boxBatchIds,this._cylinders=e.cylinders,this._cylinderBatchIds=e.cylinderBatchIds,this._ellipsoids=e.ellipsoids,this._ellipsoidBatchIds=e.ellipsoidBatchIds,this._spheres=e.spheres,this._sphereBatchIds=e.sphereBatchIds,this._modelMatrix=e.modelMatrix,this._batchTable=e.batchTable,this._boundingVolume=e.boundingVolume,this._center=e.center,Object(c["a"])(this._center)||(Object(c["a"])(this._boundingVolume)?this._center=n["a"].clone(this._boundingVolume.center):this._center=n["a"].clone(n["a"].ZERO)),this._boundingVolumes=void 0,this._batchedIndices=void 0,this._indices=void 0,this._indexOffsets=void 0,this._indexCounts=void 0,this._positions=void 0,this._vertexBatchIds=void 0,this._batchIds=void 0,this._batchTableColors=void 0,this._packedBuffer=void 0,this._ready=!1,this._readyPromise=u["a"].defer(),this._verticesPromise=void 0,this._primitive=void 0,this.debugWireframe=!1,this.forceRebatch=!1,this.classificationType=_["a"].BOTH}function m(e){var t=new Float64Array(h["a"].packedLength+n["a"].packedLength),i=0;return n["a"].pack(e._center,t,i),i+=n["a"].packedLength,h["a"].pack(e._modelMatrix,t,i),t}function g(e,t){for(var i=0,a=t[i++],n=t[i++],s=e._boundingVolumes=new Array(n),c=0;c<n;++c)s[c]=r["a"].unpack(t,i),i+=r["a"].packedLength;for(var d=t[i++],h=e._batchedIndices=new Array(d),l=0;l<d;++l){var u=o["a"].unpack(t,i);i+=o["a"].packedLength;for(var _=t[i++],f=t[i++],b=t[i++],m=new Array(b),g=0;g<b;++g)m[g]=t[i++];h[l]=new p["a"]({color:u,offset:_,count:f,batchIds:m})}return a}Object.defineProperties(b.prototype,{trianglesLength:{get:function(){return Object(c["a"])(this._primitive)?this._primitive.trianglesLength:0}},geometryByteLength:{get:function(){return Object(c["a"])(this._primitive)?this._primitive.geometryByteLength:0}},readyPromise:{get:function(){return this._readyPromise.promise}}}),b.packedBoxLength=h["a"].packedLength+n["a"].packedLength,b.packedCylinderLength=h["a"].packedLength+2,b.packedEllipsoidLength=h["a"].packedLength+n["a"].packedLength,b.packedSphereLength=n["a"].packedLength+1;var v=new l["a"]("createVectorTileGeometries",5),y=new o["a"];function O(e){if(!Object(c["a"])(e._primitive)){if(!Object(c["a"])(e._verticesPromise)){var t=e._boxes,i=e._boxBatchIds,r=e._cylinders,n=e._cylinderBatchIds,o=e._ellipsoids,d=e._ellipsoidBatchIds,h=e._spheres,l=e._sphereBatchIds,u=e._batchTableColors,_=e._packedBuffer;if(!Object(c["a"])(u)){var p=0;Object(c["a"])(e._boxes)&&(t=e._boxes=Object(a["a"])(t),i=e._boxBatchIds=Object(a["a"])(i),p+=i.length),Object(c["a"])(e._cylinders)&&(r=e._cylinders=Object(a["a"])(r),n=e._cylinderBatchIds=Object(a["a"])(n),p+=n.length),Object(c["a"])(e._ellipsoids)&&(o=e._ellipsoids=Object(a["a"])(o),d=e._ellipsoidBatchIds=Object(a["a"])(d),p+=d.length),Object(c["a"])(e._spheres)&&(h=e._sphere=Object(a["a"])(h),l=e._sphereBatchIds=Object(a["a"])(l),p+=l.length),u=e._batchTableColors=new Uint32Array(p);for(var b=e._batchTable,O=0;O<p;++O){var I=b.getColor(O,y);u[O]=I.toRgba()}_=e._packedBuffer=m(e)}var T=[];Object(c["a"])(t)&&T.push(t.buffer,i.buffer),Object(c["a"])(r)&&T.push(r.buffer,n.buffer),Object(c["a"])(o)&&T.push(o.buffer,d.buffer),Object(c["a"])(h)&&T.push(h.buffer,l.buffer),T.push(u.buffer,_.buffer);var C={boxes:Object(c["a"])(t)?t.buffer:void 0,boxBatchIds:Object(c["a"])(t)?i.buffer:void 0,cylinders:Object(c["a"])(r)?r.buffer:void 0,cylinderBatchIds:Object(c["a"])(r)?n.buffer:void 0,ellipsoids:Object(c["a"])(o)?o.buffer:void 0,ellipsoidBatchIds:Object(c["a"])(o)?d.buffer:void 0,spheres:Object(c["a"])(h)?h.buffer:void 0,sphereBatchIds:Object(c["a"])(h)?l.buffer:void 0,batchTableColors:u.buffer,packedBuffer:_.buffer},x=e._verticesPromise=v.scheduleTask(C,T);if(!Object(c["a"])(x))return;x.then((function(t){var i=new Float64Array(t.packedBuffer),a=g(e,i);e._indices=2===a?new Uint16Array(t.indices):new Uint32Array(t.indices),e._indexOffsets=new Uint32Array(t.indexOffsets),e._indexCounts=new Uint32Array(t.indexCounts),e._positions=new Float32Array(t.positions),e._vertexBatchIds=new Uint16Array(t.vertexBatchIds),e._batchIds=new Uint16Array(t.batchIds),e._ready=!0}))}e._ready&&!Object(c["a"])(e._primitive)&&(e._primitive=new f["a"]({batchTable:e._batchTable,positions:e._positions,batchIds:e._batchIds,vertexBatchIds:e._vertexBatchIds,indices:e._indices,indexOffsets:e._indexOffsets,indexCounts:e._indexCounts,batchedIndices:e._batchedIndices,boundingVolume:e._boundingVolume,boundingVolumes:e._boundingVolumes,center:e._center,pickObject:Object(s["a"])(e._pickObject,e)}),e._boxes=void 0,e._boxBatchIds=void 0,e._cylinders=void 0,e._cylinderBatchIds=void 0,e._ellipsoids=void 0,e._ellipsoidBatchIds=void 0,e._spheres=void 0,e._sphereBatchIds=void 0,e._center=void 0,e._modelMatrix=void 0,e._batchTable=void 0,e._boundingVolume=void 0,e._boundingVolumes=void 0,e._batchedIndices=void 0,e._indices=void 0,e._indexOffsets=void 0,e._indexCounts=void 0,e._positions=void 0,e._vertexBatchIds=void 0,e._batchIds=void 0,e._batchTableColors=void 0,e._packedBuffer=void 0,e._verticesPromise=void 0,e._readyPromise.resolve())}}b.prototype.createFeatures=function(e,t){this._primitive.createFeatures(e,t)},b.prototype.applyDebugSettings=function(e,t){this._primitive.applyDebugSettings(e,t)},b.prototype.applyStyle=function(e,t){this._primitive.applyStyle(e,t)},b.prototype.updateCommands=function(e,t){this._primitive.updateCommands(e,t)},b.prototype.update=function(e){O(this),this._ready&&(this._primitive.debugWireframe=this.debugWireframe,this._primitive.forceRebatch=this.forceRebatch,this._primitive.classificationType=this.classificationType,this._primitive.update(e))},b.prototype.isDestroyed=function(){return!1},b.prototype.destroy=function(){return this._primitive=this._primitive&&this._primitive.destroy(),Object(d["a"])(this)},t["a"]=b},"619f":function(e,t,i){"use strict";var a=i("dc1c"),r=i("535a"),n=i("2f63"),o=i("55f9"),s=i("ddf7"),c=i("dd17"),d=i("fa1c");function h(e,t,i,r,n,o,s,c,d,h){this._tweens=e,this._tweenjs=t,this._startObject=Object(a["a"])(i),this._stopObject=Object(a["a"])(r),this._duration=n,this._delay=o,this._easingFunction=s,this._update=c,this._complete=d,this.cancel=h,this.needsStart=!0}function l(){this._tweens=[]}Object.defineProperties(h.prototype,{startObject:{get:function(){return this._startObject}},stopObject:{get:function(){return this._stopObject}},duration:{get:function(){return this._duration}},delay:{get:function(){return this._delay}},easingFunction:{get:function(){return this._easingFunction}},update:{get:function(){return this._update}},complete:{get:function(){return this._complete}},tweenjs:{get:function(){return this._tweenjs}}}),h.prototype.cancelTween=function(){this._tweens.remove(this)},Object.defineProperties(l.prototype,{length:{get:function(){return this._tweens.length}}}),l.prototype.add=function(e){if(e=Object(r["a"])(e,r["a"].EMPTY_OBJECT),0===e.duration)return Object(n["a"])(e.complete)&&e.complete(),new h(this);var t=e.duration/c["a"].SECONDS_PER_MILLISECOND,i=Object(r["a"])(e.delay,0),s=i/c["a"].SECONDS_PER_MILLISECOND,l=Object(r["a"])(e.easingFunction,o["a"].LINEAR_NONE),u=e.startObject,_=new d["a"].Tween(u);_.to(Object(a["a"])(e.stopObject),t),_.delay(s),_.easing(l),Object(n["a"])(e.update)&&_.onUpdate((function(){e.update(u)})),_.onComplete(Object(r["a"])(e.complete,null)),_.repeat(Object(r["a"])(e._repeat,0));var p=new h(this,_,e.startObject,e.stopObject,e.duration,i,l,e.update,e.complete,e.cancel);return this._tweens.push(p),p},l.prototype.addProperty=function(e){e=Object(r["a"])(e,r["a"].EMPTY_OBJECT);var t=e.object,i=e.property,a=e.startValue,n=e.stopValue;function o(e){t[i]=e.value}return this.add({startObject:{value:a},stopObject:{value:n},duration:Object(r["a"])(e.duration,3),delay:e.delay,easingFunction:e.easingFunction,update:o,complete:e.complete,cancel:e.cancel,_repeat:e._repeat})},l.prototype.addAlpha=function(e){e=Object(r["a"])(e,r["a"].EMPTY_OBJECT);var t=e.material,i=[];for(var a in t.uniforms)t.uniforms.hasOwnProperty(a)&&Object(n["a"])(t.uniforms[a])&&Object(n["a"])(t.uniforms[a].alpha)&&i.push(a);function o(e){for(var a=i.length,r=0;r<a;++r)t.uniforms[i[r]].alpha=e.alpha}return this.add({startObject:{alpha:Object(r["a"])(e.startValue,0)},stopObject:{alpha:Object(r["a"])(e.stopValue,1)},duration:Object(r["a"])(e.duration,3),delay:e.delay,easingFunction:e.easingFunction,update:o,complete:e.complete,cancel:e.cancel})},l.prototype.addOffsetIncrement=function(e){e=Object(r["a"])(e,r["a"].EMPTY_OBJECT);var t=e.material,i=t.uniforms;return this.addProperty({object:i,property:"offset",startValue:i.offset,stopValue:i.offset+1,duration:e.duration,delay:e.delay,easingFunction:e.easingFunction,update:e.update,cancel:e.cancel,_repeat:1/0})},l.prototype.remove=function(e){if(!Object(n["a"])(e))return!1;var t=this._tweens.indexOf(e);return-1!==t&&(e.tweenjs.stop(),Object(n["a"])(e.cancel)&&e.cancel(),this._tweens.splice(t,1),!0)},l.prototype.removeAll=function(){for(var e=this._tweens,t=0;t<e.length;++t){var i=e[t];i.tweenjs.stop(),Object(n["a"])(i.cancel)&&i.cancel()}e.length=0},l.prototype.contains=function(e){return Object(n["a"])(e)&&-1!==this._tweens.indexOf(e)},l.prototype.get=function(e){return this._tweens[e]},l.prototype.update=function(e){var t=this._tweens,i=0;e=Object(n["a"])(e)?e/c["a"].SECONDS_PER_MILLISECOND:Object(s["a"])();while(i<t.length){var a=t[i],r=a.tweenjs;a.needsStart?(a.needsStart=!1,r.start(e)):r.update(e)?i++:(r.stop(),t.splice(i,1))}},t["a"]=l},a230:function(e,t,i){"use strict";var a=i("1d87"),r=i("be18"),n=i("bd8d"),o=i("abab"),s=i("535a"),c=i("2f63"),d=i("7d62"),h=i("c52f"),l=i("5e57"),u=i("0123"),_=i("52f0"),p=i("eace"),f=i("6a29"),b=i("f20a"),m=i("8b68"),g=i("a894"),v=i("d289"),y=i("6dc0"),O=i("e90c"),I=i("5770"),T=i("7c5e"),C=i("b71e"),x=i("95fe"),S=i("a58e"),w=i("b7c8"),j=i("5af0");function A(e){this._positions=e.positions,this._widths=e.widths,this._counts=e.counts,this._batchIds=e.batchIds,this._ellipsoid=Object(s["a"])(e.ellipsoid,h["a"].WGS84),this._minimumHeight=e.minimumHeight,this._maximumHeight=e.maximumHeight,this._center=e.center,this._rectangle=e.rectangle,this._boundingVolume=e.boundingVolume,this._batchTable=e.batchTable,this._va=void 0,this._sp=void 0,this._rs=void 0,this._uniformMap=void 0,this._command=void 0,this._transferrableBatchIds=void 0,this._packedBuffer=void 0,this._currentPositions=void 0,this._previousPositions=void 0,this._nextPositions=void 0,this._expandAndWidth=void 0,this._vertexBatchIds=void 0,this._indices=void 0,this._constantColor=n["a"].clone(n["a"].WHITE),this._highlightColor=this._constantColor,this._trianglesLength=0,this._geometryByteLength=0,this._ready=!1,this._readyPromise=S["a"].defer(),this._verticesPromise=void 0}function P(e){var t=e._rectangle,i=e._minimumHeight,a=e._maximumHeight,n=e._ellipsoid,o=e._center,s=2+p["a"].packedLength+h["a"].packedLength+r["a"].packedLength,c=new Float64Array(s),d=0;return c[d++]=i,c[d++]=a,p["a"].pack(t,c,d),d+=p["a"].packedLength,h["a"].pack(n,c,d),d+=h["a"].packedLength,r["a"].pack(o,c,d),c}Object.defineProperties(A.prototype,{trianglesLength:{get:function(){return this._trianglesLength}},geometryByteLength:{get:function(){return this._geometryByteLength}},readyPromise:{get:function(){return this._readyPromise.promise}}});var L=new f["a"]("createVectorTilePolylines",5),E={previousPosition:0,currentPosition:1,nextPosition:2,expandAndWidth:3,a_batchId:4};function D(e,t){if(!Object(c["a"])(e._va)){if(!Object(c["a"])(e._verticesPromise)){var i=e._positions,r=e._widths,n=e._counts,s=e._transferrableBatchIds,d=e._packedBuffer;Object(c["a"])(d)||(i=e._positions=Object(a["a"])(i),r=e._widths=Object(a["a"])(r),n=e._counts=Object(a["a"])(n),s=e._transferrableBatchIds=Object(a["a"])(e._batchIds),d=e._packedBuffer=P(e));var h=[i.buffer,r.buffer,n.buffer,s.buffer,d.buffer],l={positions:i.buffer,widths:r.buffer,counts:n.buffer,batchIds:s.buffer,packedBuffer:d.buffer},_=e._verticesPromise=L.scheduleTask(l,h);if(!Object(c["a"])(_))return;Object(S["a"])(_).then((function(t){e._currentPositions=new Float32Array(t.currentPositions),e._previousPositions=new Float32Array(t.previousPositions),e._nextPositions=new Float32Array(t.nextPositions),e._expandAndWidth=new Float32Array(t.expandAndWidth),e._vertexBatchIds=new Uint16Array(t.batchIds);var i=t.indexDatatype;e._indices=i===u["a"].UNSIGNED_SHORT?new Uint16Array(t.indices):new Uint32Array(t.indices),e._ready=!0})).otherwise((function(t){e._readyPromise.reject(t)}))}if(e._ready&&!Object(c["a"])(e._va)){var p=e._currentPositions,f=e._previousPositions,g=e._nextPositions,v=e._expandAndWidth,y=e._vertexBatchIds,O=e._indices,I=f.byteLength+p.byteLength+g.byteLength;I+=v.byteLength+y.byteLength+O.byteLength,e._trianglesLength=O.length/3,e._geometryByteLength=I;var C=b["a"].createVertexBuffer({context:t,typedArray:f,usage:m["a"].STATIC_DRAW}),x=b["a"].createVertexBuffer({context:t,typedArray:p,usage:m["a"].STATIC_DRAW}),w=b["a"].createVertexBuffer({context:t,typedArray:g,usage:m["a"].STATIC_DRAW}),j=b["a"].createVertexBuffer({context:t,typedArray:v,usage:m["a"].STATIC_DRAW}),A=b["a"].createVertexBuffer({context:t,typedArray:y,usage:m["a"].STATIC_DRAW}),D=b["a"].createIndexBuffer({context:t,typedArray:O,usage:m["a"].STATIC_DRAW,indexDatatype:2===O.BYTES_PER_ELEMENT?u["a"].UNSIGNED_SHORT:u["a"].UNSIGNED_INT}),B=[{index:E.previousPosition,vertexBuffer:C,componentDatatype:o["a"].FLOAT,componentsPerAttribute:3},{index:E.currentPosition,vertexBuffer:x,componentDatatype:o["a"].FLOAT,componentsPerAttribute:3},{index:E.nextPosition,vertexBuffer:w,componentDatatype:o["a"].FLOAT,componentsPerAttribute:3},{index:E.expandAndWidth,vertexBuffer:j,componentDatatype:o["a"].FLOAT,componentsPerAttribute:2},{index:E.a_batchId,vertexBuffer:A,componentDatatype:o["a"].UNSIGNED_SHORT,componentsPerAttribute:1}];e._va=new T["a"]({context:t,attributes:B,indexBuffer:D}),e._positions=void 0,e._widths=void 0,e._counts=void 0,e._ellipsoid=void 0,e._minimumHeight=void 0,e._maximumHeight=void 0,e._rectangle=void 0,e._transferrableBatchIds=void 0,e._packedBuffer=void 0,e._currentPositions=void 0,e._previousPositions=void 0,e._nextPositions=void 0,e._expandAndWidth=void 0,e._vertexBatchIds=void 0,e._indices=void 0,e._readyPromise.resolve()}}}var B=new _["a"],k=new r["a"];function N(e,t){Object(c["a"])(e._uniformMap)||(e._uniformMap={u_modifiedModelView:function(){var i=t.uniformState.view;return _["a"].clone(i,B),_["a"].multiplyByPoint(B,e._center,k),_["a"].setTranslation(B,k,B),B},u_highlightColor:function(){return e._highlightColor}})}function F(e){if(!Object(c["a"])(e._rs)){var t={enabled:!0,factor:-5,units:-5};e._rs=y["a"].fromCache({blending:w["a"].ALPHA_BLEND,depthMask:!1,depthTest:{enabled:!0},polygonOffset:t})}}var H="uniform vec4 u_highlightColor; \nvoid main()\n{\n    gl_FragColor = u_highlightColor;\n}\n";function R(e,t){if(!Object(c["a"])(e._sp)){var i=e._batchTable,a=i.getVertexShaderCallback(!1,"a_batchId",void 0)(x["a"]),r=i.getFragmentShaderCallback(!1,void 0,!1)(H),n=new I["a"]({defines:["VECTOR_TILE",l["a"].isInternetExplorer()?"":"CLIP_POLYLINE"],sources:[C["a"],a]}),o=new I["a"]({defines:["VECTOR_TILE"],sources:[r]});e._sp=O["a"].fromCache({context:t,vertexShaderSource:n,fragmentShaderSource:o,attributeLocations:E})}}function M(e,t){if(!Object(c["a"])(e._command)){var i=e._batchTable.getUniformMapCallback()(e._uniformMap);e._command=new g["a"]({owner:e,vertexArray:e._va,renderState:e._rs,shaderProgram:e._sp,uniformMap:i,boundingVolume:e._boundingVolume,pass:v["a"].TRANSLUCENT,pickId:e._batchTable.getPickId()})}t.commandList.push(e._command)}function U(e,t){for(var i=e._batchIds,a=i.length,r=0;r<a;++r){var o=i[r],s=t[o];s.show=!0,s.color=n["a"].WHITE}}A.prototype.createFeatures=function(e,t){for(var i=this._batchIds,a=i.length,r=0;r<a;++r){var n=i[r];t[n]=new j["a"](e,n)}},A.prototype.applyDebugSettings=function(e,t){this._highlightColor=e?t:this._constantColor};var V=new n["a"],W=n["a"].WHITE,G=!0;A.prototype.applyStyle=function(e,t){if(Object(c["a"])(e))for(var i=this._batchIds,a=i.length,r=0;r<a;++r){var n=i[r],o=t[n];o.color=Object(c["a"])(e.color)?e.color.evaluateColor(o,V):W,o.show=Object(c["a"])(e.show)?e.show.evaluate(o):G}else U(this,t)},A.prototype.update=function(e){var t=e.context;if(D(this,t),N(this,t),R(this,t),F(this),this._ready){var i=e.passes;(i.render||i.pick)&&M(this,e)}},A.prototype.isDestroyed=function(){return!1},A.prototype.destroy=function(){return this._va=this._va&&this._va.destroy(),this._sp=this._sp&&this._sp.destroy(),Object(d["a"])(this)},t["a"]=A},b61c:function(e,t,i){"use strict";var a=i("dd06"),r=i("1d87"),n=i("670c"),o=i("be18"),s=i("bd8d"),c=i("abab"),d=i("535a"),h=i("2f63"),l=i("7d62"),u=i("c52f"),_=i("5e57"),p=i("0123"),f=i("78e5"),b=i("52f0"),m=i("eace"),g=i("6a29"),v=i("f20a"),y=i("8b68"),O=i("a894"),I=i("d289"),T=i("6dc0"),C=i("e90c"),x=i("5770"),S=i("7c5e"),w=i("b71e"),j=i("28ac"),A=i("3e7b"),P=i("a58e"),L=i("b7c8"),E=i("5af0"),D=i("5a6c"),B=i("29ab"),k=i("3626"),N=i("6102"),F=i("25ef");function H(e){this._positions=e.positions,this._widths=e.widths,this._counts=e.counts,this._batchIds=e.batchIds,this._ellipsoid=Object(d["a"])(e.ellipsoid,u["a"].WGS84),this._minimumHeight=e.minimumHeight,this._maximumHeight=e.maximumHeight,this._center=e.center,this._rectangle=e.rectangle,this._batchTable=e.batchTable,this._va=void 0,this._sp=void 0,this._rs=void 0,this._uniformMap=void 0,this._command=void 0,this._transferrableBatchIds=void 0,this._packedBuffer=void 0,this._tileset=e.tileset,this._minimumMaximumVectorHeights=new n["a"](a["a"]._defaultMinTerrainHeight,a["a"]._defaultMaxTerrainHeight),this._boundingVolume=f["a"].fromRectangle(e.rectangle,a["a"]._defaultMinTerrainHeight,a["a"]._defaultMaxTerrainHeight,this._ellipsoid),this._startEllipsoidNormals=void 0,this._endEllipsoidNormals=void 0,this._startPositionAndHeights=void 0,this._startFaceNormalAndVertexCornerIds=void 0,this._endPositionAndHeights=void 0,this._endFaceNormalAndHalfWidths=void 0,this._vertexBatchIds=void 0,this._indices=void 0,this._constantColor=s["a"].clone(s["a"].WHITE),this._highlightColor=this._constantColor,this._trianglesLength=0,this._geometryByteLength=0,this._ready=!1,this._readyPromise=P["a"].defer(),this._verticesPromise=void 0;var t=this;a["a"].initialize().then((function(){R(t,t._rectangle,t._ellipsoid)})).otherwise((function(e){this._readyPromise.reject(e)}))}function R(e,t,i){var r=a["a"].getMinimumMaximumHeights(t,i),n=r.minimumTerrainHeight,o=r.maximumTerrainHeight,s=e._minimumMaximumVectorHeights;s.x=n,s.y=o;var c=e._boundingVolume,d=e._rectangle;f["a"].fromRectangle(d,n,o,i,c)}function M(e){var t=e._rectangle,i=e._minimumHeight,a=e._maximumHeight,r=e._ellipsoid,n=e._center,s=2+m["a"].packedLength+u["a"].packedLength+o["a"].packedLength,c=new Float64Array(s),d=0;return c[d++]=i,c[d++]=a,m["a"].pack(t,c,d),d+=m["a"].packedLength,u["a"].pack(r,c,d),d+=u["a"].packedLength,o["a"].pack(n,c,d),c}Object.defineProperties(H.prototype,{trianglesLength:{get:function(){return this._trianglesLength}},geometryByteLength:{get:function(){return this._geometryByteLength}},readyPromise:{get:function(){return this._readyPromise.promise}}});var U=new g["a"]("createVectorTileClampedPolylines"),V={startEllipsoidNormal:0,endEllipsoidNormal:1,startPositionAndHeight:2,endPositionAndHeight:3,startFaceNormalAndVertexCorner:4,endFaceNormalAndHalfWidth:5,a_batchId:6};function W(e,t){if(!Object(h["a"])(e._va)){if(!Object(h["a"])(e._verticesPromise)){var i=e._positions,a=e._widths,n=e._counts,o=e._transferrableBatchIds,s=e._packedBuffer;Object(h["a"])(s)||(i=e._positions=Object(r["a"])(i),a=e._widths=Object(r["a"])(a),n=e._counts=Object(r["a"])(n),o=e._transferrableBatchIds=Object(r["a"])(e._batchIds),s=e._packedBuffer=M(e));var d=[i.buffer,a.buffer,n.buffer,o.buffer,s.buffer],l={positions:i.buffer,widths:a.buffer,counts:n.buffer,batchIds:o.buffer,packedBuffer:s.buffer},u=e._verticesPromise=U.scheduleTask(l,d);if(!Object(h["a"])(u))return;Object(P["a"])(u,(function(t){e._startEllipsoidNormals=new Float32Array(t.startEllipsoidNormals),e._endEllipsoidNormals=new Float32Array(t.endEllipsoidNormals),e._startPositionAndHeights=new Float32Array(t.startPositionAndHeights),e._startFaceNormalAndVertexCornerIds=new Float32Array(t.startFaceNormalAndVertexCornerIds),e._endPositionAndHeights=new Float32Array(t.endPositionAndHeights),e._endFaceNormalAndHalfWidths=new Float32Array(t.endFaceNormalAndHalfWidths),e._vertexBatchIds=new Uint16Array(t.vertexBatchIds);var i=t.indexDatatype;e._indices=i===p["a"].UNSIGNED_SHORT?new Uint16Array(t.indices):new Uint32Array(t.indices),e._ready=!0})).otherwise((function(t){e._readyPromise.reject(t)}))}if(e._ready&&!Object(h["a"])(e._va)){var _=e._startEllipsoidNormals,f=e._endEllipsoidNormals,b=e._startPositionAndHeights,m=e._endPositionAndHeights,g=e._startFaceNormalAndVertexCornerIds,O=e._endFaceNormalAndHalfWidths,I=e._vertexBatchIds,T=e._indices,C=_.byteLength+f.byteLength;C+=b.byteLength+m.byteLength,C+=g.byteLength+O.byteLength,C+=I.byteLength+T.byteLength,e._trianglesLength=T.length/3,e._geometryByteLength=C;var x=v["a"].createVertexBuffer({context:t,typedArray:_,usage:y["a"].STATIC_DRAW}),w=v["a"].createVertexBuffer({context:t,typedArray:f,usage:y["a"].STATIC_DRAW}),j=v["a"].createVertexBuffer({context:t,typedArray:b,usage:y["a"].STATIC_DRAW}),A=v["a"].createVertexBuffer({context:t,typedArray:m,usage:y["a"].STATIC_DRAW}),L=v["a"].createVertexBuffer({context:t,typedArray:g,usage:y["a"].STATIC_DRAW}),E=v["a"].createVertexBuffer({context:t,typedArray:O,usage:y["a"].STATIC_DRAW}),D=v["a"].createVertexBuffer({context:t,typedArray:I,usage:y["a"].STATIC_DRAW}),B=v["a"].createIndexBuffer({context:t,typedArray:T,usage:y["a"].STATIC_DRAW,indexDatatype:2===T.BYTES_PER_ELEMENT?p["a"].UNSIGNED_SHORT:p["a"].UNSIGNED_INT}),k=[{index:V.startEllipsoidNormal,vertexBuffer:x,componentDatatype:c["a"].FLOAT,componentsPerAttribute:3},{index:V.endEllipsoidNormal,vertexBuffer:w,componentDatatype:c["a"].FLOAT,componentsPerAttribute:3},{index:V.startPositionAndHeight,vertexBuffer:j,componentDatatype:c["a"].FLOAT,componentsPerAttribute:4},{index:V.endPositionAndHeight,vertexBuffer:A,componentDatatype:c["a"].FLOAT,componentsPerAttribute:4},{index:V.startFaceNormalAndVertexCorner,vertexBuffer:L,componentDatatype:c["a"].FLOAT,componentsPerAttribute:4},{index:V.endFaceNormalAndHalfWidth,vertexBuffer:E,componentDatatype:c["a"].FLOAT,componentsPerAttribute:4},{index:V.a_batchId,vertexBuffer:D,componentDatatype:c["a"].UNSIGNED_SHORT,componentsPerAttribute:1}];e._va=new S["a"]({context:t,attributes:k,indexBuffer:B}),e._positions=void 0,e._widths=void 0,e._counts=void 0,e._ellipsoid=void 0,e._minimumHeight=void 0,e._maximumHeight=void 0,e._rectangle=void 0,e._transferrableBatchIds=void 0,e._packedBuffer=void 0,e._startEllipsoidNormals=void 0,e._endEllipsoidNormals=void 0,e._startPositionAndHeights=void 0,e._startFaceNormalAndVertexCornerIds=void 0,e._endPositionAndHeights=void 0,e._endFaceNormalAndHalfWidths=void 0,e._vertexBatchIds=void 0,e._indices=void 0,e._readyPromise.resolve()}}}var G=new b["a"],Y=new o["a"];function z(e,t){Object(h["a"])(e._uniformMap)||(e._uniformMap={u_modifiedModelView:function(){var i=t.uniformState.view;return b["a"].clone(i,G),b["a"].multiplyByPoint(G,e._center,Y),b["a"].setTranslation(G,Y,G),G},u_highlightColor:function(){return e._highlightColor},u_minimumMaximumVectorHeights:function(){return e._minimumMaximumVectorHeights}})}function Z(e){return T["a"].fromCache({cull:{enabled:!0,face:B["a"].FRONT},blending:L["a"].PRE_MULTIPLIED_ALPHA_BLEND,depthMask:!1,stencilTest:{enabled:e,frontFunction:N["a"].EQUAL,frontOperation:{fail:F["a"].KEEP,zFail:F["a"].KEEP,zPass:F["a"].KEEP},backFunction:N["a"].EQUAL,backOperation:{fail:F["a"].KEEP,zFail:F["a"].KEEP,zPass:F["a"].KEEP},reference:k["a"].CESIUM_3D_TILE_MASK,mask:k["a"].CESIUM_3D_TILE_MASK}})}function K(e){Object(h["a"])(e._rs)||(e._rs=Z(!1),e._rs3DTiles=Z(!0))}function q(e,t){if(!Object(h["a"])(e._sp)){var i=e._batchTable,a=i.getVertexShaderCallback(!1,"a_batchId",void 0)(j["a"]),r=i.getFragmentShaderCallback(!1,void 0,!0)(A["a"]),n=new x["a"]({defines:["VECTOR_TILE",_["a"].isInternetExplorer()?"":"CLIP_POLYLINE"],sources:[w["a"],a]}),o=new x["a"]({defines:["VECTOR_TILE"],sources:[r]});e._sp=C["a"].fromCache({context:t,vertexShaderSource:n,fragmentShaderSource:o,attributeLocations:V})}}function Q(e,t){var i=e._command;if(!Object(h["a"])(e._command)){var a=e._batchTable.getUniformMapCallback()(e._uniformMap);i=e._command=new O["a"]({owner:e,vertexArray:e._va,renderState:e._rs,shaderProgram:e._sp,uniformMap:a,boundingVolume:e._boundingVolume,pass:I["a"].TERRAIN_CLASSIFICATION,pickId:e._batchTable.getPickId()});var r=O["a"].shallowClone(i,i.derivedCommands.tileset);r.renderState=e._rs3DTiles,r.pass=I["a"].CESIUM_3D_TILE_CLASSIFICATION,i.derivedCommands.tileset=r}var n=e._tileset.classificationType;n!==D["a"].TERRAIN&&n!==D["a"].BOTH||t.commandList.push(i),n!==D["a"].CESIUM_3D_TILE&&n!==D["a"].BOTH||t.commandList.push(i.derivedCommands.tileset)}function X(e,t){for(var i=e._batchIds,a=i.length,r=0;r<a;++r){var n=i[r],o=t[n];o.show=!0,o.color=s["a"].WHITE}}H.prototype.createFeatures=function(e,t){for(var i=this._batchIds,a=i.length,r=0;r<a;++r){var n=i[r];t[n]=new E["a"](e,n)}},H.prototype.applyDebugSettings=function(e,t){this._highlightColor=e?t:this._constantColor};var J=new s["a"],$=s["a"].WHITE,ee=!0;H.prototype.applyStyle=function(e,t){if(Object(h["a"])(e))for(var i=this._batchIds,a=i.length,r=0;r<a;++r){var n=i[r],o=t[n];o.color=Object(h["a"])(e.color)?e.color.evaluateColor(o,J):$,o.show=Object(h["a"])(e.show)?e.show.evaluate(o):ee}else X(this,t)},H.prototype.update=function(e){var t=e.context;if(W(this,t),z(this,t),q(this,t),K(this),this._ready){var i=e.passes;(i.render||i.pick)&&Q(this,e)}},H.prototype.isDestroyed=function(){return!1},H.prototype.destroy=function(){return this._va=this._va&&this._va.destroy(),this._sp=this._sp&&this._sp.destroy(),Object(l["a"])(this)},t["a"]=H},c3f4:function(e,t,i){"use strict";var a={REINHARD:0,MODIFIED_REINHARD:1,FILMIC:2,ACES:3,validate:function(e){return e===a.REINHARD||e===a.MODIFIED_REINHARD||e===a.FILMIC||e===a.ACES}};t["a"]=Object.freeze(a)},d8f6:function(e,t,i){"use strict";function a(e){this.offset=e.offset,this.count=e.count,this.color=e.color,this.batchIds=e.batchIds}t["a"]=a},db4b:function(e,t,i){"use strict";var a=i("1d87"),r=i("670c"),n=i("be18"),o=i("bd8d"),s=i("2f63"),c=i("7d62"),d=i("aee6"),h=i("c52f"),l=i("6dfc"),u=i("eace"),_=i("6a29"),p=i("a58e"),f=i("8f7c"),b=i("7950"),m=i("f61d"),g=i("04e1"),v=i("4626"),y=i("4082"),O=i("05e5");function I(e){this._positions=e.positions,this._batchTable=e.batchTable,this._batchIds=e.batchIds,this._rectangle=e.rectangle,this._minHeight=e.minimumHeight,this._maxHeight=e.maximumHeight,this._billboardCollection=void 0,this._labelCollection=void 0,this._polylineCollection=void 0,this._verticesPromise=void 0,this._packedBuffer=void 0,this._ready=!1,this._readyPromise=p["a"].defer(),this._resolvedPromise=!1}function T(e,t){var i=e._rectangle,a=e._minHeight,r=e._maxHeight,n=2+u["a"].packedLength+h["a"].packedLength,o=new Float64Array(n),s=0;return o[s++]=a,o[s++]=r,u["a"].pack(i,o,s),s+=u["a"].packedLength,h["a"].pack(t,o,s),o}Object.defineProperties(I.prototype,{pointsLength:{get:function(){return this._billboardCollection.length}},texturesByteLength:{get:function(){var e=this._billboardCollection.textureAtlas.texture.sizeInBytes,t=this._labelCollection._textureAtlas.texture.sizeInBytes;return e+t}},readyPromise:{get:function(){return this._readyPromise.promise}}});var C=new _["a"]("createVectorTilePoints",5),x=new n["a"];function S(e,t){if(!Object(s["a"])(e._billboardCollection)){var i;if(!Object(s["a"])(e._verticesPromise)){i=e._positions;var r=e._packedBuffer;Object(s["a"])(r)||(i=e._positions=Object(a["a"])(i),e._batchIds=Object(a["a"])(e._batchIds),r=e._packedBuffer=T(e,t));var o=[i.buffer,r.buffer],c={positions:i.buffer,packedBuffer:r.buffer},d=e._verticesPromise=C.scheduleTask(c,o);if(!Object(s["a"])(d))return;d.then((function(t){e._positions=new Float64Array(t.positions),e._ready=!0}))}if(e._ready&&!Object(s["a"])(e._billboardCollection)){i=e._positions;var h=e._batchTable,l=e._batchIds,u=e._billboardCollection=new f["a"]({batchTable:h}),_=e._labelCollection=new g["a"]({batchTable:h}),p=e._polylineCollection=new y["a"];p._useHighlightColor=!0;for(var b=i.length/3,m=0;m<b;++m){var v=l[m],O=n["a"].unpack(i,3*m,x),I=u.add();I.position=O,I._batchIndex=v;var S=_.add();S.text=" ",S.position=O,S._batchIndex=v;var w=p.add();w.positions=[n["a"].clone(O),n["a"].clone(O)]}e._positions=void 0,e._packedBuffer=void 0}}}function w(e,t){for(var i=e._batchIds,a=i.length,n=0;n<a;++n){var s=i[n],c=t[s];c.show=!0,c.pointSize=b["a"].defaultPointSize,c.color=b["a"].defaultColor,c.pointOutlineColor=b["a"].defaultPointOutlineColor,c.pointOutlineWidth=b["a"].defaultPointOutlineWidth,c.labelColor=o["a"].WHITE,c.labelOutlineColor=o["a"].WHITE,c.labelOutlineWidth=1,c.font="30px sans-serif",c.labelStyle=v["a"].FILL,c.labelText=void 0,c.backgroundColor=new o["a"](.165,.165,.165,.8),c.backgroundPadding=new r["a"](7,5),c.backgroundEnabled=!1,c.scaleByDistance=void 0,c.translucencyByDistance=void 0,c.distanceDisplayCondition=void 0,c.heightOffset=0,c.anchorLineEnabled=!1,c.anchorLineColor=o["a"].WHITE,c.image=void 0,c.disableDepthTestDistance=0,c.horizontalOrigin=m["a"].CENTER,c.verticalOrigin=O["a"].CENTER,c.labelHorizontalOrigin=m["a"].RIGHT,c.labelVerticalOrigin=O["a"].BASELINE}}I.prototype.createFeatures=function(e,t){for(var i=this._billboardCollection,a=this._labelCollection,r=this._polylineCollection,n=this._batchIds,o=n.length,s=0;s<o;++s){var c=n[s],d=i.get(s),h=a.get(s),l=r.get(s);t[c]=new b["a"](e,c,d,h,l)}},I.prototype.applyDebugSettings=function(e,t){e?(o["a"].clone(t,this._billboardCollection._highlightColor),o["a"].clone(t,this._labelCollection._highlightColor),o["a"].clone(t,this._polylineCollection._highlightColor)):(o["a"].clone(o["a"].WHITE,this._billboardCollection._highlightColor),o["a"].clone(o["a"].WHITE,this._labelCollection._highlightColor),o["a"].clone(o["a"].WHITE,this._polylineCollection._highlightColor))};var j=new o["a"],A=new o["a"],P=new o["a"],L=new o["a"],E=new o["a"],D=new o["a"],B=new l["a"],k=new l["a"],N=new d["a"];I.prototype.applyStyle=function(e,t){if(Object(s["a"])(e))for(var i=this._batchIds,a=i.length,r=0;r<a;++r){var n=i[r],o=t[n];if(Object(s["a"])(e.show)&&(o.show=e.show.evaluate(o)),Object(s["a"])(e.pointSize)&&(o.pointSize=e.pointSize.evaluate(o)),Object(s["a"])(e.color)&&(o.color=e.color.evaluateColor(o,j)),Object(s["a"])(e.pointOutlineColor)&&(o.pointOutlineColor=e.pointOutlineColor.evaluateColor(o,A)),Object(s["a"])(e.pointOutlineWidth)&&(o.pointOutlineWidth=e.pointOutlineWidth.evaluate(o)),Object(s["a"])(e.labelColor)&&(o.labelColor=e.labelColor.evaluateColor(o,P)),Object(s["a"])(e.labelOutlineColor)&&(o.labelOutlineColor=e.labelOutlineColor.evaluateColor(o,L)),Object(s["a"])(e.labelOutlineWidth)&&(o.labelOutlineWidth=e.labelOutlineWidth.evaluate(o)),Object(s["a"])(e.font)&&(o.font=e.font.evaluate(o)),Object(s["a"])(e.labelStyle)&&(o.labelStyle=e.labelStyle.evaluate(o)),Object(s["a"])(e.labelText)?o.labelText=e.labelText.evaluate(o):o.labelText=void 0,Object(s["a"])(e.backgroundColor)&&(o.backgroundColor=e.backgroundColor.evaluateColor(o,E)),Object(s["a"])(e.backgroundPadding)&&(o.backgroundPadding=e.backgroundPadding.evaluate(o)),Object(s["a"])(e.backgroundEnabled)&&(o.backgroundEnabled=e.backgroundEnabled.evaluate(o)),Object(s["a"])(e.scaleByDistance)){var c=e.scaleByDistance.evaluate(o);B.near=c.x,B.nearValue=c.y,B.far=c.z,B.farValue=c.w,o.scaleByDistance=B}else o.scaleByDistance=void 0;if(Object(s["a"])(e.translucencyByDistance)){var d=e.translucencyByDistance.evaluate(o);k.near=d.x,k.nearValue=d.y,k.far=d.z,k.farValue=d.w,o.translucencyByDistance=k}else o.translucencyByDistance=void 0;if(Object(s["a"])(e.distanceDisplayCondition)){var h=e.distanceDisplayCondition.evaluate(o);N.near=h.x,N.far=h.y,o.distanceDisplayCondition=N}else o.distanceDisplayCondition=void 0;Object(s["a"])(e.heightOffset)&&(o.heightOffset=e.heightOffset.evaluate(o)),Object(s["a"])(e.anchorLineEnabled)&&(o.anchorLineEnabled=e.anchorLineEnabled.evaluate(o)),Object(s["a"])(e.anchorLineColor)&&(o.anchorLineColor=e.anchorLineColor.evaluateColor(o,D)),Object(s["a"])(e.image)?o.image=e.image.evaluate(o):o.image=void 0,Object(s["a"])(e.disableDepthTestDistance)&&(o.disableDepthTestDistance=e.disableDepthTestDistance.evaluate(o)),Object(s["a"])(e.horizontalOrigin)&&(o.horizontalOrigin=e.horizontalOrigin.evaluate(o)),Object(s["a"])(e.verticalOrigin)&&(o.verticalOrigin=e.verticalOrigin.evaluate(o)),Object(s["a"])(e.labelHorizontalOrigin)&&(o.labelHorizontalOrigin=e.labelHorizontalOrigin.evaluate(o)),Object(s["a"])(e.labelVerticalOrigin)&&(o.labelVerticalOrigin=e.labelVerticalOrigin.evaluate(o))}else w(this,t)},I.prototype.update=function(e){S(this,e.mapProjection.ellipsoid),this._ready&&(this._polylineCollection.update(e),this._billboardCollection.update(e),this._labelCollection.update(e),this._resolvedPromise||(this._readyPromise.resolve(),this._resolvedPromise=!0))},I.prototype.isDestroyed=function(){return!1},I.prototype.destroy=function(){return this._billboardCollection=this._billboardCollection&&this._billboardCollection.destroy(),this._labelCollection=this._labelCollection&&this._labelCollection.destroy(),this._polylineCollection=this._polylineCollection&&this._polylineCollection.destroy(),Object(c["a"])(this)},t["a"]=I},e288:function(e,t,i){"use strict";var a=i("670c"),r=i("be18"),n=i("bef8"),o=i("2bb9"),s=i("8dfe"),c=i("535a"),d=i("2f63"),h=i("21d7"),l=i("3d7f"),u=i("93da"),_=i("eace"),p=i("d4ed"),f=i("d3a0"),b=i("a58e"),m=i("64ac"),g=/{[^}]+}/g,v={x:E,y:B,z:F,s:H,reverseX:D,reverseY:k,reverseZ:N,westDegrees:M,southDegrees:U,eastDegrees:V,northDegrees:W,westProjected:Y,southProjected:z,eastProjected:Z,northProjected:K,width:q,height:Q},y=Object(o["a"])(v,{i:X,j:J,reverseI:$,reverseJ:ee,longitudeDegrees:re,latitudeDegrees:ne,longitudeProjected:oe,latitudeProjected:se,format:he});function O(e){this._errorEvent=new h["a"],this._resource=void 0,this._urlSchemeZeroPadding=void 0,this._pickFeaturesResource=void 0,this._tileWidth=void 0,this._tileHeight=void 0,this._maximumLevel=void 0,this._minimumLevel=void 0,this._tilingScheme=void 0,this._rectangle=void 0,this._tileDiscardPolicy=void 0,this._credit=void 0,this._hasAlphaChannel=void 0,this._readyPromise=void 0,this._tags=void 0,this._pickFeaturesTags=void 0,this.defaultAlpha=void 0,this.defaultNightAlpha=void 0,this.defaultDayAlpha=void 0,this.defaultBrightness=void 0,this.defaultContrast=void 0,this.defaultHue=void 0,this.defaultSaturation=void 0,this.defaultGamma=void 0,this.defaultMinificationFilter=void 0,this.defaultMagnificationFilter=void 0,this.enablePickFeatures=!0,this.reinitialize(e)}Object.defineProperties(O.prototype,{url:{get:function(){return this._resource.url}},urlSchemeZeroPadding:{get:function(){return this._urlSchemeZeroPadding}},pickFeaturesUrl:{get:function(){return this._pickFeaturesResource.url}},proxy:{get:function(){return this._resource.proxy}},tileWidth:{get:function(){return this._tileWidth}},tileHeight:{get:function(){return this._tileHeight}},maximumLevel:{get:function(){return this._maximumLevel}},minimumLevel:{get:function(){return this._minimumLevel}},tilingScheme:{get:function(){return this._tilingScheme}},rectangle:{get:function(){return this._rectangle}},tileDiscardPolicy:{get:function(){return this._tileDiscardPolicy}},errorEvent:{get:function(){return this._errorEvent}},ready:{get:function(){return Object(d["a"])(this._resource)}},readyPromise:{get:function(){return this._readyPromise}},credit:{get:function(){return this._credit}},hasAlphaChannel:{get:function(){return this._hasAlphaChannel}}}),O.prototype.reinitialize=function(e){var t=this;t._readyPromise=Object(b["a"])(e).then((function(e){var i=e.customTags,a=Object(o["a"])(v,i),r=Object(o["a"])(y,i),n=p["a"].createIfNeeded(e.url),h=p["a"].createIfNeeded(e.pickFeaturesUrl);t.enablePickFeatures=Object(c["a"])(e.enablePickFeatures,t.enablePickFeatures),t._urlSchemeZeroPadding=Object(c["a"])(e.urlSchemeZeroPadding,t.urlSchemeZeroPadding),t._tileDiscardPolicy=e.tileDiscardPolicy,t._getFeatureInfoFormats=e.getFeatureInfoFormats,t._subdomains=e.subdomains,Array.isArray(t._subdomains)?t._subdomains=t._subdomains.slice():Object(d["a"])(t._subdomains)&&t._subdomains.length>0?t._subdomains=t._subdomains.split(""):t._subdomains=["a","b","c"],t._tileWidth=Object(c["a"])(e.tileWidth,256),t._tileHeight=Object(c["a"])(e.tileHeight,256),t._minimumLevel=Object(c["a"])(e.minimumLevel,0),t._maximumLevel=e.maximumLevel,t._tilingScheme=Object(c["a"])(e.tilingScheme,new f["a"]({ellipsoid:e.ellipsoid})),t._rectangle=Object(c["a"])(e.rectangle,t._tilingScheme.rectangle),t._rectangle=_["a"].intersection(t._rectangle,t._tilingScheme.rectangle),t._hasAlphaChannel=Object(c["a"])(e.hasAlphaChannel,!0);var l=e.credit;return"string"===typeof l&&(l=new s["a"](l)),t._credit=l,t._resource=n,t._tags=a,t._pickFeaturesResource=h,t._pickFeaturesTags=r,!0}))},O.prototype.getTileCredits=function(e,t,i){},O.prototype.requestImage=function(e,t,i,a){return m["a"].loadImage(this,S(this,e,t,i,a))},O.prototype.pickFeatures=function(e,t,i,a,r){if(this.enablePickFeatures&&Object(d["a"])(this._pickFeaturesResource)&&0!==this._getFeatureInfoFormats.length){var n=0,o=this;return c()}function s(e,t){return e.callback(t)}function c(){if(n>=o._getFeatureInfoFormats.length)return Object(b["a"])([]);var d=o._getFeatureInfoFormats[n],h=P(o,e,t,i,a,r,d.format);return++n,"json"===d.type?h.fetchJson().then(d.callback).otherwise(c):"xml"===d.type?h.fetchXML().then(d.callback).otherwise(c):"text"===d.type||"html"===d.type?h.fetchText().then(d.callback).otherwise(c):h.fetch({responseType:d.format}).then(s.bind(void 0,d)).otherwise(c)}};var I=!1,T=new _["a"],C=!1,x=new _["a"];function S(e,t,i,a,r){I=!1,C=!1;var n=e._resource,o=n.getUrlComponent(!0),s=e._tags,c={},h=o.match(g);return Object(d["a"])(h)&&h.forEach((function(r){var n=r.substring(1,r.length-1);Object(d["a"])(s[n])&&(c[n]=s[n](e,t,i,a))})),n.getDerivedResource({request:r,templateValues:c})}var w=!1,j=new a["a"],A=!1;function P(e,t,i,a,r,n,o){I=!1,C=!1,w=!1,A=!1;var s=e._pickFeaturesResource,c=s.getUrlComponent(!0),h=e._pickFeaturesTags,l={},u=c.match(g);return Object(d["a"])(u)&&u.forEach((function(s){var c=s.substring(1,s.length-1);Object(d["a"])(h[c])&&(l[c]=h[c](e,t,i,a,r,n,o))})),s.getDerivedResource({templateValues:l})}function L(e,t,i){if(e&&e.urlSchemeZeroPadding&&e.urlSchemeZeroPadding.hasOwnProperty(t)){var a=e.urlSchemeZeroPadding[t];if("string"===typeof a){var r=a.length;r>1&&(i=i.length>=r?i:new Array(r-i.toString().length+1).join("0")+i)}}return i}function E(e,t,i,a){return L(e,"{x}",t)}function D(e,t,i,a){var r=e.tilingScheme.getNumberOfXTilesAtLevel(a)-t-1;return L(e,"{reverseX}",r)}function B(e,t,i,a){return L(e,"{y}",i)}function k(e,t,i,a){var r=e.tilingScheme.getNumberOfYTilesAtLevel(a)-i-1;return L(e,"{reverseY}",r)}function N(e,t,i,a){var r=e.maximumLevel,n=Object(d["a"])(r)&&a<r?r-a-1:a;return L(e,"{reverseZ}",n)}function F(e,t,i,a){return L(e,"{z}",a)}function H(e,t,i,a){var r=(t+i+a)%e._subdomains.length;return e._subdomains[r]}function R(e,t,i,a){I||(e.tilingScheme.tileXYToRectangle(t,i,a,T),T.west=u["a"].toDegrees(T.west),T.south=u["a"].toDegrees(T.south),T.east=u["a"].toDegrees(T.east),T.north=u["a"].toDegrees(T.north),I=!0)}function M(e,t,i,a){return R(e,t,i,a),T.west}function U(e,t,i,a){return R(e,t,i,a),T.south}function V(e,t,i,a){return R(e,t,i,a),T.east}function W(e,t,i,a){return R(e,t,i,a),T.north}function G(e,t,i,a){C||(e.tilingScheme.tileXYToNativeRectangle(t,i,a,x),C=!0)}function Y(e,t,i,a){return G(e,t,i,a),x.west}function z(e,t,i,a){return G(e,t,i,a),x.south}function Z(e,t,i,a){return G(e,t,i,a),x.east}function K(e,t,i,a){return G(e,t,i,a),x.north}function q(e,t,i,a){return e.tileWidth}function Q(e,t,i,a){return e.tileHeight}function X(e,t,i,a,r,n,o){return ae(e,t,i,a,r,n),j.x}function J(e,t,i,a,r,n,o){return ae(e,t,i,a,r,n),j.y}function $(e,t,i,a,r,n,o){return ae(e,t,i,a,r,n),e.tileWidth-j.x-1}function ee(e,t,i,a,r,n,o){return ae(e,t,i,a,r,n),e.tileHeight-j.y-1}var te=new _["a"],ie=new r["a"];function ae(e,t,i,a,r,n,o){if(!w){de(e,t,i,a,r,n);var s=ie,c=e.tilingScheme.tileXYToNativeRectangle(t,i,a,te);j.x=e.tileWidth*(s.x-c.west)/c.width|0,j.y=e.tileHeight*(c.north-s.y)/c.height|0,w=!0}}function re(e,t,i,a,r,n,o){return u["a"].toDegrees(r)}function ne(e,t,i,a,r,n,o){return u["a"].toDegrees(n)}function oe(e,t,i,a,r,n,o){return de(e,t,i,a,r,n),ie.x}function se(e,t,i,a,r,n,o){return de(e,t,i,a,r,n),ie.y}var ce=new n["a"];function de(e,t,i,a,r,n,o){if(!A){if(e.tilingScheme.projection instanceof l["a"])ie.x=u["a"].toDegrees(r),ie.y=u["a"].toDegrees(n);else{var s=ce;s.longitude=r,s.latitude=n,e.tilingScheme.projection.project(s,ie)}A=!0}}function he(e,t,i,a,r,n,o){return o}t["a"]=O},ee05:function(e,t,i){"use strict";var a=i("77af"),r=i("bd8d"),n=i("2f63"),o=i("7d62"),s=i("e42d"),c=i("f845"),d=i("a894"),h=i("ac3b"),l=i("d289"),u=i("6ef5"),_=i("6dc0"),p=i("6c84"),f=i("5770"),b=i("a913"),m=i("e1f5"),g=i("6bd8"),v=i("b7c8"),y=i("3626"),O=i("6102"),I=!1;function T(e){this._drawClassificationFBO=void 0,this._accumulationFBO=void 0,this._packFBO=void 0,this._opaqueDepthStencilTexture=void 0,this._colorTexture=void 0,this._accumulationTexture=void 0,this._textureToComposite=void 0,this._translucentDepthStencilTexture=void 0,this._packedTranslucentDepth=void 0,this._packDepthCommand=void 0,this._accumulateCommand=void 0,this._compositeCommand=void 0,this._copyCommand=void 0,this._clearColorCommand=new c["a"]({color:new r["a"](0,0,0,0),owner:this}),this._clearDepthStencilCommand=new c["a"]({depth:1,stencil:0,owner:this}),this._supported=e.depthTexture,this._viewport=new a["a"],this._rsDepth=void 0,this._rsAccumulate=void 0,this._rsComp=void 0,this._useScissorTest=void 0,this._scissorRectangle=void 0,this._hasTranslucentDepth=!1,this._frustumsDrawn=0}function C(e){e._colorTexture=e._colorTexture&&!e._colorTexture.isDestroyed()&&e._colorTexture.destroy(),e._accumulationTexture=e._accumulationTexture&&!e._accumulationTexture.isDestroyed()&&e._accumulationTexture.destroy(),e._textureToComposite=void 0,e._translucentDepthStencilTexture=e._translucentDepthStencilTexture&&!e._translucentDepthStencilTexture.isDestroyed()&&e._translucentDepthStencilTexture.destroy(),e._packedTranslucentDepth=e._packedTranslucentDepth&&!e._packedTranslucentDepth.isDestroyed()&&e._packedTranslucentDepth.destroy()}function x(e){e._drawClassificationFBO=e._drawClassificationFBO&&!e._drawClassificationFBO.isDestroyed()&&e._drawClassificationFBO.destroy(),e._accumulationFBO=e._accumulationFBO&&!e._accumulationFBO.isDestroyed()&&e._accumulationFBO.destroy(),e._packFBO=e._packFBO&&!e._packFBO.isDestroyed()&&e._packFBO.destroy()}function S(e,t,i){return new b["a"]({context:e,width:t,height:i,pixelFormat:s["a"].RGBA,pixelDatatype:u["a"].UNSIGNED_BYTE,sampler:p["a"].NEAREST})}function w(e,t,i,a){C(e),e._colorTexture=S(t,i,a),e._accumulationTexture=S(t,i,a),e._translucentDepthStencilTexture=new b["a"]({context:t,width:i,height:a,pixelFormat:s["a"].DEPTH_STENCIL,pixelDatatype:u["a"].UNSIGNED_INT_24_8,sampler:p["a"].NEAREST}),e._packedTranslucentDepth=new b["a"]({context:t,width:i,height:a,pixelFormat:s["a"].RGBA,pixelDatatype:u["a"].UNSIGNED_BYTE,sampler:p["a"].NEAREST})}function j(e,t){x(e),e._drawClassificationFBO=new h["a"]({context:t,colorTextures:[e._colorTexture],depthStencilTexture:e._translucentDepthStencilTexture,destroyAttachments:!1}),e._accumulationFBO=new h["a"]({context:t,colorTextures:[e._accumulationTexture],depthStencilTexture:e._translucentDepthStencilTexture,destroyAttachments:!1}),e._packFBO=new h["a"]({context:t,colorTextures:[e._packedTranslucentDepth],destroyAttachments:!1})}function A(e,t,i,r){if(e.isSupported()){e._opaqueDepthStencilTexture=r.depthStencilTexture;var o,s,c=e._opaqueDepthStencilTexture.width,h=e._opaqueDepthStencilTexture.height,l=e._colorTexture,u=!Object(n["a"])(l)||l.width!==c||l.height!==h;if(u&&w(e,t,c,h),Object(n["a"])(e._drawClassificationFBO)&&!u||j(e,t),Object(n["a"])(e._packDepthCommand)||(o=new f["a"]({sources:[m["a"]]}),s={u_opaqueDepthTexture:function(){return e._opaqueDepthStencilTexture},u_translucentDepthTexture:function(){return e._translucentDepthStencilTexture}},e._packDepthCommand=t.createViewportQuadCommand(o,{uniformMap:s,owner:e})),!Object(n["a"])(e._compositeCommand)){o=new f["a"]({sources:[g["a"]]}),s={colorTexture:function(){return e._textureToComposite}},I&&(o.defines=["DEBUG_SHOW_DEPTH"],s.u_packedTranslucentDepth=function(){return e._packedTranslucentDepth}),e._compositeCommand=t.createViewportQuadCommand(o,{uniformMap:s,owner:e});var p=e._compositeCommand,b=p.shaderProgram,T=t.shaderCache.createDerivedShaderProgram(b,"pick",{vertexShaderSource:b.vertexShaderSource,fragmentShaderSource:new f["a"]({sources:o.sources,defines:["PICK"]}),attributeLocations:b._attributeLocations}),C=d["a"].shallowClone(p);C.shaderProgram=T,p.derivedCommands.pick=C}Object(n["a"])(e._copyCommand)||(o=new f["a"]({sources:[g["a"]]}),s={colorTexture:function(){return e._colorTexture}},e._copyCommand=t.createViewportQuadCommand(o,{uniformMap:s,owner:e})),Object(n["a"])(e._accumulateCommand)||(o=new f["a"]({sources:[g["a"]]}),s={colorTexture:function(){return e._colorTexture}},e._accumulateCommand=t.createViewportQuadCommand(o,{uniformMap:s,owner:e})),e._viewport.width=c,e._viewport.height=h;var x=!a["a"].equals(e._viewport,i.viewport),S=x!==e._useScissorTest;e._useScissorTest=x,a["a"].equals(e._scissorRectangle,i.viewport)||(e._scissorRectangle=a["a"].clone(i.viewport,e._scissorRectangle),S=!0),Object(n["a"])(e._rsDepth)&&a["a"].equals(e._viewport,e._rsDepth.viewport)&&!S||(e._rsDepth=_["a"].fromCache({viewport:e._viewport,scissorTest:{enabled:e._useScissorTest,rectangle:e._scissorRectangle}})),Object(n["a"])(e._packDepthCommand)&&(e._packDepthCommand.renderState=e._rsDepth),Object(n["a"])(e._rsAccumulate)&&a["a"].equals(e._viewport,e._rsAccumulate.viewport)&&!S||(e._rsAccumulate=_["a"].fromCache({viewport:e._viewport,scissorTest:{enabled:e._useScissorTest,rectangle:e._scissorRectangle},stencilTest:{enabled:!0,frontFunction:O["a"].EQUAL,reference:y["a"].CESIUM_3D_TILE_MASK}})),Object(n["a"])(e._accumulateCommand)&&(e._accumulateCommand.renderState=e._rsAccumulate),Object(n["a"])(e._rsComp)&&a["a"].equals(e._viewport,e._rsComp.viewport)&&!S||(e._rsComp=_["a"].fromCache({viewport:e._viewport,scissorTest:{enabled:e._useScissorTest,rectangle:e._scissorRectangle},blending:v["a"].ALPHA_BLEND})),Object(n["a"])(e._compositeCommand)&&(e._compositeCommand.renderState=e._rsComp,e._compositeCommand.derivedCommands.pick.renderState=e._rsComp)}}function P(e,t,i){if(e._hasTranslucentDepth){var a=i.framebuffer;i.framebuffer=e._drawClassificationFBO,e._clearColorCommand.execute(t._context,i),i.framebuffer=a,e._frustumsDrawn>1&&(i.framebuffer=e._accumulationFBO,e._clearColorCommand.execute(t._context,i)),e._hasTranslucentDepth=!1,e._frustumsDrawn=0}}Object.defineProperties(T.prototype,{hasTranslucentDepth:{get:function(){return this._hasTranslucentDepth}}}),T.prototype.executeTranslucentCommands=function(e,t,i,a,r){var n,o,s=a.length,c=e.frameState.useLogDepth,d=e.context,h=i.framebuffer;for(o=0;o<s;++o)if(n=a[o],n=c?n.derivedCommands.logDepth.command:n,n.depthForTranslucentClassification){this._hasTranslucentDepth=!0;break}if(this._hasTranslucentDepth){for(A(this,d,i,r),i.framebuffer=this._drawClassificationFBO,this._clearDepthStencilCommand.execute(d,i),o=0;o<s;++o)if(n=a[o],n=c?n.derivedCommands.logDepth.command:n,n.depthForTranslucentClassification){var l=n.derivedCommands.depth.depthOnlyCommand;t(l,e,d,i)}this._frustumsDrawn+=this._hasTranslucentDepth?1:0,this._hasTranslucentDepth&&(i.framebuffer=this._packFBO,this._packDepthCommand.execute(d,i)),i.framebuffer=h}},T.prototype.executeClassificationCommands=function(e,t,i,a){if(this._hasTranslucentDepth){var r=e.context,n=r.uniformState,o=i.framebuffer;2===this._frustumsDrawn&&(i.framebuffer=this._accumulationFBO,this._copyCommand.execute(r,i)),i.framebuffer=this._drawClassificationFBO,this._frustumsDrawn>1&&this._clearColorCommand.execute(r,i),n.updatePass(l["a"].CESIUM_3D_TILE_CLASSIFICATION);var s=n.globeDepthTexture;n.globeDepthTexture=this._packedTranslucentDepth;for(var c=a.commands[l["a"].CESIUM_3D_TILE_CLASSIFICATION],d=a.indices[l["a"].CESIUM_3D_TILE_CLASSIFICATION],h=0;h<d;++h)t(c[h],e,r,i);n.globeDepthTexture=s,i.framebuffer=o,1!==this._frustumsDrawn&&(i.framebuffer=this._accumulationFBO,this._accumulateCommand.execute(r,i),i.framebuffer=o)}},T.prototype.execute=function(e,t){if(this._hasTranslucentDepth){1===this._frustumsDrawn?this._textureToComposite=this._colorTexture:this._textureToComposite=this._accumulationTexture;var i=e.frameState.passes.pick?this._compositeCommand.derivedCommands.pick:this._compositeCommand;i.execute(e.context,t),P(this,e,t)}},T.prototype.isSupported=function(){return this._supported},T.prototype.isDestroyed=function(){return!1},T.prototype.destroy=function(){return C(this),x(this),Object(n["a"])(this._compositeCommand)&&(this._compositeCommand.shaderProgram=this._compositeCommand.shaderProgram&&this._compositeCommand.shaderProgram.destroy()),Object(n["a"])(this._packDepthCommand)&&(this._packDepthCommand.shaderProgram=this._packDepthCommand.shaderProgram&&this._packDepthCommand.shaderProgram.destroy()),Object(o["a"])(this)},t["a"]=T}}]);