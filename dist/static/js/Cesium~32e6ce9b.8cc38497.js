(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Cesium~32e6ce9b"],{"022d":function(e,t,a){"use strict";var i=a("4f04");function r(){i["a"].throwInstantiationError()}r.computeDefaultLevelZeroMaximumGeometricError=function(e){return 2*e.ellipsoid.maximumRadius*Math.PI*.25/(65*e.getNumberOfXTilesAtLevel(0))},Object.defineProperties(r.prototype,{quadtree:{get:i["a"].throwInstantiationError,set:i["a"].throwInstantiationError},ready:{get:i["a"].throwInstantiationError},tilingScheme:{get:i["a"].throwInstantiationError},errorEvent:{get:i["a"].throwInstantiationError}}),r.prototype.update=i["a"].throwInstantiationError,r.prototype.beginUpdate=i["a"].throwInstantiationError,r.prototype.endUpdate=i["a"].throwInstantiationError,r.prototype.getLevelMaximumGeometricError=i["a"].throwInstantiationError,r.prototype.loadTile=i["a"].throwInstantiationError,r.prototype.computeTileVisibility=i["a"].throwInstantiationError,r.prototype.showTileThisFrame=i["a"].throwInstantiationError,r.prototype.computeDistanceToTile=i["a"].throwInstantiationError,r.prototype.isDestroyed=i["a"].throwInstantiationError,r.prototype.destroy=i["a"].throwInstantiationError,t["a"]=r},"11ea":function(e,t,a){"use strict";var i=a("2f63"),r=a("eace"),n=a("f1b3"),o=a("ee78");function s(e){this._tilingScheme=e.tilingScheme,this._x=e.x,this._y=e.y,this._level=e.level,this._parent=e.parent,this._rectangle=this._tilingScheme.tileXYToRectangle(this._x,this._y,this._level),this._southwestChild=void 0,this._southeastChild=void 0,this._northwestChild=void 0,this._northeastChild=void 0,this.replacementPrevious=void 0,this.replacementNext=void 0,this._distance=0,this._loadPriority=0,this._customData=[],this._frameUpdated=void 0,this._lastSelectionResult=o["a"].NONE,this._lastSelectionResultFrame=void 0,this._loadedCallbacks={},this.state=n["a"].START,this.renderable=!1,this.upsampledFromParent=!1,this.data=void 0}function c(e){Object(i["a"])(e)&&e.freeResources()}s.createLevelZeroTiles=function(e){for(var t=e.getNumberOfXTilesAtLevel(0),a=e.getNumberOfYTilesAtLevel(0),i=new Array(t*a),r=0,n=0;n<a;++n)for(var o=0;o<t;++o)i[r++]=new s({tilingScheme:e,x:o,y:n,level:0});return i},s.prototype._updateCustomData=function(e,t,a){var n,o,s,c=this.customData;if(Object(i["a"])(t)&&Object(i["a"])(a)){for(c=c.filter((function(e){return-1===a.indexOf(e)})),this._customData=c,s=this._rectangle,n=0;n<t.length;++n)o=t[n],r["a"].contains(s,o.positionCartographic)&&c.push(o);this._frameUpdated=e}else{var l=this._parent;if(Object(i["a"])(l)&&this._frameUpdated!==l._frameUpdated){c.length=0,s=this._rectangle;var h=l.customData;for(n=0;n<h.length;++n)o=h[n],r["a"].contains(s,o.positionCartographic)&&c.push(o);this._frameUpdated=l._frameUpdated}}},Object.defineProperties(s.prototype,{tilingScheme:{get:function(){return this._tilingScheme}},x:{get:function(){return this._x}},y:{get:function(){return this._y}},level:{get:function(){return this._level}},parent:{get:function(){return this._parent}},rectangle:{get:function(){return this._rectangle}},children:{get:function(){return[this.northwestChild,this.northeastChild,this.southwestChild,this.southeastChild]}},southwestChild:{get:function(){return Object(i["a"])(this._southwestChild)||(this._southwestChild=new s({tilingScheme:this.tilingScheme,x:2*this.x,y:2*this.y+1,level:this.level+1,parent:this})),this._southwestChild}},southeastChild:{get:function(){return Object(i["a"])(this._southeastChild)||(this._southeastChild=new s({tilingScheme:this.tilingScheme,x:2*this.x+1,y:2*this.y+1,level:this.level+1,parent:this})),this._southeastChild}},northwestChild:{get:function(){return Object(i["a"])(this._northwestChild)||(this._northwestChild=new s({tilingScheme:this.tilingScheme,x:2*this.x,y:2*this.y,level:this.level+1,parent:this})),this._northwestChild}},northeastChild:{get:function(){return Object(i["a"])(this._northeastChild)||(this._northeastChild=new s({tilingScheme:this.tilingScheme,x:2*this.x+1,y:2*this.y,level:this.level+1,parent:this})),this._northeastChild}},customData:{get:function(){return this._customData}},needsLoading:{get:function(){return this.state<n["a"].DONE}},eligibleForUnloading:{get:function(){var e=!0;return Object(i["a"])(this.data)&&(e=this.data.eligibleForUnloading,Object(i["a"])(e)||(e=!0)),e}}}),s.prototype.findLevelZeroTile=function(e,t,a){var i=this.tilingScheme.getNumberOfXTilesAtLevel(0);if(t<0?t+=i:t>=i&&(t-=i),!(a<0||a>=this.tilingScheme.getNumberOfYTilesAtLevel(0)))return e.filter((function(e){return e.x===t&&e.y===a}))[0]},s.prototype.findTileToWest=function(e){var t=this.parent;if(void 0===t)return this.findLevelZeroTile(e,this.x-1,this.y);if(t.southeastChild===this)return t.southwestChild;if(t.northeastChild===this)return t.northwestChild;var a=t.findTileToWest(e);return void 0!==a?t.southwestChild===this?a.southeastChild:a.northeastChild:void 0},s.prototype.findTileToEast=function(e){var t=this.parent;if(void 0===t)return this.findLevelZeroTile(e,this.x+1,this.y);if(t.southwestChild===this)return t.southeastChild;if(t.northwestChild===this)return t.northeastChild;var a=t.findTileToEast(e);return void 0!==a?t.southeastChild===this?a.southwestChild:a.northwestChild:void 0},s.prototype.findTileToSouth=function(e){var t=this.parent;if(void 0===t)return this.findLevelZeroTile(e,this.x,this.y+1);if(t.northwestChild===this)return t.southwestChild;if(t.northeastChild===this)return t.southeastChild;var a=t.findTileToSouth(e);return void 0!==a?t.southwestChild===this?a.northwestChild:a.northeastChild:void 0},s.prototype.findTileToNorth=function(e){var t=this.parent;if(void 0===t)return this.findLevelZeroTile(e,this.x,this.y-1);if(t.southwestChild===this)return t.northwestChild;if(t.southeastChild===this)return t.northeastChild;var a=t.findTileToNorth(e);return void 0!==a?t.northwestChild===this?a.southwestChild:a.southeastChild:void 0},s.prototype.freeResources=function(){this.state=n["a"].START,this.renderable=!1,this.upsampledFromParent=!1,Object(i["a"])(this.data)&&Object(i["a"])(this.data.freeResources)&&this.data.freeResources(),c(this._southwestChild),this._southwestChild=void 0,c(this._southeastChild),this._southeastChild=void 0,c(this._northwestChild),this._northwestChild=void 0,c(this._northeastChild),this._northeastChild=void 0},t["a"]=s},"2ba0d":function(e,t,a){"use strict";var i=a("be18"),r=a("82d9");function n(e){this._ellipsoid=new r["a"](e.ellipsoid,i["a"].ZERO)}Object.defineProperties(n.prototype,{ellipsoid:{get:function(){return this._ellipsoid}}}),t["a"]=n},"4b3a":function(e,t,a){"use strict";var i={READY:0,CREATING:1,CREATED:2,COMBINING:3,COMBINED:4,COMPLETE:5,FAILED:6};t["a"]=Object.freeze(i)},"738d":function(e,t,a){"use strict";var i=a("71ce"),r=a("535a"),n=a("2f63"),o=a("7d62");function s(e){e=Object(r["a"])(e,r["a"].EMPTY_OBJECT),this._primitives=[],this._guid=Object(i["a"])(),this._zIndex=void 0,this.show=Object(r["a"])(e.show,!0),this.destroyPrimitives=Object(r["a"])(e.destroyPrimitives,!0)}function c(e,t){return e._primitives.indexOf(t)}Object.defineProperties(s.prototype,{length:{get:function(){return this._primitives.length}}}),s.prototype.add=function(e,t){var a=Object(n["a"])(t),i=e._external=e._external||{},r=i._composites=i._composites||{};return r[this._guid]={collection:this},a?this._primitives.splice(t,0,e):this._primitives.push(e),e},s.prototype.remove=function(e){if(this.contains(e)){var t=this._primitives.indexOf(e);if(-1!==t)return this._primitives.splice(t,1),delete e._external._composites[this._guid],this.destroyPrimitives&&e.destroy(),!0}return!1},s.prototype.removeAndDestroy=function(e){var t=this.remove(e);return t&&!this.destroyPrimitives&&e.destroy(),t},s.prototype.removeAll=function(){for(var e=this._primitives,t=e.length,a=0;a<t;++a)delete e[a]._external._composites[this._guid],this.destroyPrimitives&&e[a].destroy();this._primitives=[]},s.prototype.contains=function(e){return!!(Object(n["a"])(e)&&e._external&&e._external._composites&&e._external._composites[this._guid])},s.prototype.raise=function(e){if(Object(n["a"])(e)){var t=c(this,e),a=this._primitives;if(t!==a.length-1){var i=a[t];a[t]=a[t+1],a[t+1]=i}}},s.prototype.raiseToTop=function(e){if(Object(n["a"])(e)){var t=c(this,e),a=this._primitives;t!==a.length-1&&(a.splice(t,1),a.push(e))}},s.prototype.lower=function(e){if(Object(n["a"])(e)){var t=c(this,e),a=this._primitives;if(0!==t){var i=a[t];a[t]=a[t-1],a[t-1]=i}}},s.prototype.lowerToBottom=function(e){if(Object(n["a"])(e)){var t=c(this,e),a=this._primitives;0!==t&&(a.splice(t,1),a.unshift(e))}},s.prototype.get=function(e){return this._primitives[e]},s.prototype.update=function(e){if(this.show)for(var t=this._primitives,a=0;a<t.length;++a)t[a].update(e)},s.prototype.prePassesUpdate=function(e){for(var t=this._primitives,a=0;a<t.length;++a){var i=t[a];Object(n["a"])(i.prePassesUpdate)&&i.prePassesUpdate(e)}},s.prototype.updateForPass=function(e,t){for(var a=this._primitives,i=0;i<a.length;++i){var r=a[i];Object(n["a"])(r.updateForPass)&&r.updateForPass(e,t)}},s.prototype.postPassesUpdate=function(e){for(var t=this._primitives,a=0;a<t.length;++a){var i=t[a];Object(n["a"])(i.postPassesUpdate)&&i.postPassesUpdate(e)}},s.prototype.isDestroyed=function(){return!1},s.prototype.destroy=function(){return this.removeAll(),Object(o["a"])(this)},t["a"]=s},8624:function(e,t,a){"use strict";var i=a("cef5"),r=a("abab"),n=a("535a"),o=a("2f63"),s=a("c52f"),c=a("3d7f"),l=a("d2c7"),h=a("81d7"),d=a("473c"),u=a("c1e2"),p=a("0123"),m=a("52f0"),b=a("c2eb"),f=a("1184");function _(e,t,a){var i,r=!a,n=e.length;if(!r&&n>1){var s=e[0].modelMatrix;for(i=1;i<n;++i)if(!m["a"].equals(s,e[i].modelMatrix)){r=!0;break}}if(r)for(i=0;i<n;++i)Object(o["a"])(e[i].geometry)&&u["a"].transformToWorldCoordinates(e[i]);else m["a"].multiplyTransformation(t,e[0].modelMatrix,t)}function g(e,t){var a=e.attributes,i=a.position,n=i.values.length/i.componentsPerAttribute;a.batchId=new h["a"]({componentDatatype:r["a"].FLOAT,componentsPerAttribute:1,values:new Float32Array(n)});for(var o=a.batchId.values,s=0;s<n;++s)o[s]=t}function v(e){for(var t=e.length,a=0;a<t;++a){var i=e[a];Object(o["a"])(i.geometry)?g(i.geometry,a):Object(o["a"])(i.westHemisphereGeometry)&&Object(o["a"])(i.eastHemisphereGeometry)&&(g(i.westHemisphereGeometry,a),g(i.eastHemisphereGeometry,a))}}function y(e){var t,a,n=e.instances,s=e.projection,c=e.elementIndexUintSupported,l=e.scene3DOnly,h=e.vertexCacheOptimize,d=e.compressVertices,p=e.modelMatrix,m=n.length;for(t=0;t<m;++t)if(Object(o["a"])(n[t].geometry)){n[t].geometry.primitiveType;break}if(_(n,p,l),!l)for(t=0;t<m;++t)Object(o["a"])(n[t].geometry)&&u["a"].splitLongitude(n[t]);if(v(n),h)for(t=0;t<m;++t){var b=n[t];Object(o["a"])(b.geometry)?(u["a"].reorderForPostVertexCache(b.geometry),u["a"].reorderForPreVertexCache(b.geometry)):Object(o["a"])(b.westHemisphereGeometry)&&Object(o["a"])(b.eastHemisphereGeometry)&&(u["a"].reorderForPostVertexCache(b.westHemisphereGeometry),u["a"].reorderForPreVertexCache(b.westHemisphereGeometry),u["a"].reorderForPostVertexCache(b.eastHemisphereGeometry),u["a"].reorderForPreVertexCache(b.eastHemisphereGeometry))}var f=u["a"].combineInstances(n);for(m=f.length,t=0;t<m;++t){a=f[t];var g,y=a.attributes;if(l)for(g in y)y.hasOwnProperty(g)&&y[g].componentDatatype===r["a"].DOUBLE&&u["a"].encodeAttribute(a,g,g+"3DHigh",g+"3DLow");else for(g in y)if(y.hasOwnProperty(g)&&y[g].componentDatatype===r["a"].DOUBLE){var O=g+"3D",C=g+"2D";u["a"].projectTo2D(a,g,O,C,s),Object(o["a"])(a.boundingSphere)&&"position"===g&&(a.boundingSphereCV=i["a"].fromVertices(a.attributes.position2D.values)),u["a"].encodeAttribute(a,O,O+"High",O+"Low"),u["a"].encodeAttribute(a,C,C+"High",C+"Low")}d&&u["a"].compressVertices(a)}if(!c){var S=[];for(m=f.length,t=0;t<m;++t)a=f[t],S=S.concat(u["a"].fitToUnsignedShortIndices(a));f=S}return f}function O(e,t,a,i){var r,n,s,c=i.length-1;if(c>=0){var l=i[c];r=l.offset+l.count,s=l.index,n=a[s].indices.length}else r=0,s=0,n=a[s].indices.length;for(var h=e.length,d=0;d<h;++d){var u=e[d],p=u[t];if(Object(o["a"])(p)){var m=p.indices.length;r+m>n&&(r=0,n=a[++s].indices.length),i.push({index:s,offset:r,count:m}),r+=m}}}function C(e,t){var a=[];return O(e,"geometry",t,a),O(e,"westHemisphereGeometry",t,a),O(e,"eastHemisphereGeometry",t,a),a}var S={};function T(e,t){var a=e.attributes;for(var i in a)if(a.hasOwnProperty(i)){var r=a[i];Object(o["a"])(r)&&Object(o["a"])(r.values)&&t.push(r.values.buffer)}Object(o["a"])(e.indices)&&t.push(e.indices.buffer)}function D(e,t){for(var a=e.length,i=0;i<a;++i)T(e[i],t)}function w(e){for(var t=1,a=e.length,r=0;r<a;r++){var n=e[r];if(++t,Object(o["a"])(n)){var s=n.attributes;for(var c in t+=7+2*i["a"].packedLength+(Object(o["a"])(n.indices)?n.indices.length:0),s)if(s.hasOwnProperty(c)&&Object(o["a"])(s[c])){var l=s[c];t+=5+l.values.length}}}return t}function R(e,t){var a=e.length,i=new Float64Array(1+19*a),r=0;i[r++]=a;for(var n=0;n<a;n++){var s=e[n];if(m["a"].pack(s.modelMatrix,i,r),r+=m["a"].packedLength,Object(o["a"])(s.attributes)&&Object(o["a"])(s.attributes.offset)){var c=s.attributes.offset.value;i[r]=c[0],i[r+1]=c[1],i[r+2]=c[2]}r+=3}return t.push(i.buffer),i}function x(e){var t=e,a=new Array(t[0]),i=0,r=1;while(r<t.length){var n,s=m["a"].unpack(t,r);r+=m["a"].packedLength,Object(o["a"])(t[r])&&(n={offset:new b["a"](t[r],t[r+1],t[r+2])}),r+=3,a[i++]={modelMatrix:s,attributes:n}}return a}function j(e){var t=e.length,a=1+(i["a"].packedLength+1)*t,r=new Float32Array(a),n=0;r[n++]=t;for(var s=0;s<t;++s){var c=e[s];Object(o["a"])(c)?(r[n++]=1,i["a"].pack(e[s],r,n)):r[n++]=0,n+=i["a"].packedLength}return r}function E(e){var t=new Array(e[0]),a=0,r=1;while(r<e.length)1===e[r++]&&(t[a]=i["a"].unpack(e,r)),++a,r+=i["a"].packedLength;return t}S.combineGeometry=function(e){var t,a,r,n,s=e.instances,c=s.length,l=!1;c>0&&(t=y(e),t.length>0&&(a=u["a"].createAttributeLocations(t[0]),e.createPickOffsets&&(r=C(s,t))),Object(o["a"])(s[0].attributes)&&Object(o["a"])(s[0].attributes.offset)&&(n=new Array(c),l=!0));for(var h=new Array(c),d=new Array(c),p=0;p<c;++p){var m=s[p],b=m.geometry;Object(o["a"])(b)&&(h[p]=b.boundingSphere,d[p]=b.boundingSphereCV,l&&(n[p]=m.geometry.offsetAttribute));var f=m.eastHemisphereGeometry,_=m.westHemisphereGeometry;Object(o["a"])(f)&&Object(o["a"])(_)&&(Object(o["a"])(f.boundingSphere)&&Object(o["a"])(_.boundingSphere)&&(h[p]=i["a"].union(f.boundingSphere,_.boundingSphere)),Object(o["a"])(f.boundingSphereCV)&&Object(o["a"])(_.boundingSphereCV)&&(d[p]=i["a"].union(f.boundingSphereCV,_.boundingSphereCV)))}return{geometries:t,modelMatrix:e.modelMatrix,attributeLocations:a,pickOffsets:r,offsetInstanceExtend:n,boundingSpheres:h,boundingSpheresCV:d}},S.packCreateGeometryResults=function(e,t){var a=new Float64Array(w(e)),r=[],s={},c=e.length,l=0;a[l++]=c;for(var h=0;h<c;h++){var d=e[h],u=Object(o["a"])(d);if(a[l++]=u?1:0,u){a[l++]=d.primitiveType,a[l++]=d.geometryType,a[l++]=Object(n["a"])(d.offsetAttribute,-1);var p=Object(o["a"])(d.boundingSphere)?1:0;a[l++]=p,p&&i["a"].pack(d.boundingSphere,a,l),l+=i["a"].packedLength;var m=Object(o["a"])(d.boundingSphereCV)?1:0;a[l++]=m,m&&i["a"].pack(d.boundingSphereCV,a,l),l+=i["a"].packedLength;var b=d.attributes,f=[];for(var _ in b)b.hasOwnProperty(_)&&Object(o["a"])(b[_])&&(f.push(_),Object(o["a"])(s[_])||(s[_]=r.length,r.push(_)));a[l++]=f.length;for(var g=0;g<f.length;g++){var v=f[g],y=b[v];a[l++]=s[v],a[l++]=y.componentDatatype,a[l++]=y.componentsPerAttribute,a[l++]=y.normalize?1:0,a[l++]=y.values.length,a.set(y.values,l),l+=y.values.length}var O=Object(o["a"])(d.indices)?d.indices.length:0;a[l++]=O,O>0&&(a.set(d.indices,l),l+=O)}}return t.push(a.buffer),{stringTable:r,packedData:a}},S.unpackCreateGeometryResults=function(e){var t,a=e.stringTable,n=e.packedData,o=new Array(n[0]),s=0,c=1;while(c<n.length){var u=1===n[c++];if(u){var m,b,f=n[c++],_=n[c++],g=n[c++];-1===g&&(g=void 0);var v=1===n[c++];v&&(m=i["a"].unpack(n,c)),c+=i["a"].packedLength;var y,O,C,S=1===n[c++];S&&(b=i["a"].unpack(n,c)),c+=i["a"].packedLength;var T,D=new d["a"],w=n[c++];for(t=0;t<w;t++){var R=a[n[c++]],x=n[c++];C=n[c++];var j=0!==n[c++];y=n[c++],O=r["a"].createTypedArray(x,y);for(var E=0;E<y;E++)O[E]=n[c++];D[R]=new h["a"]({componentDatatype:x,componentsPerAttribute:C,normalize:j,values:O})}if(y=n[c++],y>0){var A=O.length/C;for(T=p["a"].createTypedArray(A,y),t=0;t<y;t++)T[t]=n[c++]}o[s++]=new l["a"]({primitiveType:f,geometryType:_,boundingSphere:m,boundingSphereCV:b,indices:T,attributes:D,offsetAttribute:g})}else o[s++]=void 0}return o},S.packCombineGeometryParameters=function(e,t){for(var a=e.createGeometryResults,i=a.length,r=0;r<i;r++)t.push(a[r].packedData.buffer);return{createGeometryResults:e.createGeometryResults,packedInstances:R(e.instances,t),ellipsoid:e.ellipsoid,isGeographic:e.projection instanceof c["a"],elementIndexUintSupported:e.elementIndexUintSupported,scene3DOnly:e.scene3DOnly,vertexCacheOptimize:e.vertexCacheOptimize,compressVertices:e.compressVertices,modelMatrix:e.modelMatrix,createPickOffsets:e.createPickOffsets}},S.unpackCombineGeometryParameters=function(e){for(var t=x(e.packedInstances),a=e.createGeometryResults,i=a.length,r=0,n=0;n<i;n++)for(var o=S.unpackCreateGeometryResults(a[n]),l=o.length,h=0;h<l;h++){var d=o[h],u=t[r];u.geometry=d,++r}var p=s["a"].clone(e.ellipsoid),b=e.isGeographic?new c["a"](p):new f["a"](p);return{instances:t,ellipsoid:p,projection:b,elementIndexUintSupported:e.elementIndexUintSupported,scene3DOnly:e.scene3DOnly,vertexCacheOptimize:e.vertexCacheOptimize,compressVertices:e.compressVertices,modelMatrix:m["a"].clone(e.modelMatrix),createPickOffsets:e.createPickOffsets}},S.packCombineGeometryResults=function(e,t){Object(o["a"])(e.geometries)&&D(e.geometries,t);var a=j(e.boundingSpheres),i=j(e.boundingSpheresCV);return t.push(a.buffer,i.buffer),{geometries:e.geometries,attributeLocations:e.attributeLocations,modelMatrix:e.modelMatrix,pickOffsets:e.pickOffsets,offsetInstanceExtend:e.offsetInstanceExtend,boundingSpheres:a,boundingSpheresCV:i}},S.unpackCombineGeometryResults=function(e){return{geometries:e.geometries,attributeLocations:e.attributeLocations,modelMatrix:e.modelMatrix,pickOffsets:e.pickOffsets,offsetInstanceExtend:e.offsetInstanceExtend,boundingSpheres:E(e.boundingSpheres),boundingSpheresCV:E(e.boundingSpheresCV)}},t["a"]=S},"894b":function(e,t,a){"use strict";var i=a("cef5"),r=a("670c"),n=a("be18"),o=a("a561"),s=a("bef8"),c=a("dc1c"),l=a("bd8d"),h=a("2bb9"),d=a("abab"),u=a("535a"),p=a("2f63"),m=a("7d62"),b=a("6cbd"),f=a("5e57"),_=a("d2c7"),g=a("81d7"),v=a("473c"),y=a("0276"),O=a("66bf"),C=a("52f0"),S=a("188e"),T=a("283e"),D=a("6a4b"),w=a("6a29"),R=a("8b68"),x=a("b997"),j=a("a894"),E=a("d289"),A=a("6dc0"),L=a("e90c"),P=a("5770"),I=a("7c5e"),F=a("a58e"),k=a("2cc3"),z=a("29ab"),M=a("06f0"),V=a("8624"),N=a("4b3a"),B=a("a307"),H=a("c86b");function U(e){e=Object(u["a"])(e,u["a"].EMPTY_OBJECT),this.geometryInstances=e.geometryInstances,this.appearance=e.appearance,this._appearance=void 0,this._material=void 0,this.depthFailAppearance=e.depthFailAppearance,this._depthFailAppearance=void 0,this._depthFailMaterial=void 0,this.modelMatrix=C["a"].clone(Object(u["a"])(e.modelMatrix,C["a"].IDENTITY)),this._modelMatrix=new C["a"],this.show=Object(u["a"])(e.show,!0),this._vertexCacheOptimize=Object(u["a"])(e.vertexCacheOptimize,!1),this._interleave=Object(u["a"])(e.interleave,!1),this._releaseGeometryInstances=Object(u["a"])(e.releaseGeometryInstances,!0),this._allowPicking=Object(u["a"])(e.allowPicking,!0),this._asynchronous=Object(u["a"])(e.asynchronous,!0),this._compressVertices=Object(u["a"])(e.compressVertices,!0),this.cull=Object(u["a"])(e.cull,!0),this.debugShowBoundingVolume=Object(u["a"])(e.debugShowBoundingVolume,!1),this.rtcCenter=e.rtcCenter,this.shadows=Object(u["a"])(e.shadows,H["a"].DISABLED),this._translucent=void 0,this._state=N["a"].READY,this._geometries=[],this._error=void 0,this._numberOfInstances=0,this._boundingSpheres=[],this._boundingSphereWC=[],this._boundingSphereCV=[],this._boundingSphere2D=[],this._boundingSphereMorph=[],this._perInstanceAttributeCache=[],this._instanceIds=[],this._lastPerInstanceAttributeIndex=0,this._va=[],this._attributeLocations=void 0,this._primitiveType=void 0,this._frontFaceRS=void 0,this._backFaceRS=void 0,this._sp=void 0,this._depthFailAppearance=void 0,this._spDepthFail=void 0,this._frontFaceDepthFailRS=void 0,this._backFaceDepthFailRS=void 0,this._pickIds=[],this._colorCommands=[],this._pickCommands=[],this._createBoundingVolumeFunction=e._createBoundingVolumeFunction,this._createRenderStatesFunction=e._createRenderStatesFunction,this._createShaderProgramFunction=e._createShaderProgramFunction,this._createCommandsFunction=e._createCommandsFunction,this._updateAndQueueCommandsFunction=e._updateAndQueueCommandsFunction,this._createPickOffsets=e._createPickOffsets,this._pickOffsets=void 0,this._createGeometryResults=void 0,this._ready=!1,this._readyPromise=F["a"].defer(),this._batchTable=void 0,this._batchTableAttributeIndices=void 0,this._offsetInstanceExtend=void 0,this._batchTableOffsetAttribute2DIndex=void 0,this._batchTableOffsetsUpdated=!1,this._instanceBoundingSpheres=void 0,this._instanceBoundingSpheresCV=void 0,this._tempBoundingSpheres=void 0,this._recomputeBoundingSpheres=!1,this._batchTableBoundingSpheresUpdated=!1,this._batchTableBoundingSphereAttributeIndices=void 0}function G(e){var t,a=e.length,i=[],r=e[0].attributes;for(t in r)if(r.hasOwnProperty(t)&&Object(p["a"])(r[t])){for(var n=r[t],o=!0,s=1;s<a;++s){var c=e[s].attributes[t];if(!Object(p["a"])(c)||n.componentDatatype!==c.componentDatatype||n.componentsPerAttribute!==c.componentsPerAttribute||n.normalize!==c.normalize){o=!1;break}}o&&i.push(t)}return i}Object.defineProperties(U.prototype,{vertexCacheOptimize:{get:function(){return this._vertexCacheOptimize}},interleave:{get:function(){return this._interleave}},releaseGeometryInstances:{get:function(){return this._releaseGeometryInstances}},allowPicking:{get:function(){return this._allowPicking}},asynchronous:{get:function(){return this._asynchronous}},compressVertices:{get:function(){return this._compressVertices}},ready:{get:function(){return this._ready}},readyPromise:{get:function(){return this._readyPromise.promise}}});var Q=new r["a"],W=new n["a"],Y=new o["a"];function Z(e){var t=e.length;return 1===t?e[0]:2===t?r["a"].unpack(e,0,Q):3===t?n["a"].unpack(e,0,W):4===t?o["a"].unpack(e,0,Y):void 0}function q(e,t){var a=e.geometryInstances,i=Array.isArray(a)?a:[a],r=i.length;if(0!==r){var n,o,s,c,h=G(i),m=h.length,b=[],f={},_={},g=i[0],v=g.attributes;for(o=0;o<m;++o)s=h[o],c=v[s],f[s]=o,b.push({functionName:"czm_batchTable_"+s,componentDatatype:c.componentDatatype,componentsPerAttribute:c.componentsPerAttribute,normalize:c.normalize});-1!==h.indexOf("distanceDisplayCondition")&&(b.push({functionName:"czm_batchTable_boundingSphereCenter3DHigh",componentDatatype:d["a"].FLOAT,componentsPerAttribute:3},{functionName:"czm_batchTable_boundingSphereCenter3DLow",componentDatatype:d["a"].FLOAT,componentsPerAttribute:3},{functionName:"czm_batchTable_boundingSphereCenter2DHigh",componentDatatype:d["a"].FLOAT,componentsPerAttribute:3},{functionName:"czm_batchTable_boundingSphereCenter2DLow",componentDatatype:d["a"].FLOAT,componentsPerAttribute:3},{functionName:"czm_batchTable_boundingSphereRadius",componentDatatype:d["a"].FLOAT,componentsPerAttribute:1}),_.center3DHigh=b.length-5,_.center3DLow=b.length-4,_.center2DHigh=b.length-3,_.center2DLow=b.length-2,_.radius=b.length-1),-1!==h.indexOf("offset")&&(b.push({functionName:"czm_batchTable_offset2D",componentDatatype:d["a"].FLOAT,componentsPerAttribute:3}),n=b.length-1),b.push({functionName:"czm_batchTable_pickColor",componentDatatype:d["a"].UNSIGNED_BYTE,componentsPerAttribute:4,normalize:!0});var y=b.length,O=new k["a"](t,b,r);for(o=0;o<r;++o){var C=i[o];v=C.attributes;for(var S=0;S<m;++S){s=h[S],c=v[s];var T=Z(c.value),D=f[s];O.setBatchedAttribute(o,D,T)}var w={primitive:Object(u["a"])(C.pickPrimitive,e)};Object(p["a"])(C.id)&&(w.id=C.id);var R=t.createPickId(w);e._pickIds.push(R);var x=R.color,j=Y;j.x=l["a"].floatToByte(x.red),j.y=l["a"].floatToByte(x.green),j.z=l["a"].floatToByte(x.blue),j.w=l["a"].floatToByte(x.alpha),O.setBatchedAttribute(o,y-1,j)}e._batchTable=O,e._batchTableAttributeIndices=f,e._batchTableBoundingSphereAttributeIndices=_,e._batchTableOffsetAttribute2DIndex=n}}function $(e){var t;return t=Array.isArray(e.values)?e.values.slice(0):new e.values.constructor(e.values),new g["a"]({componentDatatype:e.componentDatatype,componentsPerAttribute:e.componentsPerAttribute,normalize:e.normalize,values:t})}function X(e){var t,a=e.attributes,r=new v["a"];for(var n in a)a.hasOwnProperty(n)&&Object(p["a"])(a[n])&&(r[n]=$(a[n]));if(Object(p["a"])(e.indices)){var o=e.indices;t=Array.isArray(o)?o.slice(0):new o.constructor(o)}return new _["a"]({attributes:r,indices:t,primitiveType:e.primitiveType,boundingSphere:i["a"].clone(e.boundingSphere)})}function J(e,t){return{geometry:t,attributes:e.attributes,modelMatrix:C["a"].clone(e.modelMatrix),pickPrimitive:e.pickPrimitive,id:e.id}}var K=/attribute\s+vec(?:3|4)\s+(.*)3DHigh;/g;function ee(e){var t=P["a"].replaceMain(e,"czm_non_pick_main"),a="varying vec4 v_pickColor; \nvoid main() \n{ \n    czm_non_pick_main(); \n    v_pickColor = czm_batchTable_pickColor(batchId); \n}";return t+"\n"+a}function te(e){return"varying vec4 v_pickColor;\n"+e}function ae(e,t){if(!e.compressVertices)return t;var a=-1!==t.search(/attribute\s+vec3\s+normal;/g),i=-1!==t.search(/attribute\s+vec2\s+st;/g);if(!a&&!i)return t;var r=-1!==t.search(/attribute\s+vec3\s+tangent;/g),n=-1!==t.search(/attribute\s+vec3\s+bitangent;/g),o=i&&a?2:1;o+=r||n?1:0;var s=o>1?"vec"+o:"float",c="compressedAttributes",l="attribute "+s+" "+c+";",h="",d="";if(i){h+="vec2 st;\n";var u=o>1?c+".x":c;d+="    st = czm_decompressTextureCoordinates("+u+");\n"}a&&r&&n?(h+="vec3 normal;\nvec3 tangent;\nvec3 bitangent;\n",d+="    czm_octDecode("+c+"."+(i?"yz":"xy")+", normal, tangent, bitangent);\n"):(a&&(h+="vec3 normal;\n",d+="    normal = czm_octDecode("+c+(o>1?"."+(i?"y":"x"):"")+");\n"),r&&(h+="vec3 tangent;\n",d+="    tangent = czm_octDecode("+c+"."+(i&&a?"z":"y")+");\n"),n&&(h+="vec3 bitangent;\n",d+="    bitangent = czm_octDecode("+c+"."+(i&&a?"z":"y")+");\n"));var p=t;p=p.replace(/attribute\s+vec3\s+normal;/g,""),p=p.replace(/attribute\s+vec2\s+st;/g,""),p=p.replace(/attribute\s+vec3\s+tangent;/g,""),p=p.replace(/attribute\s+vec3\s+bitangent;/g,""),p=P["a"].replaceMain(p,"czm_non_compressed_main");var m="void main() \n{ \n"+d+"    czm_non_compressed_main(); \n}";return[l,h,p,m].join("\n")}function ie(e){var t=P["a"].replaceMain(e,"czm_non_depth_clamp_main");return t+="void main() {\n    czm_non_depth_clamp_main();\n    gl_Position = czm_depthClamp(gl_Position);}\n",t}function re(e){var t=P["a"].replaceMain(e,"czm_non_depth_clamp_main");return t+="void main() {\n    czm_non_depth_clamp_main();\n#if defined(GL_EXT_frag_depth)\n    #if defined(LOG_DEPTH)\n        czm_writeLogDepth();\n    #else\n        czm_writeDepthClamp();\n    #endif\n#endif\n}\n",t="#ifdef GL_EXT_frag_depth\n#extension GL_EXT_frag_depth : enable\n#endif\n"+t,t}function ne(e,t){e.vertexAttributes}function oe(e,t){return function(){return e[t]}}U._modifyShaderPosition=function(e,t,a){var i,r="",n="",o="";while(null!==(i=K.exec(t))){var s=i[1],c="vec4 czm_compute"+s[0].toUpperCase()+s.substr(1)+"()";"vec4 czm_computePosition()"!==c&&(r+=c+";\n"),Object(p["a"])(e.rtcCenter)?(t=t.replace(/attribute\s+vec(?:3|4)\s+position3DHigh;/g,""),t=t.replace(/attribute\s+vec(?:3|4)\s+position3DLow;/g,""),r+="uniform mat4 u_modifiedModelView;\n",n+="attribute vec4 position;\n",o+=c+"\n{\n    return u_modifiedModelView * position;\n}\n\n",t=t.replace(/czm_modelViewRelativeToEye\s+\*\s+/g,""),t=t.replace(/czm_modelViewProjectionRelativeToEye/g,"czm_projection")):a?o+=c+"\n{\n    return czm_translateRelativeToEye("+s+"3DHigh, "+s+"3DLow);\n}\n\n":(n+="attribute vec3 "+s+"2DHigh;\nattribute vec3 "+s+"2DLow;\n",o+=c+"\n{\n    vec4 p;\n    if (czm_morphTime == 1.0)\n    {\n        p = czm_translateRelativeToEye("+s+"3DHigh, "+s+"3DLow);\n    }\n    else if (czm_morphTime == 0.0)\n    {\n        p = czm_translateRelativeToEye("+s+"2DHigh.zxy, "+s+"2DLow.zxy);\n    }\n    else\n    {\n        p = czm_columbusViewMorph(\n                czm_translateRelativeToEye("+s+"2DHigh.zxy, "+s+"2DLow.zxy),\n                czm_translateRelativeToEye("+s+"3DHigh, "+s+"3DLow),\n                czm_morphTime);\n    }\n    return p;\n}\n\n")}return[r,n,t,o].join("\n")},U._appendShowToShader=function(e,t){if(!Object(p["a"])(e._batchTableAttributeIndices.show))return t;var a=P["a"].replaceMain(t,"czm_non_show_main"),i="void main() \n{ \n    czm_non_show_main(); \n    gl_Position *= czm_batchTable_show(batchId); \n}";return a+"\n"+i},U._updateColorAttribute=function(e,t,a){if(!Object(p["a"])(e._batchTableAttributeIndices.color)&&!Object(p["a"])(e._batchTableAttributeIndices.depthFailColor))return t;if(-1===t.search(/attribute\s+vec4\s+color;/g))return t;var i=t;return i=i.replace(/attribute\s+vec4\s+color;/g,""),i=a?i.replace(/(\b)color(\b)/g,"$1czm_batchTable_depthFailColor(batchId)$2"):i.replace(/(\b)color(\b)/g,"$1czm_batchTable_color(batchId)$2"),i},U._updatePickColorAttribute=function(e){var t=e.replace(/attribute\s+vec4\s+pickColor;/g,"");return t=t.replace(/(\b)pickColor(\b)/g,"$1czm_batchTable_pickColor(batchId)$2"),t},U._appendOffsetToShader=function(e,t){if(!Object(p["a"])(e._batchTableAttributeIndices.offset))return t;var a="attribute float batchId;\n";a+="attribute float applyOffset;";var i=t.replace(/attribute\s+float\s+batchId;/g,a),r="vec4 $1 = czm_computePosition();\n";return r+="    if (czm_sceneMode == czm_sceneMode3D)\n",r+="    {\n",r+="        $1 = $1 + vec4(czm_batchTable_offset(batchId) * applyOffset, 0.0);",r+="    }\n",r+="    else\n",r+="    {\n",r+="        $1 = $1 + vec4(czm_batchTable_offset2D(batchId) * applyOffset, 0.0);",r+="    }\n",i=i.replace(/vec4\s+([A-Za-z0-9_]+)\s+=\s+czm_computePosition\(\);/g,r),i},U._appendDistanceDisplayConditionToShader=function(e,t,a){if(!Object(p["a"])(e._batchTableAttributeIndices.distanceDisplayCondition))return t;var i=P["a"].replaceMain(t,"czm_non_distanceDisplayCondition_main"),r="void main() \n{ \n    czm_non_distanceDisplayCondition_main(); \n    vec2 distanceDisplayCondition = czm_batchTable_distanceDisplayCondition(batchId);\n    vec3 boundingSphereCenter3DHigh = czm_batchTable_boundingSphereCenter3DHigh(batchId);\n    vec3 boundingSphereCenter3DLow = czm_batchTable_boundingSphereCenter3DLow(batchId);\n    float boundingSphereRadius = czm_batchTable_boundingSphereRadius(batchId);\n";return r+=a?"    vec4 centerRTE = czm_translateRelativeToEye(boundingSphereCenter3DHigh, boundingSphereCenter3DLow);\n":"    vec3 boundingSphereCenter2DHigh = czm_batchTable_boundingSphereCenter2DHigh(batchId);\n    vec3 boundingSphereCenter2DLow = czm_batchTable_boundingSphereCenter2DLow(batchId);\n    vec4 centerRTE;\n    if (czm_morphTime == 1.0)\n    {\n        centerRTE = czm_translateRelativeToEye(boundingSphereCenter3DHigh, boundingSphereCenter3DLow);\n    }\n    else if (czm_morphTime == 0.0)\n    {\n        centerRTE = czm_translateRelativeToEye(boundingSphereCenter2DHigh.zxy, boundingSphereCenter2DLow.zxy);\n    }\n    else\n    {\n        centerRTE = czm_columbusViewMorph(\n                czm_translateRelativeToEye(boundingSphereCenter2DHigh.zxy, boundingSphereCenter2DLow.zxy),\n                czm_translateRelativeToEye(boundingSphereCenter3DHigh, boundingSphereCenter3DLow),\n                czm_morphTime);\n    }\n",r+="    float radiusSq = boundingSphereRadius * boundingSphereRadius; \n    float distanceSq; \n    if (czm_sceneMode == czm_sceneMode2D) \n    { \n        distanceSq = czm_eyeHeight2D.y - radiusSq; \n    } \n    else \n    { \n        distanceSq = dot(centerRTE.xyz, centerRTE.xyz) - radiusSq; \n    } \n    distanceSq = max(distanceSq, 0.0); \n    float nearSq = distanceDisplayCondition.x * distanceDisplayCondition.x; \n    float farSq = distanceDisplayCondition.y * distanceDisplayCondition.y; \n    float show = (distanceSq >= nearSq && distanceSq <= farSq) ? 1.0 : 0.0; \n    gl_Position *= show; \n}",i+"\n"+r};var se,ce=Math.max(f["a"].hardwareConcurrency-1,1),le=new w["a"]("combineGeometry");function he(e,t){var a,i,r,n,o=e._instanceIds;if(e._state===N["a"].READY){a=Array.isArray(e.geometryInstances)?e.geometryInstances:[e.geometryInstances];var s,c=e._numberOfInstances=a.length,l=[],h=[];for(r=0;r<c;++r)i=a[r].geometry,o.push(a[r].id),h.push({moduleName:i._workerName,geometry:i});if(!Object(p["a"])(se))for(se=new Array(ce),r=0;r<ce;r++)se[r]=new w["a"]("createGeometry");for(h=Object(D["a"])(h,ce),r=0;r<h.length;r++){var d,m=0,b=h[r],f=b.length;for(n=0;n<f;++n)s=b[n],i=s.geometry,Object(p["a"])(i.constructor.pack)&&(s.offset=m,m+=Object(u["a"])(i.constructor.packedLength,i.packedLength));if(m>0){var _=new Float64Array(m);for(d=[_.buffer],n=0;n<f;++n)s=b[n],i=s.geometry,Object(p["a"])(i.constructor.pack)&&(i.constructor.pack(i,_,s.offset),s.geometry=_)}l.push(se[r].scheduleTask({subTasks:h[r]},d))}e._state=N["a"].CREATING,F["a"].all(l,(function(t){e._createGeometryResults=t,e._state=N["a"].CREATED})).otherwise((function(a){ze(e,t,N["a"].FAILED,a)}))}else if(e._state===N["a"].CREATED){var g=[];a=Array.isArray(e.geometryInstances)?e.geometryInstances:[e.geometryInstances];var v=t.scene3DOnly,y=t.mapProjection,O=le.scheduleTask(V["a"].packCombineGeometryParameters({createGeometryResults:e._createGeometryResults,instances:a,ellipsoid:y.ellipsoid,projection:y,elementIndexUintSupported:t.context.elementIndexUint,scene3DOnly:v,vertexCacheOptimize:e.vertexCacheOptimize,compressVertices:e.compressVertices,modelMatrix:e.modelMatrix,createPickOffsets:e._createPickOffsets},g),g);e._createGeometryResults=void 0,e._state=N["a"].COMBINING,Object(F["a"])(O,(function(a){var i=V["a"].unpackCombineGeometryResults(a);e._geometries=i.geometries,e._attributeLocations=i.attributeLocations,e.modelMatrix=C["a"].clone(i.modelMatrix,e.modelMatrix),e._pickOffsets=i.pickOffsets,e._offsetInstanceExtend=i.offsetInstanceExtend,e._instanceBoundingSpheres=i.boundingSpheres,e._instanceBoundingSpheresCV=i.boundingSpheresCV,Object(p["a"])(e._geometries)&&e._geometries.length>0?(e._recomputeBoundingSpheres=!0,e._state=N["a"].COMBINED):ze(e,t,N["a"].FAILED,void 0)})).otherwise((function(a){ze(e,t,N["a"].FAILED,a)}))}}function de(e,t){var a,i,r=Array.isArray(e.geometryInstances)?e.geometryInstances:[e.geometryInstances],n=e._numberOfInstances=r.length,o=new Array(n),s=e._instanceIds,c=0;for(i=0;i<n;i++){a=r[i];var l,h=a.geometry;l=Object(p["a"])(h.attributes)&&Object(p["a"])(h.primitiveType)?X(h):h.constructor.createGeometry(h),o[c++]=J(a,l),s.push(a.id)}o.length=c;var d=t.scene3DOnly,u=t.mapProjection,m=V["a"].combineGeometry({instances:o,ellipsoid:u.ellipsoid,projection:u,elementIndexUintSupported:t.context.elementIndexUint,scene3DOnly:d,vertexCacheOptimize:e.vertexCacheOptimize,compressVertices:e.compressVertices,modelMatrix:e.modelMatrix,createPickOffsets:e._createPickOffsets});e._geometries=m.geometries,e._attributeLocations=m.attributeLocations,e.modelMatrix=C["a"].clone(m.modelMatrix,e.modelMatrix),e._pickOffsets=m.pickOffsets,e._offsetInstanceExtend=m.offsetInstanceExtend,e._instanceBoundingSpheres=m.boundingSpheres,e._instanceBoundingSpheresCV=m.boundingSpheresCV,Object(p["a"])(e._geometries)&&e._geometries.length>0?(e._recomputeBoundingSpheres=!0,e._state=N["a"].COMBINED):ze(e,t,N["a"].FAILED,void 0)}function ue(e,t){var a=e._batchTableAttributeIndices.offset;if(e._recomputeBoundingSpheres&&Object(p["a"])(a)){var r,o=e._offsetInstanceExtend,s=e._instanceBoundingSpheres,c=s.length,l=e._tempBoundingSpheres;if(!Object(p["a"])(l)){for(l=new Array(c),r=0;r<c;r++)l[r]=new i["a"];e._tempBoundingSpheres=l}for(r=0;r<c;++r){var h=l[r],d=e._batchTable.getBatchedAttribute(r,a,new n["a"]);h=s[r].clone(h),Ae(h,d,o[r])}var u=[],m=[],b=[];for(r=0;r<c;++r){var f=l[r],_=f.center.x-f.radius;_>0||i["a"].intersectPlane(f,S["a"].ORIGIN_ZX_PLANE)!==O["a"].INTERSECTING?u.push(f):(m.push(f),b.push(f))}var g=u[0],v=b[0],y=m[0];for(r=1;r<u.length;r++)g=i["a"].union(g,u[r]);for(r=1;r<b.length;r++)v=i["a"].union(v,b[r]);for(r=1;r<m.length;r++)y=i["a"].union(y,m[r]);var C=[];for(Object(p["a"])(g)&&C.push(g),Object(p["a"])(v)&&C.push(v),Object(p["a"])(y)&&C.push(y),r=0;r<C.length;r++){var T=C[r].clone(e._boundingSpheres[r]);e._boundingSpheres[r]=T,e._boundingSphereCV[r]=i["a"].projectTo2D(T,t.mapProjection,e._boundingSphereCV[r])}U._updateBoundingVolumes(e,t,e.modelMatrix,!0),e._recomputeBoundingSpheres=!1}else e._recomputeBoundingSpheres=!1}var pe=new b["a"],me=new s["a"],be=new n["a"],fe=new i["a"];function _e(e,t){var a=Object(p["a"])(e._batchTableAttributeIndices.distanceDisplayCondition);if(a&&!e._batchTableBoundingSpheresUpdated){for(var r=e._batchTableBoundingSphereAttributeIndices,n=r.center3DHigh,o=r.center3DLow,s=r.center2DHigh,c=r.center2DLow,l=r.radius,h=t.mapProjection,d=h.ellipsoid,u=e._batchTable,m=e._instanceBoundingSpheres,f=m.length,_=0;_<f;++_){var g=m[_];if(Object(p["a"])(g)){var v=e.modelMatrix;Object(p["a"])(v)&&(g=i["a"].transform(g,v,fe));var y=g.center,O=g.radius,C=b["a"].fromCartesian(y,pe);if(u.setBatchedAttribute(_,n,C.high),u.setBatchedAttribute(_,o,C.low),!t.scene3DOnly){var S=d.cartesianToCartographic(y,me),T=h.project(S,be);C=b["a"].fromCartesian(T,pe),u.setBatchedAttribute(_,s,C.high),u.setBatchedAttribute(_,c,C.low)}u.setBatchedAttribute(_,l,O)}}e._batchTableBoundingSpheresUpdated=!0}}var ge=new n["a"],ve=new n["a"];function ye(e,t){var a=Object(p["a"])(e._batchTableAttributeIndices.offset);if(a&&!e._batchTableOffsetsUpdated&&!t.scene3DOnly){for(var r=e._batchTableOffsetAttribute2DIndex,o=t.mapProjection,s=o.ellipsoid,c=e._batchTable,l=e._instanceBoundingSpheres,h=l.length,d=0;d<h;++d){var u=l[d];if(Object(p["a"])(u)){var m=c.getBatchedAttribute(d,e._batchTableAttributeIndices.offset);if(n["a"].equals(m,n["a"].ZERO))c.setBatchedAttribute(d,r,n["a"].ZERO);else{var b=e.modelMatrix;Object(p["a"])(b)&&(u=i["a"].transform(u,b,fe));var f=u.center;f=s.scaleToGeodeticSurface(f,ve);var _=s.cartesianToCartographic(f,me),g=o.project(_,be),v=n["a"].add(m,f,ge);_=s.cartesianToCartographic(v,_);var y=o.project(_,ge),O=n["a"].subtract(y,g,ge),C=O.x;O.x=O.z,O.z=O.y,O.y=C,c.setBatchedAttribute(d,r,O)}}}e._batchTableOffsetsUpdated=!0}}function Oe(e,t){for(var a=e._attributeLocations,r=e._geometries,n=t.scene3DOnly,o=t.context,s=[],c=r.length,l=0;l<c;++l){var h=r[l];if(s.push(I["a"].fromGeometry({context:o,geometry:h,attributeLocations:a,bufferUsage:R["a"].STATIC_DRAW,interleave:e._interleave})),Object(p["a"])(e._createBoundingVolumeFunction))e._createBoundingVolumeFunction(t,h);else if(e._boundingSpheres.push(i["a"].clone(h.boundingSphere)),e._boundingSphereWC.push(new i["a"]),!n){var d=h.boundingSphereCV.center,u=d.x,m=d.y,b=d.z;d.x=b,d.y=u,d.z=m,e._boundingSphereCV.push(i["a"].clone(h.boundingSphereCV)),e._boundingSphere2D.push(new i["a"]),e._boundingSphereMorph.push(new i["a"])}}e._va=s,e._primitiveType=r[0].primitiveType,e.releaseGeometryInstances&&(e.geometryInstances=void 0),e._geometries=void 0,ze(e,t,N["a"].COMPLETE,void 0)}function Ce(e,t,a,i){var r,n=a.getRenderState();i?(r=Object(c["a"])(n,!1),r.cull={enabled:!0,face:z["a"].BACK},e._frontFaceRS=A["a"].fromCache(r),r.cull.face=z["a"].FRONT,e._backFaceRS=A["a"].fromCache(r)):(e._frontFaceRS=A["a"].fromCache(n),e._backFaceRS=e._frontFaceRS),r=Object(c["a"])(n,!1),Object(p["a"])(e._depthFailAppearance)&&(r.depthTest.enabled=!1),Object(p["a"])(e._depthFailAppearance)&&(n=e._depthFailAppearance.getRenderState(),r=Object(c["a"])(n,!1),r.depthTest.func=M["a"].GREATER,i?(r.cull={enabled:!0,face:z["a"].BACK},e._frontFaceDepthFailRS=A["a"].fromCache(r),r.cull.face=z["a"].FRONT,e._backFaceDepthFailRS=A["a"].fromCache(r)):(e._frontFaceDepthFailRS=A["a"].fromCache(r),e._backFaceDepthFailRS=e._frontFaceRS))}function Se(e,t,a){var i=t.context,r=e._attributeLocations,n=e._batchTable.getVertexShaderCallback()(a.vertexShaderSource);n=U._appendOffsetToShader(e,n),n=U._appendShowToShader(e,n),n=U._appendDistanceDisplayConditionToShader(e,n,t.scene3DOnly),n=ee(n),n=U._updateColorAttribute(e,n,!1),n=ae(e,n),n=U._modifyShaderPosition(e,n,t.scene3DOnly);var o=a.getFragmentShaderSource();o=te(o),e._sp=L["a"].replaceCache({context:i,shaderProgram:e._sp,vertexShaderSource:n,fragmentShaderSource:o,attributeLocations:r}),ne(e._sp,r),Object(p["a"])(e._depthFailAppearance)&&(n=e._batchTable.getVertexShaderCallback()(e._depthFailAppearance.vertexShaderSource),n=U._appendShowToShader(e,n),n=U._appendDistanceDisplayConditionToShader(e,n,t.scene3DOnly),n=ee(n),n=U._updateColorAttribute(e,n,!0),n=ae(e,n),n=U._modifyShaderPosition(e,n,t.scene3DOnly),n=ie(n),o=e._depthFailAppearance.getFragmentShaderSource(),o=te(o),o=re(o),e._spDepthFail=L["a"].replaceCache({context:i,shaderProgram:e._spDepthFail,vertexShaderSource:n,fragmentShaderSource:o,attributeLocations:r}),ne(e._spDepthFail,r))}var Te=new C["a"],De=new n["a"];function we(e,t,a,i){var r=Object(p["a"])(a)?a._uniforms:void 0,n={},o=t.uniforms;if(Object(p["a"])(o))for(var s in o)o.hasOwnProperty(s)&&(n[s]=oe(o,s));var c=Object(h["a"])(n,r);return c=e._batchTable.getUniformMapCallback()(c),Object(p["a"])(e.rtcCenter)&&(c.u_modifiedModelView=function(){var t=i.context.uniformState.view;return C["a"].multiply(t,e._modelMatrix,Te),C["a"].multiplyByPoint(Te,e.rtcCenter,De),C["a"].setTranslation(Te,De,Te),Te}),c}function Re(e,t,a,i,r,n,o,s){var c,l=we(e,t,a,s);Object(p["a"])(e._depthFailAppearance)&&(c=we(e,e._depthFailAppearance,e._depthFailAppearance.material,s));var h=i?E["a"].TRANSLUCENT:E["a"].OPAQUE,d=r?2:1;d*=Object(p["a"])(e._depthFailAppearance)?2:1,n.length=e._va.length*d;for(var u=n.length,m=0,b=0;b<u;++b){var f;r&&(f=n[b],Object(p["a"])(f)||(f=n[b]=new j["a"]({owner:e,primitiveType:e._primitiveType})),f.vertexArray=e._va[m],f.renderState=e._backFaceRS,f.shaderProgram=e._sp,f.uniformMap=l,f.pass=h,++b),f=n[b],Object(p["a"])(f)||(f=n[b]=new j["a"]({owner:e,primitiveType:e._primitiveType})),f.vertexArray=e._va[m],f.renderState=e._frontFaceRS,f.shaderProgram=e._sp,f.uniformMap=l,f.pass=h,Object(p["a"])(e._depthFailAppearance)&&(r&&(++b,f=n[b],Object(p["a"])(f)||(f=n[b]=new j["a"]({owner:e,primitiveType:e._primitiveType})),f.vertexArray=e._va[m],f.renderState=e._backFaceDepthFailRS,f.shaderProgram=e._spDepthFail,f.uniformMap=c,f.pass=h),++b,f=n[b],Object(p["a"])(f)||(f=n[b]=new j["a"]({owner:e,primitiveType:e._primitiveType})),f.vertexArray=e._va[m],f.renderState=e._frontFaceDepthFailRS,f.shaderProgram=e._spDepthFail,f.uniformMap=c,f.pass=h),++m}}function xe(e,t,a,i,r,n,o,s){var c;U._updateBoundingVolumes(e,t,r),t.mode===B["a"].SCENE3D?c=e._boundingSphereWC:t.mode===B["a"].COLUMBUS_VIEW?c=e._boundingSphereCV:t.mode===B["a"].SCENE2D&&Object(p["a"])(e._boundingSphere2D)?c=e._boundingSphere2D:Object(p["a"])(e._boundingSphereMorph)&&(c=e._boundingSphereMorph);var l=t.commandList,h=t.passes;if(h.render||h.pick){var d=e.allowPicking,u=H["a"].castShadows(e.shadows),m=H["a"].receiveShadows(e.shadows),b=a.length,f=s?2:1;f*=Object(p["a"])(e._depthFailAppearance)?2:1;for(var _=0;_<b;++_){var g=Math.floor(_/f),v=a[_];v.modelMatrix=r,v.boundingVolume=c[g],v.cull=n,v.debugShowBoundingVolume=o,v.castShadows=u,v.receiveShadows=m,v.pickId=d?"v_pickColor":void 0,l.push(v)}}}U._updateBoundingVolumes=function(e,t,a,r){var n,o,s;if(r||!C["a"].equals(a,e._modelMatrix))for(C["a"].clone(a,e._modelMatrix),o=e._boundingSpheres.length,n=0;n<o;++n)s=e._boundingSpheres[n],Object(p["a"])(s)&&(e._boundingSphereWC[n]=i["a"].transform(s,a,e._boundingSphereWC[n]),t.scene3DOnly||(e._boundingSphere2D[n]=i["a"].clone(e._boundingSphereCV[n],e._boundingSphere2D[n]),e._boundingSphere2D[n].center.x=0,e._boundingSphereMorph[n]=i["a"].union(e._boundingSphereWC[n],e._boundingSphereCV[n])));var c=e.appearance.pixelSize;if(Object(p["a"])(c))for(o=e._boundingSpheres.length,n=0;n<o;++n){s=e._boundingSpheres[n];var l=e._boundingSphereWC[n],h=t.camera.getPixelSize(s,t.context.drawingBufferWidth,t.context.drawingBufferHeight),d=h*c;l.radius=s.radius+d}},U.prototype.update=function(e){if(!(!Object(p["a"])(this.geometryInstances)&&0===this._va.length||Object(p["a"])(this.geometryInstances)&&Array.isArray(this.geometryInstances)&&0===this.geometryInstances.length||!Object(p["a"])(this.appearance)||e.mode!==B["a"].SCENE3D&&e.scene3DOnly||!e.passes.render&&!e.passes.pick)){if(Object(p["a"])(this._error))throw this._error;if(this._state!==N["a"].FAILED){var t=e.context;if(Object(p["a"])(this._batchTable)||q(this,t),this._batchTable.attributes.length>0){if(0===x["a"].maximumVertexTextureImageUnits)throw new T["a"]("Vertex texture fetch support is required to render primitives with per-instance attributes. The maximum number of vertex texture image units must be greater than zero.");this._batchTable.update(e)}if(this._state!==N["a"].COMPLETE&&this._state!==N["a"].COMBINED&&(this.asynchronous?he(this,e):de(this,e)),this._state===N["a"].COMBINED&&(_e(this,e),ye(this,e),Oe(this,e)),this.show&&this._state===N["a"].COMPLETE){this._batchTableOffsetsUpdated||ye(this,e),this._recomputeBoundingSpheres&&ue(this,e);var a=this.appearance,i=a.material,r=!1,n=!1;this._appearance!==a?(this._appearance=a,this._material=i,r=!0,n=!0):this._material!==i&&(this._material=i,n=!0);var o=this.depthFailAppearance,s=Object(p["a"])(o)?o.material:void 0;this._depthFailAppearance!==o?(this._depthFailAppearance=o,this._depthFailMaterial=s,r=!0,n=!0):this._depthFailMaterial!==s&&(this._depthFailMaterial=s,n=!0);var c=this._appearance.isTranslucent();this._translucent!==c&&(this._translucent=c,r=!0),Object(p["a"])(this._material)&&this._material.update(t);var l=a.closed&&c;if(r){var h=Object(u["a"])(this._createRenderStatesFunction,Ce);h(this,t,a,l)}if(n){var d=Object(u["a"])(this._createShaderProgramFunction,Se);d(this,e,a)}if(r||n){var m=Object(u["a"])(this._createCommandsFunction,Re);m(this,a,i,c,l,this._colorCommands,this._pickCommands,e)}var b=Object(u["a"])(this._updateAndQueueCommandsFunction,xe);b(this,e,this._colorCommands,this._pickCommands,this.modelMatrix,this.cull,this.debugShowBoundingVolume,l)}}}};var je=new i["a"],Ee=new i["a"];function Ae(e,t,a){if(a===y["a"].TOP){var r=i["a"].clone(e,je),o=i["a"].clone(e,Ee);o.center=n["a"].add(o.center,t,o.center),e=i["a"].union(r,o,e)}else a===y["a"].ALL&&(e.center=n["a"].add(e.center,t,e.center));return e}function Le(e,t,a){return function(){var i=e.getBatchedAttribute(t,a),r=e.attributes[a],n=r.componentsPerAttribute,o=d["a"].createTypedArray(r.componentDatatype,n);return Object(p["a"])(i.constructor.pack)?i.constructor.pack(i,o,0):o[0]=i,o}}function Pe(e,t,a,i,r){return function(n){var o=Z(n);e.setBatchedAttribute(t,a,o),"offset"===r&&(i._recomputeBoundingSpheres=!0,i._batchTableOffsetsUpdated=!1)}}var Ie=new n["a"];function Fe(e,t,a){t.boundingSphere={get:function(){var r=e._instanceBoundingSpheres[a];if(Object(p["a"])(r)){r=r.clone();var o=e.modelMatrix,s=t.offset;Object(p["a"])(s)&&Ae(r,n["a"].fromArray(s.get(),0,Ie),e._offsetInstanceExtend[a]),Object(p["a"])(o)&&(r=i["a"].transform(r,o))}return r}},t.boundingSphereCV={get:function(){return e._instanceBoundingSpheresCV[a]}}}function ke(e,t,a){t.pickId={get:function(){return e._pickIds[a]}}}function ze(e,t,a,i){e._error=i,e._state=a,t.afterRender.push((function(){e._ready=e._state===N["a"].COMPLETE||e._state===N["a"].FAILED,Object(p["a"])(i)?e._readyPromise.reject(i):e._readyPromise.resolve(e)}))}U.prototype.getGeometryInstanceAttributes=function(e){for(var t=-1,a=this._lastPerInstanceAttributeIndex,i=this._instanceIds,r=i.length,n=0;n<r;++n){var o=(a+n)%r;if(e===i[o]){t=o;break}}if(-1!==t){var s=this._perInstanceAttributeCache[t];if(Object(p["a"])(s))return s;var c=this._batchTable,l=this._batchTableAttributeIndices;s={};var h={};for(var d in l)if(l.hasOwnProperty(d)){var u=l[d];h[d]={get:Le(c,t,u),set:Pe(c,t,u,this,d)}}return Fe(this,h,t),ke(this,h,t),Object.defineProperties(s,h),this._lastPerInstanceAttributeIndex=t,this._perInstanceAttributeCache[t]=s,s}},U.prototype.isDestroyed=function(){return!1},U.prototype.destroy=function(){var e,t;this._sp=this._sp&&this._sp.destroy(),this._spDepthFail=this._spDepthFail&&this._spDepthFail.destroy();var a=this._va;for(e=a.length,t=0;t<e;++t)a[t].destroy();this._va=void 0;var i=this._pickIds;for(e=i.length,t=0;t<e;++t)i[t].destroy();return this._pickIds=void 0,this._batchTable=this._batchTable&&this._batchTable.destroy(),this._instanceIds=void 0,this._perInstanceAttributeCache=void 0,this._attributeLocations=void 0,Object(m["a"])(this)},t["a"]=U},c17f:function(e,t,a){"use strict";var i,r=a("be18"),n=a("bef8"),o=a("535a"),s=a("2f63"),c=a("21d7"),l=a("ddf7"),h=a("93da"),d=a("52f0"),u=a("713f"),p=a("c34a"),m=a("2ac3"),b=a("eace"),f=a("2368"),_=a("2ba0d"),g=a("11ea"),v=a("f1b3"),y=a("a307"),O=a("3a92"),C=a("ee78");function S(e){this._tileProvider=e.tileProvider,this._tileProvider.quadtree=this,this._debug={enableDebugOutput:!1,maxDepth:0,maxDepthVisited:0,tilesVisited:0,tilesCulled:0,tilesRendered:0,tilesWaitingForChildren:0,lastMaxDepth:-1,lastMaxDepthVisited:-1,lastTilesVisited:-1,lastTilesCulled:-1,lastTilesRendered:-1,lastTilesWaitingForChildren:-1,suspendLodUpdate:!1};var t=this._tileProvider.tilingScheme,a=t.ellipsoid;this._tilesToRender=[],this._tileLoadQueueHigh=[],this._tileLoadQueueMedium=[],this._tileLoadQueueLow=[],this._tileReplacementQueue=new O["a"],this._levelZeroTiles=void 0,this._loadQueueTimeSlice=5,this._tilesInvalidated=!1,this._addHeightCallbacks=[],this._removeHeightCallbacks=[],this._tileToUpdateHeights=[],this._lastTileIndex=0,this._updateHeightsTimeSlice=2,this._cameraPositionCartographic=void 0,this._cameraReferenceFrameOriginCartographic=void 0,this.maximumScreenSpaceError=Object(o["a"])(e.maximumScreenSpaceError,2),this.tileCacheSize=Object(o["a"])(e.tileCacheSize,100),this.loadingDescendantLimit=20,this.preloadAncestors=!0,this.preloadSiblings=!1,this._occluders=new _["a"]({ellipsoid:a}),this._tileLoadProgressEvent=new c["a"],this._lastTileLoadQueueLength=0,this._lastSelectionFrameNumber=void 0}function T(e){var t=e._tileReplacementQueue;t.head=void 0,t.tail=void 0,t.count=0,D(e);var a=e._levelZeroTiles;if(Object(s["a"])(a))for(var i=0;i<a.length;++i){for(var r=a[i],n=r.customData,o=n.length,c=0;c<o;++c){var l=n[c];l.level=0,e._addHeightCallbacks.push(l)}a[i].freeResources()}e._levelZeroTiles=void 0,e._tileProvider.cancelReprojections()}function D(e){var t=e._debug;t.maxDepth=0,t.maxDepthVisited=0,t.tilesVisited=0,t.tilesCulled=0,t.tilesRendered=0,t.tilesWaitingForChildren=0,e._tileLoadQueueHigh.length=0,e._tileLoadQueueMedium.length=0,e._tileLoadQueueLow.length=0}function w(e,t){var a=e._tileLoadQueueHigh.length+e._tileLoadQueueMedium.length+e._tileLoadQueueLow.length;(a!==e._lastTileLoadQueueLength||e._tilesInvalidated)&&(t.afterRender.push(c["a"].prototype.raiseEvent.bind(e._tileLoadProgressEvent,a)),e._lastTileLoadQueueLength=a);var i=e._debug;i.enableDebugOutput&&!i.suspendLodUpdate&&(i.maxDepth=e._tilesToRender.reduce((function(e,t){return Math.max(e,t.level)}),-1),i.tilesRendered=e._tilesToRender.length,i.tilesVisited===i.lastTilesVisited&&i.tilesRendered===i.lastTilesRendered&&i.tilesCulled===i.lastTilesCulled&&i.maxDepth===i.lastMaxDepth&&i.tilesWaitingForChildren===i.lastTilesWaitingForChildren&&i.maxDepthVisited===i.lastMaxDepthVisited||(i.lastTilesVisited=i.tilesVisited,i.lastTilesRendered=i.tilesRendered,i.lastTilesCulled=i.tilesCulled,i.lastMaxDepth=i.maxDepth,i.lastTilesWaitingForChildren=i.tilesWaitingForChildren,i.lastMaxDepthVisited=i.maxDepthVisited))}Object.defineProperties(S.prototype,{tileProvider:{get:function(){return this._tileProvider}},tileLoadProgressEvent:{get:function(){return this._tileLoadProgressEvent}},occluders:{get:function(){return this._occluders}}}),S.prototype.invalidateAllTiles=function(){this._tilesInvalidated=!0},S.prototype.forEachLoadedTile=function(e){var t=this._tileReplacementQueue.head;while(Object(s["a"])(t))t.state!==v["a"].START&&e(t),t=t.replacementNext},S.prototype.forEachRenderedTile=function(e){for(var t=this._tilesToRender,a=0,i=t.length;a<i;++a)e(t[a])},S.prototype.updateHeight=function(e,t){var a=this,i={positionOnEllipsoidSurface:void 0,positionCartographic:e,level:-1,callback:t,removeFunc:function(){for(var e=a._addHeightCallbacks,t=e.length,r=0;r<t;++r)if(e[r]===i){e.splice(r,1);break}a._removeHeightCallbacks.push(i)}};return a._addHeightCallbacks.push(i),i.removeFunc},S.prototype.update=function(e){Object(s["a"])(this._tileProvider.update)&&this._tileProvider.update(e)},S.prototype.beginFrame=function(e){var t=e.passes;t.render&&(this._tilesInvalidated&&(T(this),this._tilesInvalidated=!1),this._tileProvider.initialize(e),D(this),this._debug.suspendLodUpdate||this._tileReplacementQueue.markStartOfRenderFrame())},S.prototype.render=function(e){var t=e.passes,a=this._tileProvider;t.render&&(a.beginUpdate(e),A(this,e),J(this,e),a.endUpdate(e)),t.pick&&this._tilesToRender.length>0&&a.updateForPick(e)},S.prototype.endFrame=function(e){var t=e.passes;t.render&&e.mode!==y["a"].MORPHING&&(G(this,e),X(this,e),w(this,e))},S.prototype.isDestroyed=function(){return!1},S.prototype.destroy=function(){this._tileProvider=this._tileProvider&&this._tileProvider.destroy()};var R=new n["a"];function x(e,t){var a=b["a"].center(e.rectangle,R),r=a.longitude-i.longitude,n=a.latitude-i.latitude;a=b["a"].center(t.rectangle,R);var o=a.longitude-i.longitude,s=a.latitude-i.latitude;return r*r+n*n-(o*o+s*s)}var j=new r["a"],E=[];function A(e,t){var a=e._debug;if(!a.suspendLodUpdate){var r,n=e._tilesToRender;n.length=0;var o,c=e._tileProvider;if(!Object(s["a"])(e._levelZeroTiles)){if(!c.ready)return;var l=c.tilingScheme;e._levelZeroTiles=g["a"].createLevelZeroTiles(l);var h=e._levelZeroTiles.length;if(E.length<h)for(E=new Array(h),r=0;r<h;++r)void 0===E[r]&&(E[r]=new P)}e._occluders.ellipsoid.cameraPosition=t.camera.positionWC;var u=e._levelZeroTiles,p=u.length>1?e._occluders:void 0;i=t.camera.positionCartographic,u.sort(x);var m,b=e._addHeightCallbacks,f=e._removeHeightCallbacks,_=t.frameNumber;if(b.length>0||f.length>0){for(r=0,m=u.length;r<m;++r)o=u[r],o._updateCustomData(_,b,f);b.length=0,f.length=0}var v=t.camera;e._cameraPositionCartographic=v.positionCartographic;var y=d["a"].getTranslation(v.transform,j);for(e._cameraReferenceFrameOriginCartographic=e.tileProvider.tilingScheme.ellipsoid.cartesianToCartographic(y,e._cameraReferenceFrameOriginCartographic),r=0,m=u.length;r<m;++r)o=u[r],e._tileReplacementQueue.markTileRendered(o),o.renderable?N(e,o,c,t,p,!1,E[r]):(L(e,e._tileLoadQueueHigh,o,t),++a.tilesWaitingForChildren);e._lastSelectionFrameNumber=_}}function L(e,t,a,i){a.needsLoading&&(void 0!==e.tileProvider.computeTileLoadPriority&&(a._loadPriority=e.tileProvider.computeTileLoadPriority(a,i)),t.push(a))}function P(){this.allAreRenderable=!0,this.anyWereRenderedLastFrame=!1,this.notYetRenderableCount=0}function I(){this.southwest=new P,this.southeast=new P,this.northwest=new P,this.northeast=new P}I.prototype.combine=function(e){var t=this.southwest,a=this.southeast,i=this.northwest,r=this.northeast;e.allAreRenderable=t.allAreRenderable&&a.allAreRenderable&&i.allAreRenderable&&r.allAreRenderable,e.anyWereRenderedLastFrame=t.anyWereRenderedLastFrame||a.anyWereRenderedLastFrame||i.anyWereRenderedLastFrame||r.anyWereRenderedLastFrame,e.notYetRenderableCount=t.notYetRenderableCount+a.notYetRenderableCount+i.notYetRenderableCount+r.notYetRenderableCount};for(var F=new Array(31),k=0;k<F.length;++k)F[k]=new I;function z(e,t,a,i,r){var n=e._debug;++n.tilesVisited,e._tileReplacementQueue.markTileRendered(a),a._updateCustomData(t.frameNumber),a.level>n.maxDepthVisited&&(n.maxDepthVisited=a.level);var o=B(e,t,a)<e.maximumScreenSpaceError,c=a.southwestChild,l=a.southeastChild,h=a.northwestChild,d=a.northeastChild,u=e._lastSelectionFrameNumber,p=a._lastSelectionResultFrame===u?a._lastSelectionResult:C["a"].NONE,m=e.tileProvider;if(o||i){var b=C["a"].originalResult(p)===C["a"].RENDERED,f=C["a"].originalResult(p)===C["a"].CULLED||p===C["a"].NONE,_=a.state===v["a"].DONE,g=b||f||_;if(g||Object(s["a"])(m.canRenderWithoutLosingDetail)&&(g=m.canRenderWithoutLosingDetail(a)),g)return o&&L(e,e._tileLoadQueueMedium,a,t),U(e,a),r.allAreRenderable=a.renderable,r.anyWereRenderedLastFrame=p===C["a"].RENDERED,r.notYetRenderableCount=a.renderable?0:1,a._lastSelectionResultFrame=t.frameNumber,a._lastSelectionResult=C["a"].RENDERED,void(r.anyWereRenderedLastFrame||e._tileToUpdateHeights.push(a));i=!0,o&&L(e,e._tileLoadQueueHigh,a,t)}if(m.canRefine(a)){var y=c.upsampledFromParent&&l.upsampledFromParent&&h.upsampledFromParent&&d.upsampledFromParent;if(y)return U(e,a),L(e,e._tileLoadQueueMedium,a,t),e._tileReplacementQueue.markTileRendered(c),e._tileReplacementQueue.markTileRendered(l),e._tileReplacementQueue.markTileRendered(h),e._tileReplacementQueue.markTileRendered(d),r.allAreRenderable=a.renderable,r.anyWereRenderedLastFrame=p===C["a"].RENDERED,r.notYetRenderableCount=a.renderable?0:1,a._lastSelectionResultFrame=t.frameNumber,a._lastSelectionResult=C["a"].RENDERED,void(r.anyWereRenderedLastFrame||e._tileToUpdateHeights.push(a));a._lastSelectionResultFrame=t.frameNumber,a._lastSelectionResult=C["a"].REFINED;var O=e._tilesToRender.length,S=e._tileLoadQueueLow.length,T=e._tileLoadQueueMedium.length,D=e._tileLoadQueueHigh.length,w=e._tileToUpdateHeights.length;if(M(e,c,l,h,d,t,i,r),O!==e._tilesToRender.length){var R=r.allAreRenderable,x=r.anyWereRenderedLastFrame,j=r.notYetRenderableCount,E=!1;if(!R&&!x){for(var A=e._tilesToRender,P=O;P<A.length;++P){var I=A[P];while(void 0!==I&&I._lastSelectionResult!==C["a"].KICKED&&I!==a)I._lastSelectionResult=C["a"].kick(I._lastSelectionResult),I=I.parent}e._tilesToRender.length=O,e._tileToUpdateHeights.length=w,U(e,a),a._lastSelectionResult=C["a"].RENDERED;var F=p===C["a"].RENDERED;!F&&j>e.loadingDescendantLimit&&(e._tileLoadQueueLow.length=S,e._tileLoadQueueMedium.length=T,e._tileLoadQueueHigh.length=D,L(e,e._tileLoadQueueMedium,a,t),r.notYetRenderableCount=a.renderable?0:1,E=!0),r.allAreRenderable=a.renderable,r.anyWereRenderedLastFrame=F,F||e._tileToUpdateHeights.push(a),++n.tilesWaitingForChildren}e.preloadAncestors&&!E&&L(e,e._tileLoadQueueLow,a,t)}}else a._lastSelectionResultFrame=t.frameNumber,a._lastSelectionResult=C["a"].RENDERED,U(e,a),L(e,e._tileLoadQueueHigh,a,t),r.allAreRenderable=a.renderable,r.anyWereRenderedLastFrame=p===C["a"].RENDERED,r.notYetRenderableCount=a.renderable?0:1}function M(e,t,a,i,r,n,o,s){var c=n.camera.positionCartographic,l=e._tileProvider,h=e._occluders,d=F[t.level],u=d.southwest,p=d.southeast,m=d.northwest,b=d.northeast;c.longitude<t.rectangle.east?c.latitude<t.rectangle.north?(N(e,t,l,n,h,o,u),N(e,a,l,n,h,o,p),N(e,i,l,n,h,o,m),N(e,r,l,n,h,o,b)):(N(e,i,l,n,h,o,m),N(e,t,l,n,h,o,u),N(e,r,l,n,h,o,b),N(e,a,l,n,h,o,p)):c.latitude<t.rectangle.north?(N(e,a,l,n,h,o,p),N(e,t,l,n,h,o,u),N(e,r,l,n,h,o,b),N(e,i,l,n,h,o,m)):(N(e,r,l,n,h,o,b),N(e,i,l,n,h,o,m),N(e,a,l,n,h,o,p),N(e,t,l,n,h,o,u)),d.combine(s)}function V(e,t){var a=t.rectangle;return Object(s["a"])(e._cameraPositionCartographic)&&b["a"].contains(a,e._cameraPositionCartographic)||Object(s["a"])(e._cameraReferenceFrameOriginCartographic)&&b["a"].contains(a,e._cameraReferenceFrameOriginCartographic)}function N(e,t,a,i,r,n,o){if(a.computeTileVisibility(t,i,r)!==f["a"].NONE)return z(e,i,t,n,o);if(++e._debug.tilesCulled,e._tileReplacementQueue.markTileRendered(t),o.allAreRenderable=!0,o.anyWereRenderedLastFrame=!1,o.notYetRenderableCount=0,V(e,t)){Object(s["a"])(t.data)&&Object(s["a"])(t.data.vertexArray)||L(e,e._tileLoadQueueMedium,t,i);var c=e._lastSelectionFrameNumber,l=t._lastSelectionResultFrame===c?t._lastSelectionResult:C["a"].NONE;l!==C["a"].CULLED_BUT_NEEDED&&l!==C["a"].RENDERED&&e._tileToUpdateHeights.push(t),t._lastSelectionResult=C["a"].CULLED_BUT_NEEDED}else e.preloadSiblings||0===t.level?(L(e,e._tileLoadQueueLow,t,i),t._lastSelectionResult=C["a"].CULLED):t._lastSelectionResult=C["a"].CULLED;t._lastSelectionResultFrame=i.frameNumber}function B(e,t,a){if(t.mode===y["a"].SCENE2D||t.camera.frustum instanceof u["a"]||t.camera.frustum instanceof p["a"])return H(e,t,a);var i=e._tileProvider.getLevelMaximumGeometricError(a.level),r=a._distance,n=t.context.drawingBufferHeight,o=t.camera.frustum.sseDenominator,s=i*n/(r*o);return t.fog.enabled&&(s-=h["a"].fog(r,t.fog.density)*t.fog.sse),s/=t.pixelRatio,s}function H(e,t,a){var i=t.camera,r=i.frustum;Object(s["a"])(r._offCenterFrustum)&&(r=r._offCenterFrustum);var n=t.context,o=n.drawingBufferWidth,c=n.drawingBufferHeight,l=e._tileProvider.getLevelMaximumGeometricError(a.level),d=Math.max(r.top-r.bottom,r.right-r.left)/Math.max(o,c),u=l/d;return t.fog.enabled&&t.mode!==y["a"].SCENE2D&&(u-=h["a"].fog(a._distance,t.fog.density)*t.fog.sse),u/=t.pixelRatio,u}function U(e,t){e._tilesToRender.push(t)}function G(e,t){var a=e._tileLoadQueueHigh,i=e._tileLoadQueueMedium,r=e._tileLoadQueueLow;if(0!==a.length||0!==i.length||0!==r.length){e._tileReplacementQueue.trimTiles(e.tileCacheSize);var n=Object(l["a"])()+e._loadQueueTimeSlice,o=e._tileProvider,s=W(e,t,o,n,a,!1);s=W(e,t,o,n,i,s),W(e,t,o,n,r,s)}}function Q(e,t){return e._loadPriority-t._loadPriority}function W(e,t,a,i,r,n){void 0!==a.computeTileLoadPriority&&r.sort(Q);for(var o=0,s=r.length;o<s&&(Object(l["a"])()<i||!n);++o){var c=r[o];e._tileReplacementQueue.markTileRendered(c),a.loadTile(t,c),n=!0}return n}var Y=new m["a"],Z=new n["a"],q=new r["a"],$=[];function X(e,t){if(e.tileProvider.ready){var a=$;a.length=0;var i,c=e._tileToUpdateHeights,h=e._tileProvider.terrainProvider,d=Object(l["a"])(),u=e._updateHeightsTimeSlice,p=d+u,m=t.mode,f=t.mapProjection,_=e.tileProvider.tilingScheme.ellipsoid;while(c.length>0){var g=c[0];if(Object(s["a"])(g.data)&&Object(s["a"])(g.data.mesh)){var v=g.customData,O=v.length,S=!1;for(i=e._lastTileIndex;i<O;++i){var T=v[i];if(g.level>T.level){if(Object(s["a"])(T.positionOnEllipsoidSurface)||(T.positionOnEllipsoidSurface=r["a"].fromRadians(T.positionCartographic.longitude,T.positionCartographic.latitude,0,_)),m===y["a"].SCENE3D){var D=_.geodeticSurfaceNormal(T.positionOnEllipsoidSurface,Y.direction),w=_.getSurfaceNormalIntersectionWithZAxis(T.positionOnEllipsoidSurface,11500,Y.origin);if(!Object(s["a"])(w)){var R;Object(s["a"])(g.data.tileBoundingRegion)&&(R=g.data.tileBoundingRegion.minimumHeight);var x=Math.min(Object(o["a"])(R,0),-11500),j=r["a"].multiplyByScalar(D,Math.abs(x)+1,q);r["a"].subtract(T.positionOnEllipsoidSurface,j,Y.origin)}}else n["a"].clone(T.positionCartographic,Z),Z.height=-11500,f.project(Z,q),r["a"].fromElements(q.z,q.x,q.y,q),r["a"].clone(q,Y.origin),r["a"].clone(r["a"].UNIT_X,Y.direction);var E=g.data.pick(Y,m,f,!1,q);Object(s["a"])(E)&&(T.callback(E),T.level=g.level)}else if(g.level===T.level){for(var A,L=g.children,P=L.length,I=0;I<P;++I)if(A=L[I],b["a"].contains(A.rectangle,T.positionCartographic))break;var F=h.getTileDataAvailable(A.x,A.y,A.level),k=g.parent;(Object(s["a"])(F)&&!F||Object(s["a"])(k)&&Object(s["a"])(k.data)&&Object(s["a"])(k.data.terrainData)&&!k.data.terrainData.isChildAvailable(k.x,k.y,A.x,A.y))&&T.removeFunc()}if(Object(l["a"])()>=p){S=!0;break}}if(S){e._lastTileIndex=i;break}e._lastTileIndex=0,c.shift()}else{var z=g._lastSelectionResultFrame===e._lastSelectionFrameNumber?g._lastSelectionResult:C["a"].NONE;z!==C["a"].RENDERED&&z!==C["a"].CULLED_BUT_NEEDED||a.push(g),c.shift(),e._lastTileIndex=0}}for(i=0;i<a.length;i++)c.push(a[i])}}function J(e,t){for(var a=e._tileProvider,i=e._tilesToRender,r=0,n=i.length;r<n;++r){var o=i[r];a.showTileThisFrame(o,t)}}t["a"]=S},f1b3:function(e,t,a){"use strict";var i={START:0,LOADING:1,DONE:2,FAILED:3};t["a"]=Object.freeze(i)}}]);