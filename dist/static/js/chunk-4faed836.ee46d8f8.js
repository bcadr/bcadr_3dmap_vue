(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4faed836"],{"0158":function(e,t,i){"use strict";function n(e){var t=1e3,i=[],n=["北京","天津","上海","重庆","石家庄","太原","呼和浩特","哈尔滨","长春","沈阳","济南","南京","合肥","杭州","南昌","福州","郑州","武汉","长沙","广州","南宁","西安","银川","兰州","西宁","乌鲁木齐","成都","贵阳","昆明","拉萨","海口"];while(t--){var o=mapv.utilCityCenter.getCenterByCityName(n[parseInt(Math.random()*n.length)]);i.push({geometry:{type:"Point",coordinates:[o.lng-2+4*Math.random(),o.lat-2+4*Math.random()]},count:30*Math.random(),time:100*Math.random()})}var a=new mapv.DataSet(i),r={size:13,gradient:{.25:"rgb(0,0,255)",.55:"rgb(0,255,0)",.85:"yellow",1:"rgb(255,0,0)"},max:60,animation:{type:"time",stepsRange:{start:0,end:100},trails:10,duration:4},draw:"heatmap"};new mapv.cesiumMapLayer(e,a,r)}i.d(t,"a",(function(){return n}))},"075b":function(e,t,i){},"0fa8":function(e,t,i){"use strict";i.d(t,"a",(function(){return h}));var n,o,a=i("d4ed"),r=i("2f63"),s=i("4f04"),l=i("5ed2"),c=i("bd8d"),d=i("be18");function h(e){o=a["a"].createIfNeeded("./config/json/weibo.json"),o.fetchJson().then((function(t){for(var i={stepsRange:{start:0,end:10},trails:1,duration:6},o=i.stepsRange.end-i.stepsRange.start,a=function(e){if(!Object(r["a"])(e))throw new s["a"]("time is required.");var t=l["a"].toDate(e).getTime()/i.duration,n=t%o+i.stepsRange.start,a=a||10;return!!(n&&this.nameID>n-a&&this.nameID<n)},h=0,p=1,u=new c["a"](200/255,200/255,0,.8),f=0;f<t[0].length;f+=2)n=e.entities.add({position:d["a"].fromDegrees(t[0][f].geoCoord[0],t[0][f].geoCoord[1],h),point:{show:!0,color:u,pixelSize:.7}});for(var m=new c["a"](1,250/255,0,.8),y=new c["a"](1,250/255,0,.9),v=0;v<t[1].length;v+=1)e.entities.add({position:d["a"].fromDegrees(t[1][v].geoCoord[0],t[1][v].geoCoord[1],h),point:{show:!0,color:m,pixelSize:.7}}),n=e.entities.add({position:d["a"].fromDegrees(t[1][v].geoCoord[0],t[1][v].geoCoord[1],p),nameID:10*Math.random(),point:{show:!0,color:y,pixelSize:1.618}}),n.isAvailable=a;for(var g=new c["a"](1,250/255,250/255,.6),w=0;w<t[2].length;w+=2)e.entities.add({position:d["a"].fromDegrees(t[2][w].geoCoord[0],t[2][w].geoCoord[1],h),point:{show:!0,color:g,pixelSize:.7}});e.zoomTo(e.entities)})).otherwise((function(e){}))}},1697:function(e,t,i){"use strict";i.d(t,"a",(function(){return b}));i("caad6"),i("b0c0"),i("e877");var n=i("a9a8"),o=i("16f2"),a=i("a307"),r=i("be18"),s=i("b383"),l=i("1863"),c=i("93da"),d=i("2f48"),h=i("f915"),p=i("5d5c"),u=(i("dda8"),"http://{s}.tianditu.gov.cn/img_c/wmts?service=wmts&request=GetTile&version=1.0.0&LAYER=img&tileMatrixSet=c&TileMatrix={TileMatrix}&TileRow={TileRow}&TileCol={TileCol}&style=default&format=tiles&tk=换上自己的tk"),f="http://{s}.tianditu.gov.cn/cia_c/wmts?service=wmts&request=GetTile&version=1.0.0&LAYER=cia&tileMatrixSet=c&TileMatrix={TileMatrix}&TileRow={TileRow}&TileCol={TileCol}&style=default&format=tiles&tk=换上自己的tk",m="http://{s}.tianditu.gov.cn/vec_c/wmts?service=wmts&request=GetTile&version=1.0.0&LAYER=vec&tileMatrixSet=c&TileMatrix={TileMatrix}&TileRow={TileRow}&TileCol={TileCol}&style=default&format=tiles&tk=换上自己的tk",y="http://{s}.tianditu.gov.cn/cva_c/wmts?service=wmts&request=GetTile&version=1.0.0&LAYER=cva&tileMatrixSet=c&TileMatrix={TileMatrix}&TileRow={TileRow}&TileCol={TileCol}&style=default&format=tiles&tk=换上自己的tk",v=new h["a"]({url:u,layer:"tdtImg_c",style:"default",format:"tiles",tileMatrixSetID:"c",subdomains:["t0","t1","t2","t3","t4","t5","t6","t7"],tilingScheme:new p["a"],tileMatrixLabels:["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],maximumLevel:50,show:!1}),g=new h["a"]({url:f,layer:"tdtImg_Anno",style:"default",format:"tiles",tileMatrixSetID:"c",subdomains:["t0","t1","t2","t3","t4","t5","t6","t7"],tilingScheme:new p["a"],tileMatrixLabels:["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],maximumLevel:50,show:!1});new h["a"]({url:m,layer:"tdtVec_c",style:"default",format:"tiles",tileMatrixSetID:"c",subdomains:["t0","t1","t2","t3","t4","t5","t6","t7"],tilingScheme:new p["a"],tileMatrixLabels:["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],maximumLevel:50,show:!1}),new h["a"]({url:y,layer:"tdtVec_Anno",style:"default",format:"tiles",tileMatrixSetID:"c",subdomains:["t0","t1","t2","t3","t4","t5","t6","t7"],tilingScheme:new p["a"],tileMatrixLabels:["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],maximumLevel:50,show:!1});window.CESIUM_BASE_URL="/";var w=[];function b(){var e;n["a"].defaultAccessToken="填上自己的token",e=new o["a"]("cesiumContainer",{useDefaultRenderLoop:!0,animation:!0,timeline:!0,sceneModePicker:!1,geocoder:!1,sceneMode:a["a"].SCENE3D,scene3DOnly:!0,navigationHelpButton:!1,homeButton:!1,infoBox:!1,showRenderLoopErrors:!1,shouldAnimate:!0,selectionIndicator:!1,navigationInstructionsInitiallyVisible:!1,baseLayerPicker:!1,fullscreenButton:!1,vrButton:!1,lightColor:new r["a"](100,100,100),imageryProvider:v}),e.cesiumWidget.creditContainer.style.display="none",e.scene.globe.depthTestAgainstTerrain=!0,e.imageryLayers.addImageryProvider(g);var t=new s["a"]({requestWaterMask:!0,requestVertexNormals:!0});e.terrainProvider=t;var i=new l["a"](e.scene.canvas);i.setInputAction((function(t){var i=e.scene.pick(t.position),n=e.camera.computeViewRectangle();n=[c["a"].toDegrees(n.west),c["a"].toDegrees(n.south),c["a"].toDegrees(n.east),c["a"].toDegrees(n.north)];var o=e.scene.pickPosition(t.position),a=e.scene.globe.ellipsoid.cartesianToCartographic(o);c["a"].toDegrees(a.longitude),c["a"].toDegrees(a.latitude),a.height;if(i&&w.includes(i.id)&&"camera"===i.id.name)i.id.id}),d["a"].LEFT_CLICK);var h={destination:r["a"].fromDegrees(108.0001,33.0001,2e7),duration:5,complete:function(){var t={destination:r["a"].fromDegrees(108.0001,33.0001,3e6),duration:2};e.camera.flyTo(t)}};e.camera.flyTo(h),window.viewer=e}},1798:function(e,t,i){"use strict";i.d(t,"a",(function(){return u}));var n=i("be18"),o=i("8dd9"),a=i("52f0"),r=i("1757"),s=(i("2d36"),i("bd8d"),i("894b")),l=i("d9403"),c=i("4914"),d=i("5966"),h=i("aea3"),p=i("7229");function u(){var e=[109.1593320736039,32.992497345180624,268.6358833514805,109.15987514903935,32.99134707022507,270.91140210833515,109.1608589958126,32.99045224080631,260.8714269261232,109.16206418757648,32.99052126533841,259.36284869661034,109.16050646727479,32.99248862737635,258.12724383032145],t=n["a"].fromDegrees(109.1593320736039,32.992497345180624,1e3),i=new o["a"].fromDegrees(6.33,-31.98722309159895,0);window.viewer.scene.camera.setView({destination:t,orientation:i,endTransform:a["a"].IDENTITY});var u=new s["a"]({show:!0,geometryInstances:new l["a"]({geometry:new c["a"]({polygonHierarchy:new r["a"](n["a"].fromDegreesArrayHeights(e)),height:270,vertexFormat:d["a"].VERTEX_FORMAT})}),appearance:new d["a"]({aboveGround:!0,material:new h["a"]({fabric:{type:"Water",uniforms:{specularMap:"Assets/Textures/earthspec1k.jpg",normalMap:Object(p["a"])("Assets/Textures/waterNormals.jpg"),frequency:1e3,animationSpeed:.01,amplitude:1}}}),fragmentShaderSource:"varying vec3 v_positionMC;\n                                 varying vec3 v_positionEC;\n                                 varying vec2 v_st;\n                                 void main()\n                                 {\n                                 czm_materialInput materialInput;\n                                 vec3 normalEC = normalize(czm_normal3D * czm_geodeticSurfaceNormal(v_positionMC, vec3(0.0), vec3(1.0)));\n                                 #ifdef FACE_FORWARD\n                                 normalEC = faceforward(normalEC, vec3(0.0, 0.0, 1.0), -normalEC);\n                                #endif\n                                materialInput.s = v_st.s;\n                                materialInput.st = v_st;\n                                materialInput.str = vec3(v_st, 0.0);\n                                materialInput.normalEC = normalEC;\n                                materialInput.tangentToEyeMatrix = czm_eastNorthUpToEyeCoordinates(v_positionMC, materialInput.normalEC);\n                                vec3 positionToEyeEC = -v_positionEC;\n                                materialInput.positionToEyeEC = positionToEyeEC;\n                               czm_material material = czm_getMaterial(materialInput);\n                                #ifdef FLAT\n                                gl_FragColor = vec4(material.diffuse + material.emission, material.alpha);\n                                #else\n                                gl_FragColor = czm_phong(normalize(positionToEyeEC), material, czm_lightDirectionEC);\n                                gl_FragColor.a=0.85;\n                             #endif\n                                }"})});window.viewer.scene.primitives.add(u)}},"2e62":function(e,t,i){"use strict";i.d(t,"b",(function(){return g})),i.d(t,"a",(function(){return w}));i("d81d");var n=i("be18"),o=i("93da"),a=i("e62c"),r=i("05fb"),s=i("bd8d"),l=i("95fe8"),c=i("2f63"),d=i("4f04"),h=i("5ed2"),p=[{geometry:{type:"Point",coordinates:[106.63530472117604,29.492206977571094]}},{geometry:{type:"Point",coordinates:[106.52269934244785,29.58809593781511]}},{geometry:{type:"Point",coordinates:[106.43942554342905,29.53975383774449]}},{geometry:{type:"Point",coordinates:[106.57297524216452,29.518737307835487]}},{geometry:{type:"Point",coordinates:[106.51614332087844,29.585594590840433]}},{geometry:{type:"Point",coordinates:[106.55029941925932,29.58689018167771]}},{geometry:{type:"Point",coordinates:[106.48366801708396,29.503062626877846]}},{geometry:{type:"Point",coordinates:[106.46590638367111,29.516937278640835]}},{geometry:{type:"Point",coordinates:[106.53891601576233,29.60745093405695]}},{geometry:{type:"Point",coordinates:[106.56270133840407,29.567579892108352]}},{geometry:{type:"Point",coordinates:[106.63112327076672,29.72071071817028]}},{geometry:{type:"Point",coordinates:[106.62138267635399,29.70285584594539]}},{geometry:{type:"Point",coordinates:[106.56834729857965,29.641338018934743]}},{geometry:{type:"Point",coordinates:[106.54001160372799,29.56480501633349]}},{geometry:{type:"Point",coordinates:[106.64035361593135,29.657656042446007]}},{geometry:{type:"Point",coordinates:[106.47418367206683,29.564086020369373]}},{geometry:{type:"Point",coordinates:[106.55035076306181,29.586892508436133]}},{geometry:{type:"Point",coordinates:[106.46500852179328,29.556067235379857]}},{geometry:{type:"Point",coordinates:[106.49071127000185,29.5840574384477]}},{geometry:{type:"Point",coordinates:[106.5215461901369,29.571828791095985]}},{geometry:{type:"Point",coordinates:[106.45265181125045,29.546842069000366]}},{geometry:{type:"Point",coordinates:[106.63192118674729,29.735647370920393]}},{geometry:{type:"Point",coordinates:[106.5568187502709,29.60509909563788]}},{geometry:{type:"Point",coordinates:[106.52938210390454,29.591863620191884]}},{geometry:{type:"Point",coordinates:[106.5637278362639,29.635678561836855]}},{geometry:{type:"Point",coordinates:[106.64460609216452,29.76536815783548]}},{geometry:{type:"Point",coordinates:[106.52655310910603,29.578202545419252]}},{geometry:{type:"Point",coordinates:[106.54746017439665,29.623253490067622]}},{geometry:{type:"Point",coordinates:[106.55933441673028,29.5507351203959]}},{geometry:{type:"Point",coordinates:[106.52850625235611,29.58879227296282]}},{geometry:{type:"Point",coordinates:[106.61555931149077,29.69145298333802]}},{geometry:{type:"Point",coordinates:[106.55422059106333,29.628982656734284]}},{geometry:{type:"Point",coordinates:[106.55523032107894,29.61698036301842]}},{geometry:{type:"Point",coordinates:[106.57197575050583,29.588032270389153]}},{geometry:{type:"Point",coordinates:[106.54086408197728,29.60059385065909]}},{geometry:{type:"Point",coordinates:[106.55117178452274,29.452779869854798]}},{geometry:{type:"Point",coordinates:[106.53986734178852,29.606115422899187]}},{geometry:{type:"Point",coordinates:[106.62698019526442,29.708723301033636]}},{geometry:{type:"Point",coordinates:[106.63452164514084,29.492532951989364]}},{geometry:{type:"Point",coordinates:[106.62278101786949,29.495278458336635]}},{geometry:{type:"Point",coordinates:[106.54742662939867,29.62372611830248]}},{geometry:{type:"Point",coordinates:[106.52472513038666,29.583886442913897]}},{geometry:{type:"Point",coordinates:[106.5093518525488,29.514057523970987]}},{geometry:{type:"Point",coordinates:[106.54427356420017,29.55030620461596]}},{geometry:{type:"Point",coordinates:[106.56235425728407,29.56567094594835]}},{geometry:{type:"Point",coordinates:[106.54090313216452,29.60116519783548]}},{geometry:{type:"Point",coordinates:[106.61876811153634,29.702054913078197]}},{geometry:{type:"Point",coordinates:[106.62714767439665,29.70890974006762]}},{geometry:{type:"Point",coordinates:[106.63057987892726,29.724447706065863]}},{geometry:{type:"Point",coordinates:[106.51514542899434,29.55149747624859]}},{geometry:{type:"Point",coordinates:[106.59802371216452,29.675285777835477]}},{geometry:{type:"Point",coordinates:[106.61569884147816,29.691931781445483]}},{geometry:{type:"Point",coordinates:[106.53511012909806,29.590919126392272]}},{geometry:{type:"Point",coordinates:[106.54128750949577,29.601494552182174]}},{geometry:{type:"Point",coordinates:[106.54157607216452,29.56133813783548]}},{geometry:{type:"Point",coordinates:[106.55199175975271,29.586579990741857]}},{geometry:{type:"Point",coordinates:[106.52933869716497,29.59203996007138]}},{geometry:{type:"Point",coordinates:[106.56693046995034,29.526767670066214]}},{geometry:{type:"Point",coordinates:[106.54464926513586,29.55045697933357]}},{geometry:{type:"Point",coordinates:[106.52616045056547,29.56906363056547]}},{geometry:{type:"Point",coordinates:[106.50313182722951,29.585739230918154]}},{geometry:{type:"Point",coordinates:[106.6239823488495,29.705386075779266]}},{geometry:{type:"Point",coordinates:[106.5903366000432,29.588667114521044]}},{geometry:{type:"Point",coordinates:[106.60484463393671,29.680833952021096]}},{geometry:{type:"Point",coordinates:[106.56356880016074,29.564648792667434]}},{geometry:{type:"Point",coordinates:[106.52276586953793,29.58792530014897]}},{geometry:{type:"Point",coordinates:[106.47010913054945,29.562699779935333]}},{geometry:{type:"Point",coordinates:[106.54230443511564,29.554464920348003]}},{geometry:{type:"Point",coordinates:[106.5402570720275,29.603681469341055]}},{geometry:{type:"Point",coordinates:[106.5489375,29.62349307340095]}},{geometry:{type:"Point",coordinates:[106.5221665,29.571993073400954]}},{geometry:{type:"Point",coordinates:[106.55629977122125,29.630446591749077]}},{geometry:{type:"Point",coordinates:[106.5082752516216,29.506486956561826]}},{geometry:{type:"Point",coordinates:[106.56263675680407,29.56722469330835]}},{geometry:{type:"Point",coordinates:[106.59508754462765,29.661137502525484]}},{geometry:{type:"Point",coordinates:[106.53530787027454,29.590869691098156]}},{geometry:{type:"Point",coordinates:[106.51145960791213,29.515181660164753]}},{geometry:{type:"Point",coordinates:[106.54338855716452,29.555150622835487]}},{geometry:{type:"Point",coordinates:[106.51351741674415,29.51904326119628]}},{geometry:{type:"Point",coordinates:[106.52271597498077,29.588053276448203]}},{geometry:{type:"Point",coordinates:[106.56833583617966,29.641353302134746]}},{geometry:{type:"Point",coordinates:[106.44751474966974,29.563887550832234]}},{geometry:{type:"Point",coordinates:[106.56908982697662,29.609602544576823]}},{geometry:{type:"Point",coordinates:[106.60341672216451,29.546178787835476]}},{geometry:{type:"Point",coordinates:[106.55803174556547,29.585192335565473]}},{geometry:{type:"Point",coordinates:[106.54086348384428,29.559794359229514]}},{geometry:{type:"Point",coordinates:[106.4385952542591,29.521574008338604]}},{geometry:{type:"Point",coordinates:[106.53943343021392,29.607160251780776]}},{geometry:{type:"Point",coordinates:[106.5774776246061,29.642763091090814]}},{geometry:{type:"Point",coordinates:[106.50770823565672,29.522770114957822]}},{geometry:{type:"Point",coordinates:[106.52436253235742,29.471019171910644]}}],u=p;i("99af");function f(e,t){t=t||{};for(var i=[],n=0;n<e.length-1;n++){var o=m(e[n],e[n+1],t.count);o&&o.length>0&&(i=i.concat(o))}return i}function m(e,t,i){if(!e||!t)return null;var n,o,a,r,s,l,c=function(e){return 1-2*e+e*e},d=function(e){return 2*e-2*e*e},h=function(e){return e*e},p=[],u=(i=i||40,0),f=0;if("undefined"!=typeof t){var m=parseFloat(e.lat),y=parseFloat(t.lat),v=parseFloat(e.lng),g=parseFloat(t.lng);for(g>v&&parseFloat(g-v)>180&&v<0&&(v=parseFloat(360+v)),v>g&&parseFloat(v-g)>180&&g<0&&(g=parseFloat(360+g)),0,l=0,y==m?(n=0,o=v-g):g==v?(n=Math.PI/2,o=m-y):(n=Math.atan((y-m)/(g-v)),o=(y-m)/Math.sin(n)),0==l&&(l=n+Math.PI/5),a=o/2,s=a*Math.cos(l)+v,r=a*Math.sin(l)+m,u=0;u<i+1;u++)p.push([v*c(f)+s*d(f)+g*h(f),m*c(f)+r*d(f)+y*h(f)]),f+=1/i;return p}"undefined"!=typeof p&&(p=[])}var y=30;function v(e,t){if(e&&e instanceof Array&&t&&t instanceof Array){var i=[],n=[];return t.map((function(t){for(var o=t.geometry&&t.geometry.coordinates,a={lng:o[0],lat:o[1]},r={lng:e[0],lat:e[1]},s=f([r,a]),l=[],c=0;c<s.length;c++)i.push({geometry:{type:"Point",coordinates:s[c]},time:c}),l.push(s[c][0]),l.push(s[c][1]),l.push(y);n.push({geometry:{type:"LineString",coordinates:l}})})),{point:i,line:n}}}function g(e){e.scene.camera.flyTo({destination:n["a"].fromDegrees(106.540545,29.531714,500),orientation:{heading:o["a"].toRadians(327.95),pitch:o["a"].toRadians(-30.39),roll:0}});var t=new a["a"];t.shouldAnimate=!0;new r["a"](t);for(var i=[106.540545,29.531714],p=v(i,u),f=p.line,m=p.point,g=[],w=new s["a"](32/255,228/255,243/255,.8),b=new s["a"](65/255,105/255,225/255,.8),P=0;P<f.length;++P)g[P]=e.entities.add({polyline:{positions:n["a"].fromDegreesArrayHeights(f[P].geometry.coordinates),width:1,material:new l["a"]({color:w,outlineWidth:.1,outlineColor:b}),depthFailMaterial:new l["a"]({color:w,outlineWidth:.1,outlineColor:b})}});var C=new s["a"](243/255,242/255,249/255,.8),_=[];for(P=0;P<u.length;++P)_[P]=e.entities.add({position:n["a"].fromDegrees(u[P].geometry.coordinates[0],u[P].geometry.coordinates[1],y),billboard:{image:"./images/c2.png",width:8,height:8,color:C}});var I={stepsRange:{start:0,end:50},trails:10,duration:85},T=I.stepsRange.end-I.stepsRange.start,M=function(e){if(!Object(c["a"])(e))throw new d["a"]("time is required.");var t=h["a"].toDate(e).getTime()/I.duration,i=t%T+I.stepsRange.start,n=n||10;return!!(i&&this.nameID>i-n&&this.nameID<i)},E=[];for(P=0;P<m.length;++P){var D=m[P].geometry.coordinates[0],L=m[P].geometry.coordinates[1];E[P]=e.entities.add({position:n["a"].fromDegrees(D,L,y),nameID:m[P].time,billboard:{image:"./images/c2.png",width:5,height:5,color:C}}),E[P].isAvailable=M}var A=new s["a"](192/255,16/255,26/255,.8);_[P]=e.entities.add({position:n["a"].fromDegrees(i[0],i[1],y),point:{show:!0,color:A,pixelSize:24}})}function w(e){e.entities.removeAll()}},"472c":function(e,t){},"5cac":function(e,t,i){"use strict";i.d(t,"a",(function(){return d}));i("a15b");var n=i("be18"),o=i("4914"),a=i("1757"),r=i("d9403"),s=i("aea3"),l=i("d6db"),c=i("894b");function d(){viewer.camera.setView({destination:new n["a"](-2644963.9889313546,5763731.142118295,2199400.7089496767),orientation:{heading:6.075,pitch:-.727,roll:6.283}});var e=new o["a"]({polygonHierarchy:new a["a"](n["a"].fromDegreesArray([112.41726298378288,23.290411251106182,113.67072522399741,23.560312361463684,114.09370956893551,22.590768298743154,112.83803246418894,22.285610818885644])),extrudedHeight:3e4}),t=new r["a"]({geometry:e,id:"box with height"}),i=(new s["a"]({fabric:{}}),["uniform sampler2D tReflectionMap;","uniform sampler2D tRefractionMap;","uniform sampler2D tNormalMap0;","uniform sampler2D tNormalMap1;","uniform sampler2D tFlowMap;","uniform vec3 color;","uniform float reflectivity;","uniform vec4 config;","varying vec4 vCoord;","varying vec2 vUv;","varying vec3 vToEye;","void main() {","\tfloat flowMapOffset0 = config.x;","\tfloat flowMapOffset1 = config.y;","\tfloat halfCycle = config.z;","\tfloat scale = config.w;","\tvec3 toEye = normalize( vToEye );","\tvec2 flow;","\t\tflow = texture2D( tFlowMap, vUv ).rg;","\tvec4 normalColor0 = texture2D( tNormalMap0, ( vUv * scale ) + flow * flowMapOffset0 );","\tvec4 normalColor1 = texture2D( tNormalMap1, ( vUv * scale ) + flow * flowMapOffset1 );","\tfloat flowLerp = abs( halfCycle - flowMapOffset0 ) / halfCycle;","\tvec4 normalColor = mix( normalColor0, normalColor1, flowLerp );","\tvec3 normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );","\tfloat theta = max( dot( toEye, normal ), 0.0 );","\tfloat reflectance = reflectivity + ( 1.0 - reflectivity ) * pow( ( 1.0 - theta ), 5.0 );","\tvec3 coord = vCoord.xyz / vCoord.w;","   vec2 coord1 = gl_FragCoord.xy / czm_viewport.zw;","\tvec2 uv = coord1.xy + coord.z * normal.xz * 0.05;","\tvec4 reflectColor = texture2D( tReflectionMap, vec2( 1.0 - uv.x, uv.y ) );","\tvec4 refractColor = texture2D( tRefractionMap, uv );","\tgl_FragColor = vec4( color, 1.0 ) * mix( refractColor, reflectColor, reflectance );","gl_FragColor = refractColor;","}"].join("\n")),d=new l["a"]({vertexShaderSource:"attribute vec3 position;attribute vec2 st;uniform mat4 u_modelViewMatrix;uniform mat4 u_invWorldViewMatrix;uniform int u_clampToGroud;uniform vec3 u_camPos;uniform vec3 u_scale;varying vec3 vToEye;varying vec2 vUv;varying vec4 vCoord;void main(void){vec4 positionW = u_modelViewMatrix * vec4(position.xyz, 1.0);vec4 eyep = czm_modelView * positionW;gl_Position = czm_projection * eyep; if (u_clampToGroud == 1){vToEye = (u_camPos - position.xyz) * u_scale;} else {vec4 pos = u_modelViewMatrix * vec4(position.xyz,1.0);vToEye = vec3(u_invWorldViewMatrix*vec4(pos.xyz,0.0));vCoord = gl_Position;}vUv = st;}",fragmentShaderSource:i});viewer.scene.primitives.add(new c["a"]({geometryInstances:t,appearance:d,releaseGeometryInstances:!1,compressVertices:!1})),d.vertexShaderSource,d.fragmentShaderSource,d.getFragmentShaderSource()}},"763e":function(e,t,i){"use strict";i.d(t,"e",(function(){return y})),i.d(t,"g",(function(){return v})),i.d(t,"c",(function(){return g})),i.d(t,"b",(function(){return w})),i.d(t,"d",(function(){return b})),i.d(t,"a",(function(){return P})),i.d(t,"f",(function(){return C}));var n=i("44bf"),o=i("be18"),a=i("bd8d"),r=i("2d36"),s=i("93da"),l=i("05e5"),c=i("2d75"),d=i("4626"),h=i("aee6"),p=i("6dfc"),u=i("8ada"),f=i.n(u),m="";function y(e){var t=200,i=null;i=e.scene.primitives.add(new n["a"]);while(t--){var r=[3];r[0]=0+20*Math.random(),r[1]=0+20*Math.random(),r[2]=100;var s=new o["a"].fromDegrees(r[0],r[1],r[2]);i.add({pixelSize:50,color:a["a"].BLUE.withAlpha(.6),outlineColor:a["a"].BLACK.withAlpha(.6),outlineWidth:0,position:s})}}function v(e){var t=1,i=!0,n=e.entities.add({name:"圆点point闪烁",position:new o["a"].fromDegrees(108.93636821424396,32.70745267099441,500),point:{show:!0,color:new r["a"]((function(){return i?(t-=.05,t<=0&&(i=!1)):(t+=.05,t>=1&&(i=!0)),a["a"].RED.withAlpha(t)}),!1),pixelSize:100,outlineWidth:0}});e.flyTo(n)}function g(e){var t=[],i=[{lng:"108.93543742716831",lat:"32.70957584826458",hgt:"275.4187388577364",status:!0,interid:"w2356www",image:"./images/blueMarker.png"},{lng:"108.93464956205246",lat:"32.709266535669094",hgt:"270.36911883266043",status:!0,interid:"ee9635",image:"./images/blueMarker.png"},{lng:"108.93652745580972",lat:"32.7089440888706",hgt:"269.9095576805446",status:!0,interid:"qq63548",image:"./images/blueMarker.png"}];e.scene.camera.flyTo({destination:o["a"].fromDegrees(108.93636821424396,32.70745267099441,500),orientation:{heading:s["a"].toRadians(327.95),pitch:s["a"].toRadians(-30.39),roll:0}});for(var n=0;n<i.length;n++){var a=e.entities.add({id:i[n].interid,name:"camera",position:o["a"].fromDegrees(parseFloat(i[n].lng),parseFloat(i[n].lat),parseFloat(i[n].hgt)+10),billboard:{image:i[n].image},description:"232323"});t.push(a)}return t}function w(e){var t=document.createElement("div"),i=document.createElement("img");t.appendChild(i),i.src="./images/gif.gif",i.onload=function(){var t=new f.a({gif:i});t.load((function(){m||(m=e.entities.add({position:o["a"].fromDegrees(108.93531674746316,32.70956184444237,275.33328818717695),billboard:{image:new r["a"]((function(){return t.get_canvas().toDataURL("image/png")}),!1),verticalOrigin:l["a"].BOTTOM,heightReference:c["a"].RELATIVE_TO_GROUND}}))}))}}function b(e){e.entities.add({position:o["a"].fromDegrees(108.93538879841549,32.70958345994372,285.4791541624723),label:{text:"Philadelphia",font:"24px Helvetica",fillColor:a["a"].SKYBLUE,outlineColor:a["a"].BLACK,outlineWidth:2,style:d["a"].FILL_AND_OUTLINE}})}function P(e){var t="波波安";window.viewer.scene.camera.flyTo({destination:o["a"].fromDegrees(108.93636821424396,32.70745267099441,500),orientation:{heading:3.785774498653955,pitch:-.45235945859613347,roll:6.281602443469065}}),window.viewer.entities.add({id:"23562112",name:t,position:o["a"].fromDegrees(108.93636821424396,32.70745267099441,500),billboard:{image:_this.img,disableDepthTestDistance:35e4,distanceDisplayCondition:new h["a"](0,1e12),scaleByDistance:new p["a"](2e5,1.2,1e11,.5)},label:{text:t,font:"14pt Source Han Sans CN",fillColor:a["a"].CHARTREUSE,style:d["a"].FILL,outlineWidth:2,verticalOrigin:l["a"].CENTER,pixelOffset:new Cartesian2(0,-30)}})}function C(e){e.entities.removeAll()}},"7a32":function(e,t,i){"use strict";i.d(t,"a",(function(){return m}));i("ac1f"),i("1276");var n=i("be18"),o=i("93da"),a=i("d4ed"),r=i("bd8d"),s=i("1184"),l=i("bef8"),c=i("2f63"),d=i("4f04"),h=i("5ed2"),p=i("95fe8"),u={PI:3.141592653589793,x_pi:52.35987755982988,delta:function(e,t){var i=6378245,n=.006693421622965943,o=this.transformLat(t-105,e-35),a=this.transformLon(t-105,e-35),r=e/180*this.PI,s=Math.sin(r);s=1-n*s*s;var l=Math.sqrt(s);return o=180*o/(i*(1-n)/(s*l)*this.PI),a=180*a/(i/l*Math.cos(r)*this.PI),{lat:o,lon:a}},gcj_encrypt:function(e,t){if(this.outOfChina(e,t))return{lat:e,lon:t};var i=this.delta(e,t);return{lat:e+i.lat,lon:t+i.lon}},gcj_decrypt:function(e,t){if(this.outOfChina(e,t))return{lat:e,lon:t};var i=this.delta(e,t);return{lat:e-i.lat,lon:t-i.lon}},gcj_decrypt_exact:function(e,t){var i,n,o=.01,a=1e-9,r=o,s=o,l=e-r,c=t-s,d=e+r,h=t+s,p=0;while(1){i=(l+d)/2,n=(c+h)/2;var u=this.gcj_encrypt(i,n);if(r=u.lat-e,s=u.lon-t,Math.abs(r)<a&&Math.abs(s)<a)break;if(r>0?d=i:l=i,s>0?h=n:c=n,++p>1e4)break}return{lat:i,lon:n}},bd_encrypt:function(e,t){var i=t,n=e,o=Math.sqrt(i*i+n*n)+2e-5*Math.sin(n*this.x_pi),a=Math.atan2(n,i)+3e-6*Math.cos(i*this.x_pi),r=o*Math.cos(a)+.0065,s=o*Math.sin(a)+.006;return{lat:s,lon:r}},bd_decrypt:function(e,t){var i=t-.0065,n=e-.006,o=Math.sqrt(i*i+n*n)-2e-5*Math.sin(n*this.x_pi),a=Math.atan2(n,i)-3e-6*Math.cos(i*this.x_pi),r=o*Math.cos(a),s=o*Math.sin(a);return{lat:s,lon:r}},mercator_encrypt:function(e,t){var i=20037508.34*t/180,n=Math.log(Math.tan((90+e)*this.PI/360))/(this.PI/180);return n=20037508.34*n/180,{lat:n,lon:i}},mercator_decrypt:function(e,t){var i=t/20037508.34*180,n=e/20037508.34*180;return n=180/this.PI*(2*Math.atan(Math.exp(n*this.PI/180))-this.PI/2),{lat:n,lon:i}},distance:function(e,t,i,n){var o=6371e3,a=Math.cos(e*this.PI/180)*Math.cos(i*this.PI/180)*Math.cos((t-n)*this.PI/180),r=Math.sin(e*this.PI/180)*Math.sin(i*this.PI/180),s=a+r;s>1&&(s=1),s<-1&&(s=-1);var l=Math.acos(s),c=l*o;return c},outOfChina:function(e,t){return t<72.004||t>137.8347||(e<.8293||e>55.8271)},transformLat:function(e,t){var i=2*e-100+3*t+.2*t*t+.1*e*t+.2*Math.sqrt(Math.abs(e));return i+=2*(20*Math.sin(6*e*this.PI)+20*Math.sin(2*e*this.PI))/3,i+=2*(20*Math.sin(t*this.PI)+40*Math.sin(t/3*this.PI))/3,i+=2*(160*Math.sin(t/12*this.PI)+320*Math.sin(t*this.PI/30))/3,i},transformLon:function(e,t){var i=300+e+2*t+.1*e*e+.1*e*t+.1*Math.sqrt(Math.abs(e));return i+=2*(20*Math.sin(6*e*this.PI)+20*Math.sin(2*e*this.PI))/3,i+=2*(20*Math.sin(e*this.PI)+40*Math.sin(e/3*this.PI))/3,i+=2*(150*Math.sin(e/12*this.PI)+300*Math.sin(e/30*this.PI))/3,i}},f=u;function m(e){e.scene.camera.flyTo({destination:n["a"].fromDegrees(114.2827,30.4434,500),orientation:{heading:o["a"].toRadians(327.95),pitch:o["a"].toRadians(-30.39),roll:0}});var t=a["a"].createIfNeeded("./data/wuhan-car");t.fetchText().then((function(t){var i={stepsRange:{start:0,end:50},trails:20,duration:75},o=i.stepsRange.end-i.stepsRange.start,a=[],u=[],m=new r["a"](53/255,57/255,1,.8),y=new r["a"](65/255,105/255,225/255,.8),v=new r["a"](1,250/255,250/255,.2);t=t.split("\n");for(var g=0,w=new s["a"],b=180/Math.PI,P=0,C=0;C<t.length;C++){var _=t[C].split(","),I=[];_.length>g&&(g=_.length);for(var T=[],M=0;M<_.length;M+=2){I.push([_[M],_[M+1]]);var E=new l["a"],D=new n["a"](_[M],_[M+1],0);w.unproject(D,E);var L=E.latitude*b,A=E.longitude*b,x=f.bd_decrypt(L,A),S=f.gcj_decrypt(x.lat,x.lon);T.push(S.lon),T.push(S.lat),T.push(P);var k=e.entities.add({position:n["a"].fromDegrees(S.lon,S.lat,P),nameID:M,billboard:{image:"./images/c2.png",width:5,height:5,color:v}});k.isAvailable=function(e){return function(t){if(!Object(c["a"])(t))throw new d["a"]("time is required.");var n=h["a"].toDate(t).getTime()/i.duration,a=n%o+i.stepsRange.start,r=r||10;return!!(a&&e.nameID>a-r&&e.nameID<a)&&(e.billboard.color._value.alpha=.8*(e.nameID-a+r)/r,!0)}}(k),a.push(k)}u[C]=e.entities.add({polyline:{positions:n["a"].fromDegreesArrayHeights(T),width:2,material:new p["a"]({color:m,outlineWidth:.1,outlineColor:y})}})}e.scene.camera.setView({destination:n["a"].fromDegrees(114.2827,30.4434,126468)})})).otherwise((function(e){}))}},"801b":function(e,t,i){"use strict";i.d(t,"b",(function(){return s})),i.d(t,"a",(function(){return l}));var n,o=i("1863"),a=i("be18"),r=i("2f48");function s(e){var t,i,s={looking:!1,moveForward:!1,moveBackward:!1,moveUp:!1,moveDown:!1,moveLeft:!1,moveRight:!1},l=new o["a"](e.canvas);function c(e){switch(e){case"W".charCodeAt(0):return"moveForward";case"S".charCodeAt(0):return"moveBackward";case"Q".charCodeAt(0):return"moveUp";case"E".charCodeAt(0):return"moveDown";case"D".charCodeAt(0):return"moveRight";case"A".charCodeAt(0):return"moveLeft";default:return}}l.setInputAction((function(e){s.looking=!0,i=t=a["a"].clone(e.position)}),r["a"].LEFT_DOWN),l.setInputAction((function(e){i=e.endPosition}),r["a"].MOUSE_MOVE),l.setInputAction((function(){s.looking=!1}),r["a"].LEFT_UP),document.addEventListener("keydown",(function(e){var t=c(e.keyCode);"undefined"!==typeof t&&(s[t]=!0)}),!1),document.addEventListener("keyup",(function(e){var t=c(e.keyCode);"undefined"!==typeof t&&(s[t]=!1)}),!1),n=function(){var n=e.camera;if(s.looking){var o=e.canvas.clientWidth,a=e.canvas.clientHeight,r=(i.x-t.x)/o,l=-(i.y-t.y)/a,c=.05;n.lookRight(r*c),n.lookUp(l*c)}var d=e.scene.globe.ellipsoid.cartesianToCartographic(n.position).height,h=d/100;s.moveForward&&n.moveForward(h),s.moveBackward&&n.moveBackward(h),s.moveUp&&n.moveUp(h),s.moveDown&&n.moveDown(h),s.moveLeft&&n.moveLeft(h),s.moveRight&&n.moveRight(h)},e.clock.onTick.addEventListener(n)}function l(e){e.clock.onTick.removeEventListener(n)}},"8ada":function(e,t,i){var n,o,a;i("7037").default;i("13d5"),i("d3b7"),i("5cc6"),i("9a8c"),i("a975"),i("735e"),i("c1ac"),i("d139"),i("3a7b"),i("d5d6"),i("82f8"),i("e91f"),i("60bd"),i("5f96"),i("3280"),i("3fcc"),i("ca91"),i("25a1"),i("cd26"),i("3c5d"),i("2954"),i("649e"),i("219c"),i("170b"),i("b39a"),i("72f7"),i("99af"),i("a434"),i("fb6a"),i("25f0"),i("159b"),i("a15b"),i("d81d"),function(i,r){o=[],n=r,a="function"===typeof n?n.apply(t,o):n,void 0===a||(e.exports=a)}(0,(function(){var e=function(e){return e.reduce((function(e,t){return 2*e+t}),0)},t=function(e){for(var t=[],i=7;i>=0;i--)t.push(!!(e&1<<i));return t},i=function(e){this.data=e,this.len=this.data.length,this.pos=0,this.readByte=function(){if(this.pos>=this.data.length)throw new Error("Attempted to read past end of stream.");return e instanceof Uint8Array?e[this.pos++]:255&e.charCodeAt(this.pos++)},this.readBytes=function(e){for(var t=[],i=0;i<e;i++)t.push(this.readByte());return t},this.read=function(e){for(var t="",i=0;i<e;i++)t+=String.fromCharCode(this.readByte());return t},this.readUnsigned=function(){var e=this.readBytes(2);return(e[1]<<8)+e[0]}},n=function(e,t){var i,n,o=0,a=function(e){for(var i=0,n=0;n<e;n++)t.charCodeAt(o>>3)&1<<(7&o)&&(i|=1<<n),o++;return i},r=[],s=1<<e,l=s+1,c=e+1,d=[],h=function(){d=[],c=e+1;for(var t=0;t<s;t++)d[t]=[t];d[s]=[],d[l]=null};while(1)if(n=i,i=a(c),i!==s){if(i===l)break;if(i<d.length)n!==s&&d.push(d[n].concat(d[i][0]));else{if(i!==d.length)throw new Error("Invalid LZW code.");d.push(d[n].concat(d[n][0]))}r.push.apply(r,d[i]),d.length===1<<c&&c<12&&c++}else h();return r},o=function(i,o){o||(o={});var a=function(e){for(var t=[],n=0;n<e;n++)t.push(i.readBytes(3));return t},r=function(){var e,t;t="";do{e=i.readByte(),t+=i.read(e)}while(0!==e);return t},s=function(){var n={};if(n.sig=i.read(3),n.ver=i.read(3),"GIF"!==n.sig)throw new Error("Not a GIF file.");n.width=i.readUnsigned(),n.height=i.readUnsigned();var r=t(i.readByte());n.gctFlag=r.shift(),n.colorRes=e(r.splice(0,3)),n.sorted=r.shift(),n.gctSize=e(r.splice(0,3)),n.bgColor=i.readByte(),n.pixelAspectRatio=i.readByte(),n.gctFlag&&(n.gct=a(1<<n.gctSize+1)),o.hdr&&o.hdr(n)},l=function(n){var a=function(n){i.readByte();var a=t(i.readByte());n.reserved=a.splice(0,3),n.disposalMethod=e(a.splice(0,3)),n.userInput=a.shift(),n.transparencyGiven=a.shift(),n.delayTime=i.readUnsigned(),n.transparencyIndex=i.readByte(),n.terminator=i.readByte(),o.gce&&o.gce(n)},s=function(e){e.comment=r(),o.com&&o.com(e)},l=function(e){i.readByte();e.ptHeader=i.readBytes(12),e.ptData=r(),o.pte&&o.pte(e)},c=function(e){var t=function(e){i.readByte();e.unknown=i.readByte(),e.iterations=i.readUnsigned(),e.terminator=i.readByte(),o.app&&o.app.NETSCAPE&&o.app.NETSCAPE(e)},n=function(e){e.appData=r(),o.app&&o.app[e.identifier]&&o.app[e.identifier](e)};i.readByte();switch(e.identifier=i.read(8),e.authCode=i.read(3),e.identifier){case"NETSCAPE":t(e);break;default:n(e);break}},d=function(e){e.data=r(),o.unknown&&o.unknown(e)};switch(n.label=i.readByte(),n.label){case 249:n.extType="gce",a(n);break;case 254:n.extType="com",s(n);break;case 1:n.extType="pte",l(n);break;case 255:n.extType="app",c(n);break;default:n.extType="unknown",d(n);break}},c=function(s){var l=function(e,t){for(var i=new Array(e.length),n=e.length/t,o=function(n,o){var a=e.slice(o*t,(o+1)*t);i.splice.apply(i,[n*t,t].concat(a))},a=[0,4,2,1],r=[8,8,4,2],s=0,l=0;l<4;l++)for(var c=a[l];c<n;c+=r[l])o(c,s),s++;return i};s.leftPos=i.readUnsigned(),s.topPos=i.readUnsigned(),s.width=i.readUnsigned(),s.height=i.readUnsigned();var c=t(i.readByte());s.lctFlag=c.shift(),s.interlaced=c.shift(),s.sorted=c.shift(),s.reserved=c.splice(0,2),s.lctSize=e(c.splice(0,3)),s.lctFlag&&(s.lct=a(1<<s.lctSize+1)),s.lzwMinCodeSize=i.readByte();var d=r();s.pixels=n(s.lzwMinCodeSize,d),s.interlaced&&(s.pixels=l(s.pixels,s.width)),o.img&&o.img(s)},d=function e(){var t={};switch(t.sentinel=i.readByte(),String.fromCharCode(t.sentinel)){case"!":t.type="ext",l(t);break;case",":t.type="img",c(t);break;case";":t.type="eof",o.eof&&o.eof(t);break;default:throw new Error("Unknown block: 0x"+t.sentinel.toString(16))}"eof"!==t.type&&setTimeout(e,0)},h=function(){s(),setTimeout(d,0)};h()},a=function(e){var t,n,a={vp_l:0,vp_t:0,vp_w:null,vp_h:null,c_w:null,c_h:null};for(var r in e)a[r]=e[r];a.vp_w&&a.vp_h&&(a.is_vp=!0);var s=null,l=!1,c=null,d=null,h=null,p=null,u=null,f=null,m=null,y=!0,v=!0,g=!1,w=[],b=[],P=a.gif;"undefined"==typeof a.auto_play&&(a.auto_play=!P.getAttribute("rel:auto_play")||"1"==P.getAttribute("rel:auto_play"));var C,_,I,T,M=a.hasOwnProperty("on_end")?a.on_end:null,E=a.hasOwnProperty("loop_delay")?a.loop_delay:0,D=a.hasOwnProperty("loop_mode")?a.loop_mode:"auto",L=!a.hasOwnProperty("draw_while_loading")||a.draw_while_loading,A=!!L&&(!a.hasOwnProperty("show_progress_bar")||a.show_progress_bar),x=a.hasOwnProperty("progressbar_height")?a.progressbar_height:25,S=a.hasOwnProperty("progressbar_background_color")?a.progressbar_background_color:"rgba(255,255,255,0.4)",k=a.hasOwnProperty("progressbar_foreground_color")?a.progressbar_foreground_color:"rgba(255,0,22,.8)",O=function(){c=null,d=null,u=h,h=null,f=null},R=function(){try{o(t,K)}catch(e){j("parse")}},F=function(e,t){C.width=e*J(),C.height=t*J(),I.style.minWidth=e*J()+"px",T.width=e,T.height=t,T.style.width=e+"px",T.style.height=t+"px",T.getContext("2d").setTransform(1,0,0,1,0,0)},H=function(e,t){b[e]?("undefined"!==typeof t.x&&(b[e].x=t.x),"undefined"!==typeof t.y&&(b[e].y=t.y)):b[e]=t},N=function(e,t,i){if(i&&A){var n,o,r,s,l=x;if(a.is_vp)g?(r=(a.vp_t+a.vp_h-l)/J(),l/=J(),n=a.vp_l/J(),o=n+e/t*(a.vp_w/J()),s=C.width/J()):(r=a.vp_t+a.vp_h-l,l=l,n=a.vp_l,o=n+e/t*a.vp_w,s=C.width);else r=(C.height-l)/(g?J():1),o=e/t*C.width/(g?J():1),s=C.width/(g?J():1),l/=g?J():1;_.fillStyle=S,_.fillRect(o,r,s-o,l),_.fillStyle=k,_.fillRect(0,r,o,l)}},j=function(e){var t=function(){_.fillStyle="black",_.fillRect(0,0,a.c_w?a.c_w:n.width,a.c_h?a.c_h:n.height),_.strokeStyle="red",_.lineWidth=3,_.moveTo(0,0),_.lineTo(a.c_w?a.c_w:n.width,a.c_h?a.c_h:n.height),_.moveTo(0,a.c_h?a.c_h:n.height),_.lineTo(a.c_w?a.c_w:n.width,0),_.stroke()};s=e,n={width:P.width,height:P.height},w=[],t()},U=function(e){n=e,F(n.width,n.height)},B=function(e){V(),O(),c=e.transparencyGiven?e.transparencyIndex:null,d=e.delayTime,h=e.disposalMethod},V=function(){f&&(w.push({data:f.getImageData(0,0,n.width,n.height),delay:d}),b.push({x:0,y:0}))},z=function(e){f||(f=T.getContext("2d"));var t=w.length,i=e.lctFlag?e.lct:n.gct;t>0&&(3===u?null!==p?f.putImageData(w[p].data,0,0):f.clearRect(m.leftPos,m.topPos,m.width,m.height):p=t-1,2===u&&f.clearRect(m.leftPos,m.topPos,m.width,m.height));var o=f.getImageData(e.leftPos,e.topPos,e.width,e.height);e.pixels.forEach((function(e,t){e!==c&&(o.data[4*t+0]=i[e][0],o.data[4*t+1]=i[e][1],o.data[4*t+2]=i[e][2],o.data[4*t+3]=255)})),f.putImageData(o,e.leftPos,e.topPos),g||(_.scale(J(),J()),g=!0),L&&(_.drawImage(T,0,0),L=a.auto_play),m=e},W=function(){var e=-1,t=0,i=function(){var t=v?1:-1;return(e+t+w.length)%w.length},n=function(t){e+=t,r()},o=function(){var o=!1,a=function(){null!==M&&M(P),t++,!1!==D||t<0?r():(o=!1,y=!1)},r=function t(){if(o=y,o){n(1);var r=10*w[e].delay;r||(r=100);var s=i();0===s?(r+=E,setTimeout(a,r)):setTimeout(t,r)}};return function(){o||setTimeout(r,0)}}(),r=function(){var t;e=parseInt(e,10),e>w.length-1&&(e=0),e<0&&(e=0),t=b[e],T.getContext("2d").putImageData(w[e].data,t.x,t.y),_.globalCompositeOperation="copy",_.drawImage(T,0,0)},l=function(){y=!0,o()},c=function(){y=!1};return{init:function(){s||(a.c_w&&a.c_h||_.scale(J(),J()),a.auto_play?o():(e=0,r()))},step:o,play:l,pause:c,playing:y,move_relative:n,current_frame:function(){return e},length:function(){return w.length},move_to:function(t){e=t,r()}}}(),G=function(e){N(t.pos,t.data.length,e)},X=function(){},Y=function(e,t){return function(i){e(i),G(t)}},K={hdr:Y(U),gce:Y(B),com:Y(X),app:{NETSCAPE:Y(X)},img:Y(z,!0),eof:function(e){V(),G(!1),a.c_w&&a.c_h||(C.width=n.width*J(),C.height=n.height*J()),W.init(),l=!1,Q&&Q(P)}},q=function(){var e=P.parentNode,t=document.createElement("div");C=document.createElement("canvas"),_=C.getContext("2d"),I=document.createElement("div"),T=document.createElement("canvas"),t.width=C.width=P.width,t.height=C.height=P.height,I.style.minWidth=P.width+"px",t.className="jsgif",I.className="jsgif_toolbar",t.appendChild(C),t.appendChild(I),e.insertBefore(t,P),e.removeChild(P),a.c_w&&a.c_h&&F(a.c_w,a.c_h),Z=!0},J=function(){var e;return e=a.max_width&&n&&n.width>a.max_width?a.max_width/n.width:1,e},Z=!1,Q=!1,$=function(e){return!l&&(Q=e||!1,l=!0,w=[],O(),p=null,u=null,f=null,m=null,!0)};return{play:W.play,pause:W.pause,move_relative:W.move_relative,move_to:W.move_to,get_playing:function(){return y},get_canvas:function(){return C},get_canvas_scale:function(){return J()},get_loading:function(){return l},get_auto_play:function(){return a.auto_play},get_length:function(){return W.length()},get_current_frame:function(){return W.current_frame()},load_url:function(e,n){if($(n)){var o=new XMLHttpRequest;o.open("GET",e,!0),"overrideMimeType"in o?o.overrideMimeType("text/plain; charset=x-user-defined"):"responseType"in o?o.responseType="arraybuffer":o.setRequestHeader("Accept-Charset","x-user-defined"),o.onloadstart=function(){Z||q()},o.onload=function(e){200!=this.status&&j("xhr - response"),"response"in this||(this.response=new VBArray(this.responseText).toArray().map(String.fromCharCode).join(""));var n=this.response;n.toString().indexOf("ArrayBuffer")>0&&(n=new Uint8Array(n)),t=new i(n),setTimeout(R,0)},o.onprogress=function(e){e.lengthComputable&&N(e.loaded,e.total,!0)},o.onerror=function(){j("xhr")},o.send()}},load:function(e){this.load_url(P.getAttribute("rel:animated_src")||P.src,e)},load_raw:function(e,n){$(n)&&(Z||q(),t=new i(e),setTimeout(R,0))},set_frame_offset:H}};return a}))},"9a45":function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));i("a9e3");var n=i("0c80"),o=i("be18");function a(e,t){t||(t={});var i=Number((new Date).getTime());if(this.id=i,this.style=t.style,this.viewer=e,this.viewer&&(this.scene=this.viewer.scene,this.camera=this.viewer.camera,this.mapContainer=this.viewer.container.id,this.rendHandler=null,this.mapContainer)){var a;this.trackPopUpId="trackPopUp"+i,this.promptContentId="promptContent"+i,this.promptDivId="promptDiv"+i,this.trackPopUpContentId="trackPopUpContent"+i,this.closeBtnId="closeBtn"+i;var r=300,s=500;if(a=window.document.createElement("div"),a.id=this.trackPopUpId,a.className="trackPopUp",this.content=t.content||"",t.type&&1!=t.type?a.innerHTML='<div id="'+this.trackPopUpContentId+'" class="cesium-popup" style="top:0;left:0;"><a class="cesium-popup-close-button" href="javascript:void(0)" id="'+this.closeBtnId+'">×</a><div class="cesium-popup-content-wrapper" id="'+this.promptDivId+'"><div id="trackPopUpLink" class="cesium-popup-content" style="max-width: '+r+"px;max-height: "+s+'px"><span class="popupContent" id="'+this.promptContentId+'">'+this.content+'</span></div></div><div class="cesium-popup-tip-container"><div class="cesium-popup-tip"></div></div></div>':a.innerHTML='<div id="'+this.trackPopUpContentId+'" class="cesium-popup" style="top:0;left:0;"><div class="cesium-prompt-content-wrapper" id="'+this.promptDivId+'"><div id="trackPopUpLink" class="cesium-popup-content" style="max-width: '+r+"px;max-height: "+s+'px"><span class="promptContent" id="'+this.promptContentId+'">'+this.content+"</span></div></div></div>",window.document.getElementById(this.mapContainer).appendChild(a),window.document.getElementById(this.trackPopUpId).style.display="block",this.offset=t.offset||{},this.infoDiv=window.document.getElementById(this.trackPopUpId),this.trackPopUpContent=window.document.getElementById(this.trackPopUpContentId),this.promptDiv=window.document.getElementById(this.promptDivId),this.promptContent=window.document.getElementById(this.promptContentId),this.trackPopUpLink=window.document.getElementById(this.promptContentId),this.popupCartesian=t.popupCartesian,this.rendHandler=null,this.show=void 0==t.show||t.show,(2!=t.type||this.popupCartesian)&&t.type&&1!=t.type&&this.popupCartesian){var l=window.document.getElementById(this.closeBtnId),c=this;l.addEventListener("click",(function(){c.setVisible(!1)})),this.rendHandler=this.viewer.scene.postRender.addEventListener((function(){if(c.popupCartesian){var e=n["a"].wgs84ToWindowCoordinates(c.scene,c.popupCartesian);c.trackPopUpContent.style.left=e.x+(c.offset.x||0)+Math.ceil(-c.trackPopUpContent.offsetWidth/2)+"px",c.trackPopUpContent.style.top=e.y+(c.offset.y||0)+-c.trackPopUpContent.offsetHeight+"px";var t=!1,i=c.popupCartesian,a=c.camera.position,r=c.scene.globe.ellipsoid.cartesianToCartographic(a).height;r+=1*c.scene.globe.ellipsoid.maximumRadius,o["a"].distance(a,i)>r||(t=!0),t&&c.show?c.infoDiv&&(c.infoDiv.style.display="block"):c.infoDiv&&(c.infoDiv.style.display="none")}}))}}}a.prototype={setHtml:function(e){e&&this.trackPopUpLink&&(this.trackPopUpLink.innerText=e)},destroy:function(){this.infoDiv&&this.mapContainer&&(this.infoDiv.style.display="none",window.document.getElementById(this.mapContainer).removeChild(this.infoDiv),this.infoDiv=null),this.rendHandler&&(this.rendHandler(),this.rendHandler=null)},displayPrompt:function(e){this.infoDiv&&(this.infoDiv.style.display=e?"block":"none")},updateStyle:function(e){e||(e={}),this.promptDiv.style.background=e.rgba||"rgba(0,0,0,.4)",this.promptContent.style.color=e.fontColor||"white"},updatePrompt:function(e,t){e&&(this.infoDiv.style.display="block",this.trackPopUpContent.style.left=e.x+(this.offset.x||30)+"px",this.trackPopUpContent.style.top=e.y+(this.offset.y||30)+"px",this.setHtml(t))},setVisible:function(e){void 0==e&&(e=!0),e?(this.infoDiv.style.display="block",this.show=!0):(this.infoDiv.style.display="none",this.show=!1)}}},b375:function(e,t,i){"use strict";i.d(t,"a",(function(){return p}));var n=i("be18"),o=i("52f0"),a=i("f806"),r=i("a22d"),s=i("d6db"),l=i("d9403"),c=i("aea3"),d=i("bd8d"),h=i("894b");i("1757"),i("2d36"),i("b66c");function p(e){var t=4e5,i=n["a"].fromDegrees(116.39,39.9),p=o["a"].multiplyByTranslation(a["a"].eastNorthUpToFixedFrame(i),new n["a"](0,0,.5*t),new o["a"]),u=new r["a"]({length:t,topRadius:0,bottomRadius:.5*t,vertexFormat:s["a"].MaterialSupport.TEXTURED.vertexFormat}),f=new l["a"]({geometry:u,modelMatrix:p}),m="uniform vec4 color; \n uniform float repeat; \n uniform float offset; \n uniform float thickness;\n\n//设置图形外观材质\nczm_material czm_getMaterial(czm_materialInput materialInput){\n    czm_material material = czm_getDefaultMaterial(materialInput); //获取内置的默认材质\n    float sp = 1.0/repeat; //重复贴图\n    vec2 st = materialInput.st; //二维纹理坐标\n    float dis = distance(st, vec2(0.5)); //计算距离\n    float m = mod(dis + offset, sp); //间隔\n    float a = step(sp*(1.0-thickness), m);//线条拼色 \n\t//修改材质\n    material.diffuse = color.rgb;\n    material.alpha = a * color.a;\n\treturn material;\n}",y=new c["a"]({fabric:{type:"VtxfShader1",uniforms:{color:new d["a"](.2,1,0,1),repeat:30,offset:0,thickness:.3},source:m},translucent:!1}),v=new s["a"]({material:y,faceForward:!1,closed:!0}),g=e.scene.primitives.add(new h["a"]({geometryInstances:[f],appearance:v}));e.scene.preUpdate.addEventListener((function(){var e=g.appearance.material.uniforms.offset;e-=.001,e>1&&(e=0),g.appearance.material.uniforms.offset=e}))}},cb1b:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("1757"),o=i("be18"),a=i("5a6c"),r=i("138e");function s(){var e=document.getElementById("trailer"),t=viewer.entities.add({polygon:{hierarchy:new n["a"](o["a"].fromDegreesArray([108.93456287429599,32.70944634587841,108.93487366932715,32.709390453247536,108.93481269689903,32.70918075356655,108.93450813178055,32.709239016587865])),classificationType:a["a"].BOTH}});e=document.getElementById("trailer");t.polygon.material=e;new r["a"]({clock:viewer.clock,element:e})}},d5a5:function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));i("d81d");var n,o=i("ec35"),a=i("9c57"),r=i("0836"),s=i.n(r);function l(e){var t=s()(o);n=new t(e,a["a"].feeds.map((function(e){var t=e.gps_lon,i=e.gps_lat,n=e.s_d0;return{x:t,y:i,value:n}})),[120.106188593,21.9705713974,121.951243931,25.2954588893]),setTimeout((function(){return n.destory()}),5e4)}},dbe8:function(e,t,i){"use strict";i.d(t,"a",(function(){return g})),i.d(t,"b",(function(){return w}));i("d3b7"),i("ddb0"),i("25f0");var n=i("21d7"),o=i("7d5d"),a=i("4820"),r=i("4f04"),s=i("2f63"),l=i("157d"),c=i("d4ed"),d=i("a58e"),h=i("bd8d"),p=i("be18"),u=i("05b6"),f=i("b83c"),m=i("984f"),y=i("9201"),v=i("509b");function g(e){function t(e){this._name=e,this._changed=new n["a"],this._error=new n["a"],this._isLoading=!1,this._loading=new n["a"],this._entityCollection=new o["a"],this._seriesNames=[],this._seriesToDisplay=void 0,this._heightScale=1e7,this._entityCluster=new a["a"]}document.createElement("toolbar"),Object.defineProperties(t.prototype,{name:{get:function(){return this._name}},clock:{value:void 0,writable:!1},entities:{get:function(){return this._entityCollection}},isLoading:{get:function(){return this._isLoading}},changedEvent:{get:function(){return this._changed}},errorEvent:{get:function(){return this._error}},loadingEvent:{get:function(){return this._loading}},seriesNames:{get:function(){return this._seriesNames}},seriesToDisplay:{get:function(){return this._seriesToDisplay},set:function(e){this._seriesToDisplay=e;var t=this._entityCollection,i=t.values;t.suspendEvents();for(var n=0;n<i.length;n++){var o=i[n];o.show=e===o.seriesName}t.resumeEvents()}},heightScale:{get:function(){return this._heightScale},set:function(e){if(e<=0)throw new r["a"]("value must be greater than 0");this._heightScale=e}},show:{get:function(){return this._entityCollection},set:function(e){this._entityCollection=e}},clustering:{get:function(){return this._entityCluster},set:function(e){if(!Object(s["a"])(e))throw new r["a"]("value must be defined.");this._entityCluster=e}}}),t.prototype.loadUrl=function(e){if(!Object(s["a"])(e))throw new r["a"]("url is required.");var t=Object(l["a"])(e);this._name!==t&&(this._name=t,this._changed.raiseEvent(this));var i=this;return c["a"].fetchJson(e).then((function(t){return i.load(t,e)})).otherwise((function(e){return this._setLoading(!1),i._error.raiseEvent(i,e),d["a"].reject(e)}))},t.prototype.load=function(e){if(!Object(s["a"])(e))throw new r["a"]("data is required.");this._setLoading(!0),this._seriesNames.length=0,this._seriesToDisplay=void 0;var t=this.heightScale,i=this._entityCollection;i.suspendEvents(),i.removeAll();for(var n=0;n<e.length;n++){var o=e[n],a=o[0],l=o[1];this._seriesNames.push(a);var c=0===n;c&&(this._seriesToDisplay=a);for(var d=0;d<l.length;d+=3){var g=l[d],w=l[d+1],b=l[d+2];if(0!==b){var P=h["a"].fromHsl(.6-.5*b,1,.5),C=p["a"].fromDegrees(w,g,0),_=p["a"].fromDegrees(w,g,b*t),I=new u["a"];I.material=new f["a"](P),I.width=new m["a"](2),I.arcType=new m["a"](y["a"].NONE),I.positions=new m["a"]([C,_]);var T=new v["a"]({id:a+" index "+d.toString(),show:c,polyline:I,seriesName:a});i.add(T)}}}i.resumeEvents(),this._changed.raiseEvent(this),this._setLoading(!1)},t.prototype._setLoading=function(e){this._isLoading!==e&&(this._isLoading=e,this._loading.raiseEvent(this,e))};var i=new t;i.loadUrl("./config/json/population909500.json").then((function(){function e(e){return function(){i.seriesToDisplay=e}}for(var t=0;t<i.seriesNames.length;t++){var n=i.seriesNames[t];Sandcastle.addToolbarButton(n,e(n))}})),e.clock.shouldAnimate=!1,e.dataSources.add(i)}function w(e){if(e.dataSources.length>0)for(var t=0;t<e.dataSources.length;t++){var i=e.dataSources.get(t);e.dataSources.remove(i)}}},e67a:function(e,t,i){"use strict";function n(e){var t=1e3,i=[],n=["北京","天津","上海","重庆","石家庄","太原","呼和浩特","哈尔滨","长春","沈阳","济南","南京","合肥","杭州","南昌","福州","郑州","武汉","长沙","广州","南宁","西安","银川","兰州","西宁","乌鲁木齐","成都","贵阳","昆明","拉萨","海口"];while(t--){var o=mapv.utilCityCenter.getCenterByCityName(n[parseInt(Math.random()*n.length)]),a=mapv.utilCityCenter.getCenterByCityName(n[parseInt(Math.random()*n.length)]);i.push({geometry:{type:"LineString",coordinates:[[o.lng-1+1*Math.random(),o.lat-1+1*Math.random()],[a.lng-1+1*Math.random(),a.lat-1+1*Math.random()]]},count:30*Math.random()})}var r=new mapv.DataSet(i),s={strokeStyle:"rgba(255, 250, 50, 0.3)",shadowColor:"rgba(255, 250, 50, 1)",shadowBlur:20,lineWidth:.7,draw:"simple"};mapv.cesiumMapLayer(e,r,s)}i.d(t,"a",(function(){return n}))},eff4:function(e,t,i){"use strict";i.d(t,"a",(function(){return w}));i("075b");var n=i("1863"),o=(i("a9e3"),i("b680"),i("2f48")),a=i("2f63"),r=i("bd8d"),s=i("2d36"),l=i("5af0"),c=i("9a45");function d(e,t){this.objId=Number((new Date).getTime()+""+Number(1e3*Math.random()).toFixed(0)),this.viewer=e,this.handler=new n["a"](this.viewer.scene.canvas),this.modifyHandler=new n["a"](this.viewer.scene.canvas),this.polyline=null,this.positions=[],this.style=t,this.floatPoint=null,this.linePointArr=[],this.modifyPoint=null,this.state=0,this.prompt=new c["a"](e)}d.prototype={start:function(e){var t=this;this.handler.setInputAction((function(e){var i=t.getCatesian3FromPX(e.position,t.viewer,[t.polyline]);0==t.positions.length&&(t.positions.push(i.clone()),t.floatPoint=t.createPoint(i.clone())),t.positions.push(i);var n=t.createPoint(i);n.wz=t.linePointArr.length,t.linePointArr.push(n)}),o["a"].LEFT_CLICK),this.handler.setInputAction((function(e){if(t.positions.length<1)t.prompt.updatePrompt(e.endPosition,"单击开始绘制");else{t.prompt.updatePrompt(e.endPosition,"单击新增，右键结束");var i=t.getCatesian3FromPX(e.endPosition,t.viewer,[t.polyline]);t.floatPoint&&t.floatPoint.position.setValue(i),2==t.positions.length&&(Object(a["a"])(t.polyline)||(t.polyline=t.createPolyline())),t.polyline&&(t.positions.pop(),t.positions.push(i))}}),o["a"].MOUSE_MOVE),this.handler.setInputAction((function(i){if(t.polyline){var n=t.getCatesian3FromPX(i.position,t.viewer,[t.polyline]);t.state=1,t.handler.destroy(),t.floatPoint&&(t.floatPoint&&(t.floatPoint.show=!1),t.floatPoint=null),t.positions.pop(),t.positions.push(n);var o=t.createPoint(n);o.wz=t.linePointArr.length,t.linePointArr.push(o),t.prompt&&(t.prompt.destroy(),t.prompt=null),e&&e(t.polyline)}}),o["a"].RIGHT_CLICK)},startModify:function(e){if(2==this.state||1==this.state){this.modifyHandler||(this.modifyHandler=new n["a"](this.viewer.scene.canvas));for(var t=this,i=0;i<t.linePointArr.length;i++){var r=t.linePointArr[i];r&&(r.show=!0)}this.modifyHandler.setInputAction((function(i){if(t.polyline){var n=t.viewer.scene.pick(i.position);if(Object(a["a"])(n)&&n.id)n.id.objId||(t.modifyPoint=n.id),t.forbidDrawWorld(!0);else{for(var o=0;o<t.linePointArr.length;o++){var r=t.linePointArr[o];r&&(r.show=!1)}t.modifyHandler&&(t.modifyHandler.destroy(),t.modifyHandler=null,e&&e(t.polyline)),t.state=2}}}),o["a"].LEFT_DOWN),this.modifyHandler.setInputAction((function(e){if(!(t.positions.length<1)&&t.modifyPoint){var i=t.getCatesian3FromPX(e.endPosition,t.viewer,[t.polyline,t.modifyPoint]);i&&(t.modifyPoint.position.setValue(i),t.positions[t.modifyPoint.wz]=i)}}),o["a"].MOUSE_MOVE),this.modifyHandler.setInputAction((function(e){if(t.modifyPoint){var i=t.getCatesian3FromPX(e.position,t.viewer,[t.polyline,t.modifyPoint]);t.modifyPoint.position.setValue(i),t.positions[t.modifyPoint.wz]=i,t.modifyPoint=null,t.forbidDrawWorld(!1)}}),o["a"].LEFT_UP)}},endModify:function(e){for(var t=0;t<this.linePointArr.length;t++){var i=this.linePointArr[t];i&&(i.show=!1)}this.modifyHandler&&(this.modifyHandler.destroy(),this.modifyHandler=null,e&&e(this.polyline)),this.state=2},createPoint:function(e){if(e)return this.viewer.entities.add({position:e,point:{pixelSize:5,color:r["a"].YELLOW,outlineWidth:2,outlineColor:r["a"].DARKRED,disableDepthTestDistance:Number.POSITIVE_INFINITY},show:!1})},createPolyline:function(){var e=this,t=this.viewer.entities.add({polyline:{positions:new s["a"]((function(){return e.positions}),!1),show:!0,material:this.style.material||r["a"].YELLOW,width:this.style.width||3,clampToGround:void 0!=this.style.clampToGround}});return t.objId=this.objId,t},getPositions:function(){return this.positions},getAttr:function(){if(this.polyline){var e={},t=this.polyline.polyline;return e.width=t.width._value,e.clampToGround=t.clampToGround._value,e.color=t.material.color._value,e.lineType="solid",e}},setStyle:function(e){},remove:function(){this.polyline&&(this.state=0,this.viewer.entities.remove(this.polyline),this.polyline=null)},setVisible:function(e){this.polyline.show=e},forbidDrawWorld:function(e){this.viewer.scene.screenSpaceCameraController.enableRotate=!e,this.viewer.scene.screenSpaceCameraController.enableTilt=!e,this.viewer.scene.screenSpaceCameraController.enableTranslate=!e,this.viewer.scene.screenSpaceCameraController.enableInputs=!e},destroy:function(){this.linePointArr=[],this.handler&&(this.handler.destroy(),this.handler=null),this.modifyHandler&&(this.modifyHandler.destroy(),this.modifyHandler=null),this.polyline&&(this.viewer.entities.remove(this.polyline),this.polyline=null),this.floatPoint&&(this.viewer.entities.remove(this.floatPoint),this.floatPoint=null),this.positions=[],this.style=null;for(var e=0;e<this.linePointArr.length;e++){var t=this.linePointArr[e];this.viewer.entities.remove(t)}this.linePointArr=[],this.modifyPoint=null,this.prompt&&this.prompt.destroy()},getCatesian3FromPX:function(e,t,i){var n,o=t.scene.drillPick(e);this.viewer.scene.render();for(var a=!1,r=0;r<o.length;r++){for(var s=!1,c=0;c<i.length;c++)if(i[c]&&o[r].id&&i[c].objId==o[r].id.objId){s=!0;break}s||(o[r]&&o[r].primitive||o[r]instanceof l["a"])&&(a=!0)}if(a)n=t.scene.pickPosition(e);else{var d=t.camera.getPickRay(e);if(!d)return null;n=t.scene.globe.pick(d,t.scene)}return n}};i("cb29");var h=i("1757");function p(e,t){this.objId=Number((new Date).getTime()+""+Number(1e3*Math.random()).toFixed(0)),this.viewer=e,this.handler=new n["a"](this.viewer.scene.canvas),this.modifyHandler=new n["a"](this.viewer.scene.canvas),this.polygon=null,this.polyline=null,this.positions=[],this.style=t,this.state=0,this.gonPointArr=[],this.modifyPoint=null,this.prompt=new c["a"](e)}p.prototype={start:function(e){var t=this;this.handler.setInputAction((function(e){var i=t.getCatesian3FromPX(e.position,t.viewer,[t.polygon]);0==t.positions.length&&t.positions.push(i.clone()),t.positions.push(i);var n=t.createPoint(i);n.wz=t.gonPointArr.length,t.gonPointArr.push(n)}),o["a"].LEFT_CLICK),this.handler.setInputAction((function(e){if(t.positions.length<1)t.prompt.updatePrompt(e.endPosition,"单击开始绘制");else{t.prompt.updatePrompt(e.endPosition,"单击新增，右键结束");var i=t.getCatesian3FromPX(e.endPosition,t.viewer,[t.polygon]);2==t.positions.length?Object(a["a"])(t.polyline)||(t.polyline=t.createPolyline()):Object(a["a"])(t.polygon)||(t.polygon=t.createPolygon(t.style),t.polygon.isFilter=!0,t.polygon.objId=t.objId,t.polyline&&t.viewer.entities.remove(t.polyline)),t.positions.pop(),t.positions.push(i)}}),o["a"].MOUSE_MOVE),this.handler.setInputAction((function(i){if(t.polygon){var n=t.getCatesian3FromPX(i.position,t.viewer,[t.polygon]);t.state=1,t.handler.destroy(),t.floatPoint&&(t.floatPoint&&(t.floatPoint.show=!1),t.floatPoint=null),t.positions.pop(),t.positions.push(n);var o=t.createPoint(n);o.wz=t.gonPointArr.length,t.gonPointArr.push(o),t.prompt&&(t.prompt.destroy(),t.prompt=null),e(t.polygon)}}),o["a"].RIGHT_CLICK)},createByPositions:function(e,t){if(e){var i=that.getCatesian3FromPX.lnglatArrToCartesianArr(e);if(i){this.polygon=this.createPolygon(),this.positions=i,t(this.polygon);for(var n=0;n<i.length;n++){var o=this.createPoint(i[n]);o.isFilter=!0,o.wz=this.gonPointArr.length,this.gonPointArr.push(o)}this.state=1,this.polygon.objId=this.objId}}},startModify:function(){if(1==this.state||2==this.state){this.modifyHandler||(this.modifyHandler=new n["a"](this.viewer.scene.canvas));for(var e=this,t=0;t<e.gonPointArr.length;t++){var i=e.gonPointArr[t];i&&(i.show=!0)}this.modifyHandler.setInputAction((function(t){var i=e.viewer.scene.pick(t.position);if(Object(a["a"])(i)&&i.id)i.id.objId||(e.modifyPoint=i.id),e.forbidDrawWorld(!0);else{for(var n=0;n<e.gonPointArr.length;n++){var o=e.gonPointArr[n];o&&(o.show=!1)}e.modifyHandler&&(e.modifyHandler.destroy(),e.modifyHandler=null),e.state=2}}),o["a"].LEFT_DOWN),this.modifyHandler.setInputAction((function(t){if(!(e.positions.length<1)&&e.modifyPoint){var i=e.getCatesian3FromPX(t.endPosition,e.viewer,[e.polygon,e.modifyPoint]);i&&(e.modifyPoint.position.setValue(i),e.positions[e.modifyPoint.wz]=i)}}),o["a"].MOUSE_MOVE),this.modifyHandler.setInputAction((function(t){if(e.forbidDrawWorld(!1),e.modifyPoint){var i=e.getCatesian3FromPX(t.position,e.viewer,[e.polygon,e.modifyPoint]);e.modifyPoint.position.setValue(i),e.positions[e.modifyPoint.wz]=i,e.modifyPoint=null,e.forbidDrawWorld(!1)}}),o["a"].LEFT_UP)}},endModify:function(e){for(var t=0;t<this.gonPointArr.length;t++){var i=this.gonPointArr[t];i&&(i.show=!1)}this.modifyHandler&&(this.modifyHandler.destroy(),this.modifyHandler=null),this.state=2,e&&e(this.polygon)},createPoint:function(e){if(e)return this.viewer.entities.add({position:e,point:{pixelSize:5,color:r["a"].YELLOW,outlineWidth:2,outlineColor:r["a"].DARKRED,disableDepthTestDistance:Number.POSITIVE_INFINITY},show:!1})},createPolygon:function(){var e=this;return this.viewer.entities.add({polygon:{hierarchy:new s["a"]((function(){return new h["a"](e.positions)}),!1),clampToGround:void 0!=this.style.clampToGround,show:!0,fill:this.style.fill||!0,material:this.style.material||r["a"].WHITE,width:this.style.width||3,outlineColor:this.style.outlineColor||r["a"].BLACK,outlineWidth:this.style.outlineWidth||1,outline:this.style.outline}})},createPolyline:function(){var e=this;return this.viewer.entities.add({polyline:{positions:new s["a"]((function(){return e.positions}),!1),clampToGround:void 0!=this.style.clampToGround,material:r["a"].RED,width:3}})},getPositions:function(){return this.positions},getLnglats:function(){return cCesium.caratesianArrToLnglatArr(this.positions)},getAttr:function(){if(this.polygon){var e={},t=this.polygon.polygon;return e.fill=t.fill._value,e.outline=t.outline._value,e.outlineWidth=t.outlineWidth._value,e.outlineColor=t.outlineColor._value,e.clampToGround=line.clampToGround._value,e.color=line.material.color._value,e}},setStyle:function(e){},remove:function(){this.polygon&&(this.state=0,this.viewer.entities.remove(this.polygon),this.polygon=null)},setVisible:function(e){this.polygon.show=e},forbidDrawWorld:function(e){this.viewer.scene.screenSpaceCameraController.enableRotate=!e,this.viewer.scene.screenSpaceCameraController.enableTilt=!e,this.viewer.scene.screenSpaceCameraController.enableTranslate=!e,this.viewer.scene.screenSpaceCameraController.enableInputs=!e},destroy:function(){this.handler&&(this.handler.destroy(),this.handler=null),this.modifyHandler&&(this.modifyHandler.destroy(),this.modifyHandler=null),this.polygon&&(this.viewer.entities.remove(this.polygon),this.polygon=null),this.polyline&&(this.viewer.entities.remove(this.polyline),this.polyline=null),this.positions=[],this.style=null,this.modifyPoint&&(this.viewer.entities.remove(this.modifyPoint),this.modifyPoint=null);for(var e=0;e<this.gonPointArr.length;e++){var t=this.gonPointArr[e];this.viewer.entities.remove(t)}this.gonPointArr=[],this.state=0,this.prompt&&this.prompt.destroy(),this.polyline&&(this.polyline=null,this.viewer.entities.remove(this.polyline))},getCatesian3FromPX:function(e,t,i){var n,o=t.scene.drillPick(e);this.viewer.scene.render();for(var a=!1,r=0;r<o.length;r++){for(var s=!1,c=0;c<i.length;c++)if(i[c]&&o[r].id&&i[c].objId==o[r].id.objId){s=!0;break}s||(o[r]&&o[r].primitive||o[r]instanceof l["a"])&&(a=!0)}if(a)n=t.scene.pickPosition(e);else{var d=t.camera.getPickRay(e);if(!d)return null;n=t.scene.globe.pick(d,t.scene)}return n}};var u=i("2d75");function f(e,t){if(this.objId=Number((new Date).getTime()+""+Number(1e3*Math.random()).toFixed(0)),this.viewer=e,this.handler=new n["a"](this.viewer.scene.canvas),this.modifyHandler=new n["a"](this.viewer.scene.canvas),this.state=0,this.image=t.image||"./images/blueMarker.png",this.style=t,this.billboardArg={},this.billboard=null,t){for(var i in t)"image"==i&&t[i]&&!0,t[i]&&(this.billboardArg[i]=t[i]);this.prompt=new c["a"](e)}}f.prototype={start:function(e){var t=this;this.handler.setInputAction((function(i){var n=t.getCatesian3FromPX(i.position,t.viewer,[]);t.billboard=t.createBillboard(n),t.state=1,t.handler.destroy(),t.prompt&&(t.prompt.destroy(),t.prompt=null),e&&e(t.billboard)}),o["a"].LEFT_CLICK),this.handler.setInputAction((function(e){t.prompt.updatePrompt(e.endPosition,"单击新增")}),o["a"].MOUSE_MOVE)},createByPositions:function(e,t){if(e){var i=Cartesian3.fromDegrees(e[0],e[1],e[2]);i&&(this.billboard=this.createBillboard(i),t(this.billboard),this.state=1)}},openModify:!1,startModify:function(){if(2==this.state||1==this.state){this.modifyHandler||(this.modifyHandler=new n["a"](this.viewer.scene.canvas));var e=this;this.modifyHandler.setInputAction((function(t){var i=e.viewer.scene.pick(t.position);Object(a["a"])(i)&&i.id&&(i.id.objId||e.forbidDrawWorld(!0),e.openModify=!0,e.forbidDrawWorld(!0),e.state=2)}),o["a"].LEFT_DOWN),this.modifyHandler.setInputAction((function(t){if(e.billboard&&e.openModify){var i=e.getCatesian3FromPX(t.endPosition,e.viewer,[]);e.billboard&&e.billboard.position.setValue(i)}}),o["a"].MOUSE_MOVE),this.modifyHandler.setInputAction((function(t){e.billboard&&e.openModify&&(e.openModify=!1,e.forbidDrawWorld(!1),e.modifyHandler&&(e.modifyHandler.destroy(),e.modifyHandler=null))}),o["a"].LEFT_UP)}},endModify:function(e){this.modifyHandler&&(this.modifyHandler.destroy(),this.modifyHandler=null,e&&e(this.billboard)),this.state=2},createBillboard:function(e){if(e){var t=this.viewer.entities.add({position:e,billboard:{image:this.image||"../img/mark4.png",heightReference:this.style.heightReference||u["a"].NONE,disableDepthTestDistance:Number.MAX_VALUE}});return t.objId=this.objId,t}},getPositions:function(){return this.billboard.position},setStyle:function(e){},remove:function(){this.billboard&&(this.state=0,this.viewer.entities.remove(this.billboard),this.billboard=null)},setVisible:function(e){this.billboard.show=e},forbidDrawWorld:function(e){this.viewer.scene.screenSpaceCameraController.enableRotate=!e,this.viewer.scene.screenSpaceCameraController.enableTilt=!e,this.viewer.scene.screenSpaceCameraController.enableTranslate=!e,this.viewer.scene.screenSpaceCameraController.enableInputs=!e},destroy:function(){this.openModify=!1,this.handler&&(this.handler.destroy(),this.handler=null),this.modifyHandler&&(this.modifyHandler.destroy(),this.modifyHandler=null),this.billboard&&(this.viewer.entities.remove(this.billboard),this.billboard=null),this.style=null,this.prompt&&(that.prompt.destroy(),this.prompt=null)},getCatesian3FromPX:function(e,t,i){var n,o=t.scene.drillPick(e);this.viewer.scene.render();for(var a=!1,r=0;r<o.length;r++){for(var s=!1,c=0;c<i.length;c++)if(i[c]&&o[r].id&&i[c].objId==o[r].id.objId){s=!0;break}s||(o[r]&&o[r].primitive||o[r]instanceof l["a"])&&(a=!0)}if(a)n=this.viewer.scene.pickPosition(e);else{var d=this.viewer.camera.getPickRay(e);if(!d)return null;n=this.viewer.scene.globe.pick(d,this.viewer.scene)}return n}};var m=i("be18");function y(e,t){this.objId=Number((new Date).getTime()+""+Number(1e3*Math.random()).toFixed(0)),this.viewer=e,this.handler=new n["a"](this.viewer.scene.canvas),this.modifyHandler=new n["a"](this.viewer.scene.canvas),this.circle=null,this.screenSpaceCameraController=[],this.style=t,this.floatPoint=null,this.centerPoint=null,this.center=null,this.float=null,this.radius=0,this.modifyPoint=null,this.state=0,this.pointArr=[],this.prompt=new c["a"](e)}y.prototype={start:function(e){var t=this;this.handler.setInputAction((function(e){var i=t.getCatesian3FromPX(e.position,t.viewer,[t.circle]);t.centerPoint||(t.center=i,t.centerPoint=t.createPoint(i),t.centerPoint.typeAttr="center",t.floatPoint=t.createPoint(i.clone()),t.float=i.clone(),t.floatPoint.typeAttr="float",t.circle=t.createCircle(t.center,t.radius))}),o["a"].LEFT_CLICK),this.handler.setInputAction((function(e){if(t.centerPoint){t.prompt.updatePrompt(e.endPosition,"右键结束");var i=t.getCatesian3FromPX(e.endPosition,t.viewer,[t.circle]);t.floatPoint&&(t.floatPoint.position.setValue(i),t.float=i.clone()),t.radius=m["a"].distance(i,t.center)}else t.prompt.updatePrompt(e.endPosition,"单击开始绘制")}),o["a"].MOUSE_MOVE),this.handler.setInputAction((function(){t.circle&&(t.state=1,t.handler.destroy(),t.floatPoint&&(t.floatPoint.show=!1),t.centerPoint&&(t.centerPoint.show=!1),t.prompt&&(t.prompt.destroy(),t.prompt=null),e&&e(t.circle))}),o["a"].RIGHT_CLICK)},startModify:function(e){if(2==this.state||1==this.state){this.modifyHandler||(this.modifyHandler=new n["a"](this.viewer.scene.canvas));var t=this;t.floatPoint&&(t.floatPoint.show=!0),t.centerPoint&&(t.centerPoint.show=!0),this.modifyHandler.setInputAction((function(i){if(t.circle){var n=t.viewer.scene.pick(i.position);Object(a["a"])(n)&&n.id?(n.id.objId||(t.modifyPoint=n.id),t.forbidDrawWorld(!0)):(t.floatPoint&&(t.floatPoint.show=!1),t.centerPoint&&(t.centerPoint.show=!1),t.modifyHandler&&(t.modifyHandler.destroy(),t.modifyHandler=null,e&&e(t.circle)),t.state=2)}}),o["a"].LEFT_DOWN),this.modifyHandler.setInputAction((function(e){if(t.modifyPoint){var i=t.getCatesian3FromPX(e.endPosition,t.viewer,[t.circle]);i&&("center"==t.modifyPoint.typeAttr?(t.center=i,t.centerPoint.position.setValue(t.center),t.circle.position.setValue(t.center)):(t.float=i,t.floatPoint.position.setValue(t.float)),t.radius=m["a"].distance(t.float,t.center))}}),o["a"].MOUSE_MOVE),this.modifyHandler.setInputAction((function(e){t.modifyPoint&&(t.modifyPoint=null,t.forbidDrawWorld(!1))}),o["a"].LEFT_UP)}},endModify:function(e){this.floatPoint&&(this.floatPoint.show=!1),this.centerPoint&&(this.centerPoint.show=!1),this.modifyHandler&&(this.modifyHandler.destroy(),this.modifyHandler=null,e&&e(this.circle)),this.state=2},createPoint:function(e){if(e)return this.viewer.entities.add({position:e,point:{pixelSize:5,color:r["a"].YELLOW,outlineWidth:2,outlineColor:r["a"].DARKRED,disableDepthTestDistance:Number.POSITIVE_INFINITY},show:!1})},createCircle:function(){var e=this,t=this.viewer.entities.add({position:this.center,ellipse:{semiMajorAxis:new s["a"]((function(){return e.radius}),!1),semiMinorAxis:new s["a"]((function(){return e.radius}),!1),material:this.style.material||r["a"].YELLOW,width:this.style.width||3,heightReference:void 0==this.style.heightReference?u["a"].CLAMP_TO_GROUND:this.style.heightReference}});return t.objId=this.objId,t},getCenter:function(){return this.center},getAttr:function(){return obj},setStyle:function(e){},remove:function(){this.circle&&(this.state=0,this.viewer.entities.remove(this.circle),this.circle=null)},setVisible:function(e){this.circle.show=e},forbidDrawWorld:function(e){this.viewer.scene.screenSpaceCameraController.enableRotate=!e,this.viewer.scene.screenSpaceCameraController.enableTilt=!e,this.viewer.scene.screenSpaceCameraController.enableTranslate=!e,this.viewer.scene.screenSpaceCameraController.enableInputs=!e},destroy:function(){this.handler&&(this.handler.destroy(),this.handler=null),this.modifyHandler&&(this.modifyHandler.destroy(),this.modifyHandler=null),this.circle&&(this.viewer.entities.remove(this.circle),this.circle=null),this.floatPoint&&(this.viewer.entities.remove(this.floatPoint),this.floatPoint=null),this.centerPoint&&(this.viewer.entities.remove(this.centerPoint),this.centerPoint=null),this.style=null,this.modifyPoint=null,this.prompt&&this.prompt.destroy()},getCatesian3FromPX:function(e,t,i){var n,o=t.scene.drillPick(e);this.viewer.scene.render();for(var a=!1,r=0;r<o.length;r++){for(var s=!1,c=0;c<i.length;c++)if(i[c]&&o[r].id&&i[c].objId==o[r].id.objId){s=!0;break}s||(o[r]&&o[r].primitive||o[r]instanceof l["a"])&&(a=!0)}if(a)n=t.scene.pickPosition(e);else{var d=t.camera.getPickRay(e);if(!d)return null;n=t.scene.globe.pick(d,t.scene)}return n}};var v=i("eace");function g(e,t){this.objId=Number((new Date).getTime()+""+Number(1e3*Math.random()).toFixed(0)),this.viewer=e,this.handler=new n["a"](this.viewer.scene.canvas),this.modifyHandler=new n["a"](this.viewer.scene.canvas),this.rectangle=null,this.screenSpaceCameraController=[],this.style=t,this.rightdownPoint=null,this.leftupPoint=null,this.leftup=null,this.rightdown=null,this.radius=0,this.modifyPoint=null,this.state=0,this.pointArr=[],this.prompt=new c["a"](e)}function w(e){e.viewer&&e&&(this.viewer=e.viewer,this.hasEdit=e.hasEdit,this.toolArr=[],this.handler=new n["a"](this.viewer.scene.canvas),this.show=e.drawEndShow)}g.prototype={start:function(e){var t=this;this.handler.setInputAction((function(e){var i=t.getCatesian3FromPX(e.position,t.viewer,[]);t.leftupPoint||(t.leftup=i,t.leftupPoint=t.createPoint(i),t.leftupPoint.typeAttr="leftup",t.rightdownPoint=t.createPoint(i.clone()),t.rightdown=i.clone(),t.rightdownPoint.typeAttr="rightdown",t.rectangle=t.createRectangle(t.leftup,t.radius))}),o["a"].LEFT_CLICK),this.handler.setInputAction((function(e){if(t.leftupPoint){t.prompt.updatePrompt(e.endPosition,"右键结束");var i=t.getCatesian3FromPX(e.endPosition,t.viewer,[]);t.rightdownPoint&&(t.rightdownPoint.position.setValue(i),t.rightdown=i.clone()),t.radius=m["a"].distance(i,t.leftup)}else t.prompt.updatePrompt(e.endPosition,"单击开始绘制")}),o["a"].MOUSE_MOVE),this.handler.setInputAction((function(){t.rectangle&&(t.state=1,t.handler.destroy(),t.rightdownPoint&&(t.rightdownPoint.show=!1),t.leftupPoint&&(t.leftupPoint.show=!1),t.prompt&&(t.prompt.destroy(),t.prompt=null),e&&e(t.rectangle))}),o["a"].RIGHT_CLICK)},startModify:function(e){if(2==this.state||1==this.state){this.modifyHandler||(this.modifyHandler=new n["a"](this.viewer.scene.canvas));var t=this;t.rightdownPoint&&(t.rightdownPoint.show=!0),t.leftupPoint&&(t.leftupPoint.show=!0),this.modifyHandler.setInputAction((function(i){if(t.rectangle){var n=t.viewer.scene.pick(i.position);Object(a["a"])(n)&&n.id?(n.id.objId||(t.modifyPoint=n.id),t.forbidDrawWorld(!0)):(t.rightdownPoint&&(t.rightdownPoint.show=!1),t.leftupPoint&&(t.leftupPoint.show=!1),t.modifyHandler&&(t.modifyHandler.destroy(),t.modifyHandler=null,e&&e(t.rectangle)),t.state=2)}}),o["a"].LEFT_DOWN),this.modifyHandler.setInputAction((function(e){if(t.modifyPoint){var i=t.getCatesian3FromPX(e.endPosition,t.viewer,[t.rectangle,t.modifyPoint]);i&&("leftup"==t.modifyPoint.typeAttr?(t.leftup=i,t.leftupPoint.position.setValue(t.leftup),t.rectangle.position.setValue(t.leftup)):(t.rightdown=i,t.rightdownPoint.position.setValue(t.rightdown)),t.radius=m["a"].distance(t.rightdown,t.leftup))}}),o["a"].MOUSE_MOVE),this.modifyHandler.setInputAction((function(e){t.modifyPoint&&(t.modifyPoint=null,t.forbidDrawWorld(!1))}),o["a"].LEFT_UP)}},endModify:function(e){this.rightdownPoint&&(this.rightdownPoint.show=!1),this.leftupPoint&&(this.leftupPoint.show=!1),this.modifyHandler&&(this.modifyHandler.destroy(),this.modifyHandler=null,e&&e(this.rectangle)),this.state=2},createPoint:function(e){if(e)return this.viewer.entities.add({position:e,point:{pixelSize:5,color:r["a"].YELLOW,outlineWidth:2,outlineColor:r["a"].DARKRED,disableDepthTestDistance:Number.POSITIVE_INFINITY},show:!1})},createRectangle:function(){var e=this,t=this.viewer.entities.add({rectangle:{coordinates:new s["a"]((function(){return v["a"].fromCartesianArray([e.leftup,e.rightdown])}),!1),material:this.style.material||r["a"].YELLOW,width:this.style.width||3,heightReference:void 0==this.style.heightReference?u["a"].CLAMP_TO_GROUND:this.style.heightReference}});return t.objId=this.objId,t},getPositions:function(){return[this.leftup,this.rightdown]},getAttr:function(){return obj},setStyle:function(e){},remove:function(){this.rectangle&&(this.state=0,this.viewer.entities.remove(this.rectangle),this.rectangle=null)},setVisible:function(e){this.rectangle.show=e},forbidDrawWorld:function(e){this.viewer.scene.screenSpaceCameraController.enableRotate=!e,this.viewer.scene.screenSpaceCameraController.enableTilt=!e,this.viewer.scene.screenSpaceCameraController.enableTranslate=!e,this.viewer.scene.screenSpaceCameraController.enableInputs=!e},destroy:function(){this.handler&&(this.handler.destroy(),this.handler=null),this.modifyHandler&&(this.modifyHandler.destroy(),this.modifyHandler=null),this.rectangle&&(this.viewer.entities.remove(this.rectangle),this.rectangle=null),this.rightdownPoint&&(this.viewer.entities.remove(this.rightdownPoint),this.rightdownPoint=null),this.leftupPoint&&(this.viewer.entities.remove(this.leftupPoint),this.leftupPoint=null),this.style=null,this.modifyPoint=null,this.prompt&&this.prompt.destroy()},getCatesian3FromPX:function(e,t,i){var n,o=t.scene.drillPick(e);this.viewer.scene.render();for(var a=!1,r=0;r<o.length;r++){for(var s=!1,l=0;l<i.length;l++)if(i[l]&&o[r].id&&i[l].objId==o[r].id.objId){s=!0;break}s||(o[r]&&o[r].primitive||o[r]instanceof Cesium3DTileFeature)&&(a=!0)}if(a)n=t.scene.pickPosition(e);else{var c=t.camera.getPickRay(e);if(!c)return null;n=t.scene.globe.pick(c,t.scene)}return n}},w.prototype={startDraw:function(e){var t=this;if("polyline"==e.type){var i=new d(this.viewer,e.style);i.start((function(n){t.hasEdit&&(t.unbindEdit(),i.startModify(e.modifySuccess),t.lastSelectEntity=i),e.success&&e.success(n),0==t.show&&i.setVisible(!1)})),this.toolArr.push(i)}if("polygon"==e.type){var n=new p(this.viewer,e.style);n.start((function(){t.hasEdit&&(t.unbindEdit(),n.startModify(),t.lastSelectEntity=n),e.success&&e.success(n),0==t.show&&n.setVisible(!1)})),this.toolArr.push(n)}if("billboard"==e.type){var o=new f(this.viewer,e.style);o.start((function(){t.hasEdit&&(t.unbindEdit(),o.startModify(),t.lastSelectEntity=o),e.success&&e.success(o),0==t.show&&o.setVisible(!1)})),this.toolArr.push(o)}if("circle"==e.type){var a=new y(this.viewer,e.style);a.start((function(){t.hasEdit&&(t.unbindEdit(),a.startModify(),t.lastSelectEntity=a),e.success&&e.success(a),0==t.show&&a.setVisible(!1)})),this.toolArr.push(a)}if("rectangle"==e.type){var r=new g(this.viewer,e.style);r.start((function(){t.hasEdit&&(t.unbindEdit(),r.startModify(),t.lastSelectEntity=r),e.success&&e.success(r),0==t.show&&r.setVisible(!1)})),this.toolArr.push(r)}if("flowPolyline"==e.type){i=new d(this.viewer,e.style);i.start((function(){t.hasEdit&&(t.unbindEdit(),i.startModify()),e.success&&e.success(i)})),this.toolArr.push(i)}},createByPositions:function(e){if(this.hasEdit&&this.bindEdit(),e||(e={}),"polyline"==e.type){var t=new d(this.viewer,e.style);t.createByPositions(e.positions,e.success),this.toolArr.push(t)}if("polygon"==e.type){var i=new p(this.viewer,e.style);i.createByPositions(e.positions,e.success),this.toolArr.push(i)}if("billboard"==e.type){var n=new f(this.viewer,e.style);n.createByPositions(e.positions,(function(){e.success&&e.success(n)})),this.toolArr.push(n)}},destroy:function(){for(var e=0;e<this.toolArr.length;e++){var t=this.toolArr[e];t.destroy()}},lastSelectEntity:null,bindEdit:function(){var e=this;this.handler.setInputAction((function(t){var i=e.viewer.scene.pick(t.position);if(Cesium.defined(i)&&i.id)for(var n=0;n<e.toolArr.length;n++)if(i.id.objId==e.toolArr[n].objId&&(1==e.toolArr[n].state||2==e.toolArr[n].state)){e.lastSelectEntity&&e.lastSelectEntity.endModify(),e.toolArr[n].startModify(),e.lastSelectEntity=e.toolArr[n];break}}),Cesium.ScreenSpaceEventType.LEFT_CLICK)},unbindEdit:function(){for(var e=0;e<this.toolArr.length;e++)this.toolArr[e].endModify()}}},f43c:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("2f7d"),o=i("be18");function a(){window.viewer.dataSources.add(n["a"].load("./config/data/czml/simple.czml")),window.viewer.camera.flyHome(0),window.viewer.dataSources.add(n["a"].load("./config/data/czml/Vehicle.czml")),window.viewer.scene.camera.setView({destination:o["a"].fromDegrees(-116.52,35.02,95e3),orientation:{heading:6}})}},f640:function(e,t,i){"use strict";i.d(t,"c",(function(){return I})),i.d(t,"b",(function(){return C})),i.d(t,"a",(function(){return _}));i("a9e3"),i("b680"),i("99af"),i("d3b7"),i("ddb0");var n=i("1863"),o=i("2f48"),a=i("2f63"),r=i("52f0"),s=i("2d36"),l=i("bd8d"),c=i("4626"),d=i("f61d"),h=i("05e5"),p=i("be18"),u=i("93da"),f=i("d9c4"),m=i("1757"),y=i("2d75"),v=i("bef8"),g=i("670c"),w=i("a307"),b=i("9a45"),P=i("595b"),C=function(e,t){this.objId=Number((new Date).getTime()+""+Number(1e3*Math.random()).toFixed(0)),this.viewer=e,this.handler=new n["a"](this.viewer.scene.canvas),this.ts_handler=new n["a"](this.viewer.scene.canvas),this.polyline=null,this.positions=[],this.labels=[],this.floatLable=null,this.lastCartesian=null,this.allDistance=0};C.prototype={start:function(){var e=this;this.handler.setInputAction((function(t){var i=e.getCatesian3FromPX(t.position,e.viewer,[e.polyline,e.floatLable]);if(i){if(0==e.positions.length){var n=e.createLabel(i,"起点");e.labels.push(n),e.floatLable=e.createLabel(i,""),e.floatLable.show=!1,e.positions.push(i),e.positions.push(i.clone()),e.lastCartesian=i}else{if(e.floatLable.show=!1,e.positions.push(i),!e.lastCartesian)return;var o=e.getLength(i,e.lastCartesian);e.allDistance+=o;var a=e.formatLength(o);n=e.createLabel(i,a);e.labels.push(n)}e.lastCartesian=i}}),o["a"].LEFT_CLICK),this.handler.setInputAction((function(t){if(!(e.positions.length<1)){e.floatLable.show=!0;var i=e.getCatesian3FromPX(t.endPosition,e.viewer,[e.polyline,e.floatLable]);if(i&&(2==e.positions.length&&(Object(a["a"])(e.polyline)||(e.polyline=e.createLine())),e.polyline)){if(e.positions.pop(),e.positions.push(i),!e.lastCartesian)return;var n=e.getLength(i,e.lastCartesian);e.floatLable.show=!0,e.floatLable.label.text=e.formatLength(n),e.floatLable.position.setValue(i)}}}),o["a"].MOUSE_MOVE),this.handler.setInputAction((function(t){if(e.polyline){e.floatLable.show=!1,e.viewer.scene.camera.lookAtTransform(r["a"].IDENTITY),e.viewer.trackedEntity=void 0;var i=e.getCatesian3FromPX(t.position,e.viewer,[e.polyline,e.floatLable]),n=e.getLength(i,e.lastCartesian);e.allDistance+=n;var o=e.formatLength(e.allDistance),a=e.createLabel(i,"");i&&(e.labels.push(a),e.labels[e.labels.length-1].label.text="总长："+o,e.handler&&(e.handler.destroy(),e.handler=null),e.tsLabel&&e.viewer.entities.remove(e.tsLabel),e.ts_handler&&(e.ts_handler.destroy(),e.ts_handler=null))}}),o["a"].RIGHT_CLICK)},clear:function(){this.polyline&&(this.viewer.entities.remove(this.polyline),this.polyline=null);for(var e=0;e<this.labels.length;e++)this.viewer.entities.remove(this.labels[e]);this.labels=[],this.floatLable&&(this.viewer.entities.remove(this.floatLable),this.floatLable=null),this.floatLable=null},createLine:function(){var e=this,t=this.viewer.entities.add({polyline:{positions:new s["a"]((function(){return e.positions}),!1),show:!0,disableDepthTestDistance:Number.POSITIVE_INFINITY,material:l["a"].YELLOW,width:3,clampToGround:!0}});return t.objId=this.objId,t},createLabel:function(e,t){if(e){var i=this.viewer.entities.add({position:e,label:{text:t||"",font:"24px Helvetica",fillColor:l["a"].SKYBLUE,outlineColor:l["a"].BLACK,outlineWidth:2,disableDepthTestDistance:Number.POSITIVE_INFINITY,style:c["a"].FILL_AND_OUTLINE,horizontalOrigin:d["a"].RIGHT,verticalOrigin:h["a"].BOTTOM}});return i}},getLength:function(e,t){return e&&t?p["a"].distance(e,t):0},formatLength:function(e,t){if(e){var i=null;if(!t){t="米";var n=Number(e).toFixed(2);i=n+t}if("千米"==t||"公里"==t){n=(Number(e)/1e3).toFixed(2);i=n+t}return i}},getCatesian3FromPX:function(e,t,i){var n=t.scene.drillPick(e);t.render();var o,a=!1,r=this;if(t.scene.pickPositionSupported)for(var s=0;s<n.length;s++)for(var l=n[s],c=0;c<i.length;c++){var d=i[c];r.hasPickedModel(l,d)&&(a=!0)}if(a)o=t.scene.pickPosition(e);else{var h=t.camera.getPickRay(e);if(!h)return null;o=t.scene.globe.pick(h,t.scene)}return o},hasPickedModel:function(e,t){if(!t)return!0;if(Object(a["a"])(e.id)){var i=e.id;if(t&&i==t)return!1}if(Object(a["a"])(e.primitive)){var n=e.primitive;if(t&&n==t)return!1}return!0}};var _=function(e,t){this.objId=Number((new Date).getTime()+""+Number(1e3*Math.random()).toFixed(0)),this.viewer=e,this.handler=new n["a"](this.viewer.scene.canvas),this.polyline=null,this.polygon=null,this.floatLabel=null,this.positions=[],this.movePush=!1,this.prompt=new b["a"](e,{})};function I(e){var t=e.scene,i=new n["a"](t.canvas),r=e.entities.add({label:{show:!1,showBackground:!0,font:"12px monospace",horizontalOrigin:d["a"].LEFT,verticalOrigin:h["a"].TOP,pixelOffset:new g["a"](15,0)}});i.setInputAction((function(e){t.pick(e.endPosition);var i=!1;if(t.mode!==w["a"].MORPHING){var n=t.pick(e.endPosition);if(t.pickPositionSupported&&Object(a["a"])(n)){var o=t.pickPosition(e.endPosition);if(Object(a["a"])(o)){var s=v["a"].fromCartesian(o),l=u["a"].toDegrees(s.longitude),c=u["a"].toDegrees(s.latitude),d=s.height.toFixed(2);r.position=o,r.label.show=!0,r.label.text="Lon:    "+l+"°\nLat:    "+c+"°\nAlt:    "+d+"m",r.label.eyeOffset=new p["a"](0,0,-s.height*(t.mode===w["a"].SCENE2D?1.5:1)),i=!0}}}i||(r.label.show=!1)}),o["a"].MOUSE_MOVE)}_.prototype={start:function(){var e=this;this.handler.setInputAction((function(t){e.viewer.scene.pick(t.position),e.viewer.camera.computeViewRectangle();var i=e.viewer.scene.pickPosition(t.position),n=e.viewer.scene.globe.ellipsoid.cartesianToCartographic(i),o=(u["a"].toDegrees(n.longitude),u["a"].toDegrees(n.latitude),n.height,e.getCatesian3FromPX(t.position,e.viewer,[e.polygon,e.polyline]));o&&(e.movePush&&(e.positions.pop(),e.movePush=!1),e.positions.push(o))}),o["a"].LEFT_CLICK),this.handler.setInputAction((function(t){if(e.positions.length<1)e.prompt.updatePrompt(t.endPosition,"单击开始绘制");else{e.prompt.updatePrompt(t.endPosition,"右键结束");var i=e.getCatesian3FromPX(t.endPosition,e.viewer,[e.polygon,e.polyline]);if(e.positions.length>=2&&(e.movePush?e.positions[e.positions.length-1]=i:(e.positions.push(i),e.movePush=!0),2==e.positions.length&&(Object(a["a"])(e.polyline)||(e.polyline=e.createPolyline())),3==e.positions.length&&(Object(a["a"])(e.polygon)||(e.polygon=e.createPolygon(e.style),e.polygon.isFilter=!0,e.polygon.objId=e.objId),e.floatLabel||(e.floatLabel=e.createLabel(i,""))),e.polygon)){var n=e.getAreaAndCenter(e.positions).area,o=e.getAreaAndCenter(e.positions).center,r=e.formatArea(n);e.floatLabel.label.text="面积："+r,o&&e.floatLabel.position.setValue(o)}}}),o["a"].MOUSE_MOVE),this.handler.setInputAction((function(t){if(e.polygon&&(e.viewer.scene.camera.lookAtTransform(r["a"].IDENTITY),e.viewer.trackedEntity=void 0,e.polygon)){var i=e.getCatesian3FromPX(t.position,e.viewer,[e.polygon,e.polyline]);if(e.positions.push(i),e.polygon){var n=e.getAreaAndCenter(e.positions).area,o=e.getAreaAndCenter(e.positions).center,a=e.formatArea(n);e.floatLabel.label.text="面积："+a,o&&e.floatLabel.position.setValue(o)}e.handler.destroy(),e.movePush&&(e.positions.pop(),e.movePush=!1),e.prompt&&(e.prompt.destroy(),e.prompt=null)}}),o["a"].RIGHT_CLICK)},clear:function(){this.polyline&&(this.viewer.entities.remove(this.polyline),this.polyline=null),this.polygon&&(this.viewer.entities.remove(this.polygon),this.polygon=null),this.floatLabel&&(this.viewer.entities.remove(this.floatLabel),this.floatLabel=null),this.floatLable=null},createPolyline:function(){var e=this,t=e.viewer.entities.add({polyline:{positions:new s["a"]((function(){return e.positions}),!1),show:!0,disableDepthTestDistance:Number.POSITIVE_INFINITY,material:l["a"].YELLOW,width:3}});return t},createPolygon:function(){var e=this,t=e.viewer.entities.add({polygon:new f["a"]({hierarchy:new s["a"]((function(){return new m["a"](e.positions)}),!1),disableDepthTestDistance:Number.POSITIVE_INFINITY,material:l["a"].YELLOW,show:!0,fill:!0})});return t},createLabel:function(e,t){if(e){var i=this.viewer.entities.add({position:e,label:{text:t||"",font:"24px Helvetica",fillColor:l["a"].SKYBLUE,outlineColor:l["a"].BLACK,outlineWidth:2,disableDepthTestDistance:Number.POSITIVE_INFINITY,style:c["a"].FILL_AND_OUTLINE,heightReference:y["a"].CLAMP_TO_GROUND}});return i}},getAreaAndCenter:function(e){if(e&&!(e.length<1)){for(var t=[],i=[],n=0;n<e.length;n++){var o=e[n],a=v["a"].fromCartesian(o);t.push([u["a"].toDegrees(a.longitude),u["a"].toDegrees(a.latitude)]),i.push(Object(P["point"])([u["a"].toDegrees(a.longitude),u["a"].toDegrees(a.latitude)]))}if(t.length){t=t.concat([t[0]]);var r=Object(P["polygon"])([t]),s=Object(P["area"])(r),l=Object(P["featureCollection"])(i),c=Object(P["center"])(l),d=c.geometry.coordinates;return{area:s,center:p["a"].fromDegrees(d[0],d[1],300)}}}},formatArea:function(e,t){if(e){var i=null;if(!t){t="平方米";var n=Number(e).toFixed(2);i=n+t}if("平方千米"==t||"平方公里"==t){n=(Number(e)/1e6).toFixed(2);i=n+t}return i}},getCatesian3FromPX:function(e,t,i){var n,o=t.scene.drillPick(e);this.viewer.scene.render();for(var a=!1,r=0;r<o.length;r++){for(var s=!1,l=0;l<i.length;l++)if(i[l]&&o[r].id&&i[l].objId==o[r].id.objId){s=!0;break}s||(o[r]&&o[r].primitive||o[r]instanceof Cesium3DTileFeature)&&(a=!0)}if(a)n=t.scene.pickPosition(e);else{var c=t.camera.getPickRay(e);if(!c)return null;n=t.scene.globe.pick(c,t.scene)}return n}}},fa22:function(e,t,i){"use strict";i.d(t,"a",(function(){return p}));var n=i("be18"),o=i("8d2a"),a=i("d9403"),r=i("9541"),s=i("bd8d"),l=i("894b"),c=i("d6db"),d=i("aea3"),h=i("313e");function p(){var e={series:[{name:"姓名",type:"pie",radius:"100%",center:["50%","50%"],data:p(50).seriesData,label:{normal:{show:!1}}}]};function t(t,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=o.radius,r=void 0===a?1e5:a,s=o.lon,l=o.lat,c=document.createElement("canvas");c.width=400,c.height=400;var d=h["init"](c);d.setOption(e),d.on("finished",(function(){var e=i(d,{radius:r,lon:s,lat:l});viewer.scene.primitives.add(e),d.dispose(),d=null,c=null}))}function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.radius,h=void 0===i?1e5:i,p=t.lon,u=t.lat,f=new o["a"]({center:n["a"].fromDegrees(p,u),radius:h}),m=o["a"].createGeometry(f),y=new a["a"]({geometry:m,attributes:{color:r["a"].fromColor(s["a"].ORANGE)}}),v=new l["a"]({geometryInstances:[y],appearance:new c["a"]({material:new d["a"]({fabric:{type:"Image",uniforms:{image:e.getDataURL()}}})})});return v}function p(e){for(var t=["赵","钱","孙"],i=[],n=0;n<3;n++)name=t[n],i.push({name:name,value:Math.round(1e5*Math.random())});return{seriesData:i}}t(e,viewer,{lon:116.19777,lat:39.03883}),e={series:[{name:"姓名",type:"pie",radius:"100%",center:["50%","50%"],data:p(50).seriesData,label:{normal:{show:!1}}}]},t(e,viewer,{lon:102.19777,lat:39.03883,radius:2e5}),viewer.camera.flyTo({destination:n["a"].fromDegrees(116.19777,39.03883,1e7)})}},fc14:function(e,t,i){"use strict";i.d(t,"a",(function(){return h})),i.d(t,"b",(function(){return p}));i("b0c0"),i("d81d"),i("99af");var n=i("313e"),o=i.n(n),a=i("be18"),r=i("93da"),s=function(e,t){this._GLMap=e,this.dimensions=["lng","lat"],this._mapOffset=[0,0],this._api=t};s.prototype.dimensions=["lng","lat"],s.prototype.setMapOffset=function(e){this._mapOffset=e},s.prototype.getBMap=function(){return this._GLMap},s.prototype.dataToPoint=function(e){var t=[99999,99999],i=a["a"].fromDegrees(e[0],e[1]);if(!i)return t;var n=this._GLMap.cartesianToCanvasCoordinates(i);return n?!(a["a"].angleBetween(this._GLMap.camera.position,i)>r["a"].toRadians(75))&&[n.x-this._mapOffset[0],n.y-this._mapOffset[1]]:t},s.prototype.pointToData=function(e){var t=this._mapOffset;return e=this._bmap.project([e[0]+t[0],e[1]+t[1]]),[e.lng,e.lat]},s.prototype.getViewRect=function(){var e=this._api;return new o.a.graphic.BoundingRect(0,0,e.getWidth(),e.getHeight())},s.prototype.getRoamTransform=function(){return o.a.matrix.create()},s.dimensions=s.prototype.dimensions,s.create=function(e,t){var i;e.eachComponent("GLMap",(function(e){t.getZr().painter.getViewportRoot();var n=o.a.glMap;i=new s(n,t),i.setMapOffset(e.__mapOffset||[0,0]),e.coordinateSystem=i})),e.eachSeries((function(e){"GLMap"===e.get("coordinateSystem")&&(e.coordinateSystem=i)}))};var l=function(e,t){this._map=e,this._overlay=this._createChartOverlay(),t&&this._registerMap(),this._overlay.setOption(t||{})};l.prototype._registerMap=function(){this._isRegistered||(o.a.registerCoordinateSystem("GLMap",s),o.a.registerAction({type:"GLMapRoam",event:"GLMapRoam",update:"updateLayout"},(function(e,t){})),o.a.extendComponentModel({type:"GLMap",getBMap:function(){return this.__GLMap},defaultOption:{roam:!1}}),o.a.extendComponentView({type:"GLMap",init:function(e,t){this.api=t,o.a.glMap.postRender.addEventListener(this.moveHandler,this)},moveHandler:function(e,t){this.api.dispatchAction({type:"GLMapRoam"})},render:function(e,t,i){},dispose:function(e){o.a.glMap.postRender.removeEventListener(this.moveHandler,this)}}),this._isRegistered=!0)},l.prototype._createChartOverlay=function(){var e=this._map.scene;e.canvas.setAttribute("tabIndex",0);var t=document.createElement("div");return t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.style.width=e.canvas.width+"px",t.style.height=e.canvas.height+"px",t.style.pointerEvents="none",t.setAttribute("id","echarts"),t.setAttribute("class","echartMap"),this._map.container.appendChild(t),this._echartsContainer=t,o.a.glMap=e,this._chart=o.a.init(t)},l.prototype.dispose=function(){this._echartsContainer&&(this._map.container.removeChild(this._echartsContainer),this._echartsContainer=null),this._overlay&&(this._overlay.dispose(),this._overlay=null)},l.prototype.updateOverlay=function(e){this._overlay&&this._overlay.setOption(e)},l.prototype.getMap=function(){return this._map},l.prototype.getOverlay=function(){return this._overlay},l.prototype.show=function(){this._echartsContainer&&(this._echartsContainer.style.visibility="visible")},l.prototype.hide=function(){this._echartsContainer&&(this._echartsContainer.style.visibility="hidden")},l.prototype.remove=function(){this._chart.clear(),this._echartsContainer.parentNode&&this._echartsContainer.parentNode.removeChild(this._echartsContainer),this._map=void 0},l.prototype.resize=function(){var e=this;window.onresize=function(){var t=e._map.scene;e._echartsContainer.style.width=t.canvas.style.width,e._echartsContainer.style.height=t.canvas.style.height,e._chart.resize()}};var c,d=l;function h(e){var t,i={"上海":[121.4648,31.2891],"东莞":[113.8953,22.901],"东营":[118.7073,37.5513],"中山":[113.4229,22.478],"临汾":[111.4783,36.1615],"临沂":[118.3118,35.2936],"丹东":[124.541,40.4242],"丽水":[119.5642,28.1854],"乌鲁木齐":[87.9236,43.5883],"佛山":[112.8955,23.1097],"保定":[115.0488,39.0948],"兰州":[103.5901,36.3043],"包头":[110.3467,41.4899],"北京":[116.5387,39.7654],"北海":[109.314,21.6211],"南京":[118.8062,31.9208],"南宁":[108.479,23.1152],"南昌":[116.0046,28.6633],"南通":[121.1023,32.1625],"厦门":[118.1689,24.6478],"台州":[121.1353,28.6688],"合肥":[117.29,32.0581],"呼和浩特":[111.4124,40.4901],"咸阳":[108.4131,34.8706],"哈尔滨":[127.9688,45.368],"唐山":[118.4766,39.6826],"嘉兴":[120.9155,30.6354],"大同":[113.7854,39.8035],"大连":[122.2229,39.4409],"天津":[117.4219,39.4189],"太原":[112.3352,37.9413],"威海":[121.9482,37.1393],"宁波":[121.5967,29.6466],"宝鸡":[107.1826,34.3433],"宿迁":[118.5535,33.7775],"常州":[119.4543,31.5582],"广州":[113.5107,23.2196],"廊坊":[116.521,39.0509],"延安":[109.1052,36.4252],"张家口":[115.1477,40.8527],"徐州":[117.5208,34.3268],"德州":[116.6858,37.2107],"惠州":[114.6204,23.1647],"成都":[103.9526,30.7617],"扬州":[119.4653,32.8162],"承德":[117.5757,41.4075],"拉萨":[91.1865,30.1465],"无锡":[120.3442,31.5527],"日照":[119.2786,35.5023],"昆明":[102.9199,25.4663],"杭州":[119.5313,29.8773],"枣庄":[117.323,34.8926],"柳州":[109.3799,24.9774],"株洲":[113.5327,27.0319],"武汉":[114.3896,30.6628],"汕头":[117.1692,23.3405],"江门":[112.6318,22.1484],"沈阳":[123.1238,42.1216],"沧州":[116.8286,38.2104],"河源":[114.917,23.9722],"泉州":[118.3228,25.1147],"泰安":[117.0264,36.0516],"泰州":[120.0586,32.5525],"济南":[117.1582,36.8701],"济宁":[116.8286,35.3375],"海口":[110.3893,19.8516],"淄博":[118.0371,36.6064],"淮安":[118.927,33.4039],"深圳":[114.5435,22.5439],"清远":[112.9175,24.3292],"温州":[120.498,27.8119],"渭南":[109.7864,35.0299],"湖州":[119.8608,30.7782],"湘潭":[112.5439,27.7075],"滨州":[117.8174,37.4963],"潍坊":[119.0918,36.524],"烟台":[120.7397,37.5128],"玉溪":[101.9312,23.8898],"珠海":[113.7305,22.1155],"盐城":[120.2234,33.5577],"盘锦":[121.9482,41.0449],"石家庄":[114.4995,38.1006],"福州":[119.4543,25.9222],"秦皇岛":[119.2126,40.0232],"绍兴":[120.564,29.7565],"聊城":[115.9167,36.4032],"肇庆":[112.1265,23.5822],"舟山":[122.2559,30.2234],"苏州":[120.6519,31.3989],"莱芜":[117.6526,36.2714],"菏泽":[115.6201,35.2057],"营口":[122.4316,40.4297],"葫芦岛":[120.1575,40.578],"衡水":[115.8838,37.7161],"衢州":[118.6853,28.8666],"西宁":[101.4038,36.8207],"西安":[109.1162,34.2004],"贵阳":[106.6992,26.7682],"连云港":[119.1248,34.552],"邢台":[114.8071,37.2821],"邯郸":[114.4775,36.535],"郑州":[113.4668,34.6234],"鄂尔多斯":[108.9734,39.2487],"重庆":[107.7539,30.1904],"金华":[120.0037,29.1028],"铜川":[109.0393,35.1947],"银川":[106.3586,38.1775],"镇江":[119.4763,31.9702],"长春":[125.8154,44.2584],"长沙":[113.0823,28.2568],"长治":[112.8625,36.4746],"阳泉":[113.4778,38.0951],"青岛":[120.4651,36.3373],"韶关":[113.7964,24.7028]},n=[[{name:"北京"},{name:"上海",value:95}],[{name:"北京"},{name:"广州",value:90}],[{name:"北京"},{name:"大连",value:80}],[{name:"北京"},{name:"南宁",value:70}],[{name:"北京"},{name:"南昌",value:60}],[{name:"北京"},{name:"拉萨",value:50}],[{name:"北京"},{name:"长春",value:40}],[{name:"北京"},{name:"包头",value:30}],[{name:"北京"},{name:"重庆",value:20}],[{name:"北京"},{name:"兰州",value:10}]],o=[[{name:"上海"},{name:"包头",value:95}],[{name:"上海"},{name:"昆明",value:90}],[{name:"上海"},{name:"广州",value:80}],[{name:"上海"},{name:"郑州",value:70}],[{name:"上海"},{name:"长春",value:60}],[{name:"上海"},{name:"重庆",value:50}],[{name:"上海"},{name:"长沙",value:40}],[{name:"上海"},{name:"北京",value:30}],[{name:"上海"},{name:"丹东",value:20}],[{name:"上海"},{name:"大连",value:10}]],a=[[{name:"广州"},{name:"福州",value:95}],[{name:"广州"},{name:"太原",value:90}],[{name:"广州"},{name:"长春",value:80}],[{name:"广州"},{name:"重庆",value:70}],[{name:"广州"},{name:"西安",value:60}],[{name:"广州"},{name:"成都",value:50}],[{name:"广州"},{name:"常州",value:40}],[{name:"广州"},{name:"北京",value:30}],[{name:"广州"},{name:"北海",value:20}],[{name:"广州"},{name:"海口",value:10}]],r="path://M49.7,48l-20-47.1L9.7,48l20-8.4L49.7,48z",s=function(e){for(var t=[],n=0;n<e.length;n++){var o=e[n],a=i[o[0].name],r=i[o[1].name];a&&r&&t.push({fromName:o[0].name,toName:o[1].name,coords:[a,r]})}return t},l=["#a6c84c","#ffa022","#46bee9"],h=[];[["北京",n],["上海",o],["广州",a]].forEach((function(e,t){h.push({name:e[0]+" Top10",type:"lines",coordinateSystem:"GLMap",zlevel:1,effect:{show:!0,period:6,trailLength:.7,color:"#fff",symbol:"arrow",symbolSize:3},lineStyle:{normal:{color:l[t],width:0,opacity:.4,curveness:.2}},data:s(e[1])},{name:e[0]+" Top10",type:"lines",coordinateSystem:"GLMap",zlevel:2,symbol:["none","arrow"],symbolSize:10,effect:{show:!0,period:6,trailLength:0,symbol:r,symbolSize:15},lineStyle:{normal:{color:l[t],width:1,opacity:.6,curveness:.2}},data:s(e[1])},{name:e[0]+" Top10",type:"effectScatter",coordinateSystem:"GLMap",zlevel:2,rippleEffect:{brushType:"stroke"},label:{normal:{show:!0,position:"right",formatter:"{b}"}},symbolSize:function(e){return e[2]/8},itemStyle:{normal:{color:l[t]}},data:e[1].map((function(e){return{name:e[1].name,value:i[e[1].name].concat([e[1].value])}}))})})),t={animation:!1,GLMap:{},series:h},c=new d(e,t)}function p(e){c.dispose()}}}]);