(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Cesium~0632e0fe"],{"2ab8":function(t,e,i){"use strict";var a=i("670c"),n=i("bd8d"),o=i("2f63"),r=i("7d62"),s=i("e42d"),c=i("1b8d"),d=i("f845"),l=i("a894"),h=i("ac3b"),_=i("d289"),u=i("6ef5"),p=i("6dc0"),m=i("6c84"),f=i("5770"),b=i("a913"),y=i("b7c8"),g=i("3626"),S=i("bfce");function v(){this._framebuffer=void 0,this._colorGBuffer=void 0,this._depthGBuffer=void 0,this._depthTexture=void 0,this._drawCommand=void 0,this._clearCommand=void 0,this._strength=1,this._radius=1}function T(t){var e=t._framebuffer;Object(o["a"])(e)&&(t._colorGBuffer.destroy(),t._depthGBuffer.destroy(),t._depthTexture.destroy(),e.destroy(),t._framebuffer=void 0,t._colorGBuffer=void 0,t._depthGBuffer=void 0,t._depthTexture=void 0,t._drawCommand=void 0,t._clearCommand=void 0)}function D(t,e){var i=e.drawingBufferWidth,a=e.drawingBufferHeight,n=new b["a"]({context:e,width:i,height:a,pixelFormat:s["a"].RGBA,pixelDatatype:u["a"].UNSIGNED_BYTE,sampler:m["a"].NEAREST}),o=new b["a"]({context:e,width:i,height:a,pixelFormat:s["a"].RGBA,pixelDatatype:u["a"].UNSIGNED_BYTE,sampler:m["a"].NEAREST}),r=new b["a"]({context:e,width:i,height:a,pixelFormat:s["a"].DEPTH_COMPONENT,pixelDatatype:u["a"].UNSIGNED_INT,sampler:m["a"].NEAREST});t._framebuffer=new h["a"]({context:e,colorTextures:[n,o],depthTexture:r,destroyAttachments:!1}),t._colorGBuffer=n,t._depthGBuffer=o,t._depthTexture=r}var O=new a["a"];function E(t,e){var i=new f["a"]({defines:["LOG_DEPTH_WRITE"],sources:[S["a"]]}),a={u_pointCloud_colorGBuffer:function(){return t._colorGBuffer},u_pointCloud_depthGBuffer:function(){return t._depthGBuffer},u_distanceAndEdlStrength:function(){return O.x=t._radius,O.y=t._strength,O}},o=p["a"].fromCache({blending:y["a"].ALPHA_BLEND,depthMask:!0,depthTest:{enabled:!0},stencilTest:g["a"].setCesium3DTileBit(),stencilMask:g["a"].CESIUM_3D_TILE_MASK});t._drawCommand=e.createViewportQuadCommand(i,{uniformMap:a,renderState:o,pass:_["a"].CESIUM_3D_TILE,owner:t}),t._clearCommand=new d["a"]({framebuffer:t._framebuffer,color:new n["a"](0,0,0,0),depth:1,renderState:p["a"].fromCache(),pass:_["a"].CESIUM_3D_TILE,owner:t})}function A(t,e){var i=e.drawingBufferWidth,a=e.drawingBufferHeight,n=t._colorGBuffer,r=!1,s=Object(o["a"])(n)&&(n.width!==i||n.height!==a);return Object(o["a"])(n)&&!s||(T(t),D(t,e),E(t,e),r=!0),r}function C(t){return t.drawBuffers&&t.fragmentDepth}function I(t,e){var i=t.shaderCache.getDerivedShaderProgram(e,"EC");if(!Object(o["a"])(i)){var a=e._attributeLocations,n=e.fragmentShaderSource.clone();n.sources=n.sources.map((function(t){return t=f["a"].replaceMain(t,"czm_point_cloud_post_process_main"),t=t.replace(/gl_FragColor/g,"gl_FragData[0]"),t})),n.sources.unshift("#extension GL_EXT_draw_buffers : enable \n"),n.sources.push("void main() \n{ \n    czm_point_cloud_post_process_main(); \n#ifdef LOG_DEPTH\n    czm_writeLogDepth();\n    gl_FragData[1] = czm_packDepth(gl_FragDepthEXT); \n#else\n    gl_FragData[1] = czm_packDepth(gl_FragCoord.z);\n#endif\n}"),i=t.shaderCache.createDerivedShaderProgram(e,"EC",{vertexShaderSource:e.vertexShaderSource,fragmentShaderSource:n,attributeLocations:a})}return i}v.isSupported=C,v.prototype.update=function(t,e,i,a){if(C(t.context)){this._strength=i.eyeDomeLightingStrength,this._radius=i.eyeDomeLightingRadius*t.pixelRatio;var n,r=A(this,t.context),s=t.commandList,d=s.length;for(n=e;n<d;++n){var h=s[n];if(h.primitiveType===c["a"].POINTS&&h.pass!==_["a"].TRANSLUCENT){var u=h.derivedCommands.pointCloudProcessor;(!Object(o["a"])(u)||h.dirty||r||u.framebuffer!==this._framebuffer)&&(u=l["a"].shallowClone(h),h.derivedCommands.pointCloudProcessor=u,u.framebuffer=this._framebuffer,u.shaderProgram=I(t.context,h.shaderProgram),u.castShadows=!1,u.receiveShadows=!1),s[n]=u}}var p=this._clearCommand,m=this._drawCommand;m.boundingVolume=a,s.push(m),s.push(p)}},v.prototype.isDestroyed=function(){return!1},v.prototype.destroy=function(){return T(this),Object(r["a"])(this)},e["a"]=v},3443:function(t,e,i){"use strict";var a=i("1d87"),n=i("cef5"),o=i("be18"),r=i("a561"),s=i("dc1c"),c=i("bd8d"),d=i("2bb9"),l=i("abab"),h=i("535a"),_=i("2f63"),u=i("7d62"),p=i("e856"),m=i("93da"),f=i("52f0"),b=i("b639"),y=i("713f"),g=i("1b8d"),S=i("283e"),v=i("f806"),T=i("f20a"),D=i("8b68"),O=i("a894"),E=i("d289"),A=i("6dc0"),C=i("e90c"),I=i("7c5e"),P=i("a58e"),N=i("b7c8"),x=i("6596"),B=i("9889"),L=i("08b8"),w=i("d663"),j=i("0249"),R=i("a307"),z=i("c86b"),U=i("3626"),M={NEEDS_DECODE:0,DECODING:1,READY:2,FAILED:3};function G(t){this._parsedContent=void 0,this._drawCommand=void 0,this._isTranslucent=!1,this._styleTranslucent=!1,this._constantColor=c["a"].clone(c["a"].DARKGRAY),this._highlightColor=c["a"].clone(c["a"].WHITE),this._pointSize=1,this._rtcCenter=void 0,this._quantizedVolumeScale=void 0,this._quantizedVolumeOffset=void 0,this._styleableShaderAttributes=void 0,this._isQuantized=!1,this._isOctEncoded16P=!1,this._isRGB565=!1,this._hasColors=!1,this._hasNormals=!1,this._hasBatchIds=!1,this._decodingState=M.READY,this._dequantizeInShader=!0,this._isQuantizedDraco=!1,this._isOctEncodedDraco=!1,this._quantizedRange=0,this._octEncodedRange=0,this.backFaceCulling=!1,this._backFaceCulling=!1,this.normalShading=!0,this._normalShading=!0,this._opaqueRenderState=void 0,this._translucentRenderState=void 0,this._mode=void 0,this._ready=!1,this._readyPromise=P["a"].defer(),this._pointsLength=0,this._geometryByteLength=0,this._vertexShaderLoaded=t.vertexShaderLoaded,this._fragmentShaderLoaded=t.fragmentShaderLoaded,this._uniformMapLoaded=t.uniformMapLoaded,this._batchTableLoaded=t.batchTableLoaded,this._pickIdLoaded=t.pickIdLoaded,this._opaquePass=Object(h["a"])(t.opaquePass,E["a"].OPAQUE),this._cull=Object(h["a"])(t.cull,!0),this.style=void 0,this._style=void 0,this.styleDirty=!1,this.modelMatrix=f["a"].clone(f["a"].IDENTITY),this._modelMatrix=f["a"].clone(f["a"].IDENTITY),this.time=0,this.shadows=z["a"].ENABLED,this._boundingSphere=void 0,this.clippingPlanes=void 0,this.isClipped=!1,this.clippingPlanesDirty=!1,this.clippingPlanesOriginMatrix=void 0,this.attenuation=!1,this._attenuation=!1,this.geometricError=0,this.geometricErrorScale=1,this.maximumAttenuation=this._pointSize,F(this,t)}Object.defineProperties(G.prototype,{pointsLength:{get:function(){return this._pointsLength}},geometryByteLength:{get:function(){return this._geometryByteLength}},ready:{get:function(){return this._ready}},readyPromise:{get:function(){return this._readyPromise.promise}},color:{get:function(){return c["a"].clone(this._highlightColor)},set:function(t){this._highlightColor=c["a"].clone(t,this._highlightColor)}},boundingSphere:{get:function(){if(Object(_["a"])(this._drawCommand))return this._drawCommand.boundingVolume},set:function(t){this._boundingSphere=n["a"].clone(t,this._boundingSphere)}}});var V=Uint32Array.BYTES_PER_ELEMENT;function F(t,e){var i=e.arrayBuffer,n=Object(h["a"])(e.byteOffset,0),r=new Uint8Array(i),s=new DataView(i);n+=V;var u=s.getUint32(n,!0);if(1!==u)throw new S["a"]("Only Point Cloud tile version 1 is supported.  Version "+u+" is not.");n+=V,n+=V;var m=s.getUint32(n,!0);if(0===m)throw new S["a"]("Feature table must have a byte length greater than zero");n+=V;var f=s.getUint32(n,!0);n+=V;var b=s.getUint32(n,!0);n+=V;var y=s.getUint32(n,!0);n+=V;var g=Object(p["a"])(r,n,m);n+=m;var v,T,D=new Uint8Array(i,n,f);n+=f,b>0&&(v=Object(p["a"])(r,n,b),n+=b,y>0&&(T=new Uint8Array(i,n,y),n+=y));var O=new B["a"](g,D),E=O.getGlobalProperty("POINTS_LENGTH");if(O.featuresLength=E,!Object(_["a"])(E))throw new S["a"]("Feature table global property: POINTS_LENGTH must be defined");var A,C,I,P,N=O.getGlobalProperty("RTC_CENTER",l["a"].FLOAT,3);Object(_["a"])(N)&&(t._rtcCenter=o["a"].unpack(N));var L,w,j,R,z,U=!1,G=!1,F=!1,k=!1,q=!1,H=!1,W=!1,Y=!1,Q=Object(_["a"])(g.extensions)?g.extensions["3DTILES_draco_point_compression"]:void 0,X=Object(_["a"])(v)&&Object(_["a"])(v.extensions)?v.extensions["3DTILES_draco_point_compression"]:void 0;if(Object(_["a"])(X)&&(j=X.properties),Object(_["a"])(Q)){w=Q.properties;var Z=Q.byteOffset,J=Q.byteLength;if(!Object(_["a"])(w)||!Object(_["a"])(Z)||!Object(_["a"])(J))throw new S["a"]("Draco properties, byteOffset, and byteLength must be defined");L=Object(a["a"])(D,Z,Z+J),U=Object(_["a"])(w.POSITION),G=Object(_["a"])(w.RGB)||Object(_["a"])(w.RGBA),F=Object(_["a"])(w.NORMAL),k=Object(_["a"])(w.BATCH_ID),H=Object(_["a"])(w.RGBA),t._decodingState=M.NEEDS_DECODE}if(Object(_["a"])(L)&&(R={buffer:L,featureTableProperties:w,batchTableProperties:j,properties:Object(d["a"])(w,j),dequantizeInShader:t._dequantizeInShader}),!U)if(Object(_["a"])(g.POSITION))A=O.getPropertyArray("POSITION",l["a"].FLOAT,3),U=!0;else if(Object(_["a"])(g.POSITION_QUANTIZED)){A=O.getPropertyArray("POSITION_QUANTIZED",l["a"].UNSIGNED_SHORT,3),q=!0,U=!0;var K=O.getGlobalProperty("QUANTIZED_VOLUME_SCALE",l["a"].FLOAT,3);if(!Object(_["a"])(K))throw new S["a"]("Global property: QUANTIZED_VOLUME_SCALE must be defined for quantized positions.");t._quantizedVolumeScale=o["a"].unpack(K),t._quantizedRange=65535;var $=O.getGlobalProperty("QUANTIZED_VOLUME_OFFSET",l["a"].FLOAT,3);if(!Object(_["a"])($))throw new S["a"]("Global property: QUANTIZED_VOLUME_OFFSET must be defined for quantized positions.");t._quantizedVolumeOffset=o["a"].unpack($)}if(G||(Object(_["a"])(g.RGBA)?(C=O.getPropertyArray("RGBA",l["a"].UNSIGNED_BYTE,4),H=!0,G=!0):Object(_["a"])(g.RGB)?(C=O.getPropertyArray("RGB",l["a"].UNSIGNED_BYTE,3),G=!0):Object(_["a"])(g.RGB565)&&(C=O.getPropertyArray("RGB565",l["a"].UNSIGNED_SHORT,1),W=!0,G=!0)),F||(Object(_["a"])(g.NORMAL)?(I=O.getPropertyArray("NORMAL",l["a"].FLOAT,3),F=!0):Object(_["a"])(g.NORMAL_OCT16P)&&(I=O.getPropertyArray("NORMAL_OCT16P",l["a"].UNSIGNED_BYTE,2),Y=!0,F=!0)),k||Object(_["a"])(g.BATCH_ID)&&(P=O.getPropertyArray("BATCH_ID",l["a"].UNSIGNED_SHORT,1),k=!0),!U)throw new S["a"]("Either POSITION or POSITION_QUANTIZED must be defined.");if(Object(_["a"])(g.CONSTANT_RGBA)){var tt=O.getGlobalProperty("CONSTANT_RGBA",l["a"].UNSIGNED_BYTE,4);t._constantColor=c["a"].fromBytes(tt[0],tt[1],tt[2],tt[3],t._constantColor)}if(k){var et=O.getGlobalProperty("BATCH_LENGTH");if(!Object(_["a"])(et))throw new S["a"]("Global property: BATCH_LENGTH must be defined when BATCH_ID is defined.");Object(_["a"])(T)&&(T=new Uint8Array(T)),Object(_["a"])(t._batchTableLoaded)&&t._batchTableLoaded(et,v,T)}!k&&Object(_["a"])(T)&&(z=x["a"].getBinaryProperties(E,v,T)),t._parsedContent={positions:A,colors:C,normals:I,batchIds:P,styleableProperties:z,draco:R},t._pointsLength=E,t._isQuantized=q,t._isOctEncoded16P=Y,t._isRGB565=W,t._isTranslucent=H,t._hasColors=G,t._hasNormals=F,t._hasBatchIds=k}var k,q=new o["a"],H=new o["a"],W=new o["a"];function Y(t){if(!Object(_["a"])(k)){m["a"].setRandomNumberSeed(0),k=new Array(t);for(var e=0;e<t;++e)k[e]=m["a"].nextRandomNumber()}return k}function Q(t){for(var e=20,i=t.length/3,a=Math.min(i,e),r=Y(e),s=Number.MAX_VALUE,c=-Number.MAX_VALUE,d=o["a"].fromElements(s,s,s,q),l=o["a"].fromElements(c,c,c,H),h=0;h<a;++h){var _=Math.floor(r[h]*i),u=o["a"].unpack(t,3*_,W);o["a"].minimumByComponent(d,u,d),o["a"].maximumByComponent(l,u,l)}var p=n["a"].fromCornerPoints(d,l);return p.radius+=m["a"].EPSILON2,p}function X(t,e){var i=l["a"].fromTypedArray(t);return i===l["a"].INT||i===l["a"].UNSIGNED_INT||i===l["a"].DOUBLE?(Object(b["a"])("Cast pnts property to floats",'Point cloud property "'+e+'" will be casted to a float array because INT, UNSIGNED_INT, and DOUBLE are not valid WebGL vertex attribute types. Some precision may be lost.'),new Float32Array(t)):t}var Z=new r["a"],J=new r["a"],K=new c["a"],$=0,tt=1,et=2,it=3,at=4,nt=new f["a"],ot=new f["a"];function rt(t,e){var i,a,r=e.context,s=t._parsedContent,c=t._pointsLength,d=s.positions,h=s.colors,u=s.normals,p=s.batchIds,m=s.styleableProperties,b=Object(_["a"])(m),y=t._isQuantized,S=t._isQuantizedDraco,v=t._isOctEncoded16P,C=t._isOctEncodedDraco,P=t._quantizedRange,x=t._octEncodedRange,B=t._isRGB565,L=t._isTranslucent,w=t._hasColors,j=t._hasNormals,R=t._hasBatchIds,z=[],M={};if(t._styleableShaderAttributes=M,b){var G=at;for(var V in m)if(m.hasOwnProperty(V)){var F=m[V],k=X(F.typedArray,V);i=F.componentCount,a=l["a"].fromTypedArray(k);var q=T["a"].createVertexBuffer({context:r,typedArray:k,usage:D["a"].STATIC_DRAW});t._geometryByteLength+=q.sizeInBytes;var H={index:G,vertexBuffer:q,componentsPerAttribute:i,componentDatatype:a,normalize:!1,offsetInBytes:0,strideInBytes:0};z.push(H),M[V]={location:G,componentCount:i},++G}}var W,Y,Z,J=T["a"].createVertexBuffer({context:r,typedArray:d,usage:D["a"].STATIC_DRAW});t._geometryByteLength+=J.sizeInBytes,w&&(W=T["a"].createVertexBuffer({context:r,typedArray:h,usage:D["a"].STATIC_DRAW}),t._geometryByteLength+=W.sizeInBytes),j&&(Y=T["a"].createVertexBuffer({context:r,typedArray:u,usage:D["a"].STATIC_DRAW}),t._geometryByteLength+=Y.sizeInBytes),R&&(p=X(p,"batchIds"),Z=T["a"].createVertexBuffer({context:r,typedArray:p,usage:D["a"].STATIC_DRAW}),t._geometryByteLength+=Z.sizeInBytes);var K=[];if(a=y?l["a"].UNSIGNED_SHORT:S?P<=255?l["a"].UNSIGNED_BYTE:l["a"].UNSIGNED_SHORT:l["a"].FLOAT,K.push({index:$,vertexBuffer:J,componentsPerAttribute:3,componentDatatype:a,normalize:!1,offsetInBytes:0,strideInBytes:0}),t._cull&&(t._boundingSphere=y||S?n["a"].fromCornerPoints(o["a"].ZERO,t._quantizedVolumeScale):Q(d)),w)if(B)K.push({index:tt,vertexBuffer:W,componentsPerAttribute:1,componentDatatype:l["a"].UNSIGNED_SHORT,normalize:!1,offsetInBytes:0,strideInBytes:0});else{var nt=L?4:3;K.push({index:tt,vertexBuffer:W,componentsPerAttribute:nt,componentDatatype:l["a"].UNSIGNED_BYTE,normalize:!0,offsetInBytes:0,strideInBytes:0})}j&&(v?(i=2,a=l["a"].UNSIGNED_BYTE):C?(i=2,a=x<=255?l["a"].UNSIGNED_BYTE:l["a"].UNSIGNED_SHORT):(i=3,a=l["a"].FLOAT),K.push({index:et,vertexBuffer:Y,componentsPerAttribute:i,componentDatatype:a,normalize:!1,offsetInBytes:0,strideInBytes:0})),R&&K.push({index:it,vertexBuffer:Z,componentsPerAttribute:1,componentDatatype:l["a"].fromTypedArray(p),normalize:!1,offsetInBytes:0,strideInBytes:0}),b&&(K=K.concat(z));var ot=new I["a"]({context:r,attributes:K}),rt={depthTest:{enabled:!0}},st={depthTest:{enabled:!0},depthMask:!1,blending:N["a"].ALPHA_BLEND};t._opaquePass===E["a"].CESIUM_3D_TILE&&(rt.stencilTest=U["a"].setCesium3DTileBit(),rt.stencilMask=U["a"].CESIUM_3D_TILE_MASK,st.stencilTest=U["a"].setCesium3DTileBit(),st.stencilMask=U["a"].CESIUM_3D_TILE_MASK),t._opaqueRenderState=A["a"].fromCache(rt),t._translucentRenderState=A["a"].fromCache(st),t._drawCommand=new O["a"]({boundingVolume:new n["a"],cull:t._cull,modelMatrix:new f["a"],primitiveType:g["a"].POINTS,vertexArray:ot,count:c,shaderProgram:void 0,uniformMap:void 0,renderState:L?t._translucentRenderState:t._opaqueRenderState,pass:L?E["a"].TRANSLUCENT:t._opaquePass,owner:t,castShadows:!1,receiveShadows:!1,pickId:t._pickIdLoaded()})}function st(t,e){var i=e.context,a=t._isQuantized,n=t._isQuantizedDraco,r=t._isOctEncodedDraco,s={u_pointSizeAndTimeAndGeometricErrorAndDepthMultiplier:function(){var a=Z;if(a.x=t._attenuation?t.maximumAttenuation:t._pointSize,a.x*=e.pixelRatio,a.y=t.time,t._attenuation){var n,o=e.camera.frustum;n=e.mode===R["a"].SCENE2D||o instanceof y["a"]?Number.POSITIVE_INFINITY:i.drawingBufferHeight/e.camera.frustum.sseDenominator,a.z=t.geometricError*t.geometricErrorScale,a.w=n}return a},u_highlightColor:function(){return t._highlightColor},u_constantColor:function(){return t._constantColor},u_clippingPlanes:function(){var e=t.clippingPlanes,a=t.isClipped;return a?e.texture:i.defaultTexture},u_clippingPlanesEdgeStyle:function(){var e=t.clippingPlanes;if(!Object(_["a"])(e))return c["a"].TRANSPARENT;var i=c["a"].clone(e.edgeColor,K);return i.alpha=e.edgeWidth,i},u_clippingPlanesMatrix:function(){var e=t.clippingPlanes;if(!Object(_["a"])(e))return f["a"].IDENTITY;var a=Object(h["a"])(t.clippingPlanesOriginMatrix,t._modelMatrix);f["a"].multiply(i.uniformState.view3D,a,nt);var n=f["a"].multiply(nt,e.modelMatrix,nt);return f["a"].inverseTranspose(n,ot)}};(a||n||r)&&(s=Object(d["a"])(s,{u_quantizedVolumeScaleAndOctEncodedRange:function(){var e=J;if(Object(_["a"])(t._quantizedVolumeScale)){var i=o["a"].clone(t._quantizedVolumeScale,e);o["a"].divideByScalar(i,t._quantizedRange,e)}return e.w=t._octEncodedRange,e}})),Object(_["a"])(t._uniformMapLoaded)&&(s=t._uniformMapLoaded(s)),t._drawCommand.uniformMap=s}function ct(t,e){var i=/czm_3dtiles_property_(\d+)/g,a=i.exec(t);while(null!==a){var n=parseInt(a[1]);-1===e.indexOf(n)&&e.push(n),a=i.exec(t)}}function dt(t,e){var i=/czm_3dtiles_builtin_property_(\w+)/g,a=i.exec(t);while(null!==a){var n=a[1];-1===e.indexOf(n)&&e.push(n),a=i.exec(t)}}function lt(t,e){for(var i=t.numberOfAttributes,a=0;a<i;++a){var n=t.getAttribute(a);if(n.index===e)return n}}var ht={POSITION:"czm_3dtiles_builtin_property_POSITION",POSITION_ABSOLUTE:"czm_3dtiles_builtin_property_POSITION_ABSOLUTE",COLOR:"czm_3dtiles_builtin_property_COLOR",NORMAL:"czm_3dtiles_builtin_property_NORMAL"};function _t(t){var e="(vec3 czm_3dtiles_builtin_property_POSITION, vec3 czm_3dtiles_builtin_property_POSITION_ABSOLUTE, vec4 czm_3dtiles_builtin_property_COLOR, vec3 czm_3dtiles_builtin_property_NORMAL)";return t.replace("()",e)}function ut(t,e,i){var a,n,o,r,c,d,l=e.context,h=Object(_["a"])(i),u=t._isQuantized,p=t._isQuantizedDraco,m=t._isOctEncoded16P,f=t._isOctEncodedDraco,b=t._isRGB565,y=t._isTranslucent,g=t._hasColors,v=t._hasNormals,T=t._hasBatchIds,D=t._backFaceCulling,O=t._normalShading,E=t._drawCommand.vertexArray,A=t.clippingPlanes,I=t._attenuation,P=y,N=Object(s["a"])(ht),x={},B=t._styleableShaderAttributes;for(n in B)B.hasOwnProperty(n)&&(o=B[n],N[n]="czm_3dtiles_property_"+o.location,x[o.location]=o);if(h){var L={translucent:!1};r=i.getColorShaderFunction("getColorFromStyle",N,L),c=i.getShowShaderFunction("getShowFromStyle",N,L),d=i.getPointSizeShaderFunction("getPointSizeFromStyle",N,L),Object(_["a"])(r)&&L.translucent&&(P=!0)}t._styleTranslucent=P;var R=Object(_["a"])(r),z=Object(_["a"])(c),U=Object(_["a"])(d),M=t.isClipped,G=[],V=[];R&&(ct(r,G),dt(r,V),r=_t(r)),z&&(ct(c,G),dt(c,V),c=_t(c)),U&&(ct(d,G),dt(d,V),d=_t(d));var F=V.indexOf("COLOR")>=0,k=V.indexOf("NORMAL")>=0;if(k&&!v)throw new S["a"]("Style references the NORMAL semantic but the point cloud does not have normals");for(n in B)if(B.hasOwnProperty(n)){o=B[n];var q=G.indexOf(o.location)>=0,H=lt(E,o.location);H.enabled=q}var W=g&&(!R||F);if(g){var Y=lt(E,tt);Y.enabled=W}var Q=v&&(O||D||k);if(v){var X=lt(E,et);X.enabled=Q}var Z={a_position:$};W&&(Z.a_color=tt),Q&&(Z.a_normal=et),T&&(Z.a_batchId=it);var J="",K=G.length;for(a=0;a<K;++a){var at=G[a];o=x[at];var nt,ot=o.componentCount,rt="czm_3dtiles_property_"+at;nt=1===ot?"float":"vec"+ot,J+="attribute "+nt+" "+rt+"; \n",Z[rt]=o.location}st(t,e);var ut="attribute vec3 a_position; \nvarying vec4 v_color; \nuniform vec4 u_pointSizeAndTimeAndGeometricErrorAndDepthMultiplier; \nuniform vec4 u_constantColor; \nuniform vec4 u_highlightColor; \n";ut+="float u_pointSize; \nfloat u_time; \n",I&&(ut+="float u_geometricError; \nfloat u_depthMultiplier; \n"),ut+=J,W&&(ut+=y?"attribute vec4 a_color; \n":b?"attribute float a_color; \nconst float SHIFT_RIGHT_11 = 1.0 / 2048.0; \nconst float SHIFT_RIGHT_5 = 1.0 / 32.0; \nconst float SHIFT_LEFT_11 = 2048.0; \nconst float SHIFT_LEFT_5 = 32.0; \nconst float NORMALIZE_6 = 1.0 / 64.0; \nconst float NORMALIZE_5 = 1.0 / 32.0; \n":"attribute vec3 a_color; \n"),Q&&(ut+=m||f?"attribute vec2 a_normal; \n":"attribute vec3 a_normal; \n"),T&&(ut+="attribute float a_batchId; \n"),(u||p||f)&&(ut+="uniform vec4 u_quantizedVolumeScaleAndOctEncodedRange; \n"),R&&(ut+=r),z&&(ut+=c),U&&(ut+=d),ut+="void main() \n{ \n    u_pointSize = u_pointSizeAndTimeAndGeometricErrorAndDepthMultiplier.x; \n    u_time = u_pointSizeAndTimeAndGeometricErrorAndDepthMultiplier.y; \n",I&&(ut+="    u_geometricError = u_pointSizeAndTimeAndGeometricErrorAndDepthMultiplier.z; \n    u_depthMultiplier = u_pointSizeAndTimeAndGeometricErrorAndDepthMultiplier.w; \n"),ut+=W?y?"    vec4 color = a_color; \n":b?"    float compressed = a_color; \n    float r = floor(compressed * SHIFT_RIGHT_11); \n    compressed -= r * SHIFT_LEFT_11; \n    float g = floor(compressed * SHIFT_RIGHT_5); \n    compressed -= g * SHIFT_LEFT_5; \n    float b = compressed; \n    vec3 rgb = vec3(r * NORMALIZE_5, g * NORMALIZE_6, b * NORMALIZE_5); \n    vec4 color = vec4(rgb, 1.0); \n":"    vec4 color = vec4(a_color, 1.0); \n":"    vec4 color = u_constantColor; \n",ut+=u||p?"    vec3 position = a_position * u_quantizedVolumeScaleAndOctEncodedRange.xyz; \n":"    vec3 position = a_position; \n",ut+="    vec3 position_absolute = vec3(czm_model * vec4(position, 1.0)); \n",Q?(ut+=m?"    vec3 normal = czm_octDecode(a_normal); \n":f?"    vec3 normal = czm_octDecode(a_normal, u_quantizedVolumeScaleAndOctEncodedRange.w).zxy; \n":"    vec3 normal = a_normal; \n",ut+="    vec3 normalEC = czm_normal * normal; \n"):ut+="    vec3 normal = vec3(1.0); \n",R&&(ut+="    color = getColorFromStyle(position, position_absolute, color, normal); \n"),z&&(ut+="    float show = float(getShowFromStyle(position, position_absolute, color, normal)); \n"),ut+=U?"    gl_PointSize = getPointSizeFromStyle(position, position_absolute, color, normal) * czm_pixelRatio; \n":I?"    vec4 positionEC = czm_modelView * vec4(position, 1.0); \n    float depth = -positionEC.z; \n    gl_PointSize = min((u_geometricError / depth) * u_depthMultiplier, u_pointSize); \n":"    gl_PointSize = u_pointSize; \n",ut+="    color = color * u_highlightColor; \n",Q&&O&&(ut+="    float diffuseStrength = czm_getLambertDiffuse(czm_lightDirectionEC, normalEC); \n    diffuseStrength = max(diffuseStrength, 0.4); \n    color.xyz *= diffuseStrength * czm_lightColor; \n"),ut+="    v_color = color; \n    gl_Position = czm_modelViewProjection * vec4(position, 1.0); \n",Q&&D&&(ut+="    float visible = step(-normalEC.z, 0.0); \n    gl_Position *= visible; \n    gl_PointSize *= visible; \n"),z&&(ut+="    gl_Position.w *= float(show); \n    gl_PointSize *= float(show); \n"),ut+="} \n";var pt="varying vec4 v_color; \n";M&&(pt+="uniform highp sampler2D u_clippingPlanes; \nuniform mat4 u_clippingPlanesMatrix; \nuniform vec4 u_clippingPlanesEdgeStyle; \n",pt+="\n",pt+=Object(j["a"])(A,l),pt+="\n"),pt+="void main() \n{ \n    gl_FragColor = czm_gammaCorrect(v_color); \n",M&&(pt+=Object(w["a"])("u_clippingPlanes","u_clippingPlanesMatrix","u_clippingPlanesEdgeStyle")),pt+="} \n",Object(_["a"])(t._vertexShaderLoaded)&&(ut=t._vertexShaderLoaded(ut)),Object(_["a"])(t._fragmentShaderLoaded)&&(pt=t._fragmentShaderLoaded(pt));var mt=t._drawCommand;Object(_["a"])(mt.shaderProgram)&&mt.shaderProgram.destroy(),mt.shaderProgram=C["a"].fromCache({context:l,vertexShaderSource:ut,fragmentShaderSource:pt,attributeLocations:Z});try{mt.shaderProgram._bind()}catch(ft){throw new S["a"]("Error generating style shader: this may be caused by a type mismatch, index out-of-bounds, or other syntax error.")}}function pt(t,e){if(t._decodingState===M.READY)return!1;if(t._decodingState===M.NEEDS_DECODE){var i=t._parsedContent,a=i.draco,n=L["a"].decodePointCloud(a,e);Object(_["a"])(n)&&(t._decodingState=M.DECODING,n.then((function(e){t._decodingState=M.READY;var n=Object(_["a"])(e.POSITION)?e.POSITION.array:void 0,r=Object(_["a"])(e.RGB)?e.RGB.array:void 0,s=Object(_["a"])(e.RGBA)?e.RGBA.array:void 0,c=Object(_["a"])(e.NORMAL)?e.NORMAL.array:void 0,d=Object(_["a"])(e.BATCH_ID)?e.BATCH_ID.array:void 0,l=Object(_["a"])(n)&&Object(_["a"])(e.POSITION.data.quantization),u=Object(_["a"])(c)&&Object(_["a"])(e.NORMAL.data.quantization);if(l){var p=e.POSITION.data.quantization,m=p.range;t._quantizedVolumeScale=o["a"].fromElements(m,m,m),t._quantizedVolumeOffset=o["a"].unpack(p.minValues),t._quantizedRange=(1<<p.quantizationBits)-1,t._isQuantizedDraco=!0}u&&(t._octEncodedRange=(1<<e.NORMAL.data.quantization.quantizationBits)-1,t._isOctEncodedDraco=!0);var f=i.styleableProperties,b=a.batchTableProperties;for(var y in b)if(b.hasOwnProperty(y)){var g=e[y];Object(_["a"])(f)||(f={}),f[y]={typedArray:g.array,componentCount:g.data.componentsPerAttribute}}i.positions=Object(h["a"])(n,i.positions),i.colors=Object(h["a"])(Object(h["a"])(s,r),i.colors),i.normals=Object(h["a"])(c,i.normals),i.batchIds=Object(h["a"])(d,i.batchIds),i.styleableProperties=f})).otherwise((function(e){t._decodingState=M.FAILED,t._readyPromise.reject(e)})))}return!0}var mt=new r["a"],ft=new o["a"];G.prototype.update=function(t){var e=t.context,i=pt(this,e);if(!i){var a=!1,s=!f["a"].equals(this._modelMatrix,this.modelMatrix);if(this._mode!==t.mode&&(this._mode=t.mode,s=!0),Object(_["a"])(this._drawCommand)||(rt(this,t),s=!0,a=!0,this._ready=!0,this._readyPromise.resolve(this),this._parsedContent=void 0),s){f["a"].clone(this.modelMatrix,this._modelMatrix);var c=this._drawCommand.modelMatrix;if(f["a"].clone(this._modelMatrix,c),Object(_["a"])(this._rtcCenter)&&f["a"].multiplyByTranslation(c,this._rtcCenter,c),Object(_["a"])(this._quantizedVolumeOffset)&&f["a"].multiplyByTranslation(c,this._quantizedVolumeOffset,c),t.mode!==R["a"].SCENE3D){var d=t.mapProjection,l=f["a"].getColumn(c,3,mt);r["a"].equals(l,r["a"].UNIT_W)||v["a"].basisTo2D(d,c,c)}var h=this._drawCommand.boundingVolume;if(n["a"].clone(this._boundingSphere,h),this._cull){var u=h.center;f["a"].multiplyByPoint(c,u,u);var p=f["a"].getScale(c,ft);h.radius*=o["a"].maximumComponent(p)}}this.clippingPlanesDirty&&(this.clippingPlanesDirty=!1,a=!0),this._attenuation!==this.attenuation&&(this._attenuation=this.attenuation,a=!0),this.backFaceCulling!==this._backFaceCulling&&(this._backFaceCulling=this.backFaceCulling,a=!0),this.normalShading!==this._normalShading&&(this._normalShading=this.normalShading,a=!0),(this._style!==this.style||this.styleDirty)&&(this._style=this.style,this.styleDirty=!1,a=!0),a&&ut(this,t,this._style),this._drawCommand.castShadows=z["a"].castShadows(this.shadows),this._drawCommand.receiveShadows=z["a"].receiveShadows(this.shadows);var m=this._highlightColor.alpha<1||this._constantColor.alpha<1||this._styleTranslucent;this._drawCommand.renderState=m?this._translucentRenderState:this._opaqueRenderState,this._drawCommand.pass=m?E["a"].TRANSLUCENT:this._opaquePass;var b=t.commandList,y=t.passes;(y.render||y.pick)&&b.push(this._drawCommand)}},G.prototype.isDestroyed=function(){return!1},G.prototype.destroy=function(){var t=this._drawCommand;return Object(_["a"])(t)&&(t.vertexArray=t.vertexArray&&t.vertexArray.destroy(),t.shaderProgram=t.shaderProgram&&t.shaderProgram.destroy()),Object(u["a"])(this)},e["a"]=G},"44bf":function(t,e,i){"use strict";var a=i("cef5"),n=i("bd8d"),o=i("abab"),r=i("535a"),s=i("2f63"),c=i("7d62"),d=i("6cbd"),l=i("93da"),h=i("52f0"),_=i("1b8d"),u=i("daa2"),p=i("8b68"),m=i("b997"),f=i("a894"),b=i("d289"),y=i("6dc0"),g=i("e90c"),S=i("5770"),v=i("9d80"),T=i("609e"),D=i("a48a"),O=i("b7c8"),E=i("141c"),A=i("bdd0"),C=i("a307"),I=A["a"].SHOW_INDEX,P=A["a"].POSITION_INDEX,N=A["a"].COLOR_INDEX,x=A["a"].OUTLINE_COLOR_INDEX,B=A["a"].OUTLINE_WIDTH_INDEX,L=A["a"].PIXEL_SIZE_INDEX,w=A["a"].SCALE_BY_DISTANCE_INDEX,j=A["a"].TRANSLUCENCY_BY_DISTANCE_INDEX,R=A["a"].DISTANCE_DISPLAY_CONDITION_INDEX,z=A["a"].DISABLE_DEPTH_DISTANCE_INDEX,U=A["a"].NUMBER_OF_PROPERTIES,M={positionHighAndSize:0,positionLowAndOutline:1,compressedAttribute0:2,compressedAttribute1:3,scaleByDistance:4,distanceDisplayConditionAndDisableDepth:5};function G(t){t=Object(r["a"])(t,r["a"].EMPTY_OBJECT),this._sp=void 0,this._spTranslucent=void 0,this._rsOpaque=void 0,this._rsTranslucent=void 0,this._vaf=void 0,this._pointPrimitives=[],this._pointPrimitivesToUpdate=[],this._pointPrimitivesToUpdateIndex=0,this._pointPrimitivesRemoved=!1,this._createVertexArray=!1,this._shaderScaleByDistance=!1,this._compiledShaderScaleByDistance=!1,this._shaderTranslucencyByDistance=!1,this._compiledShaderTranslucencyByDistance=!1,this._shaderDistanceDisplayCondition=!1,this._compiledShaderDistanceDisplayCondition=!1,this._shaderDisableDepthDistance=!1,this._compiledShaderDisableDepthDistance=!1,this._propertiesChanged=new Uint32Array(U),this._maxPixelSize=1,this._baseVolume=new a["a"],this._baseVolumeWC=new a["a"],this._baseVolume2D=new a["a"],this._boundingVolume=new a["a"],this._boundingVolumeDirty=!1,this._colorCommands=[],this.show=Object(r["a"])(t.show,!0),this.modelMatrix=h["a"].clone(Object(r["a"])(t.modelMatrix,h["a"].IDENTITY)),this._modelMatrix=h["a"].clone(h["a"].IDENTITY),this.debugShowBoundingVolume=Object(r["a"])(t.debugShowBoundingVolume,!1),this.blendOption=Object(r["a"])(t.blendOption,E["a"].OPAQUE_AND_TRANSLUCENT),this._blendOption=void 0,this._mode=C["a"].SCENE3D,this._maxTotalPointSize=1,this._buffersUsage=[p["a"].STATIC_DRAW,p["a"].STATIC_DRAW,p["a"].STATIC_DRAW,p["a"].STATIC_DRAW,p["a"].STATIC_DRAW,p["a"].STATIC_DRAW,p["a"].STATIC_DRAW,p["a"].STATIC_DRAW,p["a"].STATIC_DRAW];var e=this;this._uniforms={u_maxTotalPointSize:function(){return e._maxTotalPointSize}}}function V(t){for(var e=t.length,i=0;i<e;++i)t[i]&&t[i]._destroy()}function F(t){if(t._pointPrimitivesRemoved){t._pointPrimitivesRemoved=!1;for(var e=[],i=t._pointPrimitives,a=i.length,n=0,o=0;n<a;++n){var r=i[n];r&&(r._index=o++,e.push(r))}t._pointPrimitives=e}}function k(t,e,i){return new v["a"](t,[{index:M.positionHighAndSize,componentsPerAttribute:4,componentDatatype:o["a"].FLOAT,usage:i[P]},{index:M.positionLowAndShow,componentsPerAttribute:4,componentDatatype:o["a"].FLOAT,usage:i[P]},{index:M.compressedAttribute0,componentsPerAttribute:4,componentDatatype:o["a"].FLOAT,usage:i[N]},{index:M.compressedAttribute1,componentsPerAttribute:4,componentDatatype:o["a"].FLOAT,usage:i[j]},{index:M.scaleByDistance,componentsPerAttribute:4,componentDatatype:o["a"].FLOAT,usage:i[w]},{index:M.distanceDisplayConditionAndDisableDepth,componentsPerAttribute:3,componentDatatype:o["a"].FLOAT,usage:i[R]}],e)}Object.defineProperties(G.prototype,{length:{get:function(){return F(this),this._pointPrimitives.length}}}),G.prototype.add=function(t){var e=new A["a"](t,this);return e._index=this._pointPrimitives.length,this._pointPrimitives.push(e),this._createVertexArray=!0,e},G.prototype.remove=function(t){return!!this.contains(t)&&(this._pointPrimitives[t._index]=null,this._pointPrimitivesRemoved=!0,this._createVertexArray=!0,t._destroy(),!0)},G.prototype.removeAll=function(){V(this._pointPrimitives),this._pointPrimitives=[],this._pointPrimitivesToUpdate=[],this._pointPrimitivesToUpdateIndex=0,this._pointPrimitivesRemoved=!1,this._createVertexArray=!0},G.prototype._updatePointPrimitive=function(t,e){t._dirty||(this._pointPrimitivesToUpdate[this._pointPrimitivesToUpdateIndex++]=t),++this._propertiesChanged[e]},G.prototype.contains=function(t){return Object(s["a"])(t)&&t._pointPrimitiveCollection===this},G.prototype.get=function(t){return F(this),this._pointPrimitives[t]},G.prototype.computeNewBuffersUsage=function(){for(var t=this._buffersUsage,e=!1,i=this._propertiesChanged,a=0;a<U;++a){var n=0===i[a]?p["a"].STATIC_DRAW:p["a"].STREAM_DRAW;e=e||t[a]!==n,t[a]=n}return e};var q=new d["a"];function H(t,e,i,n){var o=n._index,r=n._getActualPosition();t._mode===C["a"].SCENE3D&&(a["a"].expand(t._baseVolume,r,t._baseVolume),t._boundingVolumeDirty=!0),d["a"].fromCartesian(r,q);var s=n.pixelSize,c=n.outlineWidth;t._maxPixelSize=Math.max(t._maxPixelSize,s+c);var l=i[M.positionHighAndSize],h=q.high;l(o,h.x,h.y,h.z,s);var _=i[M.positionLowAndOutline],u=q.low;_(o,u.x,u.y,u.z,c)}var W=65536,Y=256;function Q(t,e,i,a){var o=a._index,r=a.color,s=a.getPickId(e).color,c=a.outlineColor,d=n["a"].floatToByte(r.red),l=n["a"].floatToByte(r.green),h=n["a"].floatToByte(r.blue),_=d*W+l*Y+h;d=n["a"].floatToByte(c.red),l=n["a"].floatToByte(c.green),h=n["a"].floatToByte(c.blue);var u=d*W+l*Y+h;d=n["a"].floatToByte(s.red),l=n["a"].floatToByte(s.green),h=n["a"].floatToByte(s.blue);var p=d*W+l*Y+h,m=n["a"].floatToByte(r.alpha)*W+n["a"].floatToByte(c.alpha)*Y+n["a"].floatToByte(s.alpha),f=i[M.compressedAttribute0];f(o,_,u,p,m)}function X(t,e,i,a){var n=a._index,o=0,r=1,c=1,d=1,h=a.translucencyByDistance;Object(s["a"])(h)&&(o=h.near,r=h.nearValue,c=h.far,d=h.farValue,1===r&&1===d||(t._shaderTranslucencyByDistance=!0));var _=a.show&&a.clusterShow;0===a.color.alpha&&0===a.outlineColor.alpha&&(_=!1),r=l["a"].clamp(r,0,1),r=1===r?255:255*r|0;var u=(_?1:0)*Y+r;d=l["a"].clamp(d,0,1),d=1===d?255:255*d|0;var p=d,m=i[M.compressedAttribute1];m(n,u,p,o,c)}function Z(t,e,i,a){var n=a._index,o=i[M.scaleByDistance],r=0,c=1,d=1,l=1,h=a.scaleByDistance;Object(s["a"])(h)&&(r=h.near,c=h.nearValue,d=h.far,l=h.farValue,1===c&&1===l||(t._shaderScaleByDistance=!0)),o(n,r,c,d,l)}function J(t,e,i,a){var n=a._index,o=i[M.distanceDisplayConditionAndDisableDepth],r=0,c=Number.MAX_VALUE,d=a.distanceDisplayCondition;Object(s["a"])(d)&&(r=d.near,c=d.far,r*=r,c*=c,t._shaderDistanceDisplayCondition=!0);var l=a.disableDepthTestDistance;l*=l,l>0&&(t._shaderDisableDepthDistance=!0,l===Number.POSITIVE_INFINITY&&(l=-1)),o(n,r,c,l)}function K(t,e,i,a){H(t,e,i,a),Q(t,e,i,a),X(t,e,i,a),Z(t,e,i,a),J(t,e,i,a)}function $(t,e,i,n,o,r){var c;n.mode===C["a"].SCENE3D?(c=t._baseVolume,t._boundingVolumeDirty=!0):c=t._baseVolume2D;for(var d=[],l=0;l<i;++l){var h=e[l],_=h.position,u=A["a"]._computeActualPosition(_,n,o);Object(s["a"])(u)&&(h._setActualPosition(u),r?d.push(u):a["a"].expand(c,u,c))}r&&a["a"].fromPoints(d,c)}function tt(t,e){var i=e.mode,a=t._pointPrimitives,n=t._pointPrimitivesToUpdate,o=t._modelMatrix;t._createVertexArray||t._mode!==i||i!==C["a"].SCENE3D&&!h["a"].equals(o,t.modelMatrix)?(t._mode=i,h["a"].clone(t.modelMatrix,o),t._createVertexArray=!0,i!==C["a"].SCENE3D&&i!==C["a"].SCENE2D&&i!==C["a"].COLUMBUS_VIEW||$(t,a,a.length,e,o,!0)):i===C["a"].MORPHING?$(t,a,a.length,e,o,!0):i!==C["a"].SCENE2D&&i!==C["a"].COLUMBUS_VIEW||$(t,n,t._pointPrimitivesToUpdateIndex,e,o,!1)}function et(t,e,i){var a=e.camera.getPixelSize(i,e.context.drawingBufferWidth,e.context.drawingBufferHeight),n=a*t._maxPixelSize;i.radius+=n}var it=[];G.prototype.update=function(t){if(F(this),this.show){this._maxTotalPointSize=m["a"].maximumAliasedPointSize,tt(this,t);var e,i=this._pointPrimitives,n=i.length,o=this._pointPrimitivesToUpdate,r=this._pointPrimitivesToUpdateIndex,c=this._propertiesChanged,d=this._createVertexArray,l=t.context,p=t.passes,v=p.pick;if(d||!v&&this.computeNewBuffersUsage()){this._createVertexArray=!1;for(var A=0;A<U;++A)c[A]=0;if(this._vaf=this._vaf&&this._vaf.destroy(),n>0){this._vaf=k(l,n,this._buffersUsage),e=this._vaf.writers;for(var G=0;G<n;++G){var V=this._pointPrimitives[G];V._dirty=!1,K(this,l,e,V)}this._vaf.commit()}this._pointPrimitivesToUpdateIndex=0}else if(r>0){var q=it;q.length=0,(c[P]||c[B]||c[L])&&q.push(H),(c[N]||c[x])&&q.push(Q),(c[I]||c[j])&&q.push(X),c[w]&&q.push(Z),(c[R]||c[z])&&q.push(J);var W=q.length;if(e=this._vaf.writers,r/n>.1){for(var Y=0;Y<r;++Y){var $=o[Y];$._dirty=!1;for(var at=0;at<W;++at)q[at](this,l,e,$)}this._vaf.commit()}else{for(var nt=0;nt<r;++nt){var ot=o[nt];ot._dirty=!1;for(var rt=0;rt<W;++rt)q[rt](this,l,e,ot);this._vaf.subCommit(ot._index,1)}this._vaf.endSubCommits()}this._pointPrimitivesToUpdateIndex=0}if(r>1.5*n&&(o.length=n),Object(s["a"])(this._vaf)&&Object(s["a"])(this._vaf.va)){var st;this._boundingVolumeDirty&&(this._boundingVolumeDirty=!1,a["a"].transform(this._baseVolume,this.modelMatrix,this._baseVolumeWC));var ct=h["a"].IDENTITY;t.mode===C["a"].SCENE3D?(ct=this.modelMatrix,st=a["a"].clone(this._baseVolumeWC,this._boundingVolume)):st=a["a"].clone(this._baseVolume2D,this._boundingVolume),et(this,t,st);var dt,lt,ht,_t,ut,pt,mt=this._blendOption!==this.blendOption;this._blendOption=this.blendOption,mt&&(this._blendOption===E["a"].OPAQUE||this._blendOption===E["a"].OPAQUE_AND_TRANSLUCENT?this._rsOpaque=y["a"].fromCache({depthTest:{enabled:!0,func:u["a"].LEQUAL},depthMask:!0}):this._rsOpaque=void 0,this._blendOption===E["a"].TRANSLUCENT||this._blendOption===E["a"].OPAQUE_AND_TRANSLUCENT?this._rsTranslucent=y["a"].fromCache({depthTest:{enabled:!0,func:u["a"].LEQUAL},depthMask:!1,blending:O["a"].ALPHA_BLEND}):this._rsTranslucent=void 0),this._shaderDisableDepthDistance=this._shaderDisableDepthDistance||0!==t.minimumDisableDepthTestDistance,(mt||this._shaderScaleByDistance&&!this._compiledShaderScaleByDistance||this._shaderTranslucencyByDistance&&!this._compiledShaderTranslucencyByDistance||this._shaderDistanceDisplayCondition&&!this._compiledShaderDistanceDisplayCondition||this._shaderDisableDepthDistance!==this._compiledShaderDisableDepthDistance)&&(dt=new S["a"]({sources:[D["a"]]}),this._shaderScaleByDistance&&dt.defines.push("EYE_DISTANCE_SCALING"),this._shaderTranslucencyByDistance&&dt.defines.push("EYE_DISTANCE_TRANSLUCENCY"),this._shaderDistanceDisplayCondition&&dt.defines.push("DISTANCE_DISPLAY_CONDITION"),this._shaderDisableDepthDistance&&dt.defines.push("DISABLE_DEPTH_DISTANCE"),this._blendOption===E["a"].OPAQUE_AND_TRANSLUCENT&&(lt=new S["a"]({defines:["OPAQUE"],sources:[T["a"]]}),this._sp=g["a"].replaceCache({context:l,shaderProgram:this._sp,vertexShaderSource:dt,fragmentShaderSource:lt,attributeLocations:M}),lt=new S["a"]({defines:["TRANSLUCENT"],sources:[T["a"]]}),this._spTranslucent=g["a"].replaceCache({context:l,shaderProgram:this._spTranslucent,vertexShaderSource:dt,fragmentShaderSource:lt,attributeLocations:M})),this._blendOption===E["a"].OPAQUE&&(lt=new S["a"]({sources:[T["a"]]}),this._sp=g["a"].replaceCache({context:l,shaderProgram:this._sp,vertexShaderSource:dt,fragmentShaderSource:lt,attributeLocations:M})),this._blendOption===E["a"].TRANSLUCENT&&(lt=new S["a"]({sources:[T["a"]]}),this._spTranslucent=g["a"].replaceCache({context:l,shaderProgram:this._spTranslucent,vertexShaderSource:dt,fragmentShaderSource:lt,attributeLocations:M})),this._compiledShaderScaleByDistance=this._shaderScaleByDistance,this._compiledShaderTranslucencyByDistance=this._shaderTranslucencyByDistance,this._compiledShaderDistanceDisplayCondition=this._shaderDistanceDisplayCondition,this._compiledShaderDisableDepthDistance=this._shaderDisableDepthDistance);var ft=t.commandList;if(p.render||v){var bt=this._colorCommands,yt=this._blendOption===E["a"].OPAQUE,gt=this._blendOption===E["a"].OPAQUE_AND_TRANSLUCENT;ht=this._vaf.va,_t=ht.length,bt.length=_t;var St=gt?2*_t:_t;for(pt=0;pt<St;++pt){var vt=yt||gt&&pt%2===0;ut=bt[pt],Object(s["a"])(ut)||(ut=bt[pt]=new f["a"]),ut.primitiveType=_["a"].POINTS,ut.pass=vt||!gt?b["a"].OPAQUE:b["a"].TRANSLUCENT,ut.owner=this;var Tt=gt?Math.floor(pt/2):pt;ut.boundingVolume=st,ut.modelMatrix=ct,ut.shaderProgram=vt?this._sp:this._spTranslucent,ut.uniformMap=this._uniforms,ut.vertexArray=ht[Tt].va,ut.renderState=vt?this._rsOpaque:this._rsTranslucent,ut.debugShowBoundingVolume=this.debugShowBoundingVolume,ut.pickId="v_pickColor",ft.push(ut)}}}}},G.prototype.isDestroyed=function(){return!1},G.prototype.destroy=function(){return this._sp=this._sp&&this._sp.destroy(),this._spTranslucent=this._spTranslucent&&this._spTranslucent.destroy(),this._spPick=this._spPick&&this._spPick.destroy(),this._vaf=this._vaf&&this._vaf.destroy(),V(this._pointPrimitives),Object(c["a"])(this)},e["a"]=G},"7b4a":function(t,e,i){"use strict";var a=i("535a"),n=i("2ab8");function o(t){var e=Object(a["a"])(t,{});this.attenuation=Object(a["a"])(e.attenuation,!1),this.geometricErrorScale=Object(a["a"])(e.geometricErrorScale,1),this.maximumAttenuation=e.maximumAttenuation,this.baseResolution=e.baseResolution,this.eyeDomeLighting=Object(a["a"])(e.eyeDomeLighting,!0),this.eyeDomeLightingStrength=Object(a["a"])(e.eyeDomeLightingStrength,1),this.eyeDomeLightingRadius=Object(a["a"])(e.eyeDomeLightingRadius,1),this.backFaceCulling=Object(a["a"])(e.backFaceCulling,!1),this.normalShading=Object(a["a"])(e.normalShading,!0)}o.isSupported=function(t){return n["a"].isSupported(t.context)},e["a"]=o},a994:function(t,e,i){"use strict";var a=i("bd8d"),n=i("2bb9"),o=i("535a"),r=i("2f63"),s=i("7d62"),c=i("93da"),d=i("d289"),l=i("6596"),h=i("5af0"),_=i("c4a1"),u=i("3443"),p=i("7b4a"),m=i("a307");function f(t,e,i,a,n){this._tileset=t,this._tile=e,this._resource=i,this._pickId=void 0,this._batchTable=void 0,this._styleDirty=!1,this._features=void 0,this.featurePropertiesDirty=!1,this._pointCloud=new u["a"]({arrayBuffer:a,byteOffset:n,cull:!1,opaquePass:d["a"].CESIUM_3D_TILE,vertexShaderLoaded:b(this),fragmentShaderLoaded:y(this),uniformMapLoaded:g(this),batchTableLoaded:S(this),pickIdLoaded:v(this)})}function b(t){return function(e){return Object(r["a"])(t._batchTable)?t._batchTable.getVertexShaderCallback(!1,"a_batchId",void 0)(e):e}}function y(t){return function(e){return Object(r["a"])(t._batchTable)?t._batchTable.getFragmentShaderCallback(!1,void 0,!1)(e):"uniform vec4 czm_pickColor;\n"+e}}function g(t){return function(e){return Object(r["a"])(t._batchTable)?t._batchTable.getUniformMapCallback()(e):Object(n["a"])(e,{czm_pickColor:function(){return t._pickId.color}})}}function S(t){return function(e,i,a){t._batchTable=new l["a"](t,e,i,a)}}function v(t){return function(){return Object(r["a"])(t._batchTable)?t._batchTable.getPickId():"czm_pickColor"}}function T(t){var e=t._tileset.pointCloudShading,i=t._tile.contentBoundingVolume.boundingSphere.volume(),a=c["a"].cbrt(i/t.pointsLength),n=t._tile.geometricError;return 0===n&&(n=Object(r["a"])(e)&&Object(r["a"])(e.baseResolution)?e.baseResolution:a),n}function D(t){var e=t.featuresLength;if(!Object(r["a"])(t._features)&&e>0){for(var i=new Array(e),a=0;a<e;++a)i[a]=new h["a"](t,a);t._features=i}}Object.defineProperties(f.prototype,{featuresLength:{get:function(){return Object(r["a"])(this._batchTable)?this._batchTable.featuresLength:0}},pointsLength:{get:function(){return this._pointCloud.pointsLength}},trianglesLength:{get:function(){return 0}},geometryByteLength:{get:function(){return this._pointCloud.geometryByteLength}},texturesByteLength:{get:function(){return 0}},batchTableByteLength:{get:function(){return Object(r["a"])(this._batchTable)?this._batchTable.memorySizeInBytes:0}},innerContents:{get:function(){}},readyPromise:{get:function(){return this._pointCloud.readyPromise}},tileset:{get:function(){return this._tileset}},tile:{get:function(){return this._tile}},url:{get:function(){return this._resource.getUrlComponent(!0)}},batchTable:{get:function(){return this._batchTable}}}),f.prototype.hasProperty=function(t,e){return!!Object(r["a"])(this._batchTable)&&this._batchTable.hasProperty(t,e)},f.prototype.getFeature=function(t){if(Object(r["a"])(this._batchTable)){this.featuresLength;return D(this),this._features[t]}},f.prototype.applyDebugSettings=function(t,e){this._pointCloud.color=t?e:a["a"].WHITE},f.prototype.applyStyle=function(t){Object(r["a"])(this._batchTable)?this._batchTable.applyStyle(t):this._styleDirty=!0};var O=new p["a"];f.prototype.update=function(t,e){var i,a=this._pointCloud,n=Object(o["a"])(t.pointCloudShading,O),s=this._tile,c=this._batchTable,d=e.mode,l=t.clippingPlanes;Object(r["a"])(this._pickId)||Object(r["a"])(c)||(this._pickId=e.context.createPickId({primitive:t,content:this})),Object(r["a"])(c)&&c.update(t,e),i=Object(r["a"])(s._contentBoundingVolume)?d===m["a"].SCENE3D?s._contentBoundingVolume.boundingSphere:s._contentBoundingVolume2D.boundingSphere:d===m["a"].SCENE3D?s._boundingVolume.boundingSphere:s._boundingVolume2D.boundingSphere;var h=this._styleDirty;this._styleDirty=!1,a.clippingPlanesOriginMatrix=t.clippingPlanesOriginMatrix,a.style=Object(r["a"])(c)?void 0:t.style,a.styleDirty=h,a.modelMatrix=s.computedTransform,a.time=t.timeSinceLoad,a.shadows=t.shadows,a.boundingSphere=i,a.clippingPlanes=l,a.isClipped=Object(r["a"])(l)&&l.enabled&&s._isClipped,a.clippingPlanesDirty=s.clippingPlanesDirty,a.attenuation=n.attenuation,a.backFaceCulling=n.backFaceCulling,a.normalShading=n.normalShading,a.geometricError=T(this),a.geometricErrorScale=n.geometricErrorScale,Object(r["a"])(n)&&Object(r["a"])(n.maximumAttenuation)?a.maximumAttenuation=n.maximumAttenuation:s.refine===_["a"].ADD?a.maximumAttenuation=5:a.maximumAttenuation=t.maximumScreenSpaceError,a.update(e)},f.prototype.isDestroyed=function(){return!1},f.prototype.destroy=function(){return this._pickId=this._pickId&&this._pickId.destroy(),this._pointCloud=this._pointCloud&&this._pointCloud.destroy(),this._batchTable=this._batchTable&&this._batchTable.destroy(),Object(s["a"])(this)},e["a"]=f},bdd0:function(t,e,i){"use strict";var a=i("77af"),n=i("670c"),o=i("be18"),r=i("a561"),s=i("bd8d"),c=i("535a"),d=i("2f63"),l=i("aee6"),h=i("52f0"),_=i("6dfc"),u=i("a307"),p=i("0c80");function m(t,e){t=Object(c["a"])(t,c["a"].EMPTY_OBJECT);var i=t.translucencyByDistance,a=t.scaleByDistance,n=t.distanceDisplayCondition;Object(d["a"])(i)&&(i=_["a"].clone(i)),Object(d["a"])(a)&&(a=_["a"].clone(a)),Object(d["a"])(n)&&(n=l["a"].clone(n)),this._show=Object(c["a"])(t.show,!0),this._position=o["a"].clone(Object(c["a"])(t.position,o["a"].ZERO)),this._actualPosition=o["a"].clone(this._position),this._color=s["a"].clone(Object(c["a"])(t.color,s["a"].WHITE)),this._outlineColor=s["a"].clone(Object(c["a"])(t.outlineColor,s["a"].TRANSPARENT)),this._outlineWidth=Object(c["a"])(t.outlineWidth,0),this._pixelSize=Object(c["a"])(t.pixelSize,10),this._scaleByDistance=a,this._translucencyByDistance=i,this._distanceDisplayCondition=n,this._disableDepthTestDistance=Object(c["a"])(t.disableDepthTestDistance,0),this._id=t.id,this._collection=Object(c["a"])(t.collection,e),this._clusterShow=!0,this._pickId=void 0,this._pointPrimitiveCollection=e,this._dirty=!1,this._index=-1}var f=m.SHOW_INDEX=0,b=m.POSITION_INDEX=1,y=m.COLOR_INDEX=2,g=m.OUTLINE_COLOR_INDEX=3,S=m.OUTLINE_WIDTH_INDEX=4,v=m.PIXEL_SIZE_INDEX=5,T=m.SCALE_BY_DISTANCE_INDEX=6,D=m.TRANSLUCENCY_BY_DISTANCE_INDEX=7,O=m.DISTANCE_DISPLAY_CONDITION_INDEX=8,E=m.DISABLE_DEPTH_DISTANCE_INDEX=9;function A(t,e){var i=t._pointPrimitiveCollection;Object(d["a"])(i)&&(i._updatePointPrimitive(t,e),t._dirty=!0)}m.NUMBER_OF_PROPERTIES=10,Object.defineProperties(m.prototype,{show:{get:function(){return this._show},set:function(t){this._show!==t&&(this._show=t,A(this,f))}},position:{get:function(){return this._position},set:function(t){var e=this._position;o["a"].equals(e,t)||(o["a"].clone(t,e),o["a"].clone(t,this._actualPosition),A(this,b))}},scaleByDistance:{get:function(){return this._scaleByDistance},set:function(t){var e=this._scaleByDistance;_["a"].equals(e,t)||(this._scaleByDistance=_["a"].clone(t,e),A(this,T))}},translucencyByDistance:{get:function(){return this._translucencyByDistance},set:function(t){var e=this._translucencyByDistance;_["a"].equals(e,t)||(this._translucencyByDistance=_["a"].clone(t,e),A(this,D))}},pixelSize:{get:function(){return this._pixelSize},set:function(t){this._pixelSize!==t&&(this._pixelSize=t,A(this,v))}},color:{get:function(){return this._color},set:function(t){var e=this._color;s["a"].equals(e,t)||(s["a"].clone(t,e),A(this,y))}},outlineColor:{get:function(){return this._outlineColor},set:function(t){var e=this._outlineColor;s["a"].equals(e,t)||(s["a"].clone(t,e),A(this,g))}},outlineWidth:{get:function(){return this._outlineWidth},set:function(t){this._outlineWidth!==t&&(this._outlineWidth=t,A(this,S))}},distanceDisplayCondition:{get:function(){return this._distanceDisplayCondition},set:function(t){l["a"].equals(this._distanceDisplayCondition,t)||(this._distanceDisplayCondition=l["a"].clone(t,this._distanceDisplayCondition),A(this,O))}},disableDepthTestDistance:{get:function(){return this._disableDepthTestDistance},set:function(t){this._disableDepthTestDistance!==t&&(this._disableDepthTestDistance=t,A(this,E))}},id:{get:function(){return this._id},set:function(t){this._id=t,Object(d["a"])(this._pickId)&&(this._pickId.object.id=t)}},pickId:{get:function(){return this._pickId}},clusterShow:{get:function(){return this._clusterShow},set:function(t){this._clusterShow!==t&&(this._clusterShow=t,A(this,f))}}}),m.prototype.getPickId=function(t){return Object(d["a"])(this._pickId)||(this._pickId=t.createPickId({primitive:this,collection:this._collection,id:this._id})),this._pickId},m.prototype._getActualPosition=function(){return this._actualPosition},m.prototype._setActualPosition=function(t){o["a"].clone(t,this._actualPosition),A(this,b)};var C=new r["a"];m._computeActualPosition=function(t,e,i){return e.mode===u["a"].SCENE3D?t:(h["a"].multiplyByPoint(i,t,C),p["a"].computeActualWgs84Position(e,C))};var I=new r["a"];m._computeScreenSpacePosition=function(t,e,i,a){var n=h["a"].multiplyByVector(t,r["a"].fromElements(e.x,e.y,e.z,1,I),I),o=p["a"].wgs84ToWindowCoordinates(i,n,a);return o},m.prototype.computeScreenSpacePosition=function(t,e){var i=this._pointPrimitiveCollection;Object(d["a"])(e)||(e=new n["a"]);var a=i.modelMatrix,o=m._computeScreenSpacePosition(a,this._actualPosition,t,e);if(Object(d["a"])(o))return o.y=t.canvas.clientHeight-o.y,o},m.getScreenSpaceBoundingBox=function(t,e,i){var n=t.pixelSize,o=.5*n,r=e.x-o,s=e.y-o,c=n,l=n;return Object(d["a"])(i)||(i=new a["a"]),i.x=r,i.y=s,i.width=c,i.height=l,i},m.prototype.equals=function(t){return this===t||Object(d["a"])(t)&&this._id===t._id&&o["a"].equals(this._position,t._position)&&s["a"].equals(this._color,t._color)&&this._pixelSize===t._pixelSize&&this._outlineWidth===t._outlineWidth&&this._show===t._show&&s["a"].equals(this._outlineColor,t._outlineColor)&&_["a"].equals(this._scaleByDistance,t._scaleByDistance)&&_["a"].equals(this._translucencyByDistance,t._translucencyByDistance)&&l["a"].equals(this._distanceDisplayCondition,t._distanceDisplayCondition)&&this._disableDepthTestDistance===t._disableDepthTestDistance},m.prototype._destroy=function(){this._pickId=this._pickId&&this._pickId.destroy(),this._pointPrimitiveCollection=void 0},e["a"]=m}}]);