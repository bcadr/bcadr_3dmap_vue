(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Cesium~07eac401"],{"0b8f":function(e,t,i){"use strict";var r=i("933b"),n=i("7229"),a=i("8dfe"),s=i("535a"),o=i("2f63"),c=i("7d62"),d=i("881b"),h=576,u=100,l="#ffffff",p="#48b";function f(e,t){for(var i=e.length,r=0;r<i;r++){var n=e[r];if(a["a"].equals(n,t))return!0}return!1}function _(e){var t=e._previousCesiumCredit,i=e._currentCesiumCredit;a["a"].equals(i,t)||(Object(o["a"])(t)&&e._cesiumCreditContainer.removeChild(t.element),Object(o["a"])(i)&&e._cesiumCreditContainer.appendChild(i.element),e._previousCesiumCredit=i)}var m,g="cesium-credit-delimiter";function v(e){var t=document.createElement("span");return t.textContent=e,t.className=g,t}function b(e,t){if(Object(o["a"])(t)){var i=document.createElement(t);i._creditId=e._creditId,i.appendChild(e),e=i}return e}function C(e,t,i,r){for(var n=e.childNodes,a=-1,s=0;s<t.length;++s){var c=t[s];if(Object(o["a"])(c)){if(a=s,Object(o["a"])(i)&&(a*=2,s>0)){var d=a-1;if(n.length<=d)e.appendChild(v(i));else{var h=n[d];h.className!==g&&e.replaceChild(v(i),h)}}var u=c.element;if(n.length<=a)e.appendChild(b(u,r));else{var l=n[a];l._creditId!==c._id&&e.replaceChild(b(u,r),l)}}}++a;while(a<n.length)e.removeChild(n[a])}function y(e){var t=e._lightboxCredits,i=e.viewport.clientWidth,r=e.viewport.clientHeight;i!==e._lastViewportWidth&&(i<h?(t.className="cesium-credit-lightbox cesium-credit-lightbox-mobile",t.style.marginTop="0"):(t.className="cesium-credit-lightbox cesium-credit-lightbox-expanded",t.style.marginTop=Math.floor(.5*(r-t.clientHeight))+"px"),e._lastViewportWidth=i),i>=h&&r!==e._lastViewportHeight&&(t.style.marginTop=Math.floor(.5*(r-t.clientHeight))+"px",e._lastViewportHeight=r)}function x(e,t){var i=e+" {";for(var r in t)t.hasOwnProperty(r)&&(i+=r+": "+t[r]+"; ");return i+=" }\n",i}function O(){var e="";e+=x(".cesium-credit-lightbox-overlay",{display:"none","z-index":"1",position:"absolute",top:"0",left:"0",width:"100%",height:"100%","background-color":"rgba(80, 80, 80, 0.8)"}),e+=x(".cesium-credit-lightbox",{"background-color":"#303336",color:l,position:"relative","min-height":u+"px",margin:"auto"}),e+=x(".cesium-credit-lightbox > ul > li a, .cesium-credit-lightbox > ul > li a:visited",{color:l}),e+=x(".cesium-credit-lightbox > ul > li a:hover",{color:p}),e+=x(".cesium-credit-lightbox.cesium-credit-lightbox-expanded",{border:"1px solid #444","border-radius":"5px","max-width":"370px"}),e+=x(".cesium-credit-lightbox.cesium-credit-lightbox-mobile",{height:"100%",width:"100%"}),e+=x(".cesium-credit-lightbox-title",{padding:"20px 20px 0 20px"}),e+=x(".cesium-credit-lightbox-close",{"font-size":"18pt",cursor:"pointer",position:"absolute",top:"0",right:"6px",color:l}),e+=x(".cesium-credit-lightbox-close:hover",{color:p}),e+=x(".cesium-credit-lightbox > ul",{margin:"0",padding:"12px 20px 12px 40px","font-size":"13px"}),e+=x(".cesium-credit-lightbox > ul > li",{"padding-bottom":"6px"}),e+=x(".cesium-credit-lightbox > ul > li *",{padding:"0",margin:"0"}),e+=x(".cesium-credit-expand-link",{"padding-left":"5px",cursor:"pointer","text-decoration":"underline",color:l}),e+=x(".cesium-credit-expand-link:hover",{color:p}),e+=x(".cesium-credit-text",{color:l}),e+=x(".cesium-credit-textContainer *, .cesium-credit-logoContainer *",{display:"inline"});var t=document.head,i=document.createElement("style");i.innerHTML=e,t.insertBefore(i,t.firstChild)}function S(e,t,i){var n=this;i=Object(s["a"])(i,document.body);var o=document.createElement("div");o.className="cesium-credit-lightbox-overlay",i.appendChild(o);var c=document.createElement("div");function d(e){c.contains(e.target)||n.hideLightbox()}c.className="cesium-credit-lightbox",o.appendChild(c),o.addEventListener("click",d,!1);var h=document.createElement("div");h.className="cesium-credit-lightbox-title",h.textContent="Data provided by:",c.appendChild(h);var u=document.createElement("a");u.onclick=this.hideLightbox.bind(this),u.innerHTML="&times;",u.className="cesium-credit-lightbox-close",c.appendChild(u);var l=document.createElement("ul");c.appendChild(l);var p=document.createElement("div");p.className="cesium-credit-logoContainer",p.style.display="inline",e.appendChild(p);var f=document.createElement("div");f.className="cesium-credit-textContainer",f.style.display="inline",e.appendChild(f);var _=document.createElement("a");_.className="cesium-credit-expand-link",_.onclick=this.showLightbox.bind(this),_.textContent="Data attribution",e.appendChild(_),O();var m=a["a"].clone(S.cesiumCredit);this._delimiter=Object(s["a"])(t," â€¢ "),this._screenContainer=f,this._cesiumCreditContainer=p,this._lastViewportHeight=void 0,this._lastViewportWidth=void 0,this._lightboxCredits=c,this._creditList=l,this._lightbox=o,this._hideLightbox=d,this._expandLink=_,this._expanded=!1,this._defaultCredits=[],this._cesiumCredit=m,this._previousCesiumCredit=void 0,this._currentCesiumCredit=m,this._currentFrameCredits={screenCredits:new r["a"],lightboxCredits:new r["a"]},this._defaultCredit=void 0,this.viewport=i,this.container=e}function w(){if(!Object(o["a"])(m)){var e=Object(n["a"])("Assets/Images/ion-credit.png");if(0!==e.indexOf("http://")&&0!==e.indexOf("https://")&&0!==e.indexOf("data:")){var t=new d["a"](e);e=t.getPath()}m=new a["a"]('<a href="https://cesium.com/" target="_blank"><img src="'+e+'" title="Cesium ion"/></a>',!0)}return S._cesiumCreditInitialized||(S._cesiumCredit=m,S._cesiumCreditInitialized=!0),m}S.prototype.addCredit=function(e){if(e._isIon)return Object(o["a"])(this._defaultCredit)||(this._defaultCredit=a["a"].clone(w())),void(this._currentCesiumCredit=this._defaultCredit);e.showOnScreen?this._currentFrameCredits.screenCredits.set(e.id,e):this._currentFrameCredits.lightboxCredits.set(e.id,e)},S.prototype.addDefaultCredit=function(e){var t=this._defaultCredits;f(t,e)||t.push(e)},S.prototype.removeDefaultCredit=function(e){var t=this._defaultCredits,i=t.indexOf(e);-1!==i&&t.splice(i,1)},S.prototype.showLightbox=function(){this._lightbox.style.display="block",this._expanded=!0},S.prototype.hideLightbox=function(){this._lightbox.style.display="none",this._expanded=!1},S.prototype.update=function(){this._expanded&&y(this)},S.prototype.beginFrame=function(){var e=this._currentFrameCredits,t=e.screenCredits;t.removeAll();for(var i=this._defaultCredits,r=0;r<i.length;++r){var n=i[r];t.set(n.id,n)}e.lightboxCredits.removeAll(),a["a"].equals(S.cesiumCredit,this._cesiumCredit)||(this._cesiumCredit=a["a"].clone(S.cesiumCredit)),this._currentCesiumCredit=this._cesiumCredit},S.prototype.endFrame=function(){var e=this._currentFrameCredits.screenCredits.values;C(this._screenContainer,e,this._delimiter,void 0);var t=this._currentFrameCredits.lightboxCredits.values;this._expandLink.style.display=t.length>0?"inline":"none",C(this._creditList,t,void 0,"li"),_(this)},S.prototype.destroy=function(){return this._lightbox.removeEventListener("click",this._hideLightbox,!1),this.container.removeChild(this._cesiumCreditContainer),this.container.removeChild(this._screenContainer),this.container.removeChild(this._expandLink),this.viewport.removeChild(this._lightbox),Object(c["a"])(this)},S.prototype.isDestroyed=function(){return!1},S._cesiumCredit=void 0,S._cesiumCreditInitialized=!1,Object.defineProperties(S,{cesiumCredit:{get:function(){return w(),S._cesiumCredit},set:function(e){S._cesiumCredit=e,S._cesiumCreditInitialized=!0}}}),t["a"]=S},"43ee":function(e,t,i){"use strict";var r=i("c8d1"),n=i("670c"),a=i("be18"),s=i("a561"),o=i("bd8d"),c=i("535a"),d=i("2f63"),h=i("7d62"),u=i("21d7"),l=i("66bf"),p=i("52f0"),f=i("e42d"),_=i("188e"),m=i("b997"),g=i("6ef5"),v=i("6c84"),b=i("a913"),C=i("9d00");function y(e){e=Object(c["a"])(e,c["a"].EMPTY_OBJECT),this._planes=[],this._dirtyIndex=-1,this._multipleDirtyPlanes=!1,this._enabled=Object(c["a"])(e.enabled,!0),this.modelMatrix=p["a"].clone(Object(c["a"])(e.modelMatrix,p["a"].IDENTITY)),this.edgeColor=o["a"].clone(Object(c["a"])(e.edgeColor,o["a"].WHITE)),this.edgeWidth=Object(c["a"])(e.edgeWidth,0),this.planeAdded=new u["a"],this.planeRemoved=new u["a"],this._owner=void 0;var t=Object(c["a"])(e.unionClippingRegions,!1);this._unionClippingRegions=t,this._testIntersection=t?x:O,this._uint8View=void 0,this._float32View=void 0,this._clippingPlanesTexture=void 0;var i=e.planes;if(Object(d["a"])(i))for(var r=i.length,n=0;n<r;++n)this.add(i[n])}function x(e){return e===l["a"].OUTSIDE}function O(e){return e===l["a"].INSIDE}function S(e,t){e._multipleDirtyPlanes=e._multipleDirtyPlanes||-1!==e._dirtyIndex&&e._dirtyIndex!==t,e._dirtyIndex=t}function w(e,t){for(var i=e.length,r=0;r<i;++r)if(_["a"].equals(e[r],t))return r;return-1}Object.defineProperties(y.prototype,{length:{get:function(){return this._planes.length}},unionClippingRegions:{get:function(){return this._unionClippingRegions},set:function(e){this._unionClippingRegions!==e&&(this._unionClippingRegions=e,this._testIntersection=e?x:O)}},enabled:{get:function(){return this._enabled},set:function(e){this._enabled!==e&&(this._enabled=e)}},texture:{get:function(){return this._clippingPlanesTexture}},owner:{get:function(){return this._owner}},clippingPlanesState:{get:function(){return this._unionClippingRegions?this._planes.length:-this._planes.length}}}),y.prototype.add=function(e){var t=this._planes.length,i=this;e.onChangeCallback=function(e){S(i,e)},e.index=t,S(this,t),this._planes.push(e),this.planeAdded.raiseEvent(e,t)},y.prototype.get=function(e){return this._planes[e]},y.prototype.contains=function(e){return-1!==w(this._planes,e)},y.prototype.remove=function(e){var t=this._planes,i=w(t,e);if(-1===i)return!1;e instanceof C["a"]&&(e.onChangeCallback=void 0,e.index=-1);for(var r=t.length-1,n=i;n<r;++n){var a=t[n+1];t[n]=a,a instanceof C["a"]&&(a.index=n)}return this._multipleDirtyPlanes=!0,t.length=r,this.planeRemoved.raiseEvent(e,i),!0},y.prototype.removeAll=function(){for(var e=this._planes,t=e.length,i=0;i<t;++i){var r=e[i];r instanceof C["a"]&&(r.onChangeCallback=void 0,r.index=-1),this.planeRemoved.raiseEvent(r,i)}this._multipleDirtyPlanes=!0,this._planes=[]};var P=new s["a"],E=new s["a"];function I(e,t,i){for(var n=e._uint8View,a=e._planes,o=0,c=t;c<i;++c){var d=a[c],h=r["a"].octEncodeToCartesian4(d.normal,E);n[o]=h.x,n[o+1]=h.y,n[o+2]=h.z,n[o+3]=h.w;var u=s["a"].packFloat(d.distance,P);n[o+4]=u.x,n[o+5]=u.y,n[o+6]=u.z,n[o+7]=u.w,o+=8}}function T(e,t,i){for(var r=e._float32View,n=e._planes,a=0,s=t;s<i;++s){var o=n[s],c=o.normal;r[a]=c.x,r[a+1]=c.y,r[a+2]=c.z,r[a+3]=o.distance,a+=4}}function A(e,t){var i=m["a"].maximumTextureSize;return t.x=Math.min(e,i),t.y=Math.ceil(e/t.x),t}var D=new n["a"];y.prototype.update=function(e){var t=this._clippingPlanesTexture,i=e.context,r=y.useFloatTexture(i),n=r?this.length:2*this.length;if(Object(d["a"])(t)){var a=t.width*t.height;(a<n||n<.25*a)&&(t.destroy(),t=void 0,this._clippingPlanesTexture=void 0)}if(0!==this.length){if(!Object(d["a"])(t)){var s=A(n,D);s.y*=2,r?(t=new b["a"]({context:i,width:s.x,height:s.y,pixelFormat:f["a"].RGBA,pixelDatatype:g["a"].FLOAT,sampler:v["a"].NEAREST,flipY:!1}),this._float32View=new Float32Array(s.x*s.y*4)):(t=new b["a"]({context:i,width:s.x,height:s.y,pixelFormat:f["a"].RGBA,pixelDatatype:g["a"].UNSIGNED_BYTE,sampler:v["a"].NEAREST,flipY:!1}),this._uint8View=new Uint8Array(s.x*s.y*4)),this._clippingPlanesTexture=t,this._multipleDirtyPlanes=!0}var o=this._dirtyIndex;if(this._multipleDirtyPlanes||-1!==o){if(this._multipleDirtyPlanes)r?(T(this,0,this._planes.length),t.copyFrom({width:t.width,height:t.height,arrayBufferView:this._float32View})):(I(this,0,this._planes.length),t.copyFrom({width:t.width,height:t.height,arrayBufferView:this._uint8View}));else{var c=0,h=0;r?(h=Math.floor(o/t.width),c=Math.floor(o-h*t.width),T(this,o,o+1),t.copyFrom({width:1,height:1,arrayBufferView:this._float32View},c,h)):(h=Math.floor(2*o/t.width),c=Math.floor(2*o-h*t.width),I(this,o,o+1),t.copyFrom({width:2,height:1,arrayBufferView:this._uint8View},c,h))}this._multipleDirtyPlanes=!1,this._dirtyIndex=-1}}};var j=new p["a"],L=new _["a"](a["a"].UNIT_X,0);y.prototype.computeIntersectionWithBoundingVolume=function(e,t){var i=this._planes,r=i.length,n=this.modelMatrix;Object(d["a"])(t)&&(n=p["a"].multiply(t,n,j));var a=l["a"].INSIDE;!this.unionClippingRegions&&r>0&&(a=l["a"].OUTSIDE);for(var s=0;s<r;++s){var o=i[s];_["a"].transform(o,n,L);var c=e.intersectPlane(L);if(c===l["a"].INTERSECTING)a=c;else if(this._testIntersection(c))return c}return a},y.setOwner=function(e,t,i){e!==t[i]&&(t[i]=t[i]&&t[i].destroy(),Object(d["a"])(e)&&(e._owner=t,t[i]=e))},y.useFloatTexture=function(e){return e.floatingPointTexture},y.getTextureResolution=function(e,t,i){var r=e.texture;if(Object(d["a"])(r))return i.x=r.width,i.y=r.height,i;var n=y.useFloatTexture(t)?e.length:2*e.length,a=A(n,i);return a.y*=2,a},y.prototype.isDestroyed=function(){return!1},y.prototype.destroy=function(){return this._clippingPlanesTexture=this._clippingPlanesTexture&&this._clippingPlanesTexture.destroy(),Object(h["a"])(this)},t["a"]=y},"5a6c":function(e,t,i){"use strict";var r={TERRAIN:0,CESIUM_3D_TILE:1,BOTH:2,NUMBER_OF_CLASSIFICATION_TYPES:3};t["a"]=Object.freeze(r)},"9d00":function(e,t,i){"use strict";var r=i("be18"),n=i("2f63");function a(e,t){this._distance=t,this._normal=new s(e,this),this.onChangeCallback=void 0,this.index=-1}function s(e,t){this._clippingPlane=t,this._cartesian3=r["a"].clone(e)}Object.defineProperties(a.prototype,{distance:{get:function(){return this._distance},set:function(e){Object(n["a"])(this.onChangeCallback)&&e!==this._distance&&this.onChangeCallback(this.index),this._distance=e}},normal:{get:function(){return this._normal},set:function(e){Object(n["a"])(this.onChangeCallback)&&!r["a"].equals(this._normal._cartesian3,e)&&this.onChangeCallback(this.index),r["a"].clone(e,this._normal._cartesian3)}}}),a.fromPlane=function(e,t){return Object(n["a"])(t)?(t.normal=e.normal,t.distance=e.distance):t=new a(e.normal,e.distance),t},a.clone=function(e,t){return Object(n["a"])(t)?(t.normal=e.normal,t.distance=e.distance,t):new a(e.normal,e.distance)},Object.defineProperties(s.prototype,{x:{get:function(){return this._cartesian3.x},set:function(e){Object(n["a"])(this._clippingPlane.onChangeCallback)&&e!==this._cartesian3.x&&this._clippingPlane.onChangeCallback(this._clippingPlane.index),this._cartesian3.x=e}},y:{get:function(){return this._cartesian3.y},set:function(e){Object(n["a"])(this._clippingPlane.onChangeCallback)&&e!==this._cartesian3.y&&this._clippingPlane.onChangeCallback(this._clippingPlane.index),this._cartesian3.y=e}},z:{get:function(){return this._cartesian3.z},set:function(e){Object(n["a"])(this._clippingPlane.onChangeCallback)&&e!==this._cartesian3.z&&this._clippingPlane.onChangeCallback(this._clippingPlane.index),this._cartesian3.z=e}}}),t["a"]=a},a5e0:function(e,t,i){"use strict";var r=i("dc1c"),n=i("2f63"),a=i("6928");function s(e,t){this._conditionsExpression=Object(r["a"])(e,!0),this._conditions=e.conditions,this._runtimeConditions=void 0,c(this,t)}function o(e,t){this.condition=e,this.expression=t}function c(e,t){var i=[],r=e._conditions;if(Object(n["a"])(r)){for(var s=r.length,c=0;c<s;++c){var d=r[c],h=String(d[0]),u=String(d[1]);i.push(new o(new a["a"](h,t),new a["a"](u,t)))}e._runtimeConditions=i}}Object.defineProperties(s.prototype,{conditionsExpression:{get:function(){return this._conditionsExpression}}}),s.prototype.evaluate=function(e,t){var i=this._runtimeConditions;if(Object(n["a"])(i))for(var r=i.length,a=0;a<r;++a){var s=i[a];if(s.condition.evaluate(e))return s.expression.evaluate(e,t)}},s.prototype.evaluateColor=function(e,t){var i=this._runtimeConditions;if(Object(n["a"])(i))for(var r=i.length,a=0;a<r;++a){var s=i[a];if(s.condition.evaluate(e))return s.expression.evaluateColor(e,t)}},s.prototype.getShaderFunction=function(e,t,i,r){var a=this._runtimeConditions;if(Object(n["a"])(a)&&0!==a.length){for(var s="",o=a.length,c=0;c<o;++c){var d=a[c],h=d.condition.getShaderExpression(t,i),u=d.expression.getShaderExpression(t,i);s+="    "+(0===c?"if":"else if")+" ("+h+") \n    { \n        return "+u+"; \n    } \n"}return s=r+" "+e+"() \n{ \n"+s+"    return "+r+"(1.0); \n} \n",s}},t["a"]=s},b522:function(e,t,i){"use strict";var r=i("be18"),n=i("535a"),a=i("93da");function s(e){e=Object(n["a"])(e,1),this._radius=Object(n["a"])(e,1)}Object.defineProperties(s.prototype,{radius:{get:function(){return this._radius},set:function(e){this._radius=e}}}),s.prototype.emit=function(e){var t=a["a"].randomBetween(0,a["a"].TWO_PI),i=a["a"].randomBetween(0,this._radius),n=i*Math.cos(t),s=i*Math.sin(t),o=0;e.position=r["a"].fromElements(n,s,o,e.position),e.velocity=r["a"].clone(r["a"].UNIT_Z,e.velocity)},t["a"]=s},b7eb:function(e,t,i){"use strict";var r=i("be18"),n=i("535a"),a=i("93da"),s=a["a"].toRadians(30);function o(e){this._angle=Object(n["a"])(e,s)}Object.defineProperties(o.prototype,{angle:{get:function(){return this._angle},set:function(e){this._angle=e}}}),o.prototype.emit=function(e){var t=Math.tan(this._angle),i=a["a"].randomBetween(0,a["a"].TWO_PI),n=a["a"].randomBetween(0,t),s=n*Math.cos(i),o=n*Math.sin(i),c=1;e.velocity=r["a"].fromElements(s,o,c,e.velocity),r["a"].normalize(e.velocity,e.velocity),e.position=r["a"].clone(r["a"].ZERO,e.position)},t["a"]=o},b80d:function(e,t,i){"use strict";var r=i("1d87"),n=i("cef5"),a=i("be18"),s=i("a561"),o=i("bd8d"),c=i("2bb9"),d=i("abab"),h=i("535a"),u=i("2f63"),l=i("7d62"),p=i("5e57"),f=i("0123"),_=i("52f0"),m=i("1b8d"),g=i("283e"),v=i("f806"),b=i("daa2"),C=i("73b5"),y=i("77d1"),x=i("6d11"),O=i("adba"),S=i("5c15"),w=i("860a"),P=i("a58e"),E=i("b08e"),I=i("6289"),T=i("e349"),A=i("082a"),D=i("d007"),j=i("a307"),L=i("d8f6"),M=i("27aa"),R=new a["a"],k=T["a"].ModelState;function B(e){e=Object(h["a"])(e,h["a"].EMPTY_OBJECT);var t=e.gltf;if(t instanceof ArrayBuffer&&(t=new Uint8Array(t)),!(t instanceof Uint8Array))throw new g["a"]("Only binary glTF is supported as a classifier.");t=Object(S["a"])(t),Object(w["a"])(t),Object(C["a"])(t),Object(A["a"])(t),Object(D["a"])(t),y["a"].buffer(t,(function(e){if(!Object(u["a"])(e.extras._pipeline.source))throw new g["a"]("Buffer data must be embedded in the binary gltf.")}));var i=t.nodes,r=t.meshes,a=i[0],s=a.mesh;if(1!==i.length||!Object(u["a"])(s))throw new g["a"]("Only one node is supported for classification and it must have a mesh.");if(1!==r.length)throw new g["a"]("Only one mesh is supported when using b3dm for classification.");var o=r[0].primitives;if(1!==o.length)throw new g["a"]("Only one primitive per mesh is supported when using b3dm for classification.");var c=o[0].attributes.POSITION;if(!Object(u["a"])(c))throw new g["a"]("The mesh must have a position attribute.");var d=o[0].attributes._BATCHID;if(!Object(u["a"])(d))throw new g["a"]("The mesh must have a batch id attribute.");this._gltf=t,this.show=Object(h["a"])(e.show,!0),this.modelMatrix=_["a"].clone(Object(h["a"])(e.modelMatrix,_["a"].IDENTITY)),this._modelMatrix=_["a"].clone(this.modelMatrix),this._ready=!1,this._readyPromise=P["a"].defer(),this.debugShowBoundingVolume=Object(h["a"])(e.debugShowBoundingVolume,!1),this._debugShowBoundingVolume=!1,this.debugWireframe=Object(h["a"])(e.debugWireframe,!1),this._debugWireframe=!1,this._classificationType=e.classificationType,this._vertexShaderLoaded=e.vertexShaderLoaded,this._classificationShaderLoaded=e.classificationShaderLoaded,this._uniformMapLoaded=e.uniformMapLoaded,this._pickIdLoaded=e.pickIdLoaded,this._ignoreCommands=Object(h["a"])(e.ignoreCommands,!1),this._upAxis=Object(h["a"])(e.upAxis,E["a"].Y),this._batchTable=e.batchTable,this._computedModelMatrix=new _["a"],this._initialRadius=void 0,this._boundingSphere=void 0,this._scaledBoundingSphere=new n["a"],this._state=k.NEEDS_LOAD,this._loadResources=void 0,this._mode=void 0,this._dirty=!1,this._nodeMatrix=new _["a"],this._primitive=void 0,this._extensionsUsed=void 0,this._extensionsRequired=void 0,this._quantizedUniforms=void 0,this._buffers={},this._vertexArray=void 0,this._shaderProgram=void 0,this._uniformMap=void 0,this._geometryByteLength=0,this._trianglesLength=0,this._rtcCenter=void 0,this._rtcCenterEye=void 0,this._rtcCenter3D=void 0,this._rtcCenter2D=void 0}function N(e){var t=e.gltf,i=e._loadResources;y["a"].buffer(t,(function(e,t){i.buffers[t]=e.extras._pipeline.source}))}function V(e){var t=e.gltf.bufferViews,i=e._loadResources.vertexBuffersToCreate;y["a"].bufferView(e.gltf,(function(e,t){e.target===b["a"].ARRAY_BUFFER&&i.enqueue(t)}));var r=e._loadResources.indexBuffersToCreate,n={};y["a"].accessor(e.gltf,(function(e){var i=e.bufferView,a=t[i];a.target!==b["a"].ELEMENT_ARRAY_BUFFER||Object(u["a"])(n[i])||(n[i]=!0,r.enqueue({id:i,componentType:e.componentType}))}))}function F(e,t){var i=t._loadResources,r=t.gltf.bufferViews,n=r[e],a=i.getBuffer(n);t._buffers[e]=a,t._geometryByteLength+=a.byteLength}function U(e,t,i){var r=i._loadResources,n=i.gltf.bufferViews,a=n[e],s={typedArray:r.getBuffer(a),indexDatatype:t};i._buffers[e]=s,i._geometryByteLength+=s.typedArray.byteLength}function z(e){var t=e._loadResources;if(0===t.pendingBufferLoads){var i=t.vertexBuffersToCreate,r=t.indexBuffersToCreate;while(i.length>0)F(i.dequeue(),e);while(r.length>0){var n=r.dequeue();U(n.id,n.componentType,e)}}}function W(e,t){var i=t.gltf.meshes[0].primitives[0],r=T["a"].modifyShaderForQuantizedAttributes(t.gltf,i,e);return t._quantizedUniforms=r.uniforms,r.shader}function G(e,t){return Object(u["a"])(t)&&(e=t(e)),e}function q(e){var t=e.gltf,i=T["a"].getAttributeOrUniformBySemantic(t,"POSITION"),r=T["a"].getAttributeOrUniformBySemantic(t,"_BATCHID"),n={};n[i]=0,n[r]=1;var a,s,o=T["a"].getAttributeOrUniformBySemantic(t,"MODELVIEWPROJECTION");if(Object(u["a"])(o))a="uniform mat4 "+o+";\n",s=o+" * vec4("+i+", 1.0)";else{var c=T["a"].getAttributeOrUniformBySemantic(t,"PROJECTION"),d=T["a"].getAttributeOrUniformBySemantic(t,"MODELVIEW");Object(u["a"])(d)||(d=T["a"].getAttributeOrUniformBySemantic(t,"CESIUM_RTC_MODELVIEW")),a="uniform mat4 "+d+";\nuniform mat4 "+c+";\n",s=c+" * "+d+" * vec4("+i+", 1.0)"}var h="    vec4 positionInClipCoords = "+s+";\n",l="attribute vec3 "+i+";\nattribute float "+r+";\n"+a+"void main() {\n"+h+"    gl_Position = czm_depthClamp(positionInClipCoords);\n}\n",p="#ifdef GL_EXT_frag_depth\n#extension GL_EXT_frag_depth : enable\n#endif\nvoid main() \n{ \n    gl_FragColor = vec4(1.0); \n    czm_writeDepthClamp();\n}\n";e.extensionsUsed.WEB3D_quantized_attributes&&(l=W(l,e));var f=G(l,e._vertexShaderLoaded),_=G(p,e._classificationShaderLoaded);e._shaderProgram={vertexShaderSource:f,fragmentShaderSource:_,attributeLocations:n}}function H(){return{POSITION:0,_BATCHID:1}}function Y(e){var t=e._loadResources;if(t.finishedBuffersCreation()&&!Object(u["a"])(e._vertexArray)){var i,r=e._buffers,n=e.gltf,a=n.accessors,s=n.meshes,o=s[0].primitives,c=o[0],d=H(),h={};if(y["a"].meshPrimitiveAttribute(c,(function(e,t){var i=d[t];if(Object(u["a"])(i)){var s=a[e];h[t]={index:i,vertexBuffer:r[s.bufferView],componentsPerAttribute:Object(O["a"])(s.type),componentDatatype:s.componentType,offsetInBytes:s.byteOffset,strideInBytes:Object(x["a"])(n,s)}}})),Object(u["a"])(c.indices)){var l=a[c.indices];i=r[l.bufferView]}e._vertexArray={attributes:h,indexBuffer:i}}}Object.defineProperties(B.prototype,{gltf:{get:function(){return this._gltf}},boundingSphere:{get:function(){var e=this.modelMatrix,t=_["a"].getScale(e,R),i=this._scaledBoundingSphere;return i.center=a["a"].multiplyComponents(this._boundingSphere.center,t,i.center),i.radius=a["a"].maximumComponent(t)*this._initialRadius,Object(u["a"])(this._rtcCenter)&&a["a"].add(this._rtcCenter,i.center,i.center),i}},ready:{get:function(){return this._ready}},readyPromise:{get:function(){return this._readyPromise.promise}},dirty:{get:function(){return this._dirty}},extensionsUsed:{get:function(){return Object(u["a"])(this._extensionsUsed)||(this._extensionsUsed=T["a"].getUsedExtensions(this.gltf)),this._extensionsUsed}},extensionsRequired:{get:function(){return Object(u["a"])(this._extensionsRequired)||(this._extensionsRequired=T["a"].getRequiredExtensions(this.gltf)),this._extensionsRequired}},upAxis:{get:function(){return this._upAxis}},trianglesLength:{get:function(){return this._trianglesLength}},geometryByteLength:{get:function(){return this._geometryByteLength}},texturesByteLength:{get:function(){return 0}},classificationType:{get:function(){return this._classificationType}}});var Z={PROJECTION:function(e,t){return T["a"].getGltfSemanticUniforms().PROJECTION(e,t)},MODELVIEW:function(e,t){return T["a"].getGltfSemanticUniforms().MODELVIEW(e,t)},CESIUM_RTC_MODELVIEW:function(e,t){return T["a"].getGltfSemanticUniforms().CESIUM_RTC_MODELVIEW(e,t)},MODELVIEWPROJECTION:function(e,t){return T["a"].getGltfSemanticUniforms().MODELVIEWPROJECTION(e,t)}};function Q(e,t){if(!Object(u["a"])(e._uniformMap)){var i={};y["a"].technique(e.gltf,(function(r){y["a"].techniqueUniform(r,(function(r,n){Object(u["a"])(r.semantic)&&Object(u["a"])(Z[r.semantic])&&(i[n]=Z[r.semantic](t.uniformState,e))}))})),e._uniformMap=i}}function J(e,t){return T["a"].createUniformsForQuantizedAttributes(e.gltf,t,e._quantizedUniforms)}function K(e,t){switch(e.mode){case m["a"].TRIANGLES:return t/3;case m["a"].TRIANGLE_STRIP:case m["a"].TRIANGLE_FAN:return Math.max(t-2,0);default:return 0}}function X(e){var t,i,s=e._batchTable,h=e._uniformMap,l=e._vertexArray,p=e.gltf,m=p.accessors,g=p.meshes,v=g[0].primitives[0],b=m[v.indices],C=v.attributes.POSITION,y=T["a"].getAccessorMinMax(p,C),x=n["a"].fromCornerPoints(a["a"].fromArray(y.min),a["a"].fromArray(y.max));if(Object(u["a"])(b))i=b.count,t=b.byteOffset/f["a"].getSizeInBytes(b.componentType);else{var O=m[v.attributes.POSITION];i=O.count,t=0}if(e._trianglesLength+=K(v,i),Object(u["a"])(e._uniformMapLoaded)&&(h=e._uniformMapLoaded(h)),e.extensionsUsed.WEB3D_quantized_attributes){var S=J(e,v);h=Object(c["a"])(h,S)}var w=l.attributes.POSITION,P=w.componentDatatype,E=w.vertexBuffer,I=E.byteOffset,A=E.byteLength/d["a"].getSizeInBytes(P),D=d["a"].createArrayBufferView(P,E.buffer,I,A);w=l.attributes._BATCHID,P=w.componentDatatype,E=w.vertexBuffer,I=E.byteOffset,A=E.byteLength/d["a"].getSizeInBytes(P);var j,R=d["a"].createArrayBufferView(P,E.buffer,I,A),k=l.indexBuffer.typedArray;j=l.indexBuffer.indexDatatype===f["a"].UNSIGNED_SHORT?new Uint16Array(k.buffer,k.byteOffset,k.byteLength/Uint16Array.BYTES_PER_ELEMENT):new Uint32Array(k.buffer,k.byteOffset,k.byteLength/Uint32Array.BYTES_PER_ELEMENT),D=Object(r["a"])(D),R=Object(r["a"])(R),j=Object(r["a"])(j,t,t+i);var B,N,V,F=[],U=[],z=[],W=[],G=R[j[0]];F.push(G),z.push(0);for(var q=j.length,H=1;H<q;++H)B=R[j[H]],B!==G&&(N=z[z.length-1],V=H-N,F.push(B),U.push(V),z.push(H),W.push(new L["a"]({offset:N,count:V,batchIds:[G],color:o["a"].WHITE})),G=B);N=z[z.length-1],V=q-N,U.push(V),W.push(new L["a"]({offset:N,count:V,batchIds:[G],color:o["a"].WHITE}));var Y=e._shaderProgram,Z=Y.vertexShaderSource,Q=Y.fragmentShaderSource,X=Y.attributeLocations,$=Object(u["a"])(e._pickIdLoaded)?e._pickIdLoaded():void 0;e._primitive=new M["a"]({classificationType:e._classificationType,positions:D,indices:j,indexOffsets:z,indexCounts:U,batchIds:F,vertexBatchIds:R,batchedIndices:W,batchTable:s,boundingVolume:new n["a"],_vertexShaderSource:Z,_fragmentShaderSource:Q,_attributeLocations:X,_uniformMap:h,_pickId:$,_modelMatrix:new _["a"],_boundingSphere:x}),e._buffers=void 0,e._vertexArray=void 0,e._shaderProgram=void 0,e._uniformMap=void 0}function $(e){var t=e._loadResources;if(t.finished()&&!Object(u["a"])(e._primitive)){var i=e.gltf,r=i.nodes,n=r[0];e._nodeMatrix=T["a"].getTransform(n,e._nodeMatrix),X(e)}}function ee(e,t){var i=t.context;T["a"].checkSupportedGlExtensions(e.gltf.glExtensionsUsed,i),z(e),q(e),Y(e),Q(e,i),$(e)}var te=new s["a"],ie=new _["a"];function re(e,t,i,r){var o=e._computedModelMatrix;if(e._mode!==j["a"].SCENE3D&&!e._ignoreCommands){var c=_["a"].getColumn(o,3,te);if(s["a"].equals(c,s["a"].UNIT_W)){var d=e.boundingSphere.center,h=v["a"].wgs84To2DModelMatrix(r,d,ie);o=_["a"].multiply(h,o,ie),Object(u["a"])(e._rtcCenter)&&(_["a"].setTranslation(o,s["a"].UNIT_W,o),e._rtcCenter=e._rtcCenter2D)}else o=v["a"].basisTo2D(r,o,ie),e._rtcCenter=e._rtcCenter3D}var l=e._primitive;(t||i)&&(_["a"].multiplyTransformation(o,e._nodeMatrix,l._modelMatrix),n["a"].transform(l._boundingSphere,l._modelMatrix,l._boundingVolume),Object(u["a"])(e._rtcCenter)&&a["a"].add(e._rtcCenter,l._boundingVolume.center,l._boundingVolume.center))}B.prototype.updateCommands=function(e,t){this._primitive.updateCommands(e,t)},B.prototype.update=function(e){if(e.mode!==j["a"].MORPHING)if(p["a"].supportsWebP.initialized){var t=p["a"].supportsWebP();if(this._state===k.NEEDS_LOAD&&Object(u["a"])(this.gltf)&&(this._state=k.LOADING,this._state!==k.FAILED)){var i=this.gltf.extensions;if(Object(u["a"])(i)&&Object(u["a"])(i.CESIUM_RTC)){var r=a["a"].fromArray(i.CESIUM_RTC.center);if(!a["a"].equals(r,a["a"].ZERO)){this._rtcCenter3D=r;var n=e.mapProjection,s=n.ellipsoid,o=s.cartesianToCartographic(this._rtcCenter3D),c=n.project(o);a["a"].fromElements(c.z,c.x,c.y,c),this._rtcCenter2D=c,this._rtcCenterEye=new a["a"],this._rtcCenter=this._rtcCenter3D}}this._loadResources=new I["a"],T["a"].parseBuffers(this)}var d=this._loadResources,h=!1;this._state===k.LOADING&&(0===d.pendingBufferLoads&&(T["a"].checkSupportedExtensions(this.extensionsRequired,t),N(this),V(this),this._boundingSphere=T["a"].computeBoundingSphere(this),this._initialRadius=this._boundingSphere.radius,ee(this,e)),d.finished()&&(this._state=k.LOADED,h=!0)),Object(u["a"])(d)&&this._state===k.LOADED&&(h||ee(this,e),d.finished()&&(this._loadResources=void 0));var l=this.show;if(l&&this._state===k.LOADED||h){this._dirty=!1;var f=this.modelMatrix,m=e.mode!==this._mode;this._mode=e.mode;var g=!_["a"].equals(this._modelMatrix,f)||m;if(g||h){_["a"].clone(f,this._modelMatrix);var v=this._computedModelMatrix;_["a"].clone(f,v),this._upAxis===E["a"].Y?_["a"].multiplyTransformation(v,E["a"].Y_UP_TO_Z_UP,v):this._upAxis===E["a"].X&&_["a"].multiplyTransformation(v,E["a"].X_UP_TO_Z_UP,v)}(g||h)&&(re(this,g,h,e.mapProjection),this._dirty=!0)}if(h){var b=this;e.afterRender.push((function(){b._ready=!0,b._readyPromise.resolve(b)}))}else l&&!this._ignoreCommands&&(this._primitive.debugShowBoundingVolume=this.debugShowBoundingVolume,this._primitive.debugWireframe=this.debugWireframe,this._primitive.update(e))}else p["a"].supportsWebP.initialize()},B.prototype.isDestroyed=function(){return!1},B.prototype.destroy=function(){return this._primitive=this._primitive&&this._primitive.destroy(),Object(l["a"])(this)},t["a"]=B},c1f7:function(e,t,i){"use strict";var r=i("93da"),n={HIGHLIGHT:0,REPLACE:1,MIX:2,getColorBlend:function(e,t){return e===n.HIGHLIGHT?0:e===n.REPLACE?1:e===n.MIX?r["a"].clamp(t,r["a"].EPSILON4,1):void 0}};t["a"]=Object.freeze(n)},c2ce:function(e,t,i){"use strict";var r=i("535a"),n=i("2f63"),a=i("7d62"),s=i("974b"),o=i("283e"),c=i("a58e");function d(e,t,i,r,n,a){this._tileset=e,this._tile=t,this._resource=i,this._contents=[],this._readyPromise=c["a"].defer(),u(this,r,n,a)}Object.defineProperties(d.prototype,{featurePropertiesDirty:{get:function(){for(var e=this._contents,t=e.length,i=0;i<t;++i)if(e[i].featurePropertiesDirty)return!0;return!1},set:function(e){for(var t=this._contents,i=t.length,r=0;r<i;++r)t[r].featurePropertiesDirty=e}},featuresLength:{get:function(){return 0}},pointsLength:{get:function(){return 0}},trianglesLength:{get:function(){return 0}},geometryByteLength:{get:function(){return 0}},texturesByteLength:{get:function(){return 0}},batchTableByteLength:{get:function(){return 0}},innerContents:{get:function(){return this._contents}},readyPromise:{get:function(){return this._readyPromise.promise}},tileset:{get:function(){return this._tileset}},tile:{get:function(){return this._tile}},url:{get:function(){return this._resource.getUrlComponent(!0)}},batchTable:{get:function(){}}});var h=Uint32Array.BYTES_PER_ELEMENT;function u(e,t,i,a){i=Object(r["a"])(i,0);var d=new Uint8Array(t),u=new DataView(t);i+=h;var l=u.getUint32(i,!0);if(1!==l)throw new o["a"]("Only Composite Tile version 1 is supported. Version "+l+" is not.");i+=h,i+=h;var p=u.getUint32(i,!0);i+=h;for(var f=[],_=0;_<p;++_){var m=Object(s["a"])(d,i),g=u.getUint32(i+2*h,!0),v=a[m];if(!Object(n["a"])(v))throw new o["a"]("Unknown tile content type, "+m+", inside Composite tile");var b=v(e._tileset,e._tile,e._resource,t,i);e._contents.push(b),f.push(b.readyPromise),i+=g}c["a"].all(f).then((function(){e._readyPromise.resolve(e)})).otherwise((function(t){e._readyPromise.reject(t)}))}d.prototype.hasProperty=function(e,t){return!1},d.prototype.getFeature=function(e){},d.prototype.applyDebugSettings=function(e,t){for(var i=this._contents,r=i.length,n=0;n<r;++n)i[n].applyDebugSettings(e,t)},d.prototype.applyStyle=function(e){for(var t=this._contents,i=t.length,r=0;r<i;++r)t[r].applyStyle(e)},d.prototype.update=function(e,t){for(var i=this._contents,r=i.length,n=0;n<r;++n)i[n].update(e,t)},d.prototype.isDestroyed=function(){return!1},d.prototype.destroy=function(){for(var e=this._contents,t=e.length,i=0;i<t;++i)e[i].destroy();return Object(a["a"])(this)},t["a"]=d},e8b2:function(e,t,i){"use strict";var r=i("9541"),n=i("2bb9"),a=i("535a"),s=i("2f63"),o=i("7d62"),c=i("4f04"),d=i("d9403"),h=i("a894"),u=i("d289"),l=i("6dc0"),p=i("e90c"),f=i("5770"),_=i("33db"),m=i("ae16"),g=i("a58e"),v=i("b7c8"),b=i("5a6c"),C=i("06f0"),y=i("3a8e"),x=i("894b"),O=i("a307"),S=i("2a1b"),w=i("3626"),P=i("6102"),E=i("25ef");function I(e){e=Object(a["a"])(e,a["a"].EMPTY_OBJECT);var t=e.geometryInstances;this.geometryInstances=t,this.show=Object(a["a"])(e.show,!0),this.classificationType=Object(a["a"])(e.classificationType,b["a"].BOTH),this.debugShowBoundingVolume=Object(a["a"])(e.debugShowBoundingVolume,!1),this.debugShowShadowVolume=Object(a["a"])(e.debugShowShadowVolume,!1),this._debugShowShadowVolume=!1,this._extruded=Object(a["a"])(e._extruded,!1),this._uniformMap=e._uniformMap,this._sp=void 0,this._spStencil=void 0,this._spPick=void 0,this._spColor=void 0,this._spPick2D=void 0,this._spColor2D=void 0,this._rsStencilDepthPass=void 0,this._rsStencilDepthPass3DTiles=void 0,this._rsColorPass=void 0,this._rsPickPass=void 0,this._commandsIgnoreShow=[],this._ready=!1,this._readyPromise=g["a"].defer(),this._primitive=void 0,this._pickPrimitive=e._pickPrimitive,this._hasSphericalExtentsAttribute=!1,this._hasPlanarExtentsAttributes=!1,this._hasPerColorAttribute=!1,this.appearance=e.appearance,this._createBoundingVolumeFunction=e._createBoundingVolumeFunction,this._updateAndQueueCommandsFunction=e._updateAndQueueCommandsFunction,this._usePickOffsets=!1,this._primitiveOptions={geometryInstances:void 0,appearance:void 0,vertexCacheOptimize:Object(a["a"])(e.vertexCacheOptimize,!1),interleave:Object(a["a"])(e.interleave,!1),releaseGeometryInstances:Object(a["a"])(e.releaseGeometryInstances,!0),allowPicking:Object(a["a"])(e.allowPicking,!0),asynchronous:Object(a["a"])(e.asynchronous,!0),compressVertices:Object(a["a"])(e.compressVertices,!0),_createBoundingVolumeFunction:void 0,_createRenderStatesFunction:void 0,_createShaderProgramFunction:void 0,_createCommandsFunction:void 0,_updateAndQueueCommandsFunction:void 0,_createPickOffsets:!0}}function T(e,t){var i=t?P["a"].EQUAL:P["a"].ALWAYS;return{colorMask:{red:!1,green:!1,blue:!1,alpha:!1},stencilTest:{enabled:e,frontFunction:i,frontOperation:{fail:E["a"].KEEP,zFail:E["a"].DECREMENT_WRAP,zPass:E["a"].KEEP},backFunction:i,backOperation:{fail:E["a"].KEEP,zFail:E["a"].INCREMENT_WRAP,zPass:E["a"].KEEP},reference:w["a"].CESIUM_3D_TILE_MASK,mask:w["a"].CESIUM_3D_TILE_MASK},stencilMask:w["a"].CLASSIFICATION_MASK,depthTest:{enabled:!0,func:C["a"].LESS_OR_EQUAL},depthMask:!1}}function A(e){return{stencilTest:{enabled:e,frontFunction:P["a"].NOT_EQUAL,frontOperation:{fail:E["a"].ZERO,zFail:E["a"].ZERO,zPass:E["a"].ZERO},backFunction:P["a"].NOT_EQUAL,backOperation:{fail:E["a"].ZERO,zFail:E["a"].ZERO,zPass:E["a"].ZERO},reference:0,mask:w["a"].CLASSIFICATION_MASK},stencilMask:w["a"].CLASSIFICATION_MASK,depthTest:{enabled:!1},depthMask:!1,blending:v["a"].PRE_MULTIPLIED_ALPHA_BLEND}}Object.defineProperties(I.prototype,{vertexCacheOptimize:{get:function(){return this._primitiveOptions.vertexCacheOptimize}},interleave:{get:function(){return this._primitiveOptions.interleave}},releaseGeometryInstances:{get:function(){return this._primitiveOptions.releaseGeometryInstances}},allowPicking:{get:function(){return this._primitiveOptions.allowPicking}},asynchronous:{get:function(){return this._primitiveOptions.asynchronous}},compressVertices:{get:function(){return this._primitiveOptions.compressVertices}},ready:{get:function(){return this._ready}},readyPromise:{get:function(){return this._readyPromise.promise}},_needs2DShader:{get:function(){return this._hasPlanarExtentsAttributes||this._hasSphericalExtentsAttribute}}}),I.isSupported=function(e){return e.context.stencilBuffer};var D={stencilTest:{enabled:!0,frontFunction:P["a"].NOT_EQUAL,frontOperation:{fail:E["a"].ZERO,zFail:E["a"].ZERO,zPass:E["a"].ZERO},backFunction:P["a"].NOT_EQUAL,backOperation:{fail:E["a"].ZERO,zFail:E["a"].ZERO,zPass:E["a"].ZERO},reference:0,mask:w["a"].CLASSIFICATION_MASK},stencilMask:w["a"].CLASSIFICATION_MASK,depthTest:{enabled:!1},depthMask:!1};function j(e,t,i,r){if(!Object(s["a"])(e._rsStencilDepthPass)){var n=!e.debugShowShadowVolume;e._rsStencilDepthPass=l["a"].fromCache(T(n,!1)),e._rsStencilDepthPass3DTiles=l["a"].fromCache(T(n,!0)),e._rsColorPass=l["a"].fromCache(A(n,!1)),e._rsPickPass=l["a"].fromCache(D)}}function L(e,t){if(!e.compressVertices)return t;if(-1!==t.search(/attribute\s+vec3\s+extrudeDirection;/g)){var i="compressedAttributes",r="attribute vec2 "+i+";",n="vec3 extrudeDirection;\n",a="    extrudeDirection = czm_octDecode("+i+", 65535.0);\n",s=t;s=s.replace(/attribute\s+vec3\s+extrudeDirection;/g,""),s=f["a"].replaceMain(s,"czm_non_compressed_main");var o="void main() \n{ \n"+a+"    czm_non_compressed_main(); \n}";return[r,n,s,o].join("\n")}}function M(e,t){var i=t.context,r=e._primitive,n=_["a"];n=e._primitive._batchTable.getVertexShaderCallback()(n),n=x["a"]._appendDistanceDisplayConditionToShader(r,n),n=x["a"]._modifyShaderPosition(e,n,t.scene3DOnly),n=x["a"]._updateColorAttribute(r,n);var a=e._hasPlanarExtentsAttributes,o=a||e._hasSphericalExtentsAttribute;e._extruded&&(n=L(r,n));var c=e._extruded?"EXTRUDED_GEOMETRY":"",d=new f["a"]({defines:[c],sources:[n]}),h=new f["a"]({sources:[m["a"]]}),u=e._primitive._attributeLocations,l=new S["a"](o,a,e.appearance);if(e._spStencil=p["a"].replaceCache({context:i,shaderProgram:e._spStencil,vertexShaderSource:d,fragmentShaderSource:h,attributeLocations:u}),e._primitive.allowPicking){var g=f["a"].createPickVertexShaderSource(n);g=x["a"]._appendShowToShader(r,g),g=x["a"]._updatePickColorAttribute(g);var v=l.createPickFragmentShader(!1),b=l.createPickVertexShader([c],g,!1,t.mapProjection);if(e._spPick=p["a"].replaceCache({context:i,shaderProgram:e._spPick,vertexShaderSource:b,fragmentShaderSource:v,attributeLocations:u}),o){var C=i.shaderCache.getDerivedShaderProgram(e._spPick,"2dPick");if(!Object(s["a"])(C)){var y=l.createPickFragmentShader(!0),O=l.createPickVertexShader([c],g,!0,t.mapProjection);C=i.shaderCache.createDerivedShaderProgram(e._spPick,"2dPick",{vertexShaderSource:O,fragmentShaderSource:y,attributeLocations:u})}e._spPick2D=C}}else e._spPick=p["a"].fromCache({context:i,vertexShaderSource:d,fragmentShaderSource:h,attributeLocations:u});n=x["a"]._appendShowToShader(r,n),d=new f["a"]({defines:[c],sources:[n]}),e._sp=p["a"].replaceCache({context:i,shaderProgram:e._sp,vertexShaderSource:d,fragmentShaderSource:h,attributeLocations:u});var w=l.createFragmentShader(!1),P=l.createVertexShader([c],n,!1,t.mapProjection);if(e._spColor=p["a"].replaceCache({context:i,shaderProgram:e._spColor,vertexShaderSource:P,fragmentShaderSource:w,attributeLocations:u}),o){var E=i.shaderCache.getDerivedShaderProgram(e._spColor,"2dColor");if(!Object(s["a"])(E)){var I=l.createFragmentShader(!0),T=l.createVertexShader([c],n,!0,t.mapProjection);E=i.shaderCache.createDerivedShaderProgram(e._spColor,"2dColor",{vertexShaderSource:T,fragmentShaderSource:I,attributeLocations:u})}e._spColor2D=E}}function R(e,t){var i,r,a,o=e._primitive,c=2*o._va.length;t.length=c;var d=0,l=o._batchTable.getUniformMapCallback()(e._uniformMap),p=e._needs2DShader;for(i=0;i<c;i+=2){var f=o._va[d++];r=t[i],Object(s["a"])(r)||(r=t[i]=new h["a"]({owner:e,primitiveType:o._primitiveType})),r.vertexArray=f,r.renderState=e._rsStencilDepthPass,r.shaderProgram=e._sp,r.uniformMap=l,r.pass=u["a"].TERRAIN_CLASSIFICATION,a=h["a"].shallowClone(r,r.derivedCommands.tileset),a.renderState=e._rsStencilDepthPass3DTiles,a.pass=u["a"].CESIUM_3D_TILE_CLASSIFICATION,r.derivedCommands.tileset=a,r=t[i+1],Object(s["a"])(r)||(r=t[i+1]=new h["a"]({owner:e,primitiveType:o._primitiveType})),r.vertexArray=f,r.renderState=e._rsColorPass,r.shaderProgram=e._spColor,r.pass=u["a"].TERRAIN_CLASSIFICATION;var _=e.appearance,m=_.material;if(Object(s["a"])(m)&&(l=Object(n["a"])(l,m._uniforms)),r.uniformMap=l,a=h["a"].shallowClone(r,r.derivedCommands.tileset),a.pass=u["a"].CESIUM_3D_TILE_CLASSIFICATION,r.derivedCommands.tileset=a,p){var g=h["a"].shallowClone(r,r.derivedCommands.appearance2D);g.shaderProgram=e._spColor2D,r.derivedCommands.appearance2D=g,g=h["a"].shallowClone(a,a.derivedCommands.appearance2D),g.shaderProgram=e._spColor2D,a.derivedCommands.appearance2D=g}}var v=e._commandsIgnoreShow,b=e._spStencil,C=0;c=v.length=c/2;for(var y=0;y<c;++y){var x=v[y]=h["a"].shallowClone(t[C],v[y]);x.shaderProgram=b,x.pass=u["a"].CESIUM_3D_TILE_CLASSIFICATION_IGNORE_SHOW,C+=2}}function k(e,t){var i,r,n,a,o,c=e._usePickOffsets,d=e._primitive,l=2*d._va.length,p=0;c&&(i=d._pickOffsets,l=2*i.length),t.length=l;var f=0,_=d._batchTable.getUniformMapCallback()(e._uniformMap),m=e._needs2DShader;for(n=0;n<l;n+=2){var g=d._va[f++];if(c&&(r=i[p++],g=d._va[r.index]),a=t[n],Object(s["a"])(a)||(a=t[n]=new h["a"]({owner:e,primitiveType:d._primitiveType,pickOnly:!0})),a.vertexArray=g,a.renderState=e._rsStencilDepthPass,a.shaderProgram=e._sp,a.uniformMap=_,a.pass=u["a"].TERRAIN_CLASSIFICATION,c&&(a.offset=r.offset,a.count=r.count),o=h["a"].shallowClone(a,a.derivedCommands.tileset),o.renderState=e._rsStencilDepthPass3DTiles,o.pass=u["a"].CESIUM_3D_TILE_CLASSIFICATION,a.derivedCommands.tileset=o,a=t[n+1],Object(s["a"])(a)||(a=t[n+1]=new h["a"]({owner:e,primitiveType:d._primitiveType,pickOnly:!0})),a.vertexArray=g,a.renderState=e._rsPickPass,a.shaderProgram=e._spPick,a.uniformMap=_,a.pass=u["a"].TERRAIN_CLASSIFICATION,c&&(a.offset=r.offset,a.count=r.count),o=h["a"].shallowClone(a,a.derivedCommands.tileset),o.pass=u["a"].CESIUM_3D_TILE_CLASSIFICATION,a.derivedCommands.tileset=o,m){var v=h["a"].shallowClone(a,a.derivedCommands.pick2D);v.shaderProgram=e._spPick2D,a.derivedCommands.pick2D=v,v=h["a"].shallowClone(o,o.derivedCommands.pick2D),v.shaderProgram=e._spPick2D,o.derivedCommands.pick2D=v}}}function B(e,t,i,r,n,a,s){R(e,a),k(e,s)}function N(e,t){return Math.floor(e%t/2)}function V(e,t,i,r,n,a){e.modelMatrix=i,e.boundingVolume=n,e.cull=r,e.debugShowBoundingVolume=a,t.commandList.push(e)}function F(e,t,i,r,n){e.modelMatrix=i,e.boundingVolume=n,e.cull=r,t.commandList.push(e)}function U(e,t,i,r,n,a,o,c){var d,h=e._primitive;x["a"]._updateBoundingVolumes(h,t,n),t.mode===O["a"].SCENE3D?d=h._boundingSphereWC:t.mode===O["a"].COLUMBUS_VIEW?d=h._boundingSphereCV:t.mode===O["a"].SCENE2D&&Object(s["a"])(h._boundingSphere2D)?d=h._boundingSphere2D:Object(s["a"])(h._boundingSphereMorph)&&(d=h._boundingSphereMorph);var u,l,p,f=e.classificationType,_=f!==b["a"].CESIUM_3D_TILE,m=f!==b["a"].TERRAIN,g=t.passes;if(g.render){var v=i.length;for(u=0;u<v;++u)l=d[N(u,v)],_&&(p=i[u],V(p,t,n,a,l,o)),m&&(p=i[u].derivedCommands.tileset,V(p,t,n,a,l,o));if(t.invertClassification){var C=e._commandsIgnoreShow,y=C.length;for(u=0;u<y;++u)l=d[u],p=C[u],V(p,t,n,a,l,o)}}if(g.pick){var S=r.length,w=h._pickOffsets;for(u=0;u<S;++u){var P=w[N(u,S)];l=d[P.index],_&&(p=r[u],F(p,t,n,a,l)),m&&(p=r[u].derivedCommands.tileset,F(p,t,n,a,l))}}}I.prototype.update=function(e){if(Object(s["a"])(this._primitive)||Object(s["a"])(this.geometryInstances)){var t=this.appearance;Object(s["a"])(t)&&Object(s["a"])(t.material)&&t.material.update(e.context);var i=this,n=this._primitiveOptions;if(!Object(s["a"])(this._primitive)){var o,h,u,p,f=Array.isArray(this.geometryInstances)?this.geometryInstances:[this.geometryInstances],_=f.length,m=!1,g=!0,v=!1,b=!1;for(_>0&&(u=f[0].attributes,v=S["a"].hasAttributesForSphericalExtents(u),b=S["a"].hasAttributesForTextureCoordinatePlanes(u),p=u.color),o=0;o<_;o++){h=f[o];var C=h.attributes.color;Object(s["a"])(C)&&(m=!0),g=g&&Object(s["a"])(C)&&r["a"].equals(p,C)}if(!g&&!v&&!b)throw new c["a"]("All GeometryInstances must have the same color attribute except via GroundPrimitives");m&&!Object(s["a"])(t)&&(t=new y["a"]({flat:!0}),this.appearance=t),this._usePickOffsets=!v&&!b,this._hasSphericalExtentsAttribute=v,this._hasPlanarExtentsAttributes=b,this._hasPerColorAttribute=m;var O=new Array(_);for(o=0;o<_;++o)h=f[o],O[o]=new d["a"]({geometry:h.geometry,attributes:h.attributes,modelMatrix:h.modelMatrix,id:h.id,pickPrimitive:Object(a["a"])(this._pickPrimitive,i)});n.appearance=t,n.geometryInstances=O,Object(s["a"])(this._createBoundingVolumeFunction)&&(n._createBoundingVolumeFunction=function(e,t){i._createBoundingVolumeFunction(e,t)}),n._createRenderStatesFunction=function(e,t,r,n){j(i,t)},n._createShaderProgramFunction=function(e,t,r){M(i,t)},n._createCommandsFunction=function(e,t,r,n,a,s,o){B(i,void 0,void 0,!0,!1,s,o)},Object(s["a"])(this._updateAndQueueCommandsFunction)?n._updateAndQueueCommandsFunction=function(e,t,r,n,a,s,o,c){i._updateAndQueueCommandsFunction(e,t,r,n,a,s,o,c)}:n._updateAndQueueCommandsFunction=function(e,t,r,n,a,s,o,c){U(i,t,r,n,a,s,o,c)},this._primitive=new x["a"](n),this._primitive.readyPromise.then((function(e){i._ready=!0,i.releaseGeometryInstances&&(i.geometryInstances=void 0);var t=e._error;Object(s["a"])(t)?i._readyPromise.reject(t):i._readyPromise.resolve(i)}))}this.debugShowShadowVolume&&!this._debugShowShadowVolume&&this._ready?(this._debugShowShadowVolume=!0,this._rsStencilDepthPass=l["a"].fromCache(T(!1,!1)),this._rsStencilDepthPass3DTiles=l["a"].fromCache(T(!1,!0)),this._rsColorPass=l["a"].fromCache(A(!1))):!this.debugShowShadowVolume&&this._debugShowShadowVolume&&(this._debugShowShadowVolume=!1,this._rsStencilDepthPass=l["a"].fromCache(T(!0,!1)),this._rsStencilDepthPass3DTiles=l["a"].fromCache(T(!0,!0)),this._rsColorPass=l["a"].fromCache(A(!0))),this._primitive.appearance!==t&&(this._primitive.appearance=t),this._primitive.show=this.show,this._primitive.debugShowBoundingVolume=this.debugShowBoundingVolume,this._primitive.update(e)}},I.prototype.getGeometryInstanceAttributes=function(e){return this._primitive.getGeometryInstanceAttributes(e)},I.prototype.isDestroyed=function(){return!1},I.prototype.destroy=function(){return this._primitive=this._primitive&&this._primitive.destroy(),this._sp=this._sp&&this._sp.destroy(),this._spPick=this._spPick&&this._spPick.destroy(),this._spColor=this._spColor&&this._spColor.destroy(),this._spPick2D=void 0,this._spColor2D=void 0,Object(o["a"])(this)},t["a"]=I}}]);