(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Cesium~223627b5"],{"0668":function(e,t,i){"use strict";var r={START:0,LOADING:1,READY:2,UPSAMPLED_ONLY:3};t["a"]=Object.freeze(r)},"1ec0":function(e,t,i){"use strict";var r=i("cef5"),a=i("be18"),n=i("bef8"),o=i("9541"),s=i("535a"),c=i("c52f"),u=i("d9403"),l=i("5410"),h=i("52f0"),d=i("78e5"),m=i("188e"),g=i("2ac3"),p=i("eace"),f=i("24a2"),_=i("3a8e"),v=i("894b"),b=i("a307");function y(e){this.rectangle=p["a"].clone(e.rectangle),this.minimumHeight=Object(s["a"])(e.minimumHeight,0),this.maximumHeight=Object(s["a"])(e.maximumHeight,0),this.southwestCornerCartesian=new a["a"],this.northeastCornerCartesian=new a["a"],this.westNormal=new a["a"],this.southNormal=new a["a"],this.eastNormal=new a["a"],this.northNormal=new a["a"];var t=Object(s["a"])(e.ellipsoid,c["a"].WGS84);P(this,e.rectangle,t),Object(s["a"])(e.computeBoundingVolumes,!0)&&(this._orientedBoundingBox=d["a"].fromRectangle(this.rectangle,this.minimumHeight,this.maximumHeight,t),this._boundingSphere=r["a"].fromOrientedBoundingBox(this._orientedBoundingBox))}Object.defineProperties(y.prototype,{boundingVolume:{get:function(){return this._orientedBoundingBox}},boundingSphere:{get:function(){return this._boundingSphere}}});var O=new a["a"],w=new a["a"],x=new a["a"],j=new a["a"],I=new a["a"],S=new a["a"],C=new n["a"],E=new m["a"](a["a"].UNIT_X,0),N=new g["a"];function P(e,t,i){i.cartographicToCartesian(p["a"].southwest(t),e.southwestCornerCartesian),i.cartographicToCartesian(p["a"].northeast(t),e.northeastCornerCartesian),C.longitude=t.west,C.latitude=.5*(t.south+t.north),C.height=0;var r=i.cartographicToCartesian(C,I),n=a["a"].cross(r,a["a"].UNIT_Z,O);a["a"].normalize(n,e.westNormal),C.longitude=t.east;var o=i.cartographicToCartesian(C,S),s=a["a"].cross(a["a"].UNIT_Z,o,O);a["a"].normalize(s,e.eastNormal);var c,u=a["a"].subtract(r,o,O),h=a["a"].normalize(u,j),d=t.south;if(d>0){C.longitude=.5*(t.west+t.east),C.latitude=d;var g=i.cartographicToCartesian(C,N.origin);a["a"].clone(h,N.direction);var f=m["a"].fromPointNormal(e.southwestCornerCartesian,e.westNormal,E);l["a"].rayPlane(N,f,e.southwestCornerCartesian),c=i.geodeticSurfaceNormal(g,w)}else c=i.geodeticSurfaceNormalCartographic(p["a"].southeast(t),w);var _=a["a"].cross(c,u,x);a["a"].normalize(_,e.southNormal);var v,b=t.north;if(b<0){C.longitude=.5*(t.west+t.east),C.latitude=b;var y=i.cartographicToCartesian(C,N.origin);a["a"].negate(h,N.direction);var P=m["a"].fromPointNormal(e.northeastCornerCartesian,e.eastNormal,E);l["a"].rayPlane(N,P,e.northeastCornerCartesian),v=i.geodeticSurfaceNormal(y,w)}else v=i.geodeticSurfaceNormalCartographic(p["a"].northwest(t),w);var T=a["a"].cross(u,v,x);a["a"].normalize(T,e.northNormal)}var T=new a["a"],D=new a["a"],F=new a["a"](0,-1,0),L=new a["a"](0,0,-1),B=new a["a"];y.prototype.distanceToCamera=function(e){var t,i,r,n=e.camera,o=n.positionWC,s=n.positionCartographic,c=0;if(!p["a"].contains(this.rectangle,s)){var u=this.southwestCornerCartesian,l=this.northeastCornerCartesian,h=this.westNormal,d=this.southNormal,m=this.eastNormal,g=this.northNormal;e.mode!==b["a"].SCENE3D&&(u=e.mapProjection.project(p["a"].southwest(this.rectangle),T),u.z=u.y,u.y=u.x,u.x=0,l=e.mapProjection.project(p["a"].northeast(this.rectangle),D),l.z=l.y,l.y=l.x,l.x=0,h=F,m=a["a"].UNIT_Y,d=L,g=a["a"].UNIT_Z);var f=a["a"].subtract(o,u,B),_=a["a"].dot(f,h),v=a["a"].dot(f,d),y=a["a"].subtract(o,l,B),O=a["a"].dot(y,m),w=a["a"].dot(y,g);_>0?c+=_*_:O>0&&(c+=O*O),v>0?c+=v*v:w>0&&(c+=w*w)}if(e.mode===b["a"].SCENE3D?(t=s.height,i=this.minimumHeight,r=this.maximumHeight):(t=o.x,i=0,r=0),t>r){var x=t-r;c+=x*x}else if(t<i){var j=i-t;c+=j*j}return Math.sqrt(c)},y.prototype.intersectPlane=function(e){return this._orientedBoundingBox.intersectPlane(e)},y.prototype.createDebugVolume=function(e){var t=new h["a"].clone(h["a"].IDENTITY),i=new f["a"]({rectangle:this.rectangle,height:this.minimumHeight,extrudedHeight:this.maximumHeight}),r=new u["a"]({geometry:i,id:"outline",modelMatrix:t,attributes:{color:o["a"].fromColor(e)}});return new v["a"]({geometryInstances:r,appearance:new _["a"]({translucent:!1,flat:!0}),asynchronous:!1})},t["a"]=y},3995:function(e,t,i){"use strict";var r=i("535a"),a=i("7d62"),n=i("e856"),o=i("283e"),s=i("a58e");function c(e,t,i,r,a){this._tileset=e,this._tile=t,this._resource=i,this._readyPromise=s["a"].defer(),this.featurePropertiesDirty=!1,u(this,r,a)}function u(e,t,i){i=Object(r["a"])(i,0);var a,s=new Uint8Array(t);try{a=Object(n["a"])(s,i)}catch(c){return void e._readyPromise.reject(new o["a"]("Invalid tile content."))}e._tileset.loadTileset(e._resource,a,e._tile),e._readyPromise.resolve(e)}Object.defineProperties(c.prototype,{featuresLength:{get:function(){return 0}},pointsLength:{get:function(){return 0}},trianglesLength:{get:function(){return 0}},geometryByteLength:{get:function(){return 0}},texturesByteLength:{get:function(){return 0}},batchTableByteLength:{get:function(){return 0}},innerContents:{get:function(){}},readyPromise:{get:function(){return this._readyPromise.promise}},tileset:{get:function(){return this._tileset}},tile:{get:function(){return this._tile}},url:{get:function(){return this._resource.getUrlComponent(!0)}},batchTable:{get:function(){}}}),c.prototype.hasProperty=function(e,t){return!1},c.prototype.getFeature=function(e){},c.prototype.applyDebugSettings=function(e,t){},c.prototype.applyStyle=function(e){},c.prototype.update=function(e,t){},c.prototype.isDestroyed=function(){return!1},c.prototype.destroy=function(){return Object(a["a"])(this)},t["a"]=c},"3a92":function(e,t,i){"use strict";var r=i("2f63");function a(){this.head=void 0,this.tail=void 0,this.count=0,this._lastBeforeStartOfFrame=void 0}function n(e,t){var i=t.replacementPrevious,r=t.replacementNext;t===e._lastBeforeStartOfFrame&&(e._lastBeforeStartOfFrame=r),t===e.head?e.head=r:i.replacementNext=r,t===e.tail?e.tail=i:r.replacementPrevious=i,t.replacementPrevious=void 0,t.replacementNext=void 0,--e.count}a.prototype.markStartOfRenderFrame=function(){this._lastBeforeStartOfFrame=this.head},a.prototype.trimTiles=function(e){var t=this.tail,i=!0;while(i&&Object(r["a"])(this._lastBeforeStartOfFrame)&&this.count>e&&Object(r["a"])(t)){i=t!==this._lastBeforeStartOfFrame;var a=t.replacementPrevious;t.eligibleForUnloading&&(t.freeResources(),n(this,t)),t=a}},a.prototype.markTileRendered=function(e){var t=this.head;if(t!==e){if(++this.count,!Object(r["a"])(t))return e.replacementPrevious=void 0,e.replacementNext=void 0,this.head=e,void(this.tail=e);(Object(r["a"])(e.replacementPrevious)||Object(r["a"])(e.replacementNext))&&n(this,e),e.replacementPrevious=void 0,e.replacementNext=t,t.replacementPrevious=e,this.head=e}else e===this._lastBeforeStartOfFrame&&(this._lastBeforeStartOfFrame=e.replacementNext)},t["a"]=a},"651e":function(e,t,i){"use strict";var r=i("bd8d"),a=i("535a"),n=i("2f63"),o=i("21d7"),s=i("5d5c"),c=i("a58e");function u(e){e=Object(a["a"])(e,a["a"].EMPTY_OBJECT),this._tilingScheme=Object(n["a"])(e.tilingScheme)?e.tilingScheme:new s["a"]({ellipsoid:e.ellipsoid}),this._color=Object(a["a"])(e.color,r["a"].YELLOW),this._errorEvent=new o["a"],this._tileWidth=Object(a["a"])(e.tileWidth,256),this._tileHeight=Object(a["a"])(e.tileHeight,256),this._readyPromise=c["a"].resolve(!0),this.defaultAlpha=void 0,this.defaultNightAlpha=void 0,this.defaultDayAlpha=void 0,this.defaultBrightness=void 0,this.defaultContrast=void 0,this.defaultHue=void 0,this.defaultSaturation=void 0,this.defaultGamma=void 0,this.defaultMinificationFilter=void 0,this.defaultMagnificationFilter=void 0}Object.defineProperties(u.prototype,{proxy:{get:function(){}},tileWidth:{get:function(){return this._tileWidth}},tileHeight:{get:function(){return this._tileHeight}},maximumLevel:{get:function(){}},minimumLevel:{get:function(){}},tilingScheme:{get:function(){return this._tilingScheme}},rectangle:{get:function(){return this._tilingScheme.rectangle}},tileDiscardPolicy:{get:function(){}},errorEvent:{get:function(){return this._errorEvent}},ready:{get:function(){return!0}},readyPromise:{get:function(){return this._readyPromise}},credit:{get:function(){}},hasAlphaChannel:{get:function(){return!0}}}),u.prototype.getTileCredits=function(e,t,i){},u.prototype.requestImage=function(e,t,i,r){var a=document.createElement("canvas");a.width=256,a.height=256;var n=a.getContext("2d"),o=this._color.toCssColorString();return n.strokeStyle=o,n.lineWidth=2,n.strokeRect(1,1,255,255),n.font="bold 25px Arial",n.textAlign="center",n.fillStyle=o,n.fillText("L: "+i,124,86),n.fillText("X: "+e,124,136),n.fillText("Y: "+t,124,186),a},u.prototype.pickFeatures=function(e,t,i,r,a){},t["a"]=u},"663d":function(e,t,i){"use strict";var r=i("2f63"),a=i("dddf");function n(e,t,i){this.readyImagery=void 0,this.loadingImagery=e,this.textureCoordinateRectangle=t,this.textureTranslationAndScale=void 0,this.useWebMercatorT=i}n.prototype.freeResources=function(){Object(r["a"])(this.readyImagery)&&this.readyImagery.releaseReference(),Object(r["a"])(this.loadingImagery)&&this.loadingImagery.releaseReference()},n.prototype.processStateMachine=function(e,t,i){var n=this.loadingImagery,o=n.imageryLayer;if(n.processStateMachine(t,!this.useWebMercatorT,i),n.state===a["a"].READY)return Object(r["a"])(this.readyImagery)&&this.readyImagery.releaseReference(),this.readyImagery=this.loadingImagery,this.loadingImagery=void 0,this.textureTranslationAndScale=o._calculateTextureTranslationAndScale(e,this),!0;var s,c=n.parent;while(Object(r["a"])(c)&&(c.state!==a["a"].READY||!this.useWebMercatorT&&!Object(r["a"])(c.texture)))c.state!==a["a"].FAILED&&c.state!==a["a"].INVALID&&(s=s||c),c=c.parent;return this.readyImagery!==c&&(Object(r["a"])(this.readyImagery)&&this.readyImagery.releaseReference(),this.readyImagery=c,Object(r["a"])(c)&&(c.addReference(),this.textureTranslationAndScale=o._calculateTextureTranslationAndScale(e,this))),(n.state===a["a"].FAILED||n.state===a["a"].INVALID)&&(!Object(r["a"])(s)||(s.processStateMachine(t,!this.useWebMercatorT,i),!1))},t["a"]=n},"72c2":function(e,t,i){"use strict";var r=i("2c34"),a=i("2bb9"),n=i("535a"),o=i("2f63"),s=i("7d62"),c=i("21d7"),u=i("ddf7"),l=i("5ed2"),h=i("93da"),d=i("52f0"),m=i("d4ed"),g=i("a58e"),p=i("43ee"),f=i("3443"),_=i("2ab8"),v=i("7b4a"),b=i("a307"),y=i("c86b");function O(e){e=Object(n["a"])(e,n["a"].EMPTY_OBJECT),this.show=Object(n["a"])(e.show,!0),this.modelMatrix=d["a"].clone(Object(n["a"])(e.modelMatrix,d["a"].IDENTITY)),this.shadows=Object(n["a"])(e.shadows,y["a"].ENABLED),this.maximumMemoryUsage=Object(n["a"])(e.maximumMemoryUsage,256),this.shading=new v["a"](e.shading),this.style=e.style,this.frameFailed=new c["a"],this.frameChanged=new c["a"],this._clock=e.clock,this._intervals=e.intervals,this._clippingPlanes=void 0,this.clippingPlanes=e.clippingPlanes,this._pointCloudEyeDomeLighting=new _["a"],this._loadTimestamp=void 0,this._clippingPlanesState=0,this._styleDirty=!1,this._pickId=void 0,this._totalMemoryUsageInBytes=0,this._frames=[],this._previousInterval=void 0,this._nextInterval=void 0,this._lastRenderedFrame=void 0,this._clockMultiplier=0,this._readyPromise=g["a"].defer(),this._runningSum=0,this._runningLength=0,this._runningIndex=0,this._runningSamples=Object(r["a"])(new Array(5),0),this._runningAverage=0}function w(e){return"uniform vec4 czm_pickColor;\n"+e}function x(e){return function(t){return Object(a["a"])(t,{czm_pickColor:function(){return e._pickId.color}})}}function j(){return"czm_pickColor"}Object.defineProperties(O.prototype,{clippingPlanes:{get:function(){return this._clippingPlanes},set:function(e){p["a"].setOwner(e,this,"_clippingPlanes")}},totalMemoryUsageInBytes:{get:function(){return this._totalMemoryUsageInBytes}},boundingSphere:{get:function(){if(Object(o["a"])(this._lastRenderedFrame))return this._lastRenderedFrame.pointCloud.boundingSphere}},readyPromise:{get:function(){return this._readyPromise.promise}}}),O.prototype.makeStyleDirty=function(){this._styleDirty=!0},O.prototype._getAverageLoadTime=function(){return 0===this._runningLength?.05:this._runningAverage};var I=new l["a"];function S(e){var t=e._clock,i=t.canAnimate&&t.shouldAnimate,r=t.multiplier;return i?r:0}function C(e,t){return e._intervals.indexOf(t.start)}function E(e,t){var i=e._intervals,r=e._clock,a=S(e);if(0!==a){var n=e._getAverageLoadTime(),o=l["a"].addSeconds(r.currentTime,n*a,I),s=i.indexOf(o),c=C(e,t);return s===c&&(a>=0?++s:--s),i.get(s)}}function N(e){var t=e._intervals,i=e._clock,r=i.currentTime,a=t.indexOf(r);return t.get(a)}function P(e,t,i){var r=S(e),a=C(e,t),n=C(e,i);return r>=0?a>=n:a<=n}function T(e,t){return function(i){var r=Object(o["a"])(i.message)?i.message:i.toString();e.frameFailed.numberOfListeners>0&&e.frameFailed.raiseEvent({uri:t,message:r})}}function D(e,t,i){var r=C(e,t),a=e._frames,n=a[r];if(!Object(o["a"])(n)){var s=t.data.transform,c=Object(o["a"])(s)?d["a"].fromArray(s):void 0,l=t.data.uri;n={pointCloud:void 0,transform:c,timestamp:Object(u["a"])(),sequential:!0,ready:!1,touchedFrameNumber:i.frameNumber},a[r]=n,m["a"].fetchArrayBuffer({url:l}).then((function(t){return n.pointCloud=new f["a"]({arrayBuffer:t,cull:!0,fragmentShaderLoaded:w,uniformMapLoaded:x(e),pickIdLoaded:j}),n.pointCloud.readyPromise})).otherwise(T(e,l))}return n}function F(e,t){e._runningSum+=t,e._runningSum-=e._runningSamples[e._runningIndex],e._runningSamples[e._runningIndex]=t,e._runningLength=Math.min(e._runningLength+1,e._runningSamples.length),e._runningIndex=(e._runningIndex+1)%e._runningSamples.length,e._runningAverage=e._runningSum/e._runningLength}function L(e,t,i,r){t.touchedFrameNumber<r.frameNumber-1&&(t.sequential=!1);var a=t.pointCloud;if(Object(o["a"])(a)&&!t.ready){var n=r.commandList,s=n.length;if(M(e,t,i,r),a.ready&&(t.ready=!0,e._totalMemoryUsageInBytes+=a.geometryByteLength,n.length=s,t.sequential)){var c=(Object(u["a"])()-t.timestamp)/1e3;F(e,c)}}t.touchedFrameNumber=r.frameNumber}var B=new d["a"];function R(e,t){var i=e.shading;return Object(o["a"])(i)&&Object(o["a"])(i.baseResolution)?i.baseResolution:Object(o["a"])(t.boundingSphere)?h["a"].cbrt(t.boundingSphere.volume()/t.pointsLength):0}function A(e){var t=e.shading;return Object(o["a"])(t)&&Object(o["a"])(t.maximumAttenuation)?t.maximumAttenuation:10}var k=new v["a"];function M(e,t,i,r){var a=Object(n["a"])(e.shading,k),o=t.pointCloud,s=Object(n["a"])(t.transform,d["a"].IDENTITY);o.modelMatrix=d["a"].multiplyTransformation(e.modelMatrix,s,B),o.style=e.style,o.time=i.timeSinceLoad,o.shadows=e.shadows,o.clippingPlanes=e._clippingPlanes,o.isClipped=i.isClipped,o.attenuation=a.attenuation,o.backFaceCulling=a.backFaceCulling,o.normalShading=a.normalShading,o.geometricError=R(e,o),o.geometricErrorScale=a.geometricErrorScale,o.maximumAttenuation=A(e),o.update(r),t.touchedFrameNumber=r.frameNumber}function q(e,t,i,r){var a=D(e,t,r);L(e,a,i,r)}function U(e){return function(t){return t.touchedFrameNumber<e.frameNumber}}function Y(e,t){for(var i=e._frames,r=i.length,a=0;a<r;++a){var n=i[a];if(Object(o["a"])(n)&&(!Object(o["a"])(t)||t(n))){var s=n.pointCloud;n.ready&&(e._totalMemoryUsageInBytes-=s.geometryByteLength),Object(o["a"])(s)&&s.destroy(),n===e._lastRenderedFrame&&(e._lastRenderedFrame=void 0),i[a]=void 0}}}function H(e,t){var i=C(e,t),r=e._frames[i];if(Object(o["a"])(r)&&r.ready)return r}function W(e,t,i,r,a){return!!Object(o["a"])(i)&&(!!i.ready||(q(e,t,r,a),i.ready))}function z(e,t,i,r,a){var n,o,s,c=e._intervals,u=e._frames,l=C(e,i),h=C(e,t);if(l>=h){for(n=l;n>=h;--n)if(o=c.get(n),s=u[n],W(e,o,s,r,a))return o}else for(n=l;n<=h;++n)if(o=c.get(n),s=u[n],W(e,o,s,r,a))return o;return t}function V(e,t,i){for(var r=e._frames,a=r.length,n=0;n<a;++n){var s=r[n];Object(o["a"])(s)&&Object(o["a"])(s.pointCloud)&&(s.pointCloud.clippingPlanesDirty=t,s.pointCloud.styleDirty=i)}}var X={timeSinceLoad:0,isClipped:!1,clippingPlanesDirty:!1};O.prototype.update=function(e){if(e.mode!==b["a"].MORPHING&&this.show){Object(o["a"])(this._pickId)||(this._pickId=e.context.createPickId({primitive:this})),Object(o["a"])(this._loadTimestamp)||(this._loadTimestamp=l["a"].clone(e.time));var t=Math.max(1e3*l["a"].secondsDifference(e.time,this._loadTimestamp),0),i=this._clippingPlanes,r=0,a=!1,n=Object(o["a"])(i)&&i.enabled;n&&(i.update(e),r=i.clippingPlanesState),this._clippingPlanesState!==r&&(this._clippingPlanesState=r,a=!0);var s=this._styleDirty;this._styleDirty=!1,(a||s)&&V(this,a,s),X.timeSinceLoad=t,X.isClipped=n;var c=this.shading,u=this._pointCloudEyeDomeLighting,h=e.commandList,d=h.length,m=this._previousInterval,g=this._nextInterval,p=N(this);if(Object(o["a"])(p)){var f=!1,_=S(this),v=0===_;_!==this._clockMultiplier&&(f=!0,this._clockMultiplier=_),Object(o["a"])(m)&&!v||(m=p),(!Object(o["a"])(g)||f||P(this,p,g))&&(g=E(this,p)),m=z(this,m,p,X,e);var y=H(this,m);Object(o["a"])(y)||(q(this,m,X,e),y=this._lastRenderedFrame),Object(o["a"])(y)&&M(this,y,X,e),Object(o["a"])(g)&&q(this,g,X,e);var O=this;Object(o["a"])(y)&&!Object(o["a"])(this._lastRenderedFrame)&&e.afterRender.push((function(){O._readyPromise.resolve(O)})),Object(o["a"])(y)&&y!==this._lastRenderedFrame&&O.frameChanged.numberOfListeners>0&&e.afterRender.push((function(){O.frameChanged.raiseEvent(O)})),this._previousInterval=m,this._nextInterval=g,this._lastRenderedFrame=y;var w=this._totalMemoryUsageInBytes,x=1024*this.maximumMemoryUsage*1024;w>x&&Y(this,U(e));var j=h.length,I=j-d;Object(o["a"])(c)&&c.attenuation&&c.eyeDomeLighting&&I>0&&u.update(e,d,c,this.boundingSphere)}}},O.prototype.isDestroyed=function(){return!1},O.prototype.destroy=function(){return Y(this),this._clippingPlanes=this._clippingPlanes&&this._clippingPlanes.destroy(),this._pickId=this._pickId&&this._pickId.destroy(),Object(s["a"])(this)},t["a"]=O},7596:function(e,t,i){"use strict";var r=i("535a"),a=i("2f63"),n=i("5ed2"),o=i("de66"),s=i("b82e");function c(e){e=Object(r["a"])(e,r["a"].EMPTY_OBJECT),this._tileCache={},this._tilesRequestedForInterval=[];var t=this._clock=e.clock;this._times=e.times,this._requestImageFunction=e.requestImageFunction,this._reloadFunction=e.reloadFunction,this._currentIntervalIndex=-1,t.onTick.addEventListener(this._clockOnTick,this),this._clockOnTick(t)}function u(e,t,i){return e+"-"+t+"-"+i}function l(e){var t=e.split("-");if(3===t.length)return{x:Number(t[0]),y:Number(t[1]),level:Number(t[2])}}function h(e){var t=e._times;if(Object(a["a"])(t)){var i=e._clock,r=i.currentTime,o=i.canAnimate&&i.shouldAnimate,s=i.multiplier;if(o||0===s){var c,u=t.indexOf(r);if(!(u<0)){var l=t.get(u);return s>0?(c=n["a"].secondsDifference(l.stop,r),++u):(c=n["a"].secondsDifference(l.start,r),--u),c/=s,u>=0&&c<=5?t.get(u):void 0}}}}function d(e,t,i){var r=e._times.indexOf(i.start),n=e._tileCache,c=n[r];Object(a["a"])(c)||(c=n[r]={});var u=t.key;if(Object(a["a"])(c[u]))return!0;var h=l(u),d=new o["a"]({throttle:!1,throttleByServer:!0,type:s["a"].IMAGERY,priorityFunction:t.priorityFunction}),m=e._requestImageFunction(h.x,h.y,h.level,d,i);return!!Object(a["a"])(m)&&(c[u]={promise:m,request:d},!0)}Object.defineProperties(c.prototype,{clock:{get:function(){return this._clock},set:function(e){this._clock!==e&&(this._clock=e,this._clockOnTick(e),this._reloadFunction())}},times:{get:function(){return this._times},set:function(e){this._times!==e&&(this._times=e,this._clockOnTick(this._clock),this._reloadFunction())}},currentInterval:{get:function(){return this._times.get(this._currentIntervalIndex)}}}),c.prototype.getFromCache=function(e,t,i,r){var n,o=u(e,t,i),s=this._tileCache[this._currentIntervalIndex];if(Object(a["a"])(s)&&Object(a["a"])(s[o])){var c=s[o];n=c.promise.otherwise((function(e){throw r.state=c.request.state,e})),delete s[o]}return n},c.prototype.checkApproachingInterval=function(e,t,i,r){var n=u(e,t,i),o=this._tilesRequestedForInterval,s=h(this),c={key:n,priorityFunction:r.priorityFunction};Object(a["a"])(s)&&d(this,c,s)||o.push(c),o.length>=512&&o.splice(0,256)},c.prototype._clockOnTick=function(e){var t=e.currentTime,i=this._times,r=i.indexOf(t),n=this._currentIntervalIndex;if(r!==n){var o=this._tileCache[n];for(var s in o)o.hasOwnProperty(s)&&o[s].request.cancel();return delete this._tileCache[n],this._tilesRequestedForInterval=[],this._currentIntervalIndex=r,void this._reloadFunction()}var c=h(this);if(Object(a["a"])(c)){var u=this._tilesRequestedForInterval,l=!0;while(l){if(0===u.length)break;var m=u.pop();l=d(this,m,c),l||u.push(m)}}},t["a"]=c},"769c":function(e,t,i){"use strict";var r=i("4f04");function a(e){r["a"].throwInstantiationError()}a.prototype.isReady=r["a"].throwInstantiationError,a.prototype.shouldDiscardImage=r["a"].throwInstantiationError,t["a"]=a},"8cfb":function(e,t,i){"use strict";var r=i("cef5"),a=i("b081"),n=i("be18"),o=i("9541"),s=i("d9403"),c=i("df07"),u=i("52f0"),l=i("93da"),h=i("78e5"),d=i("3a8e"),m=i("894b"),g=new n["a"],p=new n["a"],f=new n["a"],_=new n["a"];function v(e,t,i){i=n["a"].cross(e,t,i);var r=n["a"].magnitude(i);return n["a"].multiplyByScalar(i,l["a"].EPSILON7/r,i)}function b(e,t){var i=n["a"].normalize(e,_),r=n["a"].equalsEpsilon(i,n["a"].UNIT_X,l["a"].EPSILON6)?n["a"].UNIT_Y:n["a"].UNIT_X;return v(e,r,t)}function y(e){var t=c["a"].getColumn(e,0,g),i=c["a"].getColumn(e,1,p),r=c["a"].getColumn(e,2,f),a=n["a"].equals(t,n["a"].ZERO),o=n["a"].equals(i,n["a"].ZERO),s=n["a"].equals(r,n["a"].ZERO);return a||o||s?a&&o&&s?(e[0]=l["a"].EPSILON7,e[4]=l["a"].EPSILON7,e[8]=l["a"].EPSILON7,e):(!a||o||s?a||!o||s?a||o||!s?a?o?s||(t=b(r,t),i=v(r,t,i)):(t=b(i,t),r=v(i,t,r)):(i=b(t,i),r=v(i,t,r)):r=v(i,t,r):i=v(t,r,i):t=v(i,r,t),c["a"].setColumn(e,0,t,e),c["a"].setColumn(e,1,i,e),c["a"].setColumn(e,2,r,e),e):e}function O(e,t){t=y(t),this._orientedBoundingBox=new h["a"](e,t),this._boundingSphere=r["a"].fromOrientedBoundingBox(this._orientedBoundingBox)}Object.defineProperties(O.prototype,{boundingVolume:{get:function(){return this._orientedBoundingBox}},boundingSphere:{get:function(){return this._boundingSphere}}}),O.prototype.distanceToCamera=function(e){return Math.sqrt(this._orientedBoundingBox.distanceSquaredTo(e.camera.positionWC))},O.prototype.intersectPlane=function(e){return this._orientedBoundingBox.intersectPlane(e)},O.prototype.update=function(e,t){n["a"].clone(e,this._orientedBoundingBox.center),t=y(t),c["a"].clone(t,this._orientedBoundingBox.halfAxes),r["a"].fromOrientedBoundingBox(this._orientedBoundingBox,this._boundingSphere)},O.prototype.createDebugVolume=function(e){var t=new a["a"]({minimum:new n["a"](-1,-1,-1),maximum:new n["a"](1,1,1)}),i=u["a"].fromRotationTranslation(this.boundingVolume.halfAxes,this.boundingVolume.center),r=new s["a"]({geometry:t,id:"outline",modelMatrix:i,attributes:{color:o["a"].fromColor(e)}});return new m["a"]({geometryInstances:r,appearance:new d["a"]({translucent:!1,flat:!0}),asynchronous:!1})},t["a"]=O},eb1f:function(e,t,i){"use strict";var r=i("cef5"),a=i("be18"),n=i("9541"),o=i("d9403"),s=i("93da"),c=i("52f0"),u=i("98f6"),l=i("3a8e"),h=i("894b");function d(e,t){0===t&&(t=s["a"].EPSILON7),this._boundingSphere=new r["a"](e,t)}Object.defineProperties(d.prototype,{center:{get:function(){return this._boundingSphere.center}},radius:{get:function(){return this._boundingSphere.radius}},boundingVolume:{get:function(){return this._boundingSphere}},boundingSphere:{get:function(){return this._boundingSphere}}}),d.prototype.distanceToCamera=function(e){var t=this._boundingSphere;return Math.max(0,a["a"].distance(t.center,e.camera.positionWC)-t.radius)},d.prototype.intersectPlane=function(e){return r["a"].intersectPlane(this._boundingSphere,e)},d.prototype.update=function(e,t){a["a"].clone(e,this._boundingSphere.center),this._boundingSphere.radius=t},d.prototype.createDebugVolume=function(e){var t=new u["a"]({radius:this.radius}),i=c["a"].fromTranslation(this.center,new c["a"].clone(c["a"].IDENTITY)),r=new o["a"]({geometry:t,id:"outline",modelMatrix:i,attributes:{color:n["a"].fromColor(e)}});return new h["a"]({geometryInstances:r,appearance:new l["a"]({translucent:!1,flat:!0}),asynchronous:!1})},t["a"]=d},ed98:function(e,t,i){"use strict";var r=i("670c"),a=i("bef8"),n=i("535a"),o=i("2f63"),s=i("3d7f"),c=i("5d5c"),u=i("eace"),l=i("d4ed"),h=i("283e"),d=i("a89b"),m=i("d3a0"),g=i("a58e"),p=i("e288");function f(e){e=Object(n["a"])(e,n["a"].EMPTY_OBJECT);var t,i=g["a"].defer();p["a"].call(this,i.promise),this._tmsResource=void 0,this._xmlResource=void 0,this._options=e,this._deferred=i,this._metadataError=void 0,this._metadataSuccess=this._metadataSuccess.bind(this),this._metadataFailure=this._metadataFailure.bind(this),this._requestMetadata=this._requestMetadata.bind(this);var r=this;Object(g["a"])(e.url).then((function(e){t=l["a"].createIfNeeded(e),t.appendForwardSlash(),r._tmsResource=t,r._xmlResource=t.getDerivedResource({url:"tilemapresource.xml"}),r._requestMetadata()})).otherwise((function(e){i.reject(e)}))}function _(e,t){return e.west<t.rectangle.west&&(e.west=t.rectangle.west),e.east>t.rectangle.east&&(e.east=t.rectangle.east),e.south<t.rectangle.south&&(e.south=t.rectangle.south),e.north>t.rectangle.north&&(e.north=t.rectangle.north),e}function v(e,t,i){var r=e.positionToTileXY(u["a"].southwest(t),i),a=e.positionToTileXY(u["a"].northeast(t),i),n=(Math.abs(a.x-r.x)+1)*(Math.abs(a.y-r.y)+1);return n>4?0:i}Object(o["a"])(Object.create)&&(f.prototype=Object.create(p["a"].prototype),f.prototype.constructor=f),f.prototype._requestMetadata=function(){this._xmlResource.fetchXML().then(this._metadataSuccess).otherwise(this._metadataFailure)},f.prototype._metadataSuccess=function(e){for(var t,i,l,g,p=/tileformat/i,f=/tileset/i,b=/tilesets/i,y=/boundingbox/i,O=[],w=this._xmlResource,x=this._metadataError,j=this._deferred,I=this._requestMetadata,S=e.childNodes[0].childNodes,C=0;C<S.length;C++)if(p.test(S.item(C).nodeName))t=S.item(C);else if(b.test(S.item(C).nodeName)){l=S.item(C);for(var E=S.item(C).childNodes,N=0;N<E.length;N++)f.test(E.item(N).nodeName)&&O.push(E.item(N))}else y.test(S.item(C).nodeName)&&(i=S.item(C));if(!Object(o["a"])(l)||!Object(o["a"])(i))return g="Unable to find expected tilesets or bbox attributes in "+w.url+".",x=d["a"].handleError(x,this,this.errorEvent,g,void 0,void 0,void 0,I),x.retry||j.reject(new h["a"](g)),void(this._metadataError=x);var P=this._options,T=Object(n["a"])(P.fileExtension,t.getAttribute("extension")),D=Object(n["a"])(P.tileWidth,parseInt(t.getAttribute("width"),10)),F=Object(n["a"])(P.tileHeight,parseInt(t.getAttribute("height"),10)),L=Object(n["a"])(P.minimumLevel,parseInt(O[0].getAttribute("order"),10)),B=Object(n["a"])(P.maximumLevel,parseInt(O[O.length-1].getAttribute("order"),10)),R=l.getAttribute("profile"),A=P.tilingScheme;if(!Object(o["a"])(A))if("geodetic"===R||"global-geodetic"===R)A=new c["a"]({ellipsoid:P.ellipsoid});else{if("mercator"!==R&&"global-mercator"!==R)return g=w.url+"specifies an unsupported profile attribute, "+R+".",x=d["a"].handleError(x,this,this.errorEvent,g,void 0,void 0,void 0,I),x.retry||j.reject(new h["a"](g)),void(this._metadataError=x);A=new m["a"]({ellipsoid:P.ellipsoid})}var k=u["a"].clone(P.rectangle);if(!Object(o["a"])(k)){var M,q,U,Y,H=Object(n["a"])(P.flipXY,!1);H?(U=new r["a"](parseFloat(i.getAttribute("miny")),parseFloat(i.getAttribute("minx"))),Y=new r["a"](parseFloat(i.getAttribute("maxy")),parseFloat(i.getAttribute("maxx")))):(U=new r["a"](parseFloat(i.getAttribute("minx")),parseFloat(i.getAttribute("miny"))),Y=new r["a"](parseFloat(i.getAttribute("maxx")),parseFloat(i.getAttribute("maxy"))));var W="geodetic"===R||"mercator"===R;if(A.projection instanceof s["a"]||W)M=a["a"].fromDegrees(U.x,U.y),q=a["a"].fromDegrees(Y.x,Y.y);else{var z=A.projection;M=z.unproject(U),q=z.unproject(Y)}k=new u["a"](M.longitude,M.latitude,q.longitude,q.latitude)}k=_(k,A),L=v(A,k,L);var V=this._tmsResource.getDerivedResource({url:"{z}/{x}/{reverseY}."+T});j.resolve({url:V,tilingScheme:A,rectangle:k,tileWidth:D,tileHeight:F,minimumLevel:L,maximumLevel:B,tileDiscardPolicy:P.tileDiscardPolicy,credit:P.credit})},f.prototype._metadataFailure=function(e){var t=this._options,i=Object(n["a"])(t.fileExtension,"png"),r=Object(n["a"])(t.tileWidth,256),a=Object(n["a"])(t.tileHeight,256),s=t.maximumLevel,c=Object(o["a"])(t.tilingScheme)?t.tilingScheme:new m["a"]({ellipsoid:t.ellipsoid}),u=Object(n["a"])(t.rectangle,c.rectangle);u=_(u,c);var l=v(c,u,t.maximumLevel),h=this._tmsResource.getDerivedResource({url:"{z}/{x}/{reverseY}."+i});this._deferred.resolve({url:h,tilingScheme:c,rectangle:u,tileWidth:r,tileHeight:a,minimumLevel:l,maximumLevel:s,tileDiscardPolicy:t.tileDiscardPolicy,credit:t.credit})},t["a"]=f},ee78:function(e,t,i){"use strict";var r={NONE:0,CULLED:1,RENDERED:2,REFINED:3,RENDERED_AND_KICKED:6,REFINED_AND_KICKED:7,CULLED_BUT_NEEDED:9,wasKicked:function(e){return e>=r.RENDERED_AND_KICKED},originalResult:function(e){return 3&e},kick:function(e){return 4|e}};t["a"]=r},f86d:function(e,t,i){"use strict";var r=i("4f04");function a(){}a.prototype.boundingVolume=void 0,a.prototype.boundingSphere=void 0,a.prototype.distanceToCamera=function(e){r["a"].throwInstantiationError()},a.prototype.intersectPlane=function(e){r["a"].throwInstantiationError()},a.prototype.createDebugVolume=function(e){r["a"].throwInstantiationError()},t["a"]=a}}]);