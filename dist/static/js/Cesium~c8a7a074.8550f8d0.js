(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Cesium~c8a7a074"],{"04e1":function(e,t,i){"use strict";var a=i("77af"),r=i("670c"),n=i("bd8d"),o=i("535a"),s=i("2f63"),l=i("7d62"),c=i("52f0"),h=i("2812"),d=i("9710"),u=i("8f7c"),f=i("141c"),_=i("2d75"),g=i("f61d"),p=i("c26f"),b=i("4626"),m=i("d9a9"),y=i("7eb3"),v=i("05e5"),O=i("743c");function T(){this.textureInfo=void 0,this.dimensions=void 0,this.billboard=void 0}function x(e,t,i){this.labelCollection=e,this.index=t,this.dimensions=i}var C=1.2,E="ID_WHITE_PIXEL",A=new r["a"](4,4),w=new a["a"](1,1,1,1);function I(e,t){var i=document.createElement("canvas");i.width=A.x,i.height=A.y;var a=i.getContext("2d");a.fillStyle="#fff",a.fillRect(0,0,i.width,i.height),e.addImage(E,i).then((function(e){t._whitePixelIndex=e}))}var j={};function D(e,t,i,a,r,o,s){return j.font=t,j.fillColor=i,j.strokeColor=a,j.strokeWidth=r,j.padding=m["a"].PADDING,s===v["a"].CENTER?j.textBaseline="middle":s===v["a"].TOP?j.textBaseline="top":j.textBaseline="bottom",j.fill=o===b["a"].FILL||o===b["a"].FILL_AND_OUTLINE,j.stroke=o===b["a"].OUTLINE||o===b["a"].FILL_AND_OUTLINE,j.backgroundColor=n["a"].BLACK,Object(h["a"])(e,j)}function L(e,t){t.textureInfo=void 0,t.dimensions=void 0;var i=t.billboard;Object(s["a"])(i)&&(i.show=!1,i.image=void 0,Object(s["a"])(i._removeCallbackFunc)&&(i._removeCallbackFunc(),i._removeCallbackFunc=void 0),e._spareBillboards.push(i),t.billboard=void 0)}function P(e,t,i,a){e.addImage(t,i).then((function(e){a.index=e}))}var S=new O["a"];function R(e,t){var i,a,o,l=t._renderedText,c=S.splitGraphemes(l),h=c.length,u=t._glyphs,f=u.length;if(t._relativeSize=t._fontSize/m["a"].FONT_SIZE,h<f)for(a=h;a<f;++a)L(e,u[a]);u.length=h;var _=t._showBackground&&l.split("\n").join("").length>0,p=t._backgroundBillboard,y=e._backgroundBillboardCollection;_?(Object(s["a"])(p)||(p=y.add({collection:e,image:E,imageSubRegion:w}),t._backgroundBillboard=p),p.color=t._backgroundColor,p.show=t._show,p.position=t._position,p.eyeOffset=t._eyeOffset,p.pixelOffset=t._pixelOffset,p.horizontalOrigin=g["a"].LEFT,p.verticalOrigin=t._verticalOrigin,p.heightReference=t._heightReference,p.scale=t.totalScale,p.pickPrimitive=t,p.id=t._id,p.translucencyByDistance=t._translucencyByDistance,p.pixelOffsetScaleByDistance=t._pixelOffsetScaleByDistance,p.scaleByDistance=t._scaleByDistance,p.distanceDisplayCondition=t._distanceDisplayCondition,p.disableDepthTestDistance=t._disableDepthTestDistance):Object(s["a"])(p)&&(y.remove(p),t._backgroundBillboard=p=void 0);var v=e._glyphTextureCache;for(o=0;o<h;++o){var O=c[o],C=t._verticalOrigin,A=JSON.stringify([O,t._fontFamily,t._fontStyle,t._fontWeight,+C]),I=v[A];if(!Object(s["a"])(I)){var j=t._fontStyle+" "+t._fontWeight+" "+m["a"].FONT_SIZE+"px "+t._fontFamily,R=D(O,j,n["a"].WHITE,n["a"].WHITE,0,b["a"].FILL,C);if(I=new x(e,-1,R.dimensions),v[A]=I,R.width>0&&R.height>0){for(var F=Object(d["a"])(R,{cutoff:m["a"].CUTOFF,radius:m["a"].RADIUS}),N=R.getContext("2d"),B=R.width,M=R.height,U=N.getImageData(0,0,B,M),k=0;k<B;k++)for(var G=0;G<M;G++){var W=G*B+k,H=255*F[W],z=4*W;U.data[z+0]=H,U.data[z+1]=H,U.data[z+2]=H,U.data[z+3]=H}N.putImageData(U,0,0)," "!==O&&P(e._textureAtlas,A,R,I)}}if(i=u[o],Object(s["a"])(i)?-1===I.index?L(e,i):Object(s["a"])(i.textureInfo)&&(i.textureInfo=void 0):(i=new T,u[o]=i),i.textureInfo=I,i.dimensions=I.dimensions,-1!==I.index){var q=i.billboard,V=e._spareBillboards;Object(s["a"])(q)||(V.length>0?q=V.pop():(q=e._billboardCollection.add({collection:e}),q._labelDimensions=new r["a"],q._labelTranslate=new r["a"]),i.billboard=q),q.show=t._show,q.position=t._position,q.eyeOffset=t._eyeOffset,q.pixelOffset=t._pixelOffset,q.horizontalOrigin=g["a"].LEFT,q.verticalOrigin=t._verticalOrigin,q.heightReference=t._heightReference,q.scale=t.totalScale,q.pickPrimitive=t,q.id=t._id,q.image=A,q.translucencyByDistance=t._translucencyByDistance,q.pixelOffsetScaleByDistance=t._pixelOffsetScaleByDistance,q.scaleByDistance=t._scaleByDistance,q.distanceDisplayCondition=t._distanceDisplayCondition,q.disableDepthTestDistance=t._disableDepthTestDistance,q._batchIndex=t._batchIndex,q.outlineColor=t.outlineColor,t.style===b["a"].FILL_AND_OUTLINE?(q.color=t._fillColor,q.outlineWidth=t.outlineWidth):t.style===b["a"].FILL?(q.color=t._fillColor,q.outlineWidth=0):t.style===b["a"].OUTLINE&&(q.color=n["a"].TRANSPARENT,q.outlineWidth=t.outlineWidth)}}t._repositionAllGlyphs=!0}function F(e,t,i){return t===g["a"].CENTER?-e/2:t===g["a"].RIGHT?-(e+i.x):i.x}var N=new r["a"],B=new r["a"];function M(e){var t,i,a,n=e._glyphs,o=e._renderedText,l=0,c=0,h=[],d=Number.NEGATIVE_INFINITY,u=0,f=1,p=n.length,b=e._backgroundBillboard,y=r["a"].clone(Object(s["a"])(b)?e._backgroundPadding:r["a"].ZERO,B);for(y.x/=e._relativeSize,y.y/=e._relativeSize,a=0;a<p;++a)"\n"===o.charAt(a)?(h.push(l),++f,l=0):(t=n[a],i=t.dimensions,u=Math.max(u,i.height-i.descent),d=Math.max(d,i.descent),l+=i.width-i.bounds.minx,a<p-1&&(l+=n[a+1].dimensions.bounds.minx),c=Math.max(c,l));h.push(l);var O=u+d,T=e.totalScale,x=e._horizontalOrigin,E=e._verticalOrigin,A=0,w=h[A],I=F(w,x,y),j=(Object(s["a"])(e._lineHeight)?e._lineHeight:C*e._fontSize)/e._relativeSize,D=j*(f-1),L=c,P=O+D;Object(s["a"])(b)&&(L+=2*y.x,P+=2*y.y,b._labelHorizontalOrigin=x),N.x=I*T,N.y=0;var S=!0,R=0;for(a=0;a<p;++a)if("\n"===o.charAt(a))++A,R+=j,w=h[A],I=F(w,x,y),N.x=I*T,S=!0;else if(t=n[a],i=t.dimensions,E===v["a"].TOP?(N.y=i.height-u-y.y,N.y+=m["a"].PADDING):E===v["a"].CENTER?N.y=(D+i.height-u)/2:E===v["a"].BASELINE?(N.y=D,N.y-=m["a"].PADDING):(N.y=D+d+y.y,N.y-=m["a"].PADDING),N.y=(N.y-i.descent-R)*T,S&&(N.x-=m["a"].PADDING*T,S=!1),Object(s["a"])(t.billboard)&&(t.billboard._setTranslate(N),t.billboard._labelDimensions.x=L,t.billboard._labelDimensions.y=P,t.billboard._labelHorizontalOrigin=x),a<p-1){var M=n[a+1];N.x+=(i.width-i.bounds.minx+M.dimensions.bounds.minx)*T}if(Object(s["a"])(b)&&o.split("\n").join("").length>0&&(I=x===g["a"].CENTER?-c/2-y.x:x===g["a"].RIGHT?-(c+2*y.x):0,N.x=I*T,E===v["a"].TOP?N.y=O-u-d:E===v["a"].CENTER?N.y=(O-u)/2-d:E===v["a"].BASELINE?N.y=-y.y-d:N.y=0,N.y=N.y*T,b.width=L,b.height=P,b._setTranslate(N),b._labelTranslate=r["a"].clone(N,b._labelTranslate)),e.heightReference===_["a"].CLAMP_TO_GROUND)for(a=0;a<p;++a){t=n[a];var U=t.billboard;Object(s["a"])(U)&&(U._labelTranslate=r["a"].clone(N,U._labelTranslate))}}function U(e,t){for(var i=t._glyphs,a=0,r=i.length;a<r;++a)L(e,i[a]);Object(s["a"])(t._backgroundBillboard)&&(e._backgroundBillboardCollection.remove(t._backgroundBillboard),t._backgroundBillboard=void 0),t._labelCollection=void 0,Object(s["a"])(t._removeCallbackFunc)&&t._removeCallbackFunc(),Object(l["a"])(t)}function k(e){e=Object(o["a"])(e,o["a"].EMPTY_OBJECT),this._scene=e.scene,this._batchTable=e.batchTable,this._textureAtlas=void 0,this._backgroundTextureAtlas=void 0,this._whitePixelIndex=void 0,this._backgroundBillboardCollection=new u["a"]({scene:this._scene}),this._backgroundBillboardCollection.destroyTextureAtlas=!1,this._billboardCollection=new u["a"]({scene:this._scene,batchTable:this._batchTable}),this._billboardCollection.destroyTextureAtlas=!1,this._billboardCollection._sdf=!0,this._spareBillboards=[],this._glyphTextureCache={},this._labels=[],this._labelsToUpdate=[],this._totalGlyphCount=0,this._highlightColor=n["a"].clone(n["a"].WHITE),this.show=Object(o["a"])(e.show,!0),this.modelMatrix=c["a"].clone(Object(o["a"])(e.modelMatrix,c["a"].IDENTITY)),this.debugShowBoundingVolume=Object(o["a"])(e.debugShowBoundingVolume,!1),this.blendOption=Object(o["a"])(e.blendOption,f["a"].OPAQUE_AND_TRANSLUCENT)}Object.defineProperties(k.prototype,{length:{get:function(){return this._labels.length}}}),k.prototype.add=function(e){var t=new p["a"](e,this);return this._labels.push(t),this._labelsToUpdate.push(t),t},k.prototype.remove=function(e){if(Object(s["a"])(e)&&e._labelCollection===this){var t=this._labels.indexOf(e);if(-1!==t)return this._labels.splice(t,1),U(this,e),!0}return!1},k.prototype.removeAll=function(){for(var e=this._labels,t=0,i=e.length;t<i;++t)U(this,e[t]);e.length=0},k.prototype.contains=function(e){return Object(s["a"])(e)&&e._labelCollection===this},k.prototype.get=function(e){return this._labels[e]},k.prototype.update=function(e){if(this.show){var t=this._billboardCollection,i=this._backgroundBillboardCollection;t.modelMatrix=this.modelMatrix,t.debugShowBoundingVolume=this.debugShowBoundingVolume,i.modelMatrix=this.modelMatrix,i.debugShowBoundingVolume=this.debugShowBoundingVolume;var a=e.context;Object(s["a"])(this._textureAtlas)||(this._textureAtlas=new y["a"]({context:a}),t.textureAtlas=this._textureAtlas),Object(s["a"])(this._backgroundTextureAtlas)||(this._backgroundTextureAtlas=new y["a"]({context:a,initialSize:A}),i.textureAtlas=this._backgroundTextureAtlas,I(this._backgroundTextureAtlas,this));for(var r=this._labelsToUpdate.length,n=0;n<r;++n){var o=this._labelsToUpdate[n];if(!o.isDestroyed()){var l=o._glyphs.length;o._rebindAllGlyphs&&(R(this,o),o._rebindAllGlyphs=!1),o._repositionAllGlyphs&&(M(o),o._repositionAllGlyphs=!1);var c=o._glyphs.length-l;this._totalGlyphCount+=c}}var h=i.length>0?f["a"].TRANSLUCENT:this.blendOption;t.blendOption=h,i.blendOption=h,t._highlightColor=this._highlightColor,i._highlightColor=this._highlightColor,this._labelsToUpdate.length=0,i.update(e),t.update(e)}},k.prototype.isDestroyed=function(){return!1},k.prototype.destroy=function(){return this.removeAll(),this._billboardCollection=this._billboardCollection.destroy(),this._textureAtlas=this._textureAtlas&&this._textureAtlas.destroy(),this._backgroundBillboardCollection=this._backgroundBillboardCollection.destroy(),this._backgroundTextureAtlas=this._backgroundTextureAtlas&&this._backgroundTextureAtlas.destroy(),Object(l["a"])(this)},t["a"]=k},"21ab":function(e,t,i){"use strict";var a=i("2f63"),r=i("7d62"),n=i("dddf");function o(e,t,i,r,o){if(this.imageryLayer=e,this.x=t,this.y=i,this.level=r,this.request=void 0,0!==r){var s=t/2|0,l=i/2|0,c=r-1;this.parent=e.getImageryFromCache(s,l,c)}if(this.state=n["a"].UNLOADED,this.imageUrl=void 0,this.image=void 0,this.texture=void 0,this.textureWebMercator=void 0,this.credits=void 0,this.referenceCount=0,!Object(a["a"])(o)&&e.imageryProvider.ready){var h=e.imageryProvider.tilingScheme;o=h.tileXYToRectangle(t,i,r)}this.rectangle=o}o.createPlaceholder=function(e){var t=new o(e,0,0,0);return t.addReference(),t.state=n["a"].PLACEHOLDER,t},o.prototype.addReference=function(){++this.referenceCount},o.prototype.releaseReference=function(){return--this.referenceCount,0===this.referenceCount?(this.imageryLayer.removeImageryFromCache(this),Object(a["a"])(this.parent)&&this.parent.releaseReference(),Object(a["a"])(this.image)&&Object(a["a"])(this.image.destroy)&&this.image.destroy(),Object(a["a"])(this.texture)&&this.texture.destroy(),Object(a["a"])(this.textureWebMercator)&&this.texture!==this.textureWebMercator&&this.textureWebMercator.destroy(),Object(r["a"])(this),0):this.referenceCount},o.prototype.processStateMachine=function(e,t,i){this.state!==n["a"].UNLOADED||i||(this.state=n["a"].TRANSITIONING,this.imageryLayer._requestImagery(this)),this.state===n["a"].RECEIVED&&(this.state=n["a"].TRANSITIONING,this.imageryLayer._createTexture(e.context,this));var a=this.state===n["a"].READY&&t&&!this.texture;(this.state===n["a"].TEXTURE_LOADED||a)&&(this.state=n["a"].TRANSITIONING,this.imageryLayer._reprojectTexture(e,this,t))},t["a"]=o},"3e5e":function(e,t,i){"use strict";var a=i("2f63");function r(){this.name=void 0,this.description=void 0,this.position=void 0,this.data=void 0,this.imageryLayer=void 0}r.prototype.configureNameFromProperties=function(e){var t,i=10;for(var r in e)if(e.hasOwnProperty(r)&&e[r]){var n=r.toLowerCase();i>1&&"name"===n?(i=1,t=r):i>2&&"title"===n?(i=2,t=r):i>3&&/name/i.test(r)?(i=3,t=r):i>4&&/title/i.test(r)&&(i=4,t=r)}Object(a["a"])(t)&&(this.name=e[t])},r.prototype.configureDescriptionFromProperties=function(e){function t(e){var i='<table class="cesium-infoBox-defaultTable">';for(var r in e)if(e.hasOwnProperty(r)){var n=e[r];Object(a["a"])(n)&&(i+="object"===typeof n?"<tr><td>"+r+"</td><td>"+t(n)+"</td></tr>":"<tr><td>"+r+"</td><td>"+n+"</td></tr>")}return i+="</table>",i}this.description=t(e)},t["a"]=r},4436:function(e,t,i){"use strict";var a=i("2f63"),r=i("ddf7"),n=i("568a");function o(e){this._total=e,this.usedThisFrame=0,this.stolenFromMeThisFrame=0,this.starvedThisFrame=!1,this.starvedLastFrame=!1}function s(e){var t=new Array(n["a"].NUMBER_OF_JOB_TYPES);t[n["a"].TEXTURE]=new o(Object(a["a"])(e)?e[n["a"].TEXTURE]:10),t[n["a"].PROGRAM]=new o(Object(a["a"])(e)?e[n["a"].PROGRAM]:10),t[n["a"].BUFFER]=new o(Object(a["a"])(e)?e[n["a"].BUFFER]:30);var i,r=t.length,s=0;for(i=0;i<r;++i)s+=t[i].total;var l=new Array(r);for(i=0;i<r;++i)l[i]=!1;this._totalBudget=s,this._totalUsedThisFrame=0,this._budgets=t,this._executedThisFrame=l}Object.defineProperties(o.prototype,{total:{get:function(){return this._total}}}),s.getTimestamp=r["a"],Object.defineProperties(s.prototype,{totalBudget:{get:function(){return this._totalBudget}}}),s.prototype.disableThisFrame=function(){this._totalUsedThisFrame=this._totalBudget},s.prototype.resetBudgets=function(){for(var e=this._budgets,t=e.length,i=0;i<t;++i){var a=e[i];a.starvedLastFrame=a.starvedThisFrame,a.starvedThisFrame=!1,a.usedThisFrame=0,a.stolenFromMeThisFrame=0}this._totalUsedThisFrame=0},s.prototype.execute=function(e,t){var i,a=this._budgets,r=a[t],n=this._executedThisFrame[t];if(this._totalUsedThisFrame>=this._totalBudget&&n)return r.starvedThisFrame=!0,!1;if(r.usedThisFrame+r.stolenFromMeThisFrame>=r.total){var o,l=a.length;for(o=0;o<l;++o)if(i=a[o],i.usedThisFrame+i.stolenFromMeThisFrame<i.total&&!i.starvedLastFrame)break;if(o===l&&n)return!1;n&&(r.starvedThisFrame=!0)}var c=s.getTimestamp();e.execute();var h=s.getTimestamp()-c;return this._totalUsedThisFrame+=h,i?i.stolenFromMeThisFrame+=h:r.usedThisFrame+=h,this._executedThisFrame[t]=!0,!0},t["a"]=s},4626:function(e,t,i){"use strict";var a={FILL:0,OUTLINE:1,FILL_AND_OUTLINE:2};t["a"]=Object.freeze(a)},"490e":function(e,t,i){"use strict";var a=i("c8d1"),r=i("be18"),n=i("bd8d"),o=i("abab"),s=i("535a"),l=i("2f63"),c=i("45c5"),h=i("7d62"),d=i("c52f"),u=i("e856"),f=i("129b"),_=i("df07"),g=i("52f0"),p=i("0260"),b=i("b82e"),m=i("283e"),y=i("f806"),v=i("3372"),O=i("d289"),T=i("b08e"),x=i("6596"),C=i("5af0"),E=i("9889"),A=i("1e38"),w=i("8a9e");function I(e,t,i,a,r){this._tileset=e,this._tile=t,this._resource=i,this._modelInstanceCollection=void 0,this._batchTable=void 0,this._features=void 0,this.featurePropertiesDirty=!1,S(this,a,r)}function j(e){return function(){return e._batchTable.getPickId()}}I._deprecationWarning=c["a"],Object.defineProperties(I.prototype,{featuresLength:{get:function(){return this._batchTable.featuresLength}},pointsLength:{get:function(){return 0}},trianglesLength:{get:function(){var e=this._modelInstanceCollection._model;return Object(l["a"])(e)?e.trianglesLength:0}},geometryByteLength:{get:function(){var e=this._modelInstanceCollection._model;return Object(l["a"])(e)?e.geometryByteLength:0}},texturesByteLength:{get:function(){var e=this._modelInstanceCollection._model;return Object(l["a"])(e)?e.texturesByteLength:0}},batchTableByteLength:{get:function(){return this._batchTable.memorySizeInBytes}},innerContents:{get:function(){}},readyPromise:{get:function(){return this._modelInstanceCollection.readyPromise}},tileset:{get:function(){return this._tileset}},tile:{get:function(){return this._tile}},url:{get:function(){return this._resource.getUrlComponent(!0)}},batchTable:{get:function(){return this._batchTable}}});var D=Uint32Array.BYTES_PER_ELEMENT,L=new Array(4),P=new Array(4);function S(e,t,i){var n=Object(s["a"])(i,0);i=n;var c=new Uint8Array(t),h=new DataView(t);i+=D;var C=h.getUint32(i,!0);if(1!==C)throw new m["a"]("Only Instanced 3D Model version 1 is supported. Version "+C+" is not.");i+=D;var S=h.getUint32(i,!0);i+=D;var R=h.getUint32(i,!0);if(0===R)throw new m["a"]("featureTableJsonByteLength is zero, the feature table must be defined.");i+=D;var F=h.getUint32(i,!0);i+=D;var N=h.getUint32(i,!0);i+=D;var B=h.getUint32(i,!0);i+=D;var M=h.getUint32(i,!0);if(1!==M&&0!==M)throw new m["a"]("Only glTF format 0 (uri) or 1 (embedded) are supported. Format "+M+" is not.");i+=D;var U=Object(u["a"])(c,i,R);i+=R;var k=new Uint8Array(t,i,F);i+=F;var G,W,H=new E["a"](U,k),z=H.getGlobalProperty("INSTANCES_LENGTH");if(H.featuresLength=z,!Object(l["a"])(z))throw new m["a"]("Feature table global property: INSTANCES_LENGTH must be defined");N>0&&(G=Object(u["a"])(c,i,N),i+=N,B>0&&(W=new Uint8Array(t,i,B),W=new Uint8Array(W),i+=B)),e._batchTable=new x["a"](e,z,G,W);var q,V=n+S-i;if(0===V)throw new m["a"]("glTF byte length is zero, i3dm must have a glTF to instance.");i%4===0?q=new Uint8Array(t,i,V):(I._deprecationWarning("i3dm-glb-unaligned","The embedded glb is not aligned to a 4-byte boundary."),q=new Uint8Array(c.subarray(i,i+V)));var Y=e._tileset,K={instances:new Array(z),batchTable:e._batchTable,cull:!1,url:void 0,requestType:b["a"].TILES3D,gltf:void 0,basePath:void 0,incrementallyLoadTextures:!1,upAxis:Y._gltfUpAxis,forwardAxis:T["a"].X,opaquePass:O["a"].CESIUM_3D_TILE,pickIdLoaded:j(e),imageBasedLightingFactor:Y.imageBasedLightingFactor,lightColor:Y.lightColor,luminanceAtZenith:Y.luminanceAtZenith,sphericalHarmonicCoefficients:Y.sphericalHarmonicCoefficients,specularEnvironmentMaps:Y.specularEnvironmentMaps,backFaceCulling:Y.backFaceCulling};if(0===M){var X=Object(f["a"])(q);X=X.replace(/[\s\0]+$/,""),K.url=e._resource.getDerivedResource({url:X})}else K.gltf=q,K.basePath=e._resource.clone();var Z,J=H.getGlobalProperty("EAST_NORTH_UP"),Q=H.getGlobalProperty("RTC_CENTER",o["a"].FLOAT,3);Object(l["a"])(Q)&&(Z=r["a"].unpack(Q));for(var $=K.instances,ee=new r["a"],te=new Array(3),ie=new r["a"],ae=new r["a"],re=new r["a"],ne=new _["a"],oe=new p["a"],se=new r["a"],le=new v["a"],ce=new g["a"],he=0;he<z;he++){var de=H.getProperty("POSITION",o["a"].FLOAT,3,he,L);if(!Object(l["a"])(de)){de=te;var ue=H.getProperty("POSITION_QUANTIZED",o["a"].UNSIGNED_SHORT,3,he,L);if(!Object(l["a"])(ue))throw new m["a"]("Either POSITION or POSITION_QUANTIZED must be defined for each instance.");var fe=H.getGlobalProperty("QUANTIZED_VOLUME_OFFSET",o["a"].FLOAT,3);if(!Object(l["a"])(fe))throw new m["a"]("Global property: QUANTIZED_VOLUME_OFFSET must be defined for quantized positions.");var _e=H.getGlobalProperty("QUANTIZED_VOLUME_SCALE",o["a"].FLOAT,3);if(!Object(l["a"])(_e))throw new m["a"]("Global property: QUANTIZED_VOLUME_SCALE must be defined for quantized positions.");for(var ge=0;ge<3;ge++)de[ge]=ue[ge]/65535*_e[ge]+fe[ge]}r["a"].unpack(de,0,ee),Object(l["a"])(Z)&&r["a"].add(ee,Z,ee),le.translation=ee;var pe=H.getProperty("NORMAL_UP",o["a"].FLOAT,3,he,L),be=H.getProperty("NORMAL_RIGHT",o["a"].FLOAT,3,he,P),me=!1;if(Object(l["a"])(pe)){if(!Object(l["a"])(be))throw new m["a"]("To define a custom orientation, both NORMAL_UP and NORMAL_RIGHT must be defined.");r["a"].unpack(pe,0,ae),r["a"].unpack(be,0,ie),me=!0}else{var ye=H.getProperty("NORMAL_UP_OCT32P",o["a"].UNSIGNED_SHORT,2,he,L),ve=H.getProperty("NORMAL_RIGHT_OCT32P",o["a"].UNSIGNED_SHORT,2,he,P);if(Object(l["a"])(ye)){if(!Object(l["a"])(ve))throw new m["a"]("To define a custom orientation with oct-encoded vectors, both NORMAL_UP_OCT32P and NORMAL_RIGHT_OCT32P must be defined.");a["a"].octDecodeInRange(ye[0],ye[1],65535,ae),a["a"].octDecodeInRange(ve[0],ve[1],65535,ie),me=!0}else J?(y["a"].eastNorthUpToFixedFrame(ee,d["a"].WGS84,ce),g["a"].getMatrix3(ce,ne)):_["a"].clone(_["a"].IDENTITY,ne)}me&&(r["a"].cross(ie,ae,re),r["a"].normalize(re,re),_["a"].setColumn(ne,0,ie,ne),_["a"].setColumn(ne,1,ae,ne),_["a"].setColumn(ne,2,re,ne)),p["a"].fromRotationMatrix(ne,oe),le.rotation=oe,se=r["a"].fromElements(1,1,1,se);var Oe=H.getProperty("SCALE",o["a"].FLOAT,1,he);Object(l["a"])(Oe)&&r["a"].multiplyByScalar(se,Oe,se);var Te=H.getProperty("SCALE_NON_UNIFORM",o["a"].FLOAT,3,he,L);Object(l["a"])(Te)&&(se.x*=Te[0],se.y*=Te[1],se.z*=Te[2]),le.scale=se;var xe=H.getProperty("BATCH_ID",o["a"].UNSIGNED_SHORT,1,he);Object(l["a"])(xe)||(xe=he),g["a"].fromTranslationRotationScale(le,ce);var Ce=ce.clone();$[he]={modelMatrix:Ce,batchId:xe}}e._modelInstanceCollection=new A["a"](K),e._modelInstanceCollection.readyPromise.then((function(e){e.activeAnimations.addAll({loop:w["a"].REPEAT})}))}function R(e){var t=e.featuresLength;if(!Object(l["a"])(e._features)&&t>0){for(var i=new Array(t),a=0;a<t;++a)i[a]=new C["a"](e,a);e._features=i}}I.prototype.hasProperty=function(e,t){return this._batchTable.hasProperty(e,t)},I.prototype.getFeature=function(e){this.featuresLength;return R(this),this._features[e]},I.prototype.applyDebugSettings=function(e,t){t=e?t:n["a"].WHITE,this._batchTable.setAllColor(t)},I.prototype.applyStyle=function(e){this._batchTable.applyStyle(e)},I.prototype.update=function(e,t){var i=t.commandList.length;this._batchTable.update(e,t),this._modelInstanceCollection.modelMatrix=this._tile.computedTransform,this._modelInstanceCollection.shadows=this._tileset.shadows,this._modelInstanceCollection.lightColor=this._tileset.lightColor,this._modelInstanceCollection.luminanceAtZenith=this._tileset.luminanceAtZenith,this._modelInstanceCollection.sphericalHarmonicCoefficients=this._tileset.sphericalHarmonicCoefficients,this._modelInstanceCollection.specularEnvironmentMaps=this._tileset.specularEnvironmentMaps,this._modelInstanceCollection.backFaceCulling=this._tileset.backFaceCulling,this._modelInstanceCollection.debugWireframe=this._tileset.debugWireframe;var a=this._modelInstanceCollection._model;if(Object(l["a"])(a)){var r=this._tileset.clippingPlanes;a.referenceMatrix=this._tileset.clippingPlanesOriginMatrix,Object(l["a"])(r)&&this._tile.clippingPlanesDirty&&(a._clippingPlanes=r.enabled&&this._tile._isClipped?r:void 0),Object(l["a"])(r)&&Object(l["a"])(a._clippingPlanes)&&a._clippingPlanes!==r&&(a._clippingPlanes=r)}this._modelInstanceCollection.update(t);var n=t.commandList.length;i<n&&(t.passes.render||t.passes.pick)&&this._batchTable.addDerivedCommands(t,i,!1)},I.prototype.isDestroyed=function(){return!1},I.prototype.destroy=function(){return this._modelInstanceCollection=this._modelInstanceCollection&&this._modelInstanceCollection.destroy(),this._batchTable=this._batchTable&&this._batchTable.destroy(),Object(h["a"])(this)},t["a"]=I},"4ad5":function(e,t,i){"use strict";var a=i("535a"),r=i("2f63"),n=i("21d7"),o=i("b195"),s=i("283e"),l=i("a58e"),c=i("5856"),h=i("c078"),d=i("ed98"),u=i("324a"),f=i("ec56"),_=i("b85d"),g=i("e288"),p=i("dda8"),b=i("f915");function m(e){return function(t){return new e(t)}}var y={ARCGIS_MAPSERVER:m(c["a"]),BING:m(h["a"]),GOOGLE_EARTH:m(u["a"]),MAPBOX:m(f["a"]),SINGLE_TILE:m(_["a"]),TMS:m(d["a"]),URL_TEMPLATE:m(g["a"]),WMS:m(p["a"]),WMTS:m(b["a"])};function v(e){e=Object(a["a"])(e,a["a"].EMPTY_OBJECT);var t=e.assetId;this.defaultAlpha=void 0,this.defaultNightAlpha=void 0,this.defaultDayAlpha=void 0,this.defaultBrightness=void 0,this.defaultContrast=void 0,this.defaultHue=void 0,this.defaultSaturation=void 0,this.defaultGamma=void 0,this.defaultMinificationFilter=void 0,this.defaultMagnificationFilter=void 0,this._ready=!1,this._tileCredits=void 0,this._errorEvent=new n["a"];var i=this,c=o["a"]._createEndpointResource(t,e),h=e.assetId.toString()+e.accessToken+e.server,u=v._endpointCache[h];Object(r["a"])(u)||(u=c.fetchJson(),v._endpointCache[h]=u),this._readyPromise=u.then((function(e){if("IMAGERY"!==e.type)return l["a"].reject(new s["a"]("Cesium ion asset "+t+" is not an imagery asset."));var a,n=e.externalType;if(Object(r["a"])(n)){var h=y[n];if(!Object(r["a"])(h))return l["a"].reject(new s["a"]("Unrecognized Cesium ion imagery type: "+n));a=h(e.options)}else a=new d["a"]({url:new o["a"](e,c)});return i._tileCredits=o["a"].getCreditsFromEndpoint(e,c),a.errorEvent.addEventListener((function(e){e.provider=i,i._errorEvent.raiseEvent(e)})),i._imageryProvider=a,a.readyPromise.then((function(){return i._ready=!0,!0}))}))}Object.defineProperties(v.prototype,{ready:{get:function(){return this._ready}},readyPromise:{get:function(){return this._readyPromise}},rectangle:{get:function(){return this._imageryProvider.rectangle}},tileWidth:{get:function(){return this._imageryProvider.tileWidth}},tileHeight:{get:function(){return this._imageryProvider.tileHeight}},maximumLevel:{get:function(){return this._imageryProvider.maximumLevel}},minimumLevel:{get:function(){return this._imageryProvider.minimumLevel}},tilingScheme:{get:function(){return this._imageryProvider.tilingScheme}},tileDiscardPolicy:{get:function(){return this._imageryProvider.tileDiscardPolicy}},errorEvent:{get:function(){return this._errorEvent}},credit:{get:function(){return this._imageryProvider.credit}},hasAlphaChannel:{get:function(){return this._imageryProvider.hasAlphaChannel},proxy:{get:function(){}}}}),v.prototype.getTileCredits=function(e,t,i){var a=this._imageryProvider.getTileCredits(e,t,i);return Object(r["a"])(a)?this._tileCredits.concat(a):this._tileCredits},v.prototype.requestImage=function(e,t,i,a){return this._imageryProvider.requestImage(e,t,i,a)},v.prototype.pickFeatures=function(e,t,i,a,r){return this._imageryProvider.pickFeatures(e,t,i,a,r)},v._endpointCache={},t["a"]=v},"506f":function(e,t,i){"use strict";var a=i("535a"),r=i("2f63"),n=i("7d62"),o=i("21d7"),s=i("93da"),l=i("eace"),c=i("a58e"),h=i("ad4a");function d(){this._layers=[],this.layerAdded=new o["a"],this.layerRemoved=new o["a"],this.layerMoved=new o["a"],this.layerShownOrHidden=new o["a"]}function u(e,t){var i=e.indexOf(t);return i}function f(e,t,i){var a=e._layers;if(t=s["a"].clamp(t,0,a.length-1),i=s["a"].clamp(i,0,a.length-1),t!==i){var r=a[t];a[t]=a[i],a[i]=r,e._update(),e.layerMoved.raiseEvent(r,i,t)}}Object.defineProperties(d.prototype,{length:{get:function(){return this._layers.length}}}),d.prototype.add=function(e,t){var i=Object(r["a"])(t);i?this._layers.splice(t,0,e):(t=this._layers.length,this._layers.push(e)),this._update(),this.layerAdded.raiseEvent(e,t)},d.prototype.addImageryProvider=function(e,t){var i=new h["a"](e);return this.add(i,t),i},d.prototype.remove=function(e,t){t=Object(a["a"])(t,!0);var i=this._layers.indexOf(e);return-1!==i&&(this._layers.splice(i,1),this._update(),this.layerRemoved.raiseEvent(e,i),t&&e.destroy(),!0)},d.prototype.removeAll=function(e){e=Object(a["a"])(e,!0);for(var t=this._layers,i=0,r=t.length;i<r;i++){var n=t[i];this.layerRemoved.raiseEvent(n,i),e&&n.destroy()}this._layers=[]},d.prototype.contains=function(e){return-1!==this.indexOf(e)},d.prototype.indexOf=function(e){return this._layers.indexOf(e)},d.prototype.get=function(e){return this._layers[e]},d.prototype.raise=function(e){var t=u(this._layers,e);f(this,t,t+1)},d.prototype.lower=function(e){var t=u(this._layers,e);f(this,t,t-1)},d.prototype.raiseToTop=function(e){var t=u(this._layers,e);t!==this._layers.length-1&&(this._layers.splice(t,1),this._layers.push(e),this._update(),this.layerMoved.raiseEvent(e,this._layers.length-1,t))},d.prototype.lowerToBottom=function(e){var t=u(this._layers,e);0!==t&&(this._layers.splice(t,1),this._layers.splice(0,0,e),this._update(),this.layerMoved.raiseEvent(e,0,t))};var _=new l["a"];d.prototype.pickImageryLayerFeatures=function(e,t){var i=t.globe.pick(e,t);if(Object(r["a"])(i)){for(var a,n=t.globe.ellipsoid.cartesianToCartographic(i),o=t.globe._surface._tilesToRender,h=0;!Object(r["a"])(a)&&h<o.length;++h){var d=o[h];l["a"].contains(d.rectangle,n)&&(a=d)}if(Object(r["a"])(a)){for(var u=a.data.imagery,f=[],g=[],p=u.length-1;p>=0;--p){var b=u[p],m=b.readyImagery;if(Object(r["a"])(m)){var y=m.imageryLayer.imageryProvider;if(Object(r["a"])(y.pickFeatures)&&l["a"].contains(m.rectangle,n)){var v=_,O=1/1024;if(v.west=s["a"].lerp(a.rectangle.west,a.rectangle.east,b.textureCoordinateRectangle.x-O),v.east=s["a"].lerp(a.rectangle.west,a.rectangle.east,b.textureCoordinateRectangle.z+O),v.south=s["a"].lerp(a.rectangle.south,a.rectangle.north,b.textureCoordinateRectangle.y-O),v.north=s["a"].lerp(a.rectangle.south,a.rectangle.north,b.textureCoordinateRectangle.w+O),l["a"].contains(v,n)){var T=y.pickFeatures(m.x,m.y,m.level,n.longitude,n.latitude);Object(r["a"])(T)&&(f.push(T),g.push(m.imageryLayer))}}}}if(0!==f.length)return c["a"].all(f,(function(e){for(var t=[],i=0;i<e.length;++i){var a=e[i],o=g[i];if(Object(r["a"])(a)&&a.length>0)for(var s=0;s<a.length;++s){var l=a[s];l.imageryLayer=o,Object(r["a"])(l.position)||(l.position=n),t.push(l)}}return t}))}}},d.prototype.queueReprojectionCommands=function(e){for(var t=this._layers,i=0,a=t.length;i<a;++i)t[i].queueReprojectionCommands(e)},d.prototype.cancelReprojections=function(){for(var e=this._layers,t=0,i=e.length;t<i;++t)e[t].cancelReprojections()},d.prototype.isDestroyed=function(){return!1},d.prototype.destroy=function(){return this.removeAll(!0),Object(n["a"])(this)},d.prototype._update=function(){var e,t,i,a,n=!0,o=this._layers;for(i=0,a=o.length;i<a;++i)t=o[i],t._layerIndex=i,t.show?(t._isBaseLayer=n,n=!1):t._isBaseLayer=!1,t.show!==t._show&&(Object(r["a"])(t._show)&&(Object(r["a"])(e)||(e=[]),e.push(t)),t._show=t.show);if(Object(r["a"])(e))for(i=0,a=e.length;i<a;++i)t=e[i],this.layerShownOrHidden.raiseEvent(t,t._layerIndex,t.show)},t["a"]=d},"568a":function(e,t,i){"use strict";var a={TEXTURE:0,PROGRAM:1,BUFFER:2,NUMBER_OF_JOB_TYPES:3};t["a"]=Object.freeze(a)},"64ac":function(e,t,i){"use strict";var a=i("2f63"),r=i("4f04"),n=i("0711"),o=i("c67a"),s=i("d4ed");function l(){this.defaultAlpha=void 0,this.defaultNightAlpha=void 0,this.defaultDayAlpha=void 0,this.defaultBrightness=void 0,this.defaultContrast=void 0,this.defaultHue=void 0,this.defaultSaturation=void 0,this.defaultGamma=void 0,this.defaultMinificationFilter=void 0,this.defaultMagnificationFilter=void 0,r["a"].throwInstantiationError()}Object.defineProperties(l.prototype,{ready:{get:r["a"].throwInstantiationError},readyPromise:{get:r["a"].throwInstantiationError},rectangle:{get:r["a"].throwInstantiationError},tileWidth:{get:r["a"].throwInstantiationError},tileHeight:{get:r["a"].throwInstantiationError},maximumLevel:{get:r["a"].throwInstantiationError},minimumLevel:{get:r["a"].throwInstantiationError},tilingScheme:{get:r["a"].throwInstantiationError},tileDiscardPolicy:{get:r["a"].throwInstantiationError},errorEvent:{get:r["a"].throwInstantiationError},credit:{get:r["a"].throwInstantiationError},proxy:{get:r["a"].throwInstantiationError},hasAlphaChannel:{get:r["a"].throwInstantiationError}}),l.prototype.getTileCredits=function(e,t,i){r["a"].throwInstantiationError()},l.prototype.requestImage=function(e,t,i,a){r["a"].throwInstantiationError()},l.prototype.pickFeatures=function(e,t,i,a,n){r["a"].throwInstantiationError()};var c=/\.ktx$/i,h=/\.crn$/i;l.loadImage=function(e,t){var i=s["a"].createIfNeeded(t);return c.test(i.url)?Object(o["a"])(i):h.test(i.url)?Object(n["a"])(i):Object(a["a"])(e)&&Object(a["a"])(e.tileDiscardPolicy)?i.fetchImage({preferBlob:!0,preferImageBitmap:!0,flipY:!0}):i.fetchImage({preferImageBitmap:!0,flipY:!0})},t["a"]=l},ad4a:function(e,t,i){"use strict";var a=i("670c"),r=i("a561"),n=i("535a"),o=i("2f63"),s=i("7d62"),l=i("5e57"),c=i("3d7f"),h=i("0123"),d=i("93da"),u=i("e42d"),f=i("eace"),_=i("de66"),g=i("8a39"),p=i("b82e"),b=i("1ee6"),m=i("a89b"),y=i("1184"),v=i("f20a"),O=i("8b68"),T=i("5b54"),x=i("b997"),C=i("b0e6"),E=i("6c84"),A=i("e90c"),w=i("5770"),I=i("a913"),j=i("3022"),D=i("03f1"),L=i("23b6"),P=i("7c5e"),S=i("7027"),R=i("c730"),F=i("a58e"),N=i("21ab"),B=i("ef93"),M=i("dddf"),U=i("663d");function k(e,t){this._imageryProvider=e,t=Object(n["a"])(t,n["a"].EMPTY_OBJECT),this.alpha=Object(n["a"])(t.alpha,Object(n["a"])(e.defaultAlpha,1)),this.nightAlpha=Object(n["a"])(t.nightAlpha,Object(n["a"])(e.defaultNightAlpha,1)),this.dayAlpha=Object(n["a"])(t.dayAlpha,Object(n["a"])(e.defaultDayAlpha,1)),this.brightness=Object(n["a"])(t.brightness,Object(n["a"])(e.defaultBrightness,k.DEFAULT_BRIGHTNESS)),this.contrast=Object(n["a"])(t.contrast,Object(n["a"])(e.defaultContrast,k.DEFAULT_CONTRAST)),this.hue=Object(n["a"])(t.hue,Object(n["a"])(e.defaultHue,k.DEFAULT_HUE)),this.saturation=Object(n["a"])(t.saturation,Object(n["a"])(e.defaultSaturation,k.DEFAULT_SATURATION)),this.gamma=Object(n["a"])(t.gamma,Object(n["a"])(e.defaultGamma,k.DEFAULT_GAMMA)),this.splitDirection=Object(n["a"])(t.splitDirection,Object(n["a"])(e.defaultSplit,k.DEFAULT_SPLIT)),this.minificationFilter=Object(n["a"])(t.minificationFilter,Object(n["a"])(e.defaultMinificationFilter,k.DEFAULT_MINIFICATION_FILTER)),this.magnificationFilter=Object(n["a"])(t.magnificationFilter,Object(n["a"])(e.defaultMagnificationFilter,k.DEFAULT_MAGNIFICATION_FILTER)),this.show=Object(n["a"])(t.show,!0),this._minimumTerrainLevel=t.minimumTerrainLevel,this._maximumTerrainLevel=t.maximumTerrainLevel,this._rectangle=Object(n["a"])(t.rectangle,f["a"].MAX_VALUE),this._maximumAnisotropy=t.maximumAnisotropy,this._imageryCache={},this._skeletonPlaceholder=new U["a"](N["a"].createPlaceholder(this)),this._show=!0,this._layerIndex=-1,this._isBaseLayer=!1,this._requestImageError=void 0,this._reprojectComputeCommands=[],this.cutoutRectangle=t.cutoutRectangle,this.colorToAlpha=t.colorToAlpha,this.colorToAlphaThreshold=Object(n["a"])(t.colorToAlphaThreshold,k.DEFAULT_APPLY_COLOR_TO_ALPHA_THRESHOLD)}Object.defineProperties(k.prototype,{imageryProvider:{get:function(){return this._imageryProvider}},rectangle:{get:function(){return this._rectangle}}}),k.DEFAULT_BRIGHTNESS=1,k.DEFAULT_CONTRAST=1,k.DEFAULT_HUE=0,k.DEFAULT_SATURATION=1,k.DEFAULT_GAMMA=1,k.DEFAULT_SPLIT=B["a"].NONE,k.DEFAULT_MINIFICATION_FILTER=D["a"].LINEAR,k.DEFAULT_MAGNIFICATION_FILTER=j["a"].LINEAR,k.DEFAULT_APPLY_COLOR_TO_ALPHA_THRESHOLD=.004,k.prototype.isBaseLayer=function(){return this._isBaseLayer},k.prototype.isDestroyed=function(){return!1},k.prototype.destroy=function(){return Object(s["a"])(this)};var G=new f["a"],W=new f["a"],H=new f["a"],z=new f["a"];function q(e,t,i){return e+":"+t+":"+i}function V(e,t,i){return JSON.stringify([e,t,i])}k.prototype.getViewableRectangle=function(){var e=this._imageryProvider,t=this._rectangle;return e.readyPromise.then((function(){return f["a"].intersection(e.rectangle,t)}))},k.prototype._createTileImagerySkeletons=function(e,t,i){var a=e.data;if(Object(o["a"])(this._minimumTerrainLevel)&&e.level<this._minimumTerrainLevel)return!1;if(Object(o["a"])(this._maximumTerrainLevel)&&e.level>this._maximumTerrainLevel)return!1;var n=this._imageryProvider;if(Object(o["a"])(i)||(i=a.imagery.length),!n.ready)return this._skeletonPlaceholder.loadingImagery.addReference(),a.imagery.splice(i,0,this._skeletonPlaceholder),!0;var s=n.tilingScheme.projection instanceof y["a"]&&e.rectangle.north<y["a"].MaximumLatitude&&e.rectangle.south>-y["a"].MaximumLatitude,l=f["a"].intersection(n.rectangle,this._rectangle,G),c=f["a"].intersection(e.rectangle,l,W);if(!Object(o["a"])(c)){if(!this.isBaseLayer())return!1;var h=l,d=e.rectangle;c=W,d.south>=h.north?c.north=c.south=h.north:d.north<=h.south?c.north=c.south=h.south:(c.south=Math.max(d.south,h.south),c.north=Math.min(d.north,h.north)),d.west>=h.east?c.west=c.east=h.east:d.east<=h.west?c.west=c.east=h.west:(c.west=Math.max(d.west,h.west),c.east=Math.min(d.east,h.east))}var u=0;c.south>0?u=c.south:c.north<0&&(u=c.north);var _=1,g=_*t.getLevelMaximumGeometricError(e.level),p=Z(this,g,u);p=Math.max(0,p);var b=n.maximumLevel;if(p>b&&(p=b),Object(o["a"])(n.minimumLevel)){var m=n.minimumLevel;p<m&&(p=m)}var v=n.tilingScheme,O=v.positionToTileXY(f["a"].northwest(c),p),T=v.positionToTileXY(f["a"].southeast(c),p),x=e.rectangle.width/512,C=e.rectangle.height/512,E=v.tileXYToRectangle(O.x,O.y,p);Math.abs(E.south-e.rectangle.north)<C&&O.y<T.y&&++O.y,Math.abs(E.east-e.rectangle.west)<x&&O.x<T.x&&++O.x;var A=v.tileXYToRectangle(T.x,T.y,p);Math.abs(A.north-e.rectangle.south)<C&&T.y>O.y&&--T.y,Math.abs(A.west-e.rectangle.east)<x&&T.x>O.x&&--T.x;var w,I,j=f["a"].clone(e.rectangle,z),D=v.tileXYToRectangle(O.x,O.y,p),L=f["a"].intersection(D,l,H);s?(v.rectangleToNativeRectangle(j,j),v.rectangleToNativeRectangle(D,D),v.rectangleToNativeRectangle(L,L),v.rectangleToNativeRectangle(l,l),w=v.tileXYToNativeRectangle.bind(v),x=j.width/512,C=j.height/512):w=v.tileXYToRectangle.bind(v);var P,S=0,R=1;!this.isBaseLayer()&&Math.abs(L.west-j.west)>=x&&(S=Math.min(1,(L.west-j.west)/j.width)),!this.isBaseLayer()&&Math.abs(L.north-j.north)>=C&&(R=Math.max(0,(L.north-j.south)/j.height));for(var F=R,N=O.x;N<=T.x;N++)if(I=S,D=w(N,O.y,p),L=f["a"].simpleIntersection(D,l,H),Object(o["a"])(L)){S=Math.min(1,(L.east-j.west)/j.width),N===T.x&&(this.isBaseLayer()||Math.abs(L.east-j.east)<x)&&(S=1),R=F;for(var B=O.y;B<=T.y;B++)if(P=R,D=w(N,B,p),L=f["a"].simpleIntersection(D,l,H),Object(o["a"])(L)){R=Math.max(0,(L.south-j.south)/j.height),B===T.y&&(this.isBaseLayer()||Math.abs(L.south-j.south)<C)&&(R=0);var M=new r["a"](I,R,S,P),k=this.getImageryFromCache(N,B,p);a.imagery.splice(i,0,new U["a"](k,M,s)),++i}}return!0},k.prototype._calculateTextureTranslationAndScale=function(e,t){var i=t.readyImagery.rectangle,a=e.rectangle;if(t.useWebMercatorT){var n=t.readyImagery.imageryLayer.imageryProvider.tilingScheme;i=n.rectangleToNativeRectangle(i,G),a=n.rectangleToNativeRectangle(a,z)}var o=a.width,s=a.height,l=o/i.width,c=s/i.height;return new r["a"](l*(a.west-i.west)/o,c*(a.south-i.south)/s,l,c)},k.prototype._requestImagery=function(e){var t=this._imageryProvider,i=this;function a(t){if(!Object(o["a"])(t))return r();e.image=t,e.state=M["a"].RECEIVED,e.request=void 0,m["a"].handleSuccess(i._requestImageError)}function r(a){if(e.request.state===g["a"].CANCELLED)return e.state=M["a"].UNLOADED,void(e.request=void 0);e.state=M["a"].FAILED,e.request=void 0;var r="Failed to obtain image tile X: "+e.x+" Y: "+e.y+" Level: "+e.level+".";i._requestImageError=m["a"].handleError(i._requestImageError,t,t.errorEvent,r,e.x,e.y,e.level,n,a)}function n(){var i=new _["a"]({throttle:!1,throttleByServer:!0,type:p["a"].IMAGERY});e.request=i,e.state=M["a"].TRANSITIONING;var n=t.requestImage(e.x,e.y,e.level,i);if(!Object(o["a"])(n))return e.state=M["a"].UNLOADED,void(e.request=void 0);Object(o["a"])(t.getTileCredits)&&(e.credits=t.getTileCredits(e.x,e.y,e.level)),Object(F["a"])(n,a,r)}n()},k.prototype._createTextureWebGL=function(e,t){var i=new E["a"]({minificationFilter:this.minificationFilter,magnificationFilter:this.magnificationFilter}),a=t.image;return Object(o["a"])(a.internalFormat)?new I["a"]({context:e,pixelFormat:a.internalFormat,width:a.width,height:a.height,source:{arrayBufferView:a.bufferView},sampler:i}):new I["a"]({context:e,source:a,pixelFormat:this._imageryProvider.hasAlphaChannel?u["a"].RGBA:u["a"].RGB,sampler:i})},k.prototype._createTexture=function(e,t){var i=this._imageryProvider,a=t.image;if(Object(o["a"])(i.tileDiscardPolicy)){var r=i.tileDiscardPolicy;if(Object(o["a"])(r)){if(!r.isReady())return void(t.state=M["a"].RECEIVED);if(r.shouldDiscardImage(a))return void(t.state=M["a"].INVALID)}}var n=this._createTextureWebGL(e,t);i.tilingScheme.projection instanceof y["a"]?t.textureWebMercator=n:t.texture=n,t.image=void 0,t.state=M["a"].TEXTURE_LOADED},k.prototype._finalizeReprojectTexture=function(e,t){var i=this.minificationFilter,a=this.magnificationFilter,r=i===D["a"].LINEAR&&a===j["a"].LINEAR;if(r&&!u["a"].isCompressedFormat(t.pixelFormat)&&d["a"].isPowerOfTwo(t.width)&&d["a"].isPowerOfTwo(t.height)){i=D["a"].LINEAR_MIPMAP_LINEAR;var s=x["a"].maximumTextureFilterAnisotropy,l=Math.min(s,Object(n["a"])(this._maximumAnisotropy,s)),c=q(i,a,l),h=e.cache.imageryLayerMipmapSamplers;Object(o["a"])(h)||(h={},e.cache.imageryLayerMipmapSamplers=h);var f=h[c];Object(o["a"])(f)||(f=h[c]=new E["a"]({wrapS:L["a"].CLAMP_TO_EDGE,wrapT:L["a"].CLAMP_TO_EDGE,minificationFilter:i,magnificationFilter:a,maximumAnisotropy:l})),t.generateMipmap(C["a"].NICEST),t.sampler=f}else{var _=q(i,a,0),g=e.cache.imageryLayerNonMipmapSamplers;Object(o["a"])(g)||(g={},e.cache.imageryLayerNonMipmapSamplers=g);var p=g[_];Object(o["a"])(p)||(p=g[_]=new E["a"]({wrapS:L["a"].CLAMP_TO_EDGE,wrapT:L["a"].CLAMP_TO_EDGE,minificationFilter:i,magnificationFilter:a})),t.sampler=p}},k.prototype._reprojectTexture=function(e,t,i){var a=t.textureWebMercator||t.texture,r=t.rectangle,o=e.context;if(i=Object(n["a"])(i,!0),i&&!(this._imageryProvider.tilingScheme.projection instanceof c["a"])&&r.width/a.width>1e-5){var s=this;t.addReference();var l=new T["a"]({persists:!0,owner:this,preExecute:function(e){X(e,o,a,t.rectangle)},postExecute:function(e){t.texture=e,s._finalizeReprojectTexture(o,e),t.state=M["a"].READY,t.releaseReference()},canceled:function(){t.state=M["a"].TEXTURE_LOADED,t.releaseReference()}});this._reprojectComputeCommands.push(l)}else i&&(t.texture=a),this._finalizeReprojectTexture(o,a),t.state=M["a"].READY},k.prototype.queueReprojectionCommands=function(e){for(var t=this._reprojectComputeCommands,i=t.length,a=0;a<i;++a)e.commandList.push(t[a]);t.length=0},k.prototype.cancelReprojections=function(){this._reprojectComputeCommands.forEach((function(e){Object(o["a"])(e.canceled)&&e.canceled()})),this._reprojectComputeCommands.length=0},k.prototype.getImageryFromCache=function(e,t,i,a){var r=V(e,t,i),n=this._imageryCache[r];return Object(o["a"])(n)||(n=new N["a"](this,e,t,i,a),this._imageryCache[r]=n),n.addReference(),n},k.prototype.removeImageryFromCache=function(e){var t=V(e.x,e.y,e.level);delete this._imageryCache[t]};var Y={u_textureDimensions:function(){return this.textureDimensions},u_texture:function(){return this.texture},textureDimensions:new a["a"],texture:void 0},K=l["a"].supportsTypedArrays()?new Float32Array(128):void 0;function X(e,t,i,a){var r=t.cache.imageryLayer_reproject;if(!Object(o["a"])(r)){r=t.cache.imageryLayer_reproject={vertexArray:void 0,shaderProgram:void 0,sampler:void 0,destroy:function(){Object(o["a"])(this.framebuffer)&&this.framebuffer.destroy(),Object(o["a"])(this.vertexArray)&&this.vertexArray.destroy(),Object(o["a"])(this.shaderProgram)&&this.shaderProgram.destroy()}};for(var n=new Float32Array(256),s=0,l=0;l<64;++l){var c=l/63;n[s++]=0,n[s++]=c,n[s++]=1,n[s++]=c}var u={position:0,webMercatorT:1},f=b["a"].getRegularGridIndices(2,64),_=v["a"].createIndexBuffer({context:t,typedArray:f,usage:O["a"].STATIC_DRAW,indexDatatype:h["a"].UNSIGNED_SHORT});r.vertexArray=new P["a"]({context:t,attributes:[{index:u.position,vertexBuffer:v["a"].createVertexBuffer({context:t,typedArray:n,usage:O["a"].STATIC_DRAW}),componentsPerAttribute:2},{index:u.webMercatorT,vertexBuffer:v["a"].createVertexBuffer({context:t,sizeInBytes:512,usage:O["a"].STREAM_DRAW}),componentsPerAttribute:1}],indexBuffer:_});var g=new w["a"]({sources:[R["a"]]});r.shaderProgram=A["a"].fromCache({context:t,vertexShaderSource:g,fragmentShaderSource:S["a"],attributeLocations:u}),r.sampler=new E["a"]({wrapS:L["a"].CLAMP_TO_EDGE,wrapT:L["a"].CLAMP_TO_EDGE,minificationFilter:D["a"].LINEAR,magnificationFilter:j["a"].LINEAR})}i.sampler=r.sampler;var p=i.width,m=i.height;Y.textureDimensions.x=p,Y.textureDimensions.y=m,Y.texture=i;var y=Math.sin(a.south),T=.5*Math.log((1+y)/(1-y));y=Math.sin(a.north);var x=.5*Math.log((1+y)/(1-y)),F=1/(x-T),N=new I["a"]({context:t,width:p,height:m,pixelFormat:i.pixelFormat,pixelDatatype:i.pixelDatatype,preMultiplyAlpha:i.preMultiplyAlpha});d["a"].isPowerOfTwo(p)&&d["a"].isPowerOfTwo(m)&&N.generateMipmap(C["a"].NICEST);for(var B=a.south,M=a.north,U=K,k=0,G=0;G<64;++G){var W=G/63,H=d["a"].lerp(B,M,W);y=Math.sin(H);var z=.5*Math.log((1+y)/(1-y)),q=(z-T)*F;U[k++]=q,U[k++]=q}r.vertexArray.getAttribute(1).vertexBuffer.copyFromArrayView(U),e.shaderProgram=r.shaderProgram,e.outputTexture=N,e.uniformMap=Y,e.vertexArray=r.vertexArray}function Z(e,t,i){var a=e._imageryProvider,r=a.tilingScheme,n=r.ellipsoid,o=e._imageryProvider.tilingScheme.projection instanceof c["a"]?1:Math.cos(i),s=r.rectangle,l=n.maximumRadius*s.width*o/(a.tileWidth*r.getNumberOfXTilesAtLevel(0)),h=l/t,d=Math.log(h)/Math.log(2),u=Math.round(d);return 0|u}t["a"]=k},af1e:function(e,t,i){"use strict";var a={AERIAL:2,AERIAL_WITH_LABELS:3,ROAD:4};t["a"]=Object.freeze(a)},c26f:function(e,t,i){"use strict";var a=i("77af"),r=i("670c"),n=i("be18"),o=i("bd8d"),s=i("535a"),l=i("2f63"),c=i("aee6"),h=i("6dfc"),d=i("3e44"),u=i("2d75"),f=i("f61d"),_=i("4626"),g=i("d9a9"),p=i("05e5"),b={},m=0,y=256,v=new o["a"](.165,.165,.165,.8),O=new r["a"](7,5),T=Object.freeze({LTR:0,RTL:1,WEAK:2,BRACKETS:3});function x(e){e._rebindAllGlyphs||e._repositionAllGlyphs||e._labelCollection._labelsToUpdate.push(e),e._rebindAllGlyphs=!0}function C(e){e._rebindAllGlyphs||e._repositionAllGlyphs||e._labelCollection._labelsToUpdate.push(e),e._repositionAllGlyphs=!0}function E(e,t){return document.defaultView.getComputedStyle(e,null).getPropertyValue(t)}function A(e){var t=b[e._font];if(!Object(l["a"])(t)){var i=document.createElement("div");i.style.position="absolute",i.style.opacity=0,i.style.font=e._font,document.body.appendChild(i);var a=parseFloat(E(i,"line-height"));isNaN(a)&&(a=void 0),t={family:E(i,"font-family"),size:E(i,"font-size").replace("px",""),style:E(i,"font-style"),weight:E(i,"font-weight"),lineHeight:a},document.body.removeChild(i),m<y&&(b[e._font]=t,m++)}e._fontFamily=t.family,e._fontSize=t.size,e._fontStyle=t.style,e._fontWeight=t.weight,e._lineHeight=t.lineHeight}function w(e,t){e=Object(s["a"])(e,s["a"].EMPTY_OBJECT);var i=e.translucencyByDistance,a=e.pixelOffsetScaleByDistance,d=e.scaleByDistance,g=e.distanceDisplayCondition;Object(l["a"])(i)&&(i=h["a"].clone(i)),Object(l["a"])(a)&&(a=h["a"].clone(a)),Object(l["a"])(d)&&(d=h["a"].clone(d)),Object(l["a"])(g)&&(g=c["a"].clone(g)),this._renderedText=void 0,this._text=void 0,this._show=Object(s["a"])(e.show,!0),this._font=Object(s["a"])(e.font,"30px sans-serif"),this._fillColor=o["a"].clone(Object(s["a"])(e.fillColor,o["a"].WHITE)),this._outlineColor=o["a"].clone(Object(s["a"])(e.outlineColor,o["a"].BLACK)),this._outlineWidth=Object(s["a"])(e.outlineWidth,1),this._showBackground=Object(s["a"])(e.showBackground,!1),this._backgroundColor=o["a"].clone(Object(s["a"])(e.backgroundColor,v)),this._backgroundPadding=r["a"].clone(Object(s["a"])(e.backgroundPadding,O)),this._style=Object(s["a"])(e.style,_["a"].FILL),this._verticalOrigin=Object(s["a"])(e.verticalOrigin,p["a"].BASELINE),this._horizontalOrigin=Object(s["a"])(e.horizontalOrigin,f["a"].LEFT),this._pixelOffset=r["a"].clone(Object(s["a"])(e.pixelOffset,r["a"].ZERO)),this._eyeOffset=n["a"].clone(Object(s["a"])(e.eyeOffset,n["a"].ZERO)),this._position=n["a"].clone(Object(s["a"])(e.position,n["a"].ZERO)),this._scale=Object(s["a"])(e.scale,1),this._id=e.id,this._translucencyByDistance=i,this._pixelOffsetScaleByDistance=a,this._scaleByDistance=d,this._heightReference=Object(s["a"])(e.heightReference,u["a"].NONE),this._distanceDisplayCondition=g,this._disableDepthTestDistance=e.disableDepthTestDistance,this._labelCollection=t,this._glyphs=[],this._backgroundBillboard=void 0,this._batchIndex=void 0,this._rebindAllGlyphs=!0,this._repositionAllGlyphs=!0,this._actualClampedPosition=void 0,this._removeCallbackFunc=void 0,this._mode=void 0,this._clusterShow=!0,this.text=Object(s["a"])(e.text,""),this._relativeSize=1,A(this),this._updateClamping()}function I(e,t){for(var i=/[a-zA-Z0-9]/,a=/[()[\]{}<>]/,r=[],n="",o=T.LTR,s="",l=e.length,c=0;c<l;++c){var h=e.charAt(c);s=t.test(h)?T.RTL:i.test(h)?T.LTR:a.test(h)?T.BRACKETS:T.WEAK,0===c&&(o=s),o===s&&s!==T.BRACKETS?n+=h:(""!==n&&r.push({Type:o,Word:n}),o=s,n=h)}return r.push({Type:s,Word:n}),r}function j(e){return e.split("").reverse().join("")}function D(e,t,i){return e.slice(0,t)+i+e.slice(t)}function L(e){switch(e){case"(":return")";case")":return"(";case"[":return"]";case"]":return"[";case"{":return"}";case"}":return"{";case"<":return">";case">":return"<"}}Object.defineProperties(w.prototype,{show:{get:function(){return this._show},set:function(e){if(this._show!==e){this._show=e;for(var t=this._glyphs,i=0,a=t.length;i<a;i++){var r=t[i].billboard;Object(l["a"])(r)&&(r.show=e)}var n=this._backgroundBillboard;Object(l["a"])(n)&&(n.show=e)}}},position:{get:function(){return this._position},set:function(e){var t=this._position;if(!n["a"].equals(t,e)){n["a"].clone(e,t);for(var i=this._glyphs,a=0,r=i.length;a<r;a++){var o=i[a].billboard;Object(l["a"])(o)&&(o.position=e)}var s=this._backgroundBillboard;Object(l["a"])(s)&&(s.position=e),this._updateClamping()}}},heightReference:{get:function(){return this._heightReference},set:function(e){if(e!==this._heightReference){this._heightReference=e;for(var t=this._glyphs,i=0,a=t.length;i<a;i++){var r=t[i].billboard;Object(l["a"])(r)&&(r.heightReference=e)}var n=this._backgroundBillboard;Object(l["a"])(n)&&(n.heightReference=e),C(this),this._updateClamping()}}},text:{get:function(){return this._text},set:function(e){this._text!==e&&(this._text=e,this._renderedText=w.enableRightToLeftDetection?F(e):e,x(this))}},font:{get:function(){return this._font},set:function(e){this._font!==e&&(this._font=e,x(this),A(this))}},fillColor:{get:function(){return this._fillColor},set:function(e){var t=this._fillColor;o["a"].equals(t,e)||(o["a"].clone(e,t),x(this))}},outlineColor:{get:function(){return this._outlineColor},set:function(e){var t=this._outlineColor;o["a"].equals(t,e)||(o["a"].clone(e,t),x(this))}},outlineWidth:{get:function(){return this._outlineWidth},set:function(e){this._outlineWidth!==e&&(this._outlineWidth=e,x(this))}},showBackground:{get:function(){return this._showBackground},set:function(e){this._showBackground!==e&&(this._showBackground=e,x(this))}},backgroundColor:{get:function(){return this._backgroundColor},set:function(e){var t=this._backgroundColor;if(!o["a"].equals(t,e)){o["a"].clone(e,t);var i=this._backgroundBillboard;Object(l["a"])(i)&&(i.color=t)}}},backgroundPadding:{get:function(){return this._backgroundPadding},set:function(e){var t=this._backgroundPadding;r["a"].equals(t,e)||(r["a"].clone(e,t),C(this))}},style:{get:function(){return this._style},set:function(e){this._style!==e&&(this._style=e,x(this))}},pixelOffset:{get:function(){return this._pixelOffset},set:function(e){var t=this._pixelOffset;if(!r["a"].equals(t,e)){r["a"].clone(e,t);for(var i=this._glyphs,a=0,n=i.length;a<n;a++){var o=i[a];Object(l["a"])(o.billboard)&&(o.billboard.pixelOffset=e)}var s=this._backgroundBillboard;Object(l["a"])(s)&&(s.pixelOffset=e)}}},translucencyByDistance:{get:function(){return this._translucencyByDistance},set:function(e){var t=this._translucencyByDistance;if(!h["a"].equals(t,e)){this._translucencyByDistance=h["a"].clone(e,t);for(var i=this._glyphs,a=0,r=i.length;a<r;a++){var n=i[a];Object(l["a"])(n.billboard)&&(n.billboard.translucencyByDistance=e)}var o=this._backgroundBillboard;Object(l["a"])(o)&&(o.translucencyByDistance=e)}}},pixelOffsetScaleByDistance:{get:function(){return this._pixelOffsetScaleByDistance},set:function(e){var t=this._pixelOffsetScaleByDistance;if(!h["a"].equals(t,e)){this._pixelOffsetScaleByDistance=h["a"].clone(e,t);for(var i=this._glyphs,a=0,r=i.length;a<r;a++){var n=i[a];Object(l["a"])(n.billboard)&&(n.billboard.pixelOffsetScaleByDistance=e)}var o=this._backgroundBillboard;Object(l["a"])(o)&&(o.pixelOffsetScaleByDistance=e)}}},scaleByDistance:{get:function(){return this._scaleByDistance},set:function(e){var t=this._scaleByDistance;if(!h["a"].equals(t,e)){this._scaleByDistance=h["a"].clone(e,t);for(var i=this._glyphs,a=0,r=i.length;a<r;a++){var n=i[a];Object(l["a"])(n.billboard)&&(n.billboard.scaleByDistance=e)}var o=this._backgroundBillboard;Object(l["a"])(o)&&(o.scaleByDistance=e)}}},eyeOffset:{get:function(){return this._eyeOffset},set:function(e){var t=this._eyeOffset;if(!n["a"].equals(t,e)){n["a"].clone(e,t);for(var i=this._glyphs,a=0,r=i.length;a<r;a++){var o=i[a];Object(l["a"])(o.billboard)&&(o.billboard.eyeOffset=e)}var s=this._backgroundBillboard;Object(l["a"])(s)&&(s.eyeOffset=e)}}},horizontalOrigin:{get:function(){return this._horizontalOrigin},set:function(e){this._horizontalOrigin!==e&&(this._horizontalOrigin=e,C(this))}},verticalOrigin:{get:function(){return this._verticalOrigin},set:function(e){if(this._verticalOrigin!==e){this._verticalOrigin=e;for(var t=this._glyphs,i=0,a=t.length;i<a;i++){var r=t[i];Object(l["a"])(r.billboard)&&(r.billboard.verticalOrigin=e)}var n=this._backgroundBillboard;Object(l["a"])(n)&&(n.verticalOrigin=e),C(this)}}},scale:{get:function(){return this._scale},set:function(e){if(this._scale!==e){this._scale=e;for(var t=this._glyphs,i=0,a=t.length;i<a;i++){var r=t[i];Object(l["a"])(r.billboard)&&(r.billboard.scale=e*this._relativeSize)}var n=this._backgroundBillboard;Object(l["a"])(n)&&(n.scale=e*this._relativeSize),C(this)}}},totalScale:{get:function(){return this._scale*this._relativeSize}},distanceDisplayCondition:{get:function(){return this._distanceDisplayCondition},set:function(e){if(!c["a"].equals(e,this._distanceDisplayCondition)){this._distanceDisplayCondition=c["a"].clone(e,this._distanceDisplayCondition);for(var t=this._glyphs,i=0,a=t.length;i<a;i++){var r=t[i];Object(l["a"])(r.billboard)&&(r.billboard.distanceDisplayCondition=e)}var n=this._backgroundBillboard;Object(l["a"])(n)&&(n.distanceDisplayCondition=e)}}},disableDepthTestDistance:{get:function(){return this._disableDepthTestDistance},set:function(e){if(this._disableDepthTestDistance!==e){this._disableDepthTestDistance=e;for(var t=this._glyphs,i=0,a=t.length;i<a;i++){var r=t[i];Object(l["a"])(r.billboard)&&(r.billboard.disableDepthTestDistance=e)}var n=this._backgroundBillboard;Object(l["a"])(n)&&(n.disableDepthTestDistance=e)}}},id:{get:function(){return this._id},set:function(e){if(this._id!==e){this._id=e;for(var t=this._glyphs,i=0,a=t.length;i<a;i++){var r=t[i];Object(l["a"])(r.billboard)&&(r.billboard.id=e)}var n=this._backgroundBillboard;Object(l["a"])(n)&&(n.id=e)}}},pickId:{get:function(){if(0!==this._glyphs.length&&Object(l["a"])(this._glyphs[0].billboard))return this._glyphs[0].billboard.pickId}},_clampedPosition:{get:function(){return this._actualClampedPosition},set:function(e){this._actualClampedPosition=n["a"].clone(e,this._actualClampedPosition);for(var t=this._glyphs,i=0,a=t.length;i<a;i++){var r=t[i];Object(l["a"])(r.billboard)&&(r.billboard._clampedPosition=e)}var o=this._backgroundBillboard;Object(l["a"])(o)&&(o._clampedPosition=e)}},clusterShow:{get:function(){return this._clusterShow},set:function(e){if(this._clusterShow!==e){this._clusterShow=e;for(var t=this._glyphs,i=0,a=t.length;i<a;i++){var r=t[i];Object(l["a"])(r.billboard)&&(r.billboard.clusterShow=e)}var n=this._backgroundBillboard;Object(l["a"])(n)&&(n.clusterShow=e)}}}}),w.prototype._updateClamping=function(){d["a"]._updateClamping(this._labelCollection,this)},w.prototype.computeScreenSpacePosition=function(e,t){Object(l["a"])(t)||(t=new r["a"]);var i=this._labelCollection,a=i.modelMatrix,n=Object(l["a"])(this._actualClampedPosition)?this._actualClampedPosition:this._position,o=d["a"]._computeScreenSpacePosition(a,n,this._eyeOffset,this._pixelOffset,e,t);return o},w.getScreenSpaceBoundingBox=function(e,t,i){var r=0,n=0,o=0,s=0,c=e.totalScale,h=e._backgroundBillboard;if(Object(l["a"])(h))r=t.x+h._translate.x,n=t.y-h._translate.y,o=h.width*c,s=h.height*c,e.verticalOrigin===p["a"].BOTTOM||e.verticalOrigin===p["a"].BASELINE?n-=s:e.verticalOrigin===p["a"].CENTER&&(n-=.5*s);else{r=Number.POSITIVE_INFINITY,n=Number.POSITIVE_INFINITY;for(var d=0,u=0,f=e._glyphs,_=f.length,b=0;b<_;++b){var m=f[b],y=m.billboard;if(Object(l["a"])(y)){var v=t.x+y._translate.x,O=t.y-y._translate.y,T=m.dimensions.width*c,x=m.dimensions.height*c;e.verticalOrigin===p["a"].BOTTOM||e.verticalOrigin===p["a"].BASELINE?O-=x:e.verticalOrigin===p["a"].CENTER&&(O-=.5*x),e._verticalOrigin===p["a"].TOP?O+=g["a"].PADDING*c:e._verticalOrigin!==p["a"].BOTTOM&&e._verticalOrigin!==p["a"].BASELINE||(O-=g["a"].PADDING*c),r=Math.min(r,v),n=Math.min(n,O),d=Math.max(d,v+T),u=Math.max(u,O+x)}}o=d-r,s=u-n}return Object(l["a"])(i)||(i=new a["a"]),i.x=r,i.y=n,i.width=o,i.height=s,i},w.prototype.equals=function(e){return this===e||Object(l["a"])(e)&&this._show===e._show&&this._scale===e._scale&&this._outlineWidth===e._outlineWidth&&this._showBackground===e._showBackground&&this._style===e._style&&this._verticalOrigin===e._verticalOrigin&&this._horizontalOrigin===e._horizontalOrigin&&this._heightReference===e._heightReference&&this._renderedText===e._renderedText&&this._font===e._font&&n["a"].equals(this._position,e._position)&&o["a"].equals(this._fillColor,e._fillColor)&&o["a"].equals(this._outlineColor,e._outlineColor)&&o["a"].equals(this._backgroundColor,e._backgroundColor)&&r["a"].equals(this._backgroundPadding,e._backgroundPadding)&&r["a"].equals(this._pixelOffset,e._pixelOffset)&&n["a"].equals(this._eyeOffset,e._eyeOffset)&&h["a"].equals(this._translucencyByDistance,e._translucencyByDistance)&&h["a"].equals(this._pixelOffsetScaleByDistance,e._pixelOffsetScaleByDistance)&&h["a"].equals(this._scaleByDistance,e._scaleByDistance)&&c["a"].equals(this._distanceDisplayCondition,e._distanceDisplayCondition)&&this._disableDepthTestDistance===e._disableDepthTestDistance&&this._id===e._id},w.prototype.isDestroyed=function(){return!1},w.enableRightToLeftDetection=!1;var P="א-ת",S="؀-ۿݐ-ݿࢠ-ࣿ",R=new RegExp("["+P+S+"]");function F(e){for(var t=e.split("\n"),i="",a=0;a<t.length;a++){for(var r=t[a],n=R.test(r.charAt(0)),o=I(r,R),s=0,l="",c=0;c<o.length;++c){var h=o[c],d=h.Type===T.BRACKETS?L(h.Word):j(h.Word);n?h.Type===T.RTL?(l=d+l,s=0):h.Type===T.LTR?(l=D(l,s,h.Word),s+=h.Word.length):h.Type!==T.WEAK&&h.Type!==T.BRACKETS||(h.Type===T.WEAK&&o[c-1].Type===T.BRACKETS?l=d+l:o[c-1].Type===T.RTL?(l=d+l,s=0):o.length>c+1?o[c+1].Type===T.RTL?(l=d+l,s=0):(l=D(l,s,h.Word),s+=h.Word.length):l=D(l,0,d)):h.Type===T.RTL?l=D(l,s,d):h.Type===T.LTR?(l+=h.Word,s=l.length):h.Type!==T.WEAK&&h.Type!==T.BRACKETS||(c>0&&o[c-1].Type===T.RTL?o.length>c+1?o[c+1].Type===T.RTL?l=D(l,s,d):(l+=h.Word,s=l.length):l+=h.Word:(l+=h.Word,s=l.length))}i+=l,a<t.length-1&&(i+="\n")}return i}t["a"]=w},d57b:function(e,t,i){"use strict";var a=i("bd8d"),r=i("2f63"),n=i("7d62"),o=i("e42d"),s=i("f845"),l=i("ac3b"),c=i("6ef5"),h=i("6dc0"),d=i("6c84"),u=i("5770"),f=i("a913"),_=i("3022"),g=i("03f1"),p=i("23b6"),b=i("3720"),m=i("b7c8"),y=i("3626"),v=i("6102"),O=i("25ef");function T(){this.previousFramebuffer=void 0,this._previousFramebuffer=void 0,this._texture=void 0,this._classifiedTexture=void 0,this._depthStencilTexture=void 0,this._fbo=void 0,this._fboClassified=void 0,this._rsUnclassified=void 0,this._rsClassified=void 0,this._unclassifiedCommand=void 0,this._classifiedCommand=void 0,this._translucentCommand=void 0,this._clearColorCommand=new s["a"]({color:new a["a"](0,0,0,0),owner:this}),this._clearCommand=new s["a"]({color:new a["a"](0,0,0,0),depth:1,stencil:0});var e=this;this._uniformMap={colorTexture:function(){return e._texture},depthTexture:function(){return e._depthStencilTexture},classifiedTexture:function(){return e._classifiedTexture}}}Object.defineProperties(T.prototype,{unclassifiedCommand:{get:function(){return this._unclassifiedCommand}}}),T.isTranslucencySupported=function(e){return e.depthTexture&&e.fragmentDepth};var x={depthMask:!1,stencilTest:{enabled:!0,frontFunction:v["a"].EQUAL,frontOperation:{fail:O["a"].KEEP,zFail:O["a"].KEEP,zPass:O["a"].KEEP},backFunction:v["a"].NEVER,reference:0,mask:y["a"].CLASSIFICATION_MASK},blending:m["a"].ALPHA_BLEND},C={depthMask:!1,stencilTest:{enabled:!0,frontFunction:v["a"].NOT_EQUAL,frontOperation:{fail:O["a"].KEEP,zFail:O["a"].KEEP,zPass:O["a"].KEEP},backFunction:v["a"].NEVER,reference:0,mask:y["a"].CLASSIFICATION_MASK},blending:m["a"].ALPHA_BLEND},E={depthMask:!0,depthTest:{enabled:!0},stencilTest:y["a"].setCesium3DTileBit(),stencilMask:y["a"].CESIUM_3D_TILE_MASK,blending:m["a"].ALPHA_BLEND},A="#extension GL_EXT_frag_depth : enable\nuniform sampler2D colorTexture;\nuniform sampler2D depthTexture;\nuniform sampler2D classifiedTexture;\nvarying vec2 v_textureCoordinates;\nvoid main()\n{\n    vec4 color = texture2D(colorTexture, v_textureCoordinates);\n    if (color.a == 0.0)\n    {\n        discard;\n    }\n    bool isClassified = all(equal(texture2D(classifiedTexture, v_textureCoordinates), vec4(0.0)));\n#ifdef UNCLASSIFIED\n    vec4 highlightColor = czm_invertClassificationColor;\n    if (isClassified)\n    {\n        discard;\n    }\n#else\n    vec4 highlightColor = vec4(1.0);\n    if (!isClassified)\n    {\n        discard;\n    }\n#endif\n    gl_FragColor = color * highlightColor;\n    gl_FragDepthEXT = texture2D(depthTexture, v_textureCoordinates).r;\n}\n",w="uniform sampler2D colorTexture;\nvarying vec2 v_textureCoordinates;\nvoid main()\n{\n    vec4 color = texture2D(colorTexture, v_textureCoordinates);\n    if (color.a == 0.0)\n    {\n        discard;\n    }\n#ifdef UNCLASSIFIED\n    gl_FragColor = color * czm_invertClassificationColor;\n#else\n    gl_FragColor = color;\n#endif\n}\n";T.prototype.update=function(e){var t=this._texture,i=!Object(r["a"])(t)||this.previousFramebuffer!==this._previousFramebuffer;this._previousFramebuffer=this.previousFramebuffer;var a,n,s=e.drawingBufferWidth,m=e.drawingBufferHeight,y=!Object(r["a"])(t)||t.width!==s||t.height!==m;((y||i)&&(this._texture=this._texture&&this._texture.destroy(),this._classifiedTexture=this._classifiedTexture&&this._classifiedTexture.destroy(),this._depthStencilTexture=this._depthStencilTexture&&this._depthStencilTexture.destroy(),this._texture=new f["a"]({context:e,width:s,height:m,pixelFormat:o["a"].RGBA,pixelDatatype:c["a"].UNSIGNED_BYTE,sampler:new d["a"]({wrapS:p["a"].CLAMP_TO_EDGE,wrapT:p["a"].CLAMP_TO_EDGE,minificationFilter:g["a"].LINEAR,magnificationFilter:_["a"].LINEAR})}),Object(r["a"])(this._previousFramebuffer)||(this._classifiedTexture=new f["a"]({context:e,width:s,height:m,pixelFormat:o["a"].RGBA,pixelDatatype:c["a"].UNSIGNED_BYTE,sampler:new d["a"]({wrapS:p["a"].CLAMP_TO_EDGE,wrapT:p["a"].CLAMP_TO_EDGE,minificationFilter:g["a"].LINEAR,magnificationFilter:_["a"].LINEAR})}),this._depthStencilTexture=new f["a"]({context:e,width:s,height:m,pixelFormat:o["a"].DEPTH_STENCIL,pixelDatatype:c["a"].UNSIGNED_INT_24_8}))),!Object(r["a"])(this._fbo)||y||i)&&(this._fbo=this._fbo&&this._fbo.destroy(),this._fboClassified=this._fboClassified&&this._fboClassified.destroy(),Object(r["a"])(this._previousFramebuffer)?(a=this._previousFramebuffer.depthStencilTexture,n=this._previousFramebuffer.depthStencilRenderbuffer):a=this._depthStencilTexture,this._fbo=new l["a"]({context:e,colorTextures:[this._texture],depthStencilTexture:a,depthStencilRenderbuffer:n,destroyAttachments:!1}),Object(r["a"])(this._previousFramebuffer)||(this._fboClassified=new l["a"]({context:e,colorTextures:[this._classifiedTexture],depthStencilTexture:a,destroyAttachments:!1})));if(Object(r["a"])(this._rsUnclassified)||(this._rsUnclassified=h["a"].fromCache(x),this._rsClassified=h["a"].fromCache(C),this._rsDefault=h["a"].fromCache(E)),!Object(r["a"])(this._unclassifiedCommand)||i){Object(r["a"])(this._unclassifiedCommand)&&(this._unclassifiedCommand.shaderProgram=this._unclassifiedCommand.shaderProgram&&this._unclassifiedCommand.shaderProgram.destroy(),this._classifiedCommand.shaderProgram=this._classifiedCommand.shaderProgram&&this._classifiedCommand.shaderProgram.destroy());var v=Object(r["a"])(this._previousFramebuffer)?w:A,O=new u["a"]({defines:["UNCLASSIFIED"],sources:[v]}),T=new u["a"]({sources:[v]});this._unclassifiedCommand=e.createViewportQuadCommand(O,{renderState:Object(r["a"])(this._previousFramebuffer)?this._rsUnclassified:this._rsDefault,uniformMap:this._uniformMap,owner:this}),this._classifiedCommand=e.createViewportQuadCommand(T,{renderState:Object(r["a"])(this._previousFramebuffer)?this._rsClassified:this._rsDefault,uniformMap:this._uniformMap,owner:this}),Object(r["a"])(this._translucentCommand)&&(this._translucentCommand.shaderProgram=this._translucentCommand.shaderProgram&&this._translucentCommand.shaderProgram.destroy()),Object(r["a"])(this._previousFramebuffer)||(this._translucentCommand=e.createViewportQuadCommand(b["a"],{renderState:this._rsUnclassified,uniformMap:this._uniformMap,owner:this}))}},T.prototype.clear=function(e,t){var i=t.framebuffer;Object(r["a"])(this._previousFramebuffer)?(t.framebuffer=this._fbo,this._clearColorCommand.execute(e,t)):(t.framebuffer=this._fbo,this._clearCommand.execute(e,t),t.framebuffer=this._fboClassified,this._clearCommand.execute(e,t)),t.framebuffer=i},T.prototype.executeClassified=function(e,t){if(!Object(r["a"])(this._previousFramebuffer)){var i=t.framebuffer;t.framebuffer=this._fboClassified,this._translucentCommand.execute(e,t),t.framebuffer=i}this._classifiedCommand.execute(e,t)},T.prototype.executeUnclassified=function(e,t){this._unclassifiedCommand.execute(e,t)},T.prototype.isDestroyed=function(){return!1},T.prototype.destroy=function(){return this._fbo=this._fbo&&this._fbo.destroy(),this._texture=this._texture&&this._texture.destroy(),this._depthStencilTexture=this._depthStencilTexture&&this._depthStencilTexture.destroy(),Object(r["a"])(this._unclassifiedCommand)&&(this._unclassifiedCommand.shaderProgram=this._unclassifiedCommand.shaderProgram&&this._unclassifiedCommand.shaderProgram.destroy(),this._classifiedCommand.shaderProgram=this._classifiedCommand.shaderProgram&&this._classifiedCommand.shaderProgram.destroy()),Object(n["a"])(this)},t["a"]=T},dddf:function(e,t,i){"use strict";var a={UNLOADED:0,TRANSITIONING:1,RECEIVED:2,TEXTURE_LOADED:3,READY:4,FAILED:5,INVALID:6,PLACEHOLDER:7};t["a"]=Object.freeze(a)},ef93:function(e,t,i){"use strict";var a={LEFT:-1,NONE:0,RIGHT:1};t["a"]=Object.freeze(a)}}]);