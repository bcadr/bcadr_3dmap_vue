(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Cesium~3a5a00ac"],{"1b48":function(e,t,i){"use strict";var n=i("2f63");function r(){this.selected=0,this.visited=0,this.numberOfCommands=0,this.numberOfAttemptedRequests=0,this.numberOfPendingRequests=0,this.numberOfTilesProcessing=0,this.numberOfTilesWithContentReady=0,this.numberOfTilesTotal=0,this.numberOfLoadedTilesTotal=0,this.numberOfFeaturesSelected=0,this.numberOfFeaturesLoaded=0,this.numberOfPointsSelected=0,this.numberOfPointsLoaded=0,this.numberOfTrianglesSelected=0,this.numberOfTilesStyled=0,this.numberOfFeaturesStyled=0,this.numberOfTilesCulledWithChildrenUnion=0,this.geometryByteLength=0,this.texturesByteLength=0,this.batchTableByteLength=0}function a(e,t,i,r){var s=t.innerContents,o=t.pointsLength,c=t.trianglesLength,l=t.featuresLength,u=t.geometryByteLength,m=t.texturesByteLength,h=t.batchTableByteLength;if(r?(e.numberOfFeaturesLoaded+=i?-l:l,e.numberOfPointsLoaded+=i?-o:o,e.geometryByteLength+=i?-u:u,e.texturesByteLength+=i?-m:m,e.batchTableByteLength+=i?-h:h):(e.numberOfFeaturesSelected+=i?-l:l,e.numberOfPointsSelected+=i?-o:o,e.numberOfTrianglesSelected+=i?-c:c),Object(n["a"])(s))for(var d=s.length,f=0;f<d;++f)a(e,s[f],i,r)}r.prototype.clear=function(){this.selected=0,this.visited=0,this.numberOfCommands=0,this.numberOfAttemptedRequests=0,this.numberOfFeaturesSelected=0,this.numberOfPointsSelected=0,this.numberOfTrianglesSelected=0,this.numberOfTilesStyled=0,this.numberOfFeaturesStyled=0,this.numberOfTilesCulledWithChildrenUnion=0},r.prototype.incrementSelectionCounts=function(e){a(this,e,!1,!1)},r.prototype.incrementLoadCounts=function(e){a(this,e,!1,!0)},r.prototype.decrementLoadCounts=function(e){a(this,e,!0,!0)},r.clone=function(e,t){t.selected=e.selected,t.visited=e.visited,t.numberOfCommands=e.numberOfCommands,t.selected=e.selected,t.numberOfAttemptedRequests=e.numberOfAttemptedRequests,t.numberOfPendingRequests=e.numberOfPendingRequests,t.numberOfTilesProcessing=e.numberOfTilesProcessing,t.numberOfTilesWithContentReady=e.numberOfTilesWithContentReady,t.numberOfTilesTotal=e.numberOfTilesTotal,t.numberOfFeaturesSelected=e.numberOfFeaturesSelected,t.numberOfFeaturesLoaded=e.numberOfFeaturesLoaded,t.numberOfPointsSelected=e.numberOfPointsSelected,t.numberOfPointsLoaded=e.numberOfPointsLoaded,t.numberOfTrianglesSelected=e.numberOfTrianglesSelected,t.numberOfTilesStyled=e.numberOfTilesStyled,t.numberOfFeaturesStyled=e.numberOfFeaturesStyled,t.numberOfTilesCulledWithChildrenUnion=e.numberOfTilesCulledWithChildrenUnion,t.geometryByteLength=e.geometryByteLength,t.texturesByteLength=e.texturesByteLength,t.batchTableByteLength=e.batchTableByteLength},t["a"]=r},"49c4":function(e,t,i){"use strict";var n=i("dd06"),r=i("670c"),a=i("be18"),s=i("bef8"),o=i("8dfe"),c=i("535a"),l=i("2f63"),u=i("45c5"),m=i("7d62"),h=i("c52f"),d=i("21d7"),f=i("5ed2"),_=i("7524"),p=i("93da"),g=i("52f0"),b=i("d4ed"),v=i("283e"),y=i("f806"),S=i("f845"),O=i("d289"),M=i("6dc0"),L=i("a58e"),T=i("b08e"),x=i("c0a9"),E=i("656b"),C=i("7abe"),P=i("9f0f"),w=i("d150"),A=i("c4a1"),D=i("71f7"),F=i("fede"),j=i("1b48"),k=i("9e51"),R=i("43ee"),U=i("04e1"),N=i("2ab8"),V=i("7b4a"),W=i("a307"),B=i("c86b"),q=i("3626"),I=i("1ec0"),H=i("eb1f"),X=i("8cfb");function z(e){e=Object(c["a"])(e,c["a"].EMPTY_OBJECT),this._url=void 0,this._basePath=void 0,this._root=void 0,this._resource=void 0,this._asset=void 0,this._properties=void 0,this._geometricError=void 0,this._extensionsUsed=void 0,this._extensions=void 0,this._gltfUpAxis=void 0,this._cache=new D["a"],this._processingQueue=[],this._selectedTiles=[],this._emptyTiles=[],this._requestedTiles=[],this._selectedTilesToStyle=[],this._loadTimestamp=void 0,this._timeSinceLoad=0,this._updatedVisibilityFrame=0,this._updatedModelMatrixFrame=0,this._modelMatrixChanged=!1,this._previousModelMatrix=void 0,this._extras=void 0,this._credits=void 0,this._cullWithChildrenBounds=Object(c["a"])(e.cullWithChildrenBounds,!0),this._allTilesAdditive=!0,this._hasMixedContent=!1,this._stencilClearCommand=void 0,this._backfaceCommands=new _["a"],this._maximumScreenSpaceError=Object(c["a"])(e.maximumScreenSpaceError,16),this._maximumMemoryUsage=Object(c["a"])(e.maximumMemoryUsage,512),this._styleEngine=new k["a"],this._modelMatrix=Object(l["a"])(e.modelMatrix)?g["a"].clone(e.modelMatrix):g["a"].clone(g["a"].IDENTITY),this._statistics=new j["a"],this._statisticsLast=new j["a"],this._statisticsPerPass=new Array(w["a"].NUMBER_OF_PASSES);for(var t=0;t<w["a"].NUMBER_OF_PASSES;++t)this._statisticsPerPass[t]=new j["a"];this._requestedTilesInFlight=[],this._maximumPriority={foveatedFactor:-Number.MAX_VALUE,depth:-Number.MAX_VALUE,distance:-Number.MAX_VALUE,reverseScreenSpaceError:-Number.MAX_VALUE},this._minimumPriority={foveatedFactor:Number.MAX_VALUE,depth:Number.MAX_VALUE,distance:Number.MAX_VALUE,reverseScreenSpaceError:Number.MAX_VALUE},this._heatmap=new F["a"](e.debugHeatmapTilePropertyName),this.cullRequestsWhileMoving=Object(c["a"])(e.cullRequestsWhileMoving,!0),this._cullRequestsWhileMoving=!1,this.cullRequestsWhileMovingMultiplier=Object(c["a"])(e.cullRequestsWhileMovingMultiplier,60),this.progressiveResolutionHeightFraction=p["a"].clamp(Object(c["a"])(e.progressiveResolutionHeightFraction,.3),0,.5),this.preferLeaves=Object(c["a"])(e.preferLeaves,!1),this._tilesLoaded=!1,this._initialTilesLoaded=!1,this._tileDebugLabels=void 0,this._readyPromise=L["a"].defer(),this._classificationType=e.classificationType,this._ellipsoid=Object(c["a"])(e.ellipsoid,h["a"].WGS84),this._initialClippingPlanesOriginMatrix=g["a"].IDENTITY,this._clippingPlanesOriginMatrix=void 0,this._clippingPlanesOriginMatrixDirty=!0,this._vectorClassificationOnly=Object(c["a"])(e.vectorClassificationOnly,!1),this.preloadWhenHidden=Object(c["a"])(e.preloadWhenHidden,!1),this.preloadFlightDestinations=Object(c["a"])(e.preloadFlightDestinations,!0),this._pass=void 0,this.dynamicScreenSpaceError=Object(c["a"])(e.dynamicScreenSpaceError,!1),this.foveatedScreenSpaceError=Object(c["a"])(e.foveatedScreenSpaceError,!0),this._foveatedConeSize=Object(c["a"])(e.foveatedConeSize,.1),this._foveatedMinimumScreenSpaceErrorRelaxation=Object(c["a"])(e.foveatedMinimumScreenSpaceErrorRelaxation,0),this.foveatedInterpolationCallback=Object(c["a"])(e.foveatedInterpolationCallback,p["a"].lerp),this.foveatedTimeDelay=Object(c["a"])(e.foveatedTimeDelay,.2),this.dynamicScreenSpaceErrorDensity=.00278,this.dynamicScreenSpaceErrorFactor=4,this.dynamicScreenSpaceErrorHeightFalloff=.25,this._dynamicScreenSpaceErrorComputedDensity=0,this.shadows=Object(c["a"])(e.shadows,B["a"].ENABLED),this.show=Object(c["a"])(e.show,!0),this.colorBlendMode=E["a"].HIGHLIGHT,this.colorBlendAmount=.5,this.pointCloudShading=new V["a"](e.pointCloudShading),this._pointCloudEyeDomeLighting=new N["a"],this.loadProgress=new d["a"],this.allTilesLoaded=new d["a"],this.initialTilesLoaded=new d["a"],this.tileLoad=new d["a"],this.tileUnload=new d["a"],this.tileFailed=new d["a"],this.tileVisible=new d["a"],this.skipLevelOfDetail=Object(c["a"])(e.skipLevelOfDetail,!1),this._skipLevelOfDetail=this.skipLevelOfDetail,this._disableSkipLevelOfDetail=!1,this.baseScreenSpaceError=Object(c["a"])(e.baseScreenSpaceError,1024),this.skipScreenSpaceErrorFactor=Object(c["a"])(e.skipScreenSpaceErrorFactor,16),this.skipLevels=Object(c["a"])(e.skipLevels,1),this.immediatelyLoadDesiredLevelOfDetail=Object(c["a"])(e.immediatelyLoadDesiredLevelOfDetail,!1),this.loadSiblings=Object(c["a"])(e.loadSiblings,!1),this._clippingPlanes=void 0,this.clippingPlanes=e.clippingPlanes,this._imageBasedLightingFactor=new r["a"](1,1),r["a"].clone(e.imageBasedLightingFactor,this._imageBasedLightingFactor),this.lightColor=e.lightColor,this.luminanceAtZenith=Object(c["a"])(e.luminanceAtZenith,.2),this.sphericalHarmonicCoefficients=e.sphericalHarmonicCoefficients,this.specularEnvironmentMaps=e.specularEnvironmentMaps,this.backFaceCulling=Object(c["a"])(e.backFaceCulling,!0),this.debugFreezeFrame=Object(c["a"])(e.debugFreezeFrame,!1),this.debugColorizeTiles=Object(c["a"])(e.debugColorizeTiles,!1),this.debugWireframe=Object(c["a"])(e.debugWireframe,!1),this.debugShowBoundingVolume=Object(c["a"])(e.debugShowBoundingVolume,!1),this.debugShowContentBoundingVolume=Object(c["a"])(e.debugShowContentBoundingVolume,!1),this.debugShowViewerRequestVolume=Object(c["a"])(e.debugShowViewerRequestVolume,!1),this._tileDebugLabels=void 0,this.debugPickedTileLabelOnly=!1,this.debugPickedTile=void 0,this.debugPickPosition=void 0,this.debugShowGeometricError=Object(c["a"])(e.debugShowGeometricError,!1),this.debugShowRenderingStatistics=Object(c["a"])(e.debugShowRenderingStatistics,!1),this.debugShowMemoryUsage=Object(c["a"])(e.debugShowMemoryUsage,!1),this.debugShowUrl=Object(c["a"])(e.debugShowUrl,!1),this.examineVectorLinesFunction=void 0;var i,a=this;Object(L["a"])(e.url).then((function(e){var t;return i=b["a"].createIfNeeded(e),a._resource=i,a._credits=i.credits,"json"===i.extension?t=i.getBaseUri(!0):i.isDataUri&&(t=""),a._url=i.url,a._basePath=t,z.loadJson(i)})).then((function(e){a._root=a.loadTileset(i,e);var t=Object(l["a"])(e.asset.gltfUpAxis)?T["a"].fromName(e.asset.gltfUpAxis):T["a"].Y,r=e.asset;a._asset=r,a._properties=e.properties,a._geometricError=e.geometricError,a._extensionsUsed=e.extensionsUsed,a._extensions=e.extensions,a._gltfUpAxis=t,a._extras=e.extras;var s=r.extras;if(Object(l["a"])(s)&&Object(l["a"])(s.cesium)&&Object(l["a"])(s.cesium.credits)){var c=s.cesium.credits,u=a._credits;Object(l["a"])(u)||(u=[],a._credits=u);for(var m=0;m<c.length;++m){var h=c[m];u.push(new o["a"](h.html,h.showOnScreen))}}var d=a._root.createBoundingVolume(e.root.boundingVolume,g["a"].IDENTITY),f=d.boundingSphere.center,_=a._ellipsoid.cartesianToCartographic(f);Object(l["a"])(_)&&_.height>n["a"]._defaultMinTerrainHeight&&(a._initialClippingPlanesOriginMatrix=y["a"].eastNorthUpToFixedFrame(f)),a._clippingPlanesOriginMatrix=g["a"].clone(a._initialClippingPlanesOriginMatrix),a._readyPromise.resolve(a)})).otherwise((function(e){a._readyPromise.reject(e)}))}Object.defineProperties(z.prototype,{isCesium3DTileset:{get:function(){return!0}},asset:{get:function(){return this._asset}},extensions:{get:function(){return this._extensions}},clippingPlanes:{get:function(){return this._clippingPlanes},set:function(e){R["a"].setOwner(e,this,"_clippingPlanes")}},properties:{get:function(){return this._properties}},ready:{get:function(){return Object(l["a"])(this._root)}},readyPromise:{get:function(){return this._readyPromise.promise}},tilesLoaded:{get:function(){return this._tilesLoaded}},resource:{get:function(){return this._resource}},basePath:{get:function(){return Object(u["a"])("Cesium3DTileset.basePath","Cesium3DTileset.basePath has been deprecated. All tiles are relative to the url of the tileset JSON file that contains them. Use the url property instead."),this._basePath}},style:{get:function(){return this._styleEngine.style},set:function(e){this._styleEngine.style=e}},maximumScreenSpaceError:{get:function(){return this._maximumScreenSpaceError},set:function(e){this._maximumScreenSpaceError=e}},maximumMemoryUsage:{get:function(){return this._maximumMemoryUsage},set:function(e){this._maximumMemoryUsage=e}},root:{get:function(){return this._root}},boundingSphere:{get:function(){return this._root.updateTransform(this._modelMatrix),this._root.boundingSphere}},modelMatrix:{get:function(){return this._modelMatrix},set:function(e){this._modelMatrix=g["a"].clone(e,this._modelMatrix)}},timeSinceLoad:{get:function(){return this._timeSinceLoad}},totalMemoryUsageInBytes:{get:function(){var e=this._statistics;return e.texturesByteLength+e.geometryByteLength+e.batchTableByteLength}},clippingPlanesOriginMatrix:{get:function(){return Object(l["a"])(this._clippingPlanesOriginMatrix)?(this._clippingPlanesOriginMatrixDirty&&(g["a"].multiply(this.root.computedTransform,this._initialClippingPlanesOriginMatrix,this._clippingPlanesOriginMatrix),this._clippingPlanesOriginMatrixDirty=!1),this._clippingPlanesOriginMatrix):g["a"].IDENTITY}},styleEngine:{get:function(){return this._styleEngine}},statistics:{get:function(){return this._statistics}},classificationType:{get:function(){return this._classificationType}},ellipsoid:{get:function(){return this._ellipsoid}},foveatedConeSize:{get:function(){return this._foveatedConeSize},set:function(e){this._foveatedConeSize=e}},foveatedMinimumScreenSpaceErrorRelaxation:{get:function(){return this._foveatedMinimumScreenSpaceErrorRelaxation},set:function(e){this._foveatedMinimumScreenSpaceErrorRelaxation=e}},extras:{get:function(){return this._extras}},imageBasedLightingFactor:{get:function(){return this._imageBasedLightingFactor},set:function(e){r["a"].clone(e,this._imageBasedLightingFactor)}},vectorClassificationOnly:{get:function(){return this._vectorClassificationOnly}}}),z.loadJson=function(e){var t=b["a"].createIfNeeded(e);return t.fetchJson()},z.prototype.makeStyleDirty=function(){this._styleEngine.makeDirty()},z.prototype.loadTileset=function(e,t,i){var n=t.asset;if(!Object(l["a"])(n))throw new v["a"]("Tileset must have an asset property.");if("0.0"!==n.version&&"1.0"!==n.version)throw new v["a"]("The tileset must be 3D Tiles version 0.0 or 1.0.");var r=this._statistics,a=n.tilesetVersion;Object(l["a"])(a)&&(this._basePath+="?v="+a,e=e.clone(),e.setQueryParameters({v:a}));var s=new x["a"](this,e,t.root,i);Object(l["a"])(i)&&(i.children.push(s),s._depth=i._depth+1);var o=[];o.push(s);while(o.length>0){var c=o.pop();++r.numberOfTilesTotal,this._allTilesAdditive=this._allTilesAdditive&&c.refine===A["a"].ADD;var u=c._header.children;if(Object(l["a"])(u))for(var m=u.length,h=0;h<m;++h){var d=u[h],f=new x["a"](this,e,d,c);c.children.push(f),f._depth=c._depth+1,o.push(f)}this._cullWithChildrenBounds&&P["a"].checkChildrenWithinParent(c)}return s};var G=new a["a"],J=new s["a"],Y=new g["a"],Q=new a["a"],Z=new a["a"],K=new a["a"];function $(e,t){var i,n,r,o,c,l=t.camera,u=e._root,m=u.contentBoundingVolume;if(m instanceof I["a"])i=a["a"].normalize(l.positionWC,G),n=l.directionWC,r=l.positionCartographic.height,o=m.minimumHeight,c=m.maximumHeight;else{var h=g["a"].inverseTransformation(u.computedTransform,Y),d=t.mapProjection.ellipsoid,f=m.boundingVolume,_=g["a"].multiplyByPoint(h,f.center,Q);if(a["a"].magnitude(_)>d.minimumRadius){var b=s["a"].fromCartesian(_,d,J);i=a["a"].normalize(l.positionWC,G),n=l.directionWC,r=l.positionCartographic.height,o=0,c=2*b.height}else{var v=g["a"].multiplyByPoint(h,l.positionWC,Z);if(i=a["a"].UNIT_Z,n=g["a"].multiplyByPointAsVector(h,l.directionWC,K),n=a["a"].normalize(n,n),r=v.z,m instanceof X["a"]){var y=u._header.boundingVolume.box[11];o=_.z-y,c=_.z+y}else if(m instanceof H["a"]){var S=f.radius;o=_.z-S,c=_.z+S}}}var O=e.dynamicScreenSpaceErrorHeightFalloff,M=o+(c-o)*O,L=c,T=p["a"].clamp((r-M)/(L-M),0,1),x=Math.abs(a["a"].dot(n,i)),E=1-x;E*=1-T;var C=e.dynamicScreenSpaceErrorDensity;C*=E,e._dynamicScreenSpaceErrorComputedDensity=C}function ee(e,t){if(!t.hasEmptyContent){var i=e._statistics,n=t.contentExpired,r=t.requestContent();r?(n&&(t.hasTilesetContent?ge(e,t):(i.decrementLoadCounts(t.content),--i.numberOfTilesWithContentReady)),++i.numberOfPendingRequests,e._requestedTilesInFlight.push(t),t.contentReadyToProcessPromise.then(re(e,t)),t.contentReadyPromise.then(se(e,t)).otherwise(ae(e,t))):++i.numberOfAttemptedRequests}}function te(e,t){return e._priority-t._priority}function ie(e,t){for(var i=e._requestedTilesInFlight,n=0,r=i.length,a=0;a<r;++a){var s=i[a],o=t.frameNumber-s._touchedFrame>=1;s._contentState===C["a"].LOADING?o?(s._request.cancel(),++n):n>0&&(i[a-n]=s):++n}i.length-=n}function ne(e,t){var i=e._requestedTiles,n=i.length;i.sort(te);for(var r=0;r<n;++r)ee(e,i[r])}function re(e,t){return function(){e._processingQueue.push(t),--e._statistics.numberOfPendingRequests,++e._statistics.numberOfTilesProcessing}}function ae(e,t){return function(i){var n=t._contentResource.url,r=Object(l["a"])(i.message)?i.message:i.toString();e.tileFailed.numberOfListeners>0&&e.tileFailed.raiseEvent({url:n,message:r})}}function se(e,t){return function(){--e._statistics.numberOfTilesProcessing,t.hasTilesetContent||(e._statistics.incrementLoadCounts(t.content),++e._statistics.numberOfTilesWithContentReady,++e._statistics.numberOfLoadedTilesTotal,e._cache.add(t)),e.tileLoad.raiseEvent(t)}}function oe(e){for(var t=e._processingQueue,i=t.length,n=0,r=0;r<i;++r){var a=t[r];a._contentState===C["a"].PROCESSING?n>0&&(t[r-n]=a):++n}t.length-=n}function ce(e,t){oe(e);for(var i=e._processingQueue,n=i.length,r=0;r<n;++r)i[r].process(e,t)}z.prototype.postPassesUpdate=function(e){this.ready&&(ie(this,e),ye(this,e),this._cache.unloadTiles(this,be),this._styleEngine.resetDirty())},z.prototype.prePassesUpdate=function(e){if(this.ready){ce(this,e);var t=this._clippingPlanes;this._clippingPlanesOriginMatrixDirty=!0,Object(l["a"])(t)&&t.enabled&&t.update(e),Object(l["a"])(this._loadTimestamp)||(this._loadTimestamp=f["a"].clone(e.time)),this._timeSinceLoad=Math.max(1e3*f["a"].secondsDifference(e.time,this._loadTimestamp),0),this._skipLevelOfDetail=this.skipLevelOfDetail&&!Object(l["a"])(this._classificationType)&&!this._disableSkipLevelOfDetail&&!this._allTilesAdditive,this.dynamicScreenSpaceError&&$(this,e),e.newFrame&&this._cache.reset()}};var le=new a["a"],ue={maximumFractionDigits:3};function me(e){var t=e/1048576;return t<1?t.toLocaleString(void 0,ue):Math.round(t).toLocaleString()}function he(e){var t=e.boundingVolume.boundingVolume,i=t.halfAxes,n=t.radius,r=a["a"].clone(t.center,le);if(Object(l["a"])(i))r.x+=.75*(i[0]+i[3]+i[6]),r.y+=.75*(i[1]+i[4]+i[7]),r.z+=.75*(i[2]+i[5]+i[8]);else if(Object(l["a"])(n)){var s=a["a"].normalize(t.center,le);s=a["a"].multiplyByScalar(s,.75*n,le),r=a["a"].add(s,t.center,le)}return r}function de(e,t,i){var n="",r=0;if(t.debugShowGeometricError&&(n+="\nGeometric error: "+e.geometricError,r++),t.debugShowRenderingStatistics){n+="\nCommands: "+e.commandsLength,r++;var a=e.content.pointsLength;a>0&&(n+="\nPoints: "+e.content.pointsLength,r++);var s=e.content.trianglesLength;s>0&&(n+="\nTriangles: "+e.content.trianglesLength,r++),n+="\nFeatures: "+e.content.featuresLength,r++}t.debugShowMemoryUsage&&(n+="\nTexture Memory: "+me(e.content.texturesByteLength),n+="\nGeometry Memory: "+me(e.content.geometryByteLength),r+=2),t.debugShowUrl&&(n+="\nUrl: "+e._header.content.uri,r++);var o={text:n.substring(1),position:i,font:19-r+"px sans-serif",showBackground:!0,disableDepthTestDistance:Number.POSITIVE_INFINITY};return t._tileDebugLabels.add(o)}function fe(e,t){var i,n,a=e._selectedTiles,s=a.length,o=e._emptyTiles,c=o.length;if(e._tileDebugLabels.removeAll(),e.debugPickedTileLabelOnly){if(Object(l["a"])(e.debugPickedTile)){var u=Object(l["a"])(e.debugPickPosition)?e.debugPickPosition:he(e.debugPickedTile),m=de(e.debugPickedTile,e,u);m.pixelOffset=new r["a"](15,-15)}}else{for(i=0;i<s;++i)n=a[i],de(n,e,he(n));for(i=0;i<c;++i)n=o[i],n.hasTilesetContent&&de(n,e,he(n))}e._tileDebugLabels.update(t)}function _e(e,t,i){e._styleEngine.applyStyle(e);var n,r,a=i.isRender,s=e._statistics,o=t.commandList,c=o.length,u=e._selectedTiles,m=u.length,h=e._emptyTiles,d=h.length,f=e.tileVisible,_=e._skipLevelOfDetail&&e._hasMixedContent&&t.context.stencilBuffer&&m>0;e._backfaceCommands.length=0,_&&(Object(l["a"])(e._stencilClearCommand)||(e._stencilClearCommand=new S["a"]({stencil:0,pass:O["a"].CESIUM_3D_TILE,renderState:M["a"].fromCache({stencilMask:q["a"].SKIP_LOD_MASK})})),o.push(e._stencilClearCommand));var p=o.length;for(n=0;n<m;++n)r=u[n],a&&f.raiseEvent(r),r.update(e,t,i),s.incrementSelectionCounts(r.content),++s.selected;for(n=0;n<d;++n)r=h[n],r.update(e,t,i);var g=o.length-p;if(e._backfaceCommands.trim(),_){var b=e._backfaceCommands.values,v=b.length;for(o.length+=v,n=g-1;n>=0;--n)o[p+v+n]=o[p+n];for(n=0;n<v;++n)o[p+n]=b[n]}g=o.length-c,s.numberOfCommands=g,a&&e.pointCloudShading.attenuation&&e.pointCloudShading.eyeDomeLighting&&g>0&&e._pointCloudEyeDomeLighting.update(t,c,e.pointCloudShading,e.boundingSphere),a&&(e.debugShowGeometricError||e.debugShowRenderingStatistics||e.debugShowMemoryUsage||e.debugShowUrl?(Object(l["a"])(e._tileDebugLabels)||(e._tileDebugLabels=new U["a"]),fe(e,t)):e._tileDebugLabels=e._tileDebugLabels&&e._tileDebugLabels.destroy())}var pe=[];function ge(e,t){var i=t,n=pe;n.push(t);while(n.length>0){t=n.pop();for(var r=t.children,a=r.length,s=0;s<a;++s)n.push(r[s]);t!==i&&(ve(e,t),--e._statistics.numberOfTilesTotal)}i.children=[]}function be(e,t){e.tileUnload.raiseEvent(t),e._statistics.decrementLoadCounts(t.content),--e._statistics.numberOfTilesWithContentReady,t.unloadContent()}function ve(e,t){e._cache.unloadTile(e,t,be),t.destroy()}function ye(e,t){var i=e._statistics,n=e._statisticsLast,r=i.numberOfPendingRequests,a=i.numberOfTilesProcessing,s=n.numberOfPendingRequests,o=n.numberOfTilesProcessing;j["a"].clone(i,n);var c=r!==s||a!==o;c&&t.afterRender.push((function(){e.loadProgress.raiseEvent(r,a)})),e._tilesLoaded=0===i.numberOfPendingRequests&&0===i.numberOfTilesProcessing&&0===i.numberOfAttemptedRequests,c&&e._tilesLoaded&&(t.afterRender.push((function(){e.allTilesLoaded.raiseEvent()})),e._initialTilesLoaded||(e._initialTilesLoaded=!0,t.afterRender.push((function(){e.initialTilesLoaded.raiseEvent()}))))}function Se(e){e._heatmap.resetMinimumMaximum(),e._minimumPriority.depth=Number.MAX_VALUE,e._maximumPriority.depth=-Number.MAX_VALUE,e._minimumPriority.foveatedFactor=Number.MAX_VALUE,e._maximumPriority.foveatedFactor=-Number.MAX_VALUE,e._minimumPriority.distance=Number.MAX_VALUE,e._maximumPriority.distance=-Number.MAX_VALUE,e._minimumPriority.reverseScreenSpaceError=Number.MAX_VALUE,e._maximumPriority.reverseScreenSpaceError=-Number.MAX_VALUE}function Oe(e,t){t.frameNumber===e._updatedModelMatrixFrame&&Object(l["a"])(e._previousModelMatrix)||(e._updatedModelMatrixFrame=t.frameNumber,e._modelMatrixChanged=!g["a"].equals(e.modelMatrix,e._previousModelMatrix),e._modelMatrixChanged&&(e._previousModelMatrix=g["a"].clone(e.modelMatrix,e._previousModelMatrix)))}function Me(e,t,i,n){if(t.mode===W["a"].MORPHING)return!1;if(!e.ready)return!1;var r=e._statistics;r.clear();var a=n.isRender;++e._updatedVisibilityFrame,Se(e),Oe(e,t),e._cullRequestsWhileMoving=e.cullRequestsWhileMoving&&!e._modelMatrixChanged;var s=n.traversal.selectTiles(e,t);if(n.requestTiles&&ne(e),_e(e,t,n),j["a"].clone(r,i),a){var o=e._credits;if(Object(l["a"])(o)&&0!==r.selected)for(var c=o.length,u=0;u<c;++u)t.creditDisplay.addCredit(o[u])}return s}z.prototype.trimLoadedTiles=function(){this._cache.trim()},z.prototype.update=function(e){this.updateForPass(e,e.tilesetPassState)},z.prototype.updateForPass=function(e,t){var i=t.pass;if((i!==w["a"].PRELOAD||this.preloadWhenHidden&&!this.show)&&(i!==w["a"].PRELOAD_FLIGHT||this.preloadFlightDestinations&&(this.show||this.preloadWhenHidden))&&(i!==w["a"].REQUEST_RENDER_MODE_DEFER_CHECK||!(!this._cullRequestsWhileMoving&&this.foveatedTimeDelay<=0||!this.show))){var n=e.commandList,r=e.camera,a=e.cullingVolume;t.ready=!1;var s=w["a"].getPassOptions(i),o=s.ignoreCommands,l=Object(c["a"])(t.commandList,n),u=l.length;e.commandList=l,e.camera=Object(c["a"])(t.camera,r),e.cullingVolume=Object(c["a"])(t.cullingVolume,a);var m=this._statisticsPerPass[i];(this.show||o)&&(this._pass=i,t.ready=Me(this,e,m,s)),o&&(l.length=u),e.commandList=n,e.camera=r,e.cullingVolume=a}},z.prototype.hasExtension=function(e){return!!Object(l["a"])(this._extensionsUsed)&&this._extensionsUsed.indexOf(e)>-1},z.prototype.isDestroyed=function(){return!1},z.prototype.destroy=function(){if(this._tileDebugLabels=this._tileDebugLabels&&this._tileDebugLabels.destroy(),this._clippingPlanes=this._clippingPlanes&&this._clippingPlanes.destroy(),Object(l["a"])(this._root)){var e=pe;e.push(this._root);while(e.length>0){var t=e.pop();t.destroy();for(var i=t.children,n=i.length,r=0;r<n;++r)e.push(i[r])}}return this._root=void 0,Object(m["a"])(this)},t["a"]=z},"71f7":function(e,t,i){"use strict";var n=i("2f63"),r=i("8f14");function a(){this._list=new r["a"],this._sentinel=this._list.add(),this._trimTiles=!1}a.prototype.reset=function(){this._list.splice(this._list.tail,this._sentinel)},a.prototype.touch=function(e){var t=e.cacheNode;Object(n["a"])(t)&&this._list.splice(this._sentinel,t)},a.prototype.add=function(e){Object(n["a"])(e.cacheNode)||(e.cacheNode=this._list.add(e))},a.prototype.unloadTile=function(e,t,i){var r=t.cacheNode;Object(n["a"])(r)&&(this._list.remove(r),t.cacheNode=void 0,i(e,t))},a.prototype.unloadTiles=function(e,t){var i=this._trimTiles;this._trimTiles=!1;var n=this._list,r=1024*e.maximumMemoryUsage*1024,a=this._sentinel,s=n.head;while(s!==a&&(e.totalMemoryUsageInBytes>r||i)){var o=s.item;s=s.next,this.unloadTile(e,o,t)}},a.prototype.trim=function(){this._trimTiles=!0},t["a"]=a},"859c":function(e,t,i){"use strict";var n=i("2f63"),r=i("66bf"),a=i("7524"),s=i("6380"),o=i("c4a1");function c(){}function l(e){return e._visible&&e._inRequestVolume}var u={stack:new a["a"],stackMaximumLength:0},m={stack:new a["a"],stackMaximumLength:0},h={stack:new a["a"],stackMaximumLength:0},d={stack:new a["a"],stackMaximumLength:0,ancestorStack:new a["a"],ancestorStackMaximumLength:0},f=2;function _(e,t,i){var n=e._maximumScreenSpaceError,r=e._maximumScreenSpaceError;B(e,t,n,r,i)}function p(e,t,i){var n=Number.MAX_VALUE,r=e._maximumScreenSpaceError;B(e,t,n,r,i),I(e,t,i)}function g(e,t,i){var n=Math.max(e.baseScreenSpaceError,e.maximumScreenSpaceError),r=e.maximumScreenSpaceError;B(e,t,n,r,i),I(e,t,i)}function b(e){return e._skipLevelOfDetail}function v(e,t){e._emptyTiles.push(t)}function y(e,t,i){if(t.contentVisibility(i)!==r["a"].OUTSIDE){var n=t.content;n.featurePropertiesDirty?(n.featurePropertiesDirty=!1,t.lastStyleTime=0,e._selectedTilesToStyle.push(t)):t._selectedFrame<i.frameNumber-1&&e._selectedTilesToStyle.push(t),t._selectedFrame=i.frameNumber,e._selectedTiles.push(t)}}function S(e,t,i){var n=h.stack;n.push(t);while(n.length>0){h.stackMaximumLength=Math.max(h.stackMaximumLength,n.length);for(var r=n.pop(),a=r.children,s=a.length,o=0;o<s;++o){var c=a[o];l(c)&&(c.contentAvailable?(D(e,c,i),L(e,c,i),y(e,c,i)):c._depth-t._depth<f&&n.push(c))}}}function O(e,t,i){if(b(e)){var r=t.contentAvailable?t:t._ancestorWithContentAvailable;Object(n["a"])(r)?r._shouldSelect=!0:S(e,t,i)}else t.contentAvailable&&y(e,t,i)}function M(e,t,i){++e._statistics.visited,t._visitedFrame=i.frameNumber}function L(e,t,i){t._touchedFrame!==i.frameNumber&&(e._cache.touch(t),t._touchedFrame=i.frameNumber)}function T(e,t){e._maximumPriority.distance=Math.max(t._priorityHolder._distanceToCamera,e._maximumPriority.distance),e._minimumPriority.distance=Math.min(t._priorityHolder._distanceToCamera,e._minimumPriority.distance),e._maximumPriority.depth=Math.max(t._depth,e._maximumPriority.depth),e._minimumPriority.depth=Math.min(t._depth,e._minimumPriority.depth),e._maximumPriority.foveatedFactor=Math.max(t._priorityHolder._foveatedFactor,e._maximumPriority.foveatedFactor),e._minimumPriority.foveatedFactor=Math.min(t._priorityHolder._foveatedFactor,e._minimumPriority.foveatedFactor),e._maximumPriority.reverseScreenSpaceError=Math.max(t._priorityReverseScreenSpaceError,e._maximumPriority.reverseScreenSpaceError),e._minimumPriority.reverseScreenSpaceError=Math.min(t._priorityReverseScreenSpaceError,e._minimumPriority.reverseScreenSpaceError)}function x(e,t,i){if(!e._cullRequestsWhileMoving)return!0;var n=t.boundingSphere,r=Math.max(2*n.radius,1),a=i.camera,s=0!==a.positionWCDeltaMagnitude?a.positionWCDeltaMagnitude:a.positionWCDeltaMagnitudeLastFrame,o=e.cullRequestsWhileMovingMultiplier*s/r;return o<1}function E(e,t,i){if(t._requestedFrame!==i.frameNumber&&(k(t)||t.contentExpired)&&x(e,t,i)){var n=i.camera.timeSinceMoved<e.foveatedTimeDelay;t.priorityDeferred&&n||(t._requestedFrame=i.frameNumber,e._requestedTiles.push(t))}}function C(e,t,i){t._updatedVisibilityFrame!==e._updatedVisibilityFrame&&(t.updateVisibility(i),t._updatedVisibilityFrame=e._updatedVisibilityFrame)}function P(e,t,i){for(var n=!1,r=t.children,a=r.length,s=0;s<a;++s){var o=r[s];C(e,o,i),n=n||l(o)}return n}function w(e,t,i){var r=t.parent;return!(!Object(n["a"])(r)||r.hasTilesetContent||r.refine!==o["a"].ADD)&&t.getScreenSpaceError(i,!0)<=e._maximumScreenSpaceError}function A(e,t,i){if(C(e,t,i),l(t)){var n=t.children.length>0;if(t.hasTilesetContent&&n){var r=t.children[0];return A(e,r,i),void(t._visible=r._visible)}if(!w(e,t,i)){var a=t.refine===o["a"].REPLACE,c=t._optimChildrenWithinParent===s["a"].USE_OPTIMIZATION;return a&&c&&n&&!P(e,t,i)?(++e._statistics.numberOfTilesCulledWithChildrenUnion,void(t._visible=!1)):void 0}t._visible=!1}}function D(e,t,i){A(e,t,i),t.updateExpiration(),t._wasMinPriorityChild=!1,t._priorityHolder=t,T(e,t),t._shouldSelect=!1,t._finalResolution=!0}function F(e,t){e._ancestorWithContent=void 0,e._ancestorWithContentAvailable=void 0;var i=e.parent;if(Object(n["a"])(i)){var r=!k(i)||i._requestedFrame===t.frameNumber;e._ancestorWithContent=r?i:i._ancestorWithContent,e._ancestorWithContentAvailable=i.contentAvailable?i:i._ancestorWithContentAvailable}}function j(e){return e.hasEmptyContent||e.hasTilesetContent}function k(e){return!j(e)&&e.contentUnloaded}function R(e,t){var i=t._ancestorWithContent;return!e.immediatelyLoadDesiredLevelOfDetail&&(t._priorityProgressiveResolutionScreenSpaceErrorLeaf||Object(n["a"])(i)&&t._screenSpaceError<i._screenSpaceError/e.skipScreenSpaceErrorFactor&&t._depth>i._depth+e.skipLevels)}function U(e,t){return 0===t._distanceToCamera&&0===e._distanceToCamera?t._centerZDepth-e._centerZDepth:t._distanceToCamera-e._distanceToCamera}function N(e,t,i,n){var r,a=t.refine===o["a"].REPLACE,s=t.children,c=s.length;for(r=0;r<c;++r)D(e,s[r],n);s.sort(U);var u,m=!b(e)&&a&&!j(t),h=!0,d=!1,f=-1,_=Number.MAX_VALUE;for(r=0;r<c;++r){var p;if(u=s[r],l(u)?(i.push(u),u._foveatedFactor<_&&(f=r,_=u._foveatedFactor),d=!0):(m||e.loadSiblings)&&(u._foveatedFactor<_&&(f=r,_=u._foveatedFactor),E(e,u,n),L(e,u,n)),m)p=!!u._inRequestVolume&&(j(u)?q(e,u,n):u.contentAvailable),h=h&&p}if(d||(h=!1),-1!==f&&!b(e)&&a){var g=s[f];g._wasMinPriorityChild=!0;var v=(t._wasMinPriorityChild||t===e.root)&&_<=t._priorityHolder._foveatedFactor?t._priorityHolder:t;for(v._foveatedFactor=Math.min(g._foveatedFactor,v._foveatedFactor),v._distanceToCamera=Math.min(g._distanceToCamera,v._distanceToCamera),r=0;r<c;++r)u=s[r],u._priorityHolder=v}return h}function V(e,t,i){return!b(e)||!e.immediatelyLoadDesiredLevelOfDetail&&(!Object(n["a"])(t._ancestorWithContent)||(0===t._screenSpaceError?t.parent._screenSpaceError>i:t._screenSpaceError>i))}function W(e,t){return 0!==t.children.length&&(t.hasTilesetContent?!t.contentExpired:t._screenSpaceError>e._maximumScreenSpaceError)}function B(e,t,i,r,a){var s=u.stack;s.push(t);while(s.length>0){u.stackMaximumLength=Math.max(u.stackMaximumLength,s.length);var c=s.pop();F(c,a);var l=V(e,c,i),m=c.refine===o["a"].ADD,h=c.refine===o["a"].REPLACE,d=c.parent,f=!Object(n["a"])(d)||d._refines,_=!1;W(e,c)&&(_=N(e,c,s,a)&&f);var p=!_&&f;j(c)?(v(e,c,a),E(e,c,a),p&&O(e,c,a)):m?(O(e,c,a),E(e,c,a)):h&&(l?(E(e,c,a),p&&O(e,c,a)):p?(O(e,c,a),E(e,c,a)):R(e,c)&&E(e,c,a)),M(e,c,a),L(e,c,a),c._refines=_}}function q(e,t,i){var n=!0,r=m.stack;r.push(t);while(r.length>0){m.stackMaximumLength=Math.max(m.stackMaximumLength,r.length);var a=r.pop(),s=a.children,o=s.length,c=j(a),u=c&&W(e,a),h=c&&0===a.children.length;if(u||a.contentAvailable||h||(n=!1),D(e,a,i),l(a)||(E(e,a,i),L(e,a,i)),u)for(var d=0;d<o;++d){var f=s[d];r.push(f)}}return n}function I(e,t,i){var r,a=d.stack,s=d.ancestorStack;a.push(t);while(a.length>0||s.length>0){if(d.stackMaximumLength=Math.max(d.stackMaximumLength,a.length),d.ancestorStackMaximumLength=Math.max(d.ancestorStackMaximumLength,s.length),s.length>0){var c=s.peek();if(c._stackLength===a.length){s.pop(),c!==r&&(c._finalResolution=!1),y(e,c,i);continue}}var u=a.pop();if(Object(n["a"])(u)){var m=u.refine===o["a"].ADD,h=u._shouldSelect,f=u.children,_=f.length,p=W(e,u);if(h)if(m)y(e,u,i);else{if(u._selectionDepth=s.length,u._selectionDepth>0&&(e._hasMixedContent=!0),r=u,!p){y(e,u,i);continue}s.push(u),u._stackLength=a.length}if(p)for(var g=0;g<_;++g){var b=f[g];l(b)&&a.push(b)}}}}c.selectTiles=function(e,t){if(e._requestedTiles.length=0,!e.debugFreezeFrame){e._selectedTiles.length=0,e._selectedTilesToStyle.length=0,e._emptyTiles.length=0,e._hasMixedContent=!1;var i=e.root;if(D(e,i,t),l(i)&&!(i.getScreenSpaceError(t,!0)<=e._maximumScreenSpaceError)){b(e)?e.immediatelyLoadDesiredLevelOfDetail?p(e,i,t):g(e,i,t):_(e,i,t),u.stack.trim(u.stackMaximumLength),m.stack.trim(m.stackMaximumLength),h.stack.trim(h.stackMaximumLength),d.stack.trim(d.stackMaximumLength),d.ancestorStack.trim(d.ancestorStackMaximumLength);for(var n=e._requestedTiles,r=n.length,a=0;a<r;++a)n[a].updatePriority()}}},t["a"]=c},8981:function(e,t,i){"use strict";var n=i("66bf"),r=i("7524"),a=i("c4a1");function s(){}var o={stack:new r["a"],stackMaximumLength:0};function c(e){return e._visible&&e._inRequestVolume}function l(e){return e.hasEmptyContent||e.hasTilesetContent}function u(e){return!l(e)&&e.contentUnloaded}function m(e,t){return 0!==t.children.length&&(t.hasTilesetContent?!t.contentExpired:(t.hasEmptyContent,!0))}function h(e,t,i,n){for(var r=t.children,a=r.length,s=0;s<a;++s){var o=r[s];o.updateVisibility(n),c(o)&&i.push(o)}}function d(e,t){(u(t)||t.contentExpired)&&(t._priority=0,e._requestedTiles.push(t))}function f(e,t,i){t._touchedFrame!==i.frameNumber&&(e._cache.touch(t),t._touchedFrame=i.frameNumber)}function _(e){++e.statistics.visited}function p(e,t,i){t.contentAvailable&&t.contentVisibility(i)!==n["a"].OUTSIDE&&e._selectedTiles.push(t)}s.selectTiles=function(e,t){e._selectedTiles.length=0,e._requestedTiles.length=0,e._hasMixedContent=!1;var i=!0,n=e.root;if(n.updateVisibility(t),!c(n))return i;var r=o.stack;r.push(e.root);while(r.length>0){o.stackMaximumLength=Math.max(o.stackMaximumLength,r.length);var s=r.pop(),u=s.refine===a["a"].ADD,g=s.refine===a["a"].REPLACE,b=m(e,s);b&&h(e,s,r,t),(u||g&&!b)&&(d(e,s),f(e,s,t),p(e,s,t),l(s)||s.contentAvailable||(i=!1)),_(e)}return o.stack.trim(o.stackMaximumLength),i},t["a"]=s},fede:function(e,t,i){"use strict";var n=i("bd8d"),r=i("2f63"),a=i("5ed2"),s=i("93da");function o(e){this.tilePropertyName=e,this._minimum=Number.MAX_VALUE,this._maximum=-Number.MAX_VALUE,this._previousMinimum=Number.MAX_VALUE,this._previousMaximum=-Number.MAX_VALUE,this._referenceMinimum={},this._referenceMaximum={}}function c(e,t){var i;return i="_loadTimestamp"===t?a["a"].toDate(e).getTime():e,i}function l(e,t){var i=e.tilePropertyName;if(Object(r["a"])(i)){var n=c(t[i],i);return Object(r["a"])(n)?(e._maximum=Math.max(n,e._maximum),e._minimum=Math.min(n,e._minimum),n):(e.tilePropertyName=void 0,n)}}o.prototype.setReferenceMinimumMaximum=function(e,t,i){this._referenceMinimum[i]=c(e,i),this._referenceMaximum[i]=c(t,i)};var u=[new n["a"](.1,.1,.1,1),new n["a"](.153,.278,.878,1),new n["a"](.827,.231,.49,1),new n["a"](.827,.188,.22,1),new n["a"](1,.592,.259,1),new n["a"](1,.843,0,1)];o.prototype.colorize=function(e,t){var i=this.tilePropertyName;if(Object(r["a"])(i)&&e.contentAvailable&&e._selectedFrame===t.frameNumber){var a=l(this,e),o=this._previousMinimum,c=this._previousMaximum;if(o!==Number.MAX_VALUE&&c!==-Number.MAX_VALUE){var m=c-o+s["a"].EPSILON7,h=s["a"].clamp(a-o,0,m),d=h/m,f=u.length-1,_=d*f,p=Math.floor(_),g=Math.ceil(_),b=_-p,v=u[p],y=u[g],S=n["a"].clone(n["a"].WHITE);S.red=s["a"].lerp(v.red,y.red,b),S.green=s["a"].lerp(v.green,y.green,b),S.blue=s["a"].lerp(v.blue,y.blue,b),e._debugColor=S}}},o.prototype.resetMinimumMaximum=function(){var e=this.tilePropertyName;if(Object(r["a"])(e)){var t=this._referenceMinimum[e],i=this._referenceMaximum[e],n=Object(r["a"])(t)&&Object(r["a"])(i);this._previousMinimum=n?t:this._minimum,this._previousMaximum=n?i:this._maximum,this._minimum=Number.MAX_VALUE,this._maximum=-Number.MAX_VALUE}},t["a"]=o}}]);