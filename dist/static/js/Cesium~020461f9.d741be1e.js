(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Cesium~020461f9"],{"0836":function(t,e,n){t.exports=function(t){var e={};function n(i){if(e[i])return e[i].exports;var a=e[i]={i:i,l:!1,exports:{}};return t[i].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)n.d(i,a,function(e){return t[e]}.bind(null,a));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([function(t,e){t.exports=n("e2ae")},function(t,e,n){"use strict";n.r(e);var i=n(0);function a(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function o(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach((function(e){u(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function u(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var n=[],i=!0,a=!1,r=void 0;try{for(var o,u=t[Symbol.iterator]();!(i=(o=u.next()).done)&&(n.push(o.value),!e||n.length!==e);i=!0);}catch(t){a=!0,r=t}finally{try{i||null==u.return||u.return()}finally{if(a)throw r}}return n}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function h(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function c(t,e){var n=document.createElement("div");for(var i in e&&e.append(n),t)"number"!=typeof t[i]?n.style[i]=t[i]:n.style[i]=t[i]+"px";return n}e.default=function(t){return function(){function e(t){var n=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{autoMaxMin:!0,data:[]},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[-180,-90,180,90],u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},h=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{enabled:!0,min:6375e3,max:1e7,maxRadius:40,minRadius:10},l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{totalArea:1036800,autoResize:!0};if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),"undefined"!=typeof window){this.viewer=t,this.bbox=r,this.autoRadiusConfig=h,this.max=void 0,this.min=void 0;var f=s(r,4),d=f[0],m=f[1],p=f[2],v=f[3],y=v-m,b=p-d;if(this.boxMeta={top:v,left:d,height:y,width:b},l.autoResize){if(!l.totalArea)throw"specify totalArea if auto resize";var g=Math.floor(Math.sqrt(y*l.totalArea)),w=Math.floor(g*b/y);this.canvasConfig=o({},l,{width:w,height:g})}else{if(!l.width||!l.height)throw"specify width and height if not auto resize";this.canvasConfig=l}var x,O=o({},u);if(O.container||(this.mountPoint=c({position:"absolute",top:0,left:0,"z-index":-100,overflow:"hidden",width:0,height:0},document.body),O.container=c({width:this.canvasConfig.width,height:this.canvasConfig.height},this.mountPoint)),this.heatmapConfig=O,this.heatmap=i.create(O),!(x=Array.isArray(a)?{autoMaxMin:!0,data:a}:o({},a)).autoMaxMin){if(!x.min||!x.max)throw"need max and min when not auto";this.min=x.min,this.max=x.max}var M=x.data.map((function(t){return n.updateMaxMin(t.value),n.convertData(t)}));delete x.data,this.dataConfig=x,this.data=M;var j={max:this.max,min:this.min,data:M};this.heatmap.setData(j),this.updateCesium(h.enabled),this.cameraMoveEnd=function(){return n.updateCesium(!0)},h.enabled&&this.viewer.camera.moveEnd.addEventListener(this.cameraMoveEnd)}}var n,r,u;return n=e,(r=[{key:"addData",value:function(t){var e=this;Array.isArray(t)?this.data=this.data.concat(t.map((function(t){return e.updateMaxMin(t.value),e.convertData(t)}))):(this.updateMaxMin(t.value),this.data.push(this.convertData(t))),this.updateCesium(!0)}},{key:"updateHeatmap",value:function(){var t=this.viewer.camera.getMagnitude(),e=this.autoRadiusConfig,n=e.min,i=e.max,a=e.minRadius,r=e.maxRadius,o=parseInt(a+(r-a)*(t-n)/(i-n));this.heatmap.setData({max:this.max,min:this.min,data:this.data.map((function(t){return{x:t.x,y:t.y,value:t.value,radius:o}}))})}},{key:"updateCesium",value:function(e){var n;this.layer&&this.viewer.scene.imageryLayers.remove(this.layer),e&&this.updateHeatmap();var i=new t.SingleTileImageryProvider({url:this.heatmap.getDataURL(),rectangle:(n=t.Rectangle).fromDegrees.apply(n,a(this.bbox))});this.layer=this.viewer.scene.imageryLayers.addImageryProvider(i)}},{key:"convertData",value:function(t){var e=t.x,n=t.y,i=t.value,a=s(this.gps2point([e,n]),2);return{x:a[0],y:a[1],value:i}}},{key:"updateMaxMin",value:function(t){void 0===this.max?this.max=t:this.max=Math.max(t,this.max),void 0===this.min?this.min=t:this.min=Math.min(t,this.min)}},{key:"gps2point",value:function(){var t=s(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],2),e=t[0],n=t[1],i=this.boxMeta,a=i.top,r=i.left,o=i.height,u=i.width,h=this.canvasConfig;return[parseInt((e-r)/u*h.width),parseInt((a-n)/o*h.height)]}},{key:"destory",value:function(){this.viewer.camera.moveEnd.removeEventListener(this.cameraMoveEnd),this.layer&&this.viewer.scene.imageryLayers.remove(this.layer),this.mountPoint&&this.mountPoint.remove()}}])&&h(n.prototype,r),u&&h(n,u),e}()}}])}}]);